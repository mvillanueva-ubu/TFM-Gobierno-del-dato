import{a as nr}from"./chunk-MTHWCHVS.js";import{A as ft,B as $o,C as Ho,D as Yo,E as Ko,F as Qo,G as Zo,H as Xo,I as Jo,J as er,K as tr,L as ir,N as _t,O as or,P as Z,Q as rr,T as ce,U as sr,V as ar,a as Tn,b as mt,g as Y,k as Oo,l as Ae,n as zo,o as Vo,q as Go,r as Uo,s as Bo,t as No,u as jo,v as Lo,w as qo,x as ht,y as ri,z as Wo}from"./chunk-7KRCRNBH.js";import{da as Mo,f as In,fa as ko,j as Mn,k as kn,l as An,m as Dn,n as Ht,o as Yt,oa as Ao,pa as Do,va as Fo,wa as Ro,za as Eo}from"./chunk-SZKED3CF.js";import{a as $}from"./chunk-J5U3LEM3.js";import{a as nt}from"./chunk-NQTS3INQ.js";import"./chunk-K6YRI473.js";import{a as cr}from"./chunk-DVCLZYWR.js";import"./chunk-ADIACNFY.js";import{A as Ce,B as Un,Ba as Zn,Ca as Xn,Da as Jn,Fa as Xt,H as Bn,Ha as Jt,J as Nn,Ja as ut,Ka as eo,La as Ue,Na as ei,Nb as wo,O as jn,Oa as ti,Pa as ii,Qb as bo,Sa as to,Sb as xo,Ta as ni,Tb as So,Va as io,Ya as no,_a as oo,a as Fn,aa as Ln,b as Rn,ba as qn,bb as ro,c as ct,ca as dt,cb as so,cc as oi,d as En,da as Wn,dc as Po,e as On,ea as Kt,ec as To,fa as $n,fb as ao,fc as Io,ga as pt,ha as Qt,ia as Hn,j as zn,ja as Yn,jb as co,k as Vn,ka as Kn,kb as lo,nb as po,ob as uo,pb as mo,qb as ho,ra as Qn,rb as fo,sb as _o,tb as go,ub as vo,vb as Co,wb as yo,x as lt,y as Gn,za as Zt}from"./chunk-4HCP6ZL4.js";import{a as pn,b as un,d as mn,f as hn}from"./chunk-2QASDU6S.js";import{a as bn}from"./chunk-VGSNCGSF.js";import"./chunk-D65FZ5MB.js";import{a as yn}from"./chunk-QGV3NOWX.js";import{a as at}from"./chunk-QXWNQE7J.js";import{a as Sn,b as Pn}from"./chunk-FVSELHXN.js";import{b as Wt,i as ae,j as $t,k as Ge}from"./chunk-ZSGRQJXI.js";import{a as xn}from"./chunk-GYCUYRIS.js";import{c as en}from"./chunk-KNM6FCYO.js";import{a as Cn}from"./chunk-SN6NWPRN.js";import{a as vn}from"./chunk-EHRR3YRI.js";import{a as wn}from"./chunk-ZLF5NQAA.js";import"./chunk-IOA5VAZG.js";import{a as ln,d as dn}from"./chunk-VO6YYVE4.js";import{a as ke}from"./chunk-HKBFZV3L.js";import{a as rn}from"./chunk-3DWBQ3AZ.js";import"./chunk-SUMTKICK.js";import"./chunk-GDM375JW.js";import{a as se}from"./chunk-RJ7V3MDH.js";import{c as it}from"./chunk-4P6JHET6.js";import{a as fn,b as gn}from"./chunk-H7U5NSY3.js";import"./chunk-47SKYL5X.js";import"./chunk-SZDZ4MRC.js";import"./chunk-YMU2MOOR.js";import{a as st}from"./chunk-SW63VHA3.js";import{B as _n,a as tn,b as nn,c as he,e as qt}from"./chunk-AJIV73VZ.js";import{a as Zi,b as Xi,c as Ji,d as rt}from"./chunk-TGSF3K3X.js";import{b as on}from"./chunk-AGWUCOZB.js";import"./chunk-3RK6DDJD.js";import"./chunk-FURLESHC.js";import{a as et}from"./chunk-QNZ3LUPX.js";import"./chunk-EAFEU3LN.js";import{b as an,c as cn}from"./chunk-HP7XJUQG.js";import{i as sn}from"./chunk-SAY7LY4C.js";import{e as Ie,g as Me}from"./chunk-5TWJAVHX.js";import{$a as v,$b as ze,Ab as Oe,Ba as wi,Bb as de,C as vi,Cb as pe,Da as bi,Dc as ki,E as Ne,Ee as jt,F as me,Ga as Ft,Gb as D,H as Mt,Hb as g,Ib as q,Jb as T,Jd as tt,Je as C,K as je,Ka as ee,Ke as Lt,La as s,Ld as Bt,Mb as Ot,Nb as zt,Oa as xi,Ob as Vt,Pa as b,Pd as Fi,Pe as ji,Sb as xe,Sc as Je,Ua as Rt,Ub as H,Uc as Ut,Ue as ot,V as kt,Va as k,Vb as re,Vc as G,Ve as Li,W as Q,Wa as be,Wb as Gt,X as J,Xd as Ri,Y as Ci,Yb as B,Yd as Ei,Ye as qi,Za as Re,Zb as N,Ze as Wi,ab as Et,ae as Oi,af as $i,ba as ye,bb as h,c as ue,ca as we,cb as He,cc as Ze,cf as Hi,da as At,db as O,ea as L,eb as z,fa as P,fe as zi,ff as Yi,ge as Te,gf as Ki,hb as w,hd as F,he as Vi,hf as Qi,i as It,ie as Nt,jb as Ye,jc as Si,kb as te,kc as Pi,kd as Ai,l as mi,lb as ie,le as Gi,ma as I,mb as a,mc as Ti,n as hi,na as M,nb as d,nc as Ii,ne as Ui,ob as f,oc as Mi,p as _e,pb as Ke,qa as Le,qb as Qe,qc as Xe,ra as Dt,rb as K,rc as Se,rd as Di,sb as U,sd as Ve,ta as yi,u as fi,ua as qe,ub as x,uc as Pe,ue as Bi,va as We,vb as m,ve as Ni,wb as ge,x as _i,xb as ne,xe as ve,y as gi,ya as $e,z as E,zb as Ee}from"./chunk-6VUBUCMU.js";import{a as Fe}from"./chunk-EQDQRRRY.js";var Ct=["*"],kr=["content"],Ar=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Dr=["mat-drawer","mat-drawer-content","*"];function Fr(t,p){if(t&1){let e=U();a(0,"div",1),x("click",function(){I(e);let n=m();return M(n._onBackdropClicked())}),d()}if(t&2){let e=m();O("mat-drawer-shown",e._isShowingBackdrop())}}function Rr(t,p){t&1&&(a(0,"mat-drawer-content"),ne(1,2),d())}var Er=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Or=["mat-sidenav","mat-sidenav-content","*"];function zr(t,p){if(t&1){let e=U();a(0,"div",1),x("click",function(){I(e);let n=m();return M(n._onBackdropClicked())}),d()}if(t&2){let e=m();O("mat-drawer-shown",e._isShowingBackdrop())}}function Vr(t,p){t&1&&(a(0,"mat-sidenav-content"),ne(1,2),d())}var Gr=".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}";var Ur=new At("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:Br}),ci=new At("MAT_DRAWER_CONTAINER");function Br(){return!1}var gt=(()=>{class t extends Te{_platform=P(tt);_changeDetectorRef=P(Ze);_container=P(ai);constructor(){let e=P($e),i=P(zi),n=P(We);super(e,i,n)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:e,end:i}=this._container;return e!=null&&e.mode!=="over"&&e.opened||i!=null&&i.mode!=="over"&&i.opened}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=k({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(i,n){i&2&&(He("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px"),O("mat-drawer-content-hidden",n._shouldBeHidden()))},features:[xe([{provide:Te,useExisting:t}]),Re],ngContentSelectors:Ct,decls:1,vars:0,template:function(i,n){i&1&&(ge(),ne(0))},encapsulation:2,changeDetection:0})}return t})(),si=(()=>{class t{_elementRef=P($e);_focusTrapFactory=P(Ei);_focusMonitor=P(Fi);_platform=P(tt);_ngZone=P(We);_renderer=P(xi);_interactivityChecker=P(Ri);_doc=P(Si,{optional:!0});_container=P(ci,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=ve(e)}_disableClose=!1;get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=ve(e)),this._autoFocus=e}_autoFocus;get opened(){return this._opened}set opened(e){this.toggle(ve(e))}_opened=!1;_openedVia;_animationStarted=new ue;_animationEnd=new ue;openedChange=new qe(!0);_openedStream=this.openedChange.pipe(E(e=>e),_e(()=>{}));openedStart=this._animationStarted.pipe(E(()=>this.opened),Mt(void 0));_closedStream=this.openedChange.pipe(E(e=>!e),_e(()=>{}));closedStart=this._animationStarted.pipe(E(()=>!this.opened),Mt(void 0));_destroyed=new ue;onPositionChanged=new qe;_content;_modeChanged=new ue;_injector=P(Dt);_changeDetectorRef=P(Ze);constructor(){this.openedChange.pipe(J(this._destroyed)).subscribe(e=>{e?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement;fi(e,"keydown").pipe(E(i=>i.keyCode===27&&!this.disableClose&&!Gi(i)),J(this._destroyed)).subscribe(i=>this._ngZone.run(()=>{this.close(),i.stopPropagation(),i.preventDefault()})),this._eventCleanups=[this._renderer.listen(e,"transitionrun",this._handleTransitionEvent),this._renderer.listen(e,"transitionend",this._handleTransitionEvent),this._renderer.listen(e,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this._opened)})}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{c(),u(),e.removeAttribute("tabindex")},c=this._renderer.listen(e,"blur",n),u=this._renderer.listen(e,"mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Ft(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);let n=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),n}_setOpen(e,i,n){return e===this._opened?Promise.resolve(e?"open":"close"):(this._opened=e,this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",e),!e&&i&&this._restoreFocus(n),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(c=>{this.openedChange.pipe(me(1)).subscribe(u=>c(u?"open":"close"))}))}_setIsAnimating(e){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",e)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let i=this._elementRef.nativeElement,n=i.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),n.insertBefore(this._anchor,i)),n.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}_handleTransitionEvent=e=>{let i=this._elementRef.nativeElement;e.target===i&&this._ngZone.run(()=>{e.type==="transitionrun"?this._animationStarted.next(e):(e.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(e))})};static \u0275fac=function(i){return new(i||t)};static \u0275cmp=k({type:t,selectors:[["mat-drawer"]],viewQuery:function(i,n){if(i&1&&Oe(kr,5),i&2){let c;de(c=pe())&&(n._content=c.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:11,hostBindings:function(i,n){i&2&&(Et("align",null),He("visibility",!n._container&&!n.opened?"hidden":null),O("mat-drawer-end",n.position==="end")("mat-drawer-over",n.mode==="over")("mat-drawer-push",n.mode==="push")("mat-drawer-side",n.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Ct,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,n){i&1&&(ge(),a(0,"div",1,0),ne(2),d())},dependencies:[Te],encapsulation:2,changeDetection:0})}return t})(),ai=(()=>{class t{_dir=P(Oi,{optional:!0});_element=P($e);_ngZone=P(We);_changeDetectorRef=P(Ze);_animationMode=P(bi,{optional:!0});_transitionsEnabled=!1;_allDrawers;_drawers=new wi;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=ve(e)}_autosize=P(Ur);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:ve(e)}_backdropOverride;backdropClick=new qe;_start;_end;_left;_right;_destroyed=new ue;_doCheckSubject=new ue;_contentMargins={left:null,right:null};_contentMarginChanges=new ue;get scrollable(){return this._userContent||this._content}_injector=P(Dt);constructor(){let e=P(tt),i=P(Vi);this._dir?.change.pipe(J(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),i.change().pipe(J(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._animationMode!=="NoopAnimations"&&e.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(kt(this._allDrawers),J(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(kt(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ne(10),J(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let n=this._left._getWidth();e+=n,i-=n}}if(this._right&&this._right.opened){if(this._right.mode=="side")i+=this._right._getWidth();else if(this._right.mode=="push"){let n=this._right._getWidth();i+=n,e-=n}}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(J(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(J(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e.onPositionChanged.pipe(J(this._drawers.changes)).subscribe(()=>{Ft({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(e){e._modeChanged.pipe(J(_i(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let i=this._element.nativeElement.classList,n="mat-drawer-container-has-open";e?i.add(n):i.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=k({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(i,n,c){if(i&1&&(Ee(c,gt,5),Ee(c,si,5)),i&2){let u;de(u=pe())&&(n._content=u.first),de(u=pe())&&(n._allDrawers=u)}},viewQuery:function(i,n){if(i&1&&Oe(gt,5),i&2){let c;de(c=pe())&&(n._userContent=c.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,n){i&2&&O("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[xe([{provide:ci,useExisting:t}])],ngContentSelectors:Dr,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,n){i&1&&(ge(Ar),v(0,Fr,1,2,"div",0),ne(1),ne(2,1),v(3,Rr,2,0,"mat-drawer-content")),i&2&&(w(n.hasBackdrop?0:-1),s(3),w(n._content?-1:3))},dependencies:[gt],styles:[".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}"],encapsulation:2,changeDetection:0})}return t})(),vt=(()=>{class t extends gt{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Le(t)))(n||t)}})();static \u0275cmp=k({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[xe([{provide:Te,useExisting:t}]),Re],ngContentSelectors:Ct,decls:1,vars:0,template:function(i,n){i&1&&(ge(),ne(0))},encapsulation:2,changeDetection:0})}return t})(),li=(()=>{class t extends si{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=ve(e)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Bt(e)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Bt(e)}_fixedBottomGap=0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Le(t)))(n||t)}})();static \u0275cmp=k({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:15,hostBindings:function(i,n){i&2&&(Et("align",null),He("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),O("mat-drawer-end",n.position==="end")("mat-drawer-over",n.mode==="over")("mat-drawer-push",n.mode==="push")("mat-drawer-side",n.mode==="side")("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[xe([{provide:si,useExisting:t}]),Re],ngContentSelectors:Ct,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(i,n){i&1&&(ge(),a(0,"div",1,0),ne(2),d())},dependencies:[Te],encapsulation:2,changeDetection:0})}return t})(),lr=(()=>{class t extends ai{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Le(t)))(n||t)}})();static \u0275cmp=k({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(i,n,c){if(i&1&&(Ee(c,vt,5),Ee(c,li,5)),i&2){let u;de(u=pe())&&(n._content=u.first),de(u=pe())&&(n._allDrawers=u)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(i,n){i&2&&O("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[xe([{provide:ci,useExisting:t},{provide:ai,useExisting:t}]),Re],ngContentSelectors:Or,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,n){i&1&&(ge(Er),v(0,zr,1,2,"div",0),ne(1),ne(2,1),v(3,Vr,2,0,"mat-sidenav-content")),i&2&&(w(n.hasBackdrop?0:-1),s(3),w(n._content?-1:3))},dependencies:[vt],styles:[Gr],encapsulation:2,changeDetection:0})}return t})(),dr=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=be({type:t});static \u0275inj=we({imports:[jt,Nt,Nt,jt]})}return t})();var De=(()=>{class t{constructor(e,i,n,c,u,y){this.store=e,this.canvasUtils=i,this.canvasView=n,this.dialog=c,this.client=u,this.copyService=y,this._actions={delete:{id:"delete",condition:o=>this.canvasUtils.areDeletable(o),action:o=>{if(o.size()===1){let r=o.datum();this.store.dispatch(Xt({request:[{id:r.id,type:r.type,uri:r.uri,entity:r}]}))}else{let r=[];o.each(l=>{r.push({id:l.id,type:l.type,uri:l.uri,entity:l})}),this.store.dispatch(Xt({request:r}))}}},refresh:{id:"refresh",condition:o=>this.canvasUtils.emptySelection(o),action:()=>{this.store.dispatch(Rn())}},leaveGroup:{id:"leaveGroup",condition:o=>{let r=this.dialog.openDialogs.length>0;return this.canvasUtils.isNotRootGroupAndEmptySelection(o)&&!r},action:()=>{this.store.dispatch(ct())}},copy:{id:"copy",condition:o=>this.canvasUtils.isCopyable(o),action:o=>{let r={};o.each(A=>{switch(A.type){case C.Processor:r.processors||(r.processors=[]),r.processors.push(A.id);break;case C.ProcessGroup:r.processGroups||(r.processGroups=[]),r.processGroups.push(A.id);break;case C.Connection:r.connections||(r.connections=[]),r.connections.push(A.id);break;case C.RemoteProcessGroup:r.remoteProcessGroups||(r.remoteProcessGroups=[]),r.remoteProcessGroups.push(A.id);break;case C.InputPort:r.inputPorts||(r.inputPorts=[]),r.inputPorts.push(A.id);break;case C.OutputPort:r.outputPorts||(r.outputPorts=[]),r.outputPorts.push(A.id);break;case C.Label:r.labels||(r.labels=[]),r.labels.push(A.id);break;case C.Funnel:r.funnels||(r.funnels=[]),r.funnels.push(A.id);break}});let l={copyRequestEntity:r,processGroupId:this.currentProcessGroupId()},_=null,R=new ClipboardItem({"text/plain":hi(this.copyService.copy(l)).then(A=>(_=A,new Blob([JSON.stringify(A,null,2)],{type:"text/plain"})))});navigator.clipboard.write([R]).then(()=>{_?this.store.dispatch(Xn({response:{copyResponse:_,processGroupId:l.processGroupId,pasteCount:0}})):this.store.dispatch(Ve({error:"Copy failed"}))}).catch(()=>{this.store.dispatch(Ve({error:"Copy failed"}))})}},selectAll:{id:"selectAll",condition:()=>!0,action:()=>{let o=this.select(Ge("g.component, g.connection"));this.store.dispatch(lt({request:{components:o}}))}},configure:{id:"configure",condition:o=>this.canvasUtils.isConfigurable(o),action:o=>{if(o.empty())this.store.dispatch(pt());else{let r=o.datum();this.store.dispatch(dt({request:{type:r.type,id:r.id}}))}}},manageAccess:{id:"manageAccess",condition:o=>this.canvasUtils.canManagePolicies(o),action:(o,r)=>{let l=["/access-policies"];if(r?.processGroupId)if(o.empty())this.store.dispatch(Kt({request:{resource:"process-groups",id:r.processGroupId,backNavigation:{route:["/process-groups",r.processGroupId],routeBoundary:l,context:"Process Group"}}}));else{let _=o.datum(),R=_.type,A="process-groups",S="Process Group";switch(R){case C.Processor:A="processors",S="Processor";break;case C.InputPort:A="input-ports",S="Input Port";break;case C.OutputPort:A="output-ports",S="Output Port";break;case C.Funnel:A="funnels",S="Funnel";break;case C.Label:A="labels",S="Label";break;case C.RemoteProcessGroup:A="remote-process-groups",S="Remote Process Group";break}this.store.dispatch(Kt({request:{resource:A,id:_.id,backNavigation:{route:["/process-groups",r.processGroupId,R,_.id],routeBoundary:l,context:S}}}))}}},start:{id:"start",condition:o=>o?this.canvasUtils.areAnyRunnable(o):!1,action:o=>{if(o.empty())this.store.dispatch(po());else{let r=[];this.canvasUtils.getStartable(o).each(_=>{r.push({id:_.id,uri:_.uri,type:_.type,revision:this.client.getRevision(_),errorStrategy:"snackbar"})}),this.store.dispatch(ao({request:{components:r}}))}}},stop:{id:"stop",condition:o=>this.canvasUtils.areAnyStoppable(o),action:o=>{if(o.empty())this.store.dispatch(uo());else{let r=[];this.canvasUtils.getStoppable(o).each(_=>{r.push({id:_.id,uri:_.uri,type:_.type,revision:this.client.getRevision(_),errorStrategy:"snackbar"})}),this.store.dispatch(co({request:{components:r}}))}}},enable:{id:"enable",condition:o=>this.canvasUtils.canEnable(o),action:o=>{if(o.empty())this.store.dispatch(no());else{let r=[];this.canvasUtils.filterEnable(o).each(_=>{r.push({id:_.id,uri:_.uri,type:_.type,revision:this.client.getRevision(_),errorStrategy:"snackbar"})}),this.store.dispatch(io({request:{components:r}}))}}},disable:{id:"disable",condition:o=>this.canvasUtils.canDisable(o),action:o=>{if(o.empty())this.store.dispatch(ro());else{let r=[];this.canvasUtils.filterDisable(o).each(_=>{r.push({id:_.id,uri:_.uri,type:_.type,revision:this.client.getRevision(_),errorStrategy:"snackbar"})}),this.store.dispatch(oo({request:{components:r}}))}}},group:{id:"group",condition:o=>this.canvasUtils.isDisconnected(o)&&this.canvasUtils.canModify(o),action:o=>{let r=[];o.each(function(l){r.push({id:l.id,type:l.type,uri:l.uri,entity:l})}),this.store.dispatch(jn({request:{moveComponents:r,position:this.canvasUtils.getOrigin(o)}}))}},changeColor:{id:"changeColor",condition:o=>this.canvasUtils.isColorable(o),action:o=>{let r=[];o.each(l=>{let _=null;l.component.style&&(_=l.component.style["background-color"]||null),r.push({id:l.id,uri:l.uri,type:l.type,color:_,style:l.component.style||null,revision:this.client.getRevision(l)})}),this.store.dispatch(Io({request:r}))}}},this.currentProcessGroupId=this.store.selectSignal(Y)}select(e){let i=[];return e&&e.each(n=>{i.push({id:n.id,componentType:n.type})}),i}getAction(e){return this._actions&&this._actions[e]?this._actions[e]:null}getActionFunction(e){return this._actions&&this._actions[e]?this._actions[e].action:()=>{}}getConditionFunction(e){return this._actions&&this._actions[e]?this._actions[e].condition:()=>!1}static{this.\u0275fac=function(i){return new(i||t)(L(F),L(Z),L(ce),L(it),L(se),L(sr))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ur=(()=>{class t{constructor(e,i,n,c,u,y){this.store=e,this.canvasUtils=i,this.client=n,this.canvasView=c,this.canvasActionsService=u,this.draggableBehavior=y,this.updatePositionRequestId=0,this.VERSION_MENU={id:"version",menuItems:[{condition:o=>this.canvasUtils.supportsStartFlowVersioning(o),clazz:"fa fa-upload",text:"Start Version Control",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(vo({request:{processGroupId:r}}))}},{isSeparator:!0},{condition:o=>this.canvasUtils.supportsCommitFlowVersion(o),clazz:"fa fa-upload",text:"Commit Local Changes",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(Co({request:{processGroupId:r}}))}},{condition:o=>this.canvasUtils.supportsForceCommitFlowVersion(o),clazz:"fa fa-upload",text:"Commit Local Changes",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(yo({request:{processGroupId:r,forceCommit:!0}}))}},{condition:o=>this.canvasUtils.hasLocalChanges(o),clazz:"fa",text:"Show Local Changes",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id;let l={processGroupId:r};this.store.dispatch(xo({request:l}))}},{condition:o=>this.canvasUtils.hasLocalChanges(o),clazz:"fa fa-undo",text:"Revert Local Changes",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id;let l={processGroupId:r};this.store.dispatch(So({request:l}))}},{condition:o=>this.canvasUtils.supportsChangeFlowVersion(o),clazz:"fa",text:"Change Version",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id;let l={processGroupId:r};this.store.dispatch(go({request:l}))}},{isSeparator:!0},{condition:o=>this.canvasUtils.supportsStopFlowVersioning(o),clazz:"fa",text:"Stop Version Control",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id;let l={processGroupId:r};this.store.dispatch(wo({request:l}))}}]},this.PROVENANCE_REPLAY={id:"provenance-replay",menuItems:[{condition:o=>this.canvasUtils.canReplayComponentProvenance(o),clazz:"fa",text:"All Nodes",action:o=>{let r=o.datum();this.store.dispatch(ni({request:{componentId:r.id,nodes:"ALL"}}))}},{condition:o=>this.canvasUtils.canReplayComponentProvenance(o),clazz:"fa",text:"Primary Node",action:o=>{let r=o.datum();this.store.dispatch(ni({request:{componentId:r.id,nodes:"PRIMARY"}}))}}]},this.UPSTREAM_DOWNSTREAM={id:"upstream-downstream",menuItems:[{condition:o=>!1,clazz:"icon",text:"Upstream",action:()=>{}},{condition:o=>!1,clazz:"icon",text:"Downstream",action:()=>{}}]},this.ALIGN={id:"align",menuItems:[{condition:o=>this.canvasUtils.canAlign(o),clazz:"fa fa-align-center fa-rotate-90",text:"Horizontally",action:o=>{let r=new Map,l=new Map,_=0,R=0;o.each(S=>{if(S.type!==C.Connection){(_===0||S.position.y<_)&&(_=S.position.y);let W=S.position.y+S.dimensions.height;(R===0||W>R)&&(R=W)}});let A=(_+R)/2;o.each(S=>{if(S.type!==C.Connection){let W={x:0,y:A-(S.position.y+S.dimensions.height/2)};W.y!==0&&(this.canvasUtils.getComponentConnections(S.id).forEach(V=>{let le=ae("#id-"+V.id);if(!l.has(V.id)&&this.canvasUtils.getConnectionSourceComponentId(V)===this.canvasUtils.getConnectionDestinationComponentId(V)){let X=this.draggableBehavior.updateConnectionPosition(le.datum(),W);X!==null&&l.set(V.id,X)}else if(!l.has(V.id)&&le.classed("selected")&&this.canvasUtils.canModify(le)&&(this.canvasUtils.getConnectionSourceComponentId(V)===S.id||!this.canvasUtils.isSourceSelected(V,o))){let X=this.draggableBehavior.updateConnectionPosition(le.datum(),W);X!==null&&l.set(V.id,X)}}),r.set(S.id,this.draggableBehavior.updateComponentPosition(S,W)))}}),(l.size>0||r.size>0)&&this.store.dispatch(Zt({request:{requestId:this.updatePositionRequestId++,componentUpdates:Array.from(r.values()),connectionUpdates:Array.from(l.values())}}))}},{condition:o=>this.canvasUtils.canAlign(o),clazz:"fa fa-align-center",text:"Vertically",action:o=>{let r=new Map,l=new Map,_=0,R=0;o.each(S=>{if(S.type!==C.Connection){(_===0||S.position.x<_)&&(_=S.position.x);let W=S.position.x+S.dimensions.width;(R===0||W>R)&&(R=W)}});let A=(_+R)/2;o.each(S=>{if(S.type!==C.Connection){let W={x:A-(S.position.x+S.dimensions.width/2),y:0};W.x!==0&&(this.canvasUtils.getComponentConnections(S.id).forEach(V=>{let le=ae("#id-"+V.id);if(!l.has(V.id)&&this.canvasUtils.getConnectionSourceComponentId(V)===this.canvasUtils.getConnectionDestinationComponentId(V)){let X=this.draggableBehavior.updateConnectionPosition(le.datum(),W);X!==null&&l.set(V.id,X)}else if(!l.has(V.id)&&le.classed("selected")&&this.canvasUtils.canModify(le)&&(this.canvasUtils.getConnectionSourceComponentId(V)===S.id||!this.canvasUtils.isSourceSelected(V,o))){let X=this.draggableBehavior.updateConnectionPosition(le.datum(),W);X!==null&&l.set(V.id,X)}}),r.set(S.id,this.draggableBehavior.updateComponentPosition(S,W)))}}),(l.size>0||r.size>0)&&this.store.dispatch(Zt({request:{requestId:this.updatePositionRequestId++,componentUpdates:Array.from(r.values()),connectionUpdates:Array.from(l.values())}}))}}]},this.DOWNLOAD={id:"download",menuItems:[{condition:o=>this.canvasUtils.supportsDownloadFlow(o),clazz:"fa",text:"Without External Services",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(oi({request:{processGroupId:r,includeReferencedServices:!1}}))}},{condition:o=>this.canvasUtils.supportsDownloadFlow(o),clazz:"fa",text:"With External Services",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(oi({request:{processGroupId:r,includeReferencedServices:!0}}))}}]},this.ROOT_MENU={id:"root",menuItems:[{condition:this.canvasActionsService.getConditionFunction("refresh"),clazz:"fa fa-refresh",text:"Refresh",action:this.canvasActionsService.getActionFunction("refresh"),shortcut:{control:!0,code:"R"}},{condition:this.canvasActionsService.getConditionFunction("leaveGroup"),clazz:"fa fa-level-up",text:"Leave Group",action:this.canvasActionsService.getActionFunction("leaveGroup"),shortcut:{code:"ESC"}},{isSeparator:!0},{condition:this.canvasActionsService.getConditionFunction("configure"),clazz:"fa fa-gear",text:"Configure",action:this.canvasActionsService.getActionFunction("configure")},{condition:o=>this.canvasUtils.hasDetails(o),clazz:"fa fa-gear",text:"View Configuration",action:o=>{if(o.empty())this.store.dispatch(pt());else{let r=o.datum();this.store.dispatch(dt({request:{type:r.type,id:r.id}}))}}},{condition:o=>this.canvasUtils.canRead(o)&&this.canvasUtils.isProcessor(o)?!!o.datum().component.config.customUiUrl:!1,clazz:"fa fa-cogs",text:"Advanced",action:o=>{let r=o.datum();this.store.dispatch(Wn({id:r.id}))}},{condition:o=>this.canvasUtils.isProcessGroup(o)||o.empty(),clazz:"fa fa-list",text:"Controller Services",action:o=>{if(o.empty())this.store.dispatch(Qt({request:{id:this.canvasUtils.getProcessGroupId()}}));else{let r=o.datum();this.store.dispatch(Qt({request:{id:r.id}}))}}},{condition:o=>this.canvasUtils.hasParameterContext(o),clazz:"fa fa-list-alt primary-color",text:"Parameters",action:o=>{let r,l;if(o.empty())r=this.canvasUtils.getParameterContextId(),l={route:["/process-groups",this.canvasUtils.getProcessGroupId()],routeBoundary:["/parameter-contexts"],context:"Process Group"};else{let _=o.datum();r=_.parameterContext.id,l={route:["/process-groups",this.canvasUtils.getProcessGroupId(),C.ProcessGroup,_.id],routeBoundary:["/parameter-contexts"],context:"Process Group"}}r&&this.store.dispatch(Yn({request:{id:r,backNavigation:l}}))}},{isSeparator:!0},{condition:o=>this.canvasUtils.supportsFlowVersioning(o),text:"Version",subMenuId:this.VERSION_MENU.id},{isSeparator:!0},{condition:o=>this.canvasUtils.isProcessGroup(o),clazz:"fa fa-sign-in",text:"Enter Group",action:o=>{let r=o.datum();this.store.dispatch(En({request:{id:r.id}}))}},{isSeparator:!0},{condition:o=>{let r=this.canvasUtils.getStartable(o),l=!r.empty()&&r.filter(_=>_.type===C.RemoteProcessGroup).size()===r.size();return this.canvasActionsService.getConditionFunction("start")(o)&&!l},clazz:"fa fa-play",text:"Start",action:this.canvasActionsService.getActionFunction("start")},{condition:o=>{let r=this.canvasUtils.getStoppable(o),l=!r.empty()&&r.filter(_=>_.type===C.RemoteProcessGroup).size()===r.size();return this.canvasActionsService.getConditionFunction("stop")(o)&&!l},clazz:"fa fa-stop",text:"Stop",action:this.canvasActionsService.getActionFunction("stop")},{condition:o=>o.size()!==1?!1:this.canvasUtils.areRunnable(o)&&this.canvasUtils.isProcessor(o),clazz:"fa fa-caret-right",text:"Run Once",action:o=>{let r=o.datum();this.store.dispatch(so({request:{uri:r.uri,revision:this.client.getRevision(r)}}))}},{condition:o=>this.canvasUtils.canTerminate(o),clazz:"fa fa-hourglass-end",text:"Terminate",action:o=>{let r=o.datum();this.store.dispatch(lo({request:{id:r.id,uri:r.uri}}))}},{condition:this.canvasActionsService.getConditionFunction("enable"),clazz:"fa fa-flash",text:"Enable",action:this.canvasActionsService.getActionFunction("enable")},{condition:this.canvasActionsService.getConditionFunction("disable"),clazz:"icon icon-enable-false",text:"Disable",action:this.canvasActionsService.getActionFunction("disable")},{condition:o=>this.canvasUtils.canAllStartTransmitting(o),clazz:"fa fa-bullseye",text:"Enable Transmission",action:this.canvasActionsService.getActionFunction("start")},{condition:o=>this.canvasUtils.canAllStopTransmitting(o),clazz:"icon icon-transmit-false",text:"Disable Transmission",action:this.canvasActionsService.getActionFunction("stop")},{isSeparator:!0},{condition:o=>this.canvasUtils.isProcessGroup(o)||this.canvasUtils.emptySelection(o),clazz:"fa fa-flash",text:"Enable All Controller Services",action:o=>{if(o.empty())this.store.dispatch(mo());else{let r=o.datum();this.store.dispatch(fo({id:r.id}))}}},{condition:o=>this.canvasUtils.isProcessGroup(o)||this.canvasUtils.emptySelection(o),clazz:"icon icon-enable-false",text:"Disable All Controller Services",action:o=>{if(o.empty())this.store.dispatch(ho());else{let r=o.datum();this.store.dispatch(_o({id:r.id}))}}},{isSeparator:!0},{condition:o=>this.canvasUtils.canAccessComponentProvenance(o),clazz:"icon icon-provenance",text:"View Data Provenance",action:o=>{let r=o.datum();this.store.dispatch(to({id:r.id}))}},{clazz:"fa fa-repeat",text:"Replay Last Event",subMenuId:this.PROVENANCE_REPLAY.id},{isSeparator:!0},{condition:o=>this.canvasUtils.canViewStatusHistory(o),clazz:"fa fa-area-chart",text:"View Status History",action:o=>{if(this.canvasUtils.emptySelection(o))this.store.dispatch(qn());else{let r=o.datum();this.store.dispatch(Ln({request:{type:r.type,id:r.id}}))}}},{condition:o=>this.canvasUtils.isStatefulProcessor(o),clazz:"fa fa-tasks",text:"View State",action:o=>{let r=o.datum();this.store.dispatch(yn({request:{componentName:r.component.name,componentUri:r.uri,canClear:this.canvasUtils.isConfigurable(o)}}))}},{condition:o=>this.canvasUtils.isConnection(o),clazz:"fa fa-list",text:"List Queue",action:o=>{let r=o.datum();this.store.dispatch(Hn({request:{connectionId:r.id}}))}},{condition:o=>this.canvasUtils.canRead(o)&&o.size()===1&&this.canvasUtils.isProcessor(o),clazz:"fa fa-book",text:"View Documentation",action:o=>{let r=this.canvasUtils.getProcessGroupId(),l=o.datum();this.store.dispatch(at({request:{backNavigation:{route:["/process-groups",r,C.Processor,l.id],routeBoundary:["/documentation"],context:"Processor"},parameters:{componentType:C.Processor,type:l.component.type,group:l.component.bundle.group,artifact:l.component.bundle.artifact,version:l.component.bundle.version}}}))}},{clazz:"icon icon-connect",text:"View Connections",subMenuId:this.UPSTREAM_DOWNSTREAM.id},{isSeparator:!0},{condition:o=>this.canvasUtils.canRead(o)&&this.canvasUtils.isRemoteProcessGroup(o),clazz:"fa fa-refresh",text:"Refresh Remote",action:o=>{let r=o.datum(),l=r.id,_=r.component.flowRefreshed,R={id:l,refreshTimestamp:_};this.store.dispatch(Nn({request:R}))}},{isSeparator:!0},{condition:o=>this.canvasUtils.canRead(o)&&this.canvasUtils.isRemoteProcessGroup(o),clazz:"fa fa-cloud",text:"Manage Remote Ports",action:o=>{let r=o.datum();this.store.dispatch(Qn({request:{id:r.id}}))}},{condition:o=>this.canvasUtils.supportsManagedAuthorizer()&&this.canvasUtils.canManagePolicies(o),clazz:"fa fa-key",text:"Manage Access Policies",action:o=>{this.canvasActionsService.getActionFunction("manageAccess")(o,{processGroupId:this.canvasUtils.getProcessGroupId()})}},{condition:o=>this.canvasUtils.canChangeProcessorVersion(o),clazz:"fa fa-exchange",text:"Change Version",action:o=>{let r=o.datum();this.store.dispatch(To({request:{id:r.component.id,uri:r.uri,revision:r.revision,type:r.component.type,bundle:r.component.bundle}}))}},{isSeparator:!0},{condition:o=>this.canvasUtils.isConnection(o),clazz:"fa fa-long-arrow-left",text:"Go To Source",action:o=>{let r=o.datum(),l=this.canvasUtils.getConnectableTypeForSource(C.RemoteProcessGroup);if(r.sourceType==l)this.store.dispatch(Ue({request:{id:r.sourceGroupId,type:C.RemoteProcessGroup}}));else{let _=this.canvasUtils.getComponentTypeForSource(r.sourceType);_&&this.store.dispatch(Ue({request:{id:r.sourceId,processGroupId:r.sourceGroupId,type:_}}))}}},{condition:o=>this.canvasUtils.isConnection(o),clazz:"fa fa-long-arrow-right",text:"Go To Destination",action:o=>{let r=o.datum(),l=this.canvasUtils.getConnectableTypeForDestination(C.RemoteProcessGroup);if(r.destinationType==l)this.store.dispatch(Ue({request:{id:r.destinationGroupId,type:C.RemoteProcessGroup}}));else{let _=this.canvasUtils.getComponentTypeForDestination(r.destinationType);_&&this.store.dispatch(Ue({request:{id:r.destinationId,processGroupId:r.destinationGroupId,type:_}}))}}},{isSeparator:!0},{clazz:"fa",text:"Align",subMenuId:this.ALIGN.id},{condition:o=>this.canvasUtils.canMoveToFront(o),clazz:"fa fa-clone",text:"Bring To Front",action:o=>{let r=o.datum();this.store.dispatch(Po({request:{componentType:r.type,id:r.id,uri:r.uri,revision:this.client.getRevision(r),zIndex:r.zIndex}}))}},{condition:o=>!o.empty(),clazz:"fa fa-crosshairs",text:"Center In View",action:()=>{this.store.dispatch(Ce({request:{allowTransition:!0}}))}},{condition:this.canvasActionsService.getConditionFunction("changeColor"),clazz:"fa fa-paint-brush",text:"Change Color",action:this.canvasActionsService.getActionFunction("changeColor")},{condition:o=>this.canvasUtils.canRead(o)&&this.canvasUtils.isRemoteProcessGroup(o),clazz:"fa fa-external-link",text:"Go To",action:o=>{let l=o.datum().component.targetUri;this.store.dispatch(Bn({request:{uri:l}}))}},{isSeparator:!0},{condition:o=>o.empty()||!this.canvasUtils.canModify(o)?!1:this.canvasUtils.isNotRootGroup()&&this.canvasUtils.canModifyParentGroup()&&this.canvasUtils.isDisconnected(o),clazz:"fa fa-arrows",text:"Move To Parent Group",action:o=>{let r=[];o.each(function(l){r.push({id:l.id,type:l.type,uri:l.uri,entity:l})}),this.store.dispatch(Zn({request:{components:r,groupId:this.canvasUtils.getParentProcessGroupId()}}))}},{condition:this.canvasActionsService.getConditionFunction("group"),clazz:"fa icon-group",text:"Group",action:this.canvasActionsService.getActionFunction("group")},{isSeparator:!0},{clazz:"fa",text:"Download Flow Definition",subMenuId:this.DOWNLOAD.id},{isSeparator:!0},{condition:this.canvasActionsService.getConditionFunction("copy"),clazz:"fa fa-copy",text:"Copy",action:this.canvasActionsService.getActionFunction("copy"),shortcut:{control:!0,code:"C"}},{condition:()=>this.canvasActionsService.getConditionFunction("paste")(ae(null)),clazz:"fa fa-paste",text:"Paste",action:(o,r)=>{if(r){let l=this.canvasView.getCanvasPosition({x:r.pageX,y:r.pageY});l&&this.canvasActionsService.getActionFunction("paste")(o,{pasteLocation:l})}},shortcut:{control:!0,code:"V"}},{isSeparator:!0},{condition:o=>this.canvasUtils.isConnection(o),clazz:"fa fa-minus-circle",text:"Empty Queue",action:o=>{let r=o.datum();this.store.dispatch(Mo({request:{connectionId:r.id}}))}},{condition:o=>o.empty()||this.canvasUtils.isProcessGroup(o),clazz:"fa fa-minus-circle",text:"Empty All Queues",action:o=>{let r;o.empty()?r=this.canvasUtils.getProcessGroupId():r=o.datum().id,this.store.dispatch(ko({request:{processGroupId:r}}))}},{condition:this.canvasActionsService.getConditionFunction("delete"),clazz:"fa fa-trash",text:"Delete",action:this.canvasActionsService.getActionFunction("delete"),shortcut:{code:"\u232B"}}]},this.allMenus=new Map,this.allMenus.set(this.ROOT_MENU.id,this.ROOT_MENU),this.allMenus.set(this.PROVENANCE_REPLAY.id,this.PROVENANCE_REPLAY),this.allMenus.set(this.VERSION_MENU.id,this.VERSION_MENU),this.allMenus.set(this.UPSTREAM_DOWNSTREAM.id,this.UPSTREAM_DOWNSTREAM),this.allMenus.set(this.ALIGN.id,this.ALIGN),this.allMenus.set(this.DOWNLOAD.id,this.DOWNLOAD)}getMenu(e){return this.allMenus.get(e)}filterMenuItem(e){let i=this.canvasUtils.getSelection();return e.condition?e.condition(i):!0}menuItemClicked(e,i){if(e.action){let n=this.canvasUtils.getSelection();e.action(n,i)}}static{this.\u0275fac=function(i){return new(i||t)(L(F),L(Z),L(se),L(ce),L(De),L(rr))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var mr=(()=>{class t{constructor(e){this.birdseyeView=e}ngOnInit(){let e=document.getElementById("birdseye");this.birdseyeView.init(e),this.birdseyeView.refresh()}ngOnDestroy(){this.birdseyeView.destroy()}static{this.\u0275fac=function(i){return new(i||t)(b(ar))}}static{this.\u0275cmp=k({type:t,selectors:[["birdseye"]],decls:1,vars:0,consts:[["id","birdseye",1,"border"]],template:function(i,n){i&1&&f(0,"div",0)},styles:["[_nghost-%COMP%]     #birdseye{width:266px;height:150px;overflow:hidden;box-sizing:content-box}[_nghost-%COMP%]     #birdseye canvas, [_nghost-%COMP%]     #birdseye svg{position:absolute;overflow:hidden}"]})}}return t})();function $r(t,p){t&1&&(a(0,"div",4),g(1,"Navigation"),d())}function Hr(t,p){if(t&1&&f(0,"div",7),t&2){let e=m();O("fa-minus-square-o",!e.navigationCollapsed)("fa-plus-square-o",e.navigationCollapsed)}}function Yr(t,p){if(t&1){let e=U();a(0,"button",10),x("click",function(){I(e);let n=m(2);return M(n.leaveProcessGroup())}),f(1,"i",17),d()}}function Kr(t,p){if(t&1){let e=U();a(0,"div",6)(1,"div",8)(2,"div",9)(3,"button",10),x("click",function(){I(e);let n=m();return M(n.zoomIn())}),f(4,"i",11),d(),a(5,"button",12),x("click",function(){I(e);let n=m();return M(n.zoomOut())}),f(6,"i",13),d(),a(7,"button",10),x("click",function(){I(e);let n=m();return M(n.zoomFit())}),f(8,"i",14),d(),a(9,"button",10),x("click",function(){I(e);let n=m();return M(n.zoomActual())}),f(10,"i",15),d()(),v(11,Yr,2,0,"button",16),d(),f(12,"birdseye"),d()}if(t&2){let e=m();s(11),w(e.isNotRootGroup()?11:-1)}}var hr=(()=>{class t{static{this.CONTROL_VISIBILITY_KEY="graph-control-visibility"}static{this.NAVIGATION_KEY="navigation-control"}constructor(e,i,n){this.store=e,this.canvasUtils=i,this.storage=n,this.navigationCollapsed=$.navigationCollapsed;try{let c=this.storage.getItem(t.CONTROL_VISIBILITY_KEY);c&&(this.navigationCollapsed=c[t.NAVIGATION_KEY]===!1,this.store.dispatch(ei({navigationCollapsed:this.navigationCollapsed})))}catch{}}toggleCollapsed(){this.navigationCollapsed=!this.navigationCollapsed,this.store.dispatch(ei({navigationCollapsed:this.navigationCollapsed}));let e=this.storage.getItem(t.CONTROL_VISIBILITY_KEY);e==null&&(e={}),e[t.NAVIGATION_KEY]=!this.navigationCollapsed,this.storage.setItem(t.CONTROL_VISIBILITY_KEY,e)}zoomIn(){this.store.dispatch(Mn())}zoomOut(){this.store.dispatch(kn())}zoomFit(){this.store.dispatch(An({transition:!0}))}zoomActual(){this.store.dispatch(Dn())}isNotRootGroup(){return this.canvasUtils.isNotRootGroup()}leaveProcessGroup(){this.store.dispatch(ct())}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(Z),b(he))}}static{this.\u0275cmp=k({type:t,selectors:[["navigation-control"]],inputs:{shouldDockWhenCollapsed:"shouldDockWhenCollapsed"},decls:7,vars:3,consts:[[1,"navigation-control","border","flex","flex-col","gap-y-2"],[1,"navigation-control-header","pointer","flex","justify-between",3,"click"],[1,"flex","items-center"],[1,"fa","fa-compass","primary-color"],[1,"text-sm"],[1,"fa","navigation-control-expansion","primary-color",3,"fa-minus-square-o","fa-plus-square-o"],[1,"w-72","px-2.5","pb-2.5","flex","flex-col","gap-y-2"],[1,"fa","navigation-control-expansion","primary-color"],[1,"flex","justify-between"],[1,"flex","gap-x-1"],["mat-icon-button","","type","button",1,"primary-icon-button",3,"click"],[1,"fa","fa-search-plus"],["mat-icon-button","","type","button",1,"primary-icon-button","mr-2",3,"click"],[1,"fa","fa-search-minus"],[1,"ml-1","icon","icon-zoom-fit"],[1,"ml-1","icon","icon-zoom-actual"],["mat-icon-button","","type","button",1,"primary-icon-button"],[1,"fa","fa-level-up"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),x("click",function(){return n.toggleCollapsed()}),a(2,"div",2),f(3,"div",3),v(4,$r,2,0,"div",4),d(),v(5,Hr,1,4,"div",5),d(),v(6,Kr,13,1,"div",6),d()),i&2&&(s(4),w(!n.navigationCollapsed||!n.shouldDockWhenCollapsed?4:-1),s(),w(!n.navigationCollapsed||!n.shouldDockWhenCollapsed?5:-1),s(),w(n.navigationCollapsed?-1:6))},dependencies:[mr,Me,Ie],styles:["div.navigation-control[_ngcontent-%COMP%]{margin-bottom:2px;--mdc-icon-button-state-layer-size: 34px;--mdc-icon-button-icon-size: 17px}div.navigation-control[_ngcontent-%COMP%]   .navigation-control-header[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{height:34px;width:34px;line-height:34px;text-align:center}"]})}}return t})();function Qr(t,p){t&1&&(a(0,"div",4),g(1,"Operation"),d())}function Zr(t,p){if(t&1&&f(0,"div",6),t&2){let e=m();O("fa-minus-square-o",!e.operationCollapsed)("fa-plus-square-o",e.operationCollapsed)}}function Xr(t,p){if(t&1){let e=U();a(0,"button",15),x("click",function(){I(e);let n=m(),c=m(2);return M(c.manageAccess(n))}),f(1,"i",23),d()}if(t&2){let e=m(),i=m(2);h("disabled",!i.canManageAccess(e))}}function Jr(t,p){if(t&1){let e=U();a(0,"div",7),f(1,"component-context",8),a(2,"div",9)(3,"div",10)(4,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.configure(n))}),f(5,"i",12),d(),v(6,Xr,2,1,"button",13),a(7,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.enable(n))}),f(8,"i",14),d(),a(9,"button",15),x("click",function(){let n=I(e),c=m(2);return M(c.disable(n))}),f(10,"i",16),d(),a(11,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.start(n))}),f(12,"i",17),d(),a(13,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.stop(n))}),f(14,"i",18),d()(),a(15,"div",10)(16,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.copy(n))}),f(17,"i",19),d(),a(18,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.group(n))}),f(19,"i",20),d(),a(20,"button",15),x("click",function(){let n=I(e),c=m(2);return M(c.color(n))}),f(21,"i",21),d(),a(22,"button",11),x("click",function(){let n=I(e),c=m(2);return M(c.delete(n))}),f(23,"i",22),d()()()()}if(t&2){let e=p,i=m(2);s(),h("type",i.getContextType(e))("name",i.getContextName(e))("id",i.getContextId(e)),s(3),h("disabled",!i.canConfigure(e)),s(2),w(i.supportsManagedAuthorizer()?6:-1),s(),h("disabled",!i.canEnable(e)),s(2),h("disabled",!i.canDisable(e)),s(2),h("disabled",!i.canStart(e)),s(2),h("disabled",!i.canStop(e)),s(3),h("disabled",!i.canCopy(e)),s(2),h("disabled",!i.canGroup(e)),s(2),h("disabled",!i.canColor(e)),s(2),h("disabled",!i.canDelete(e))}}function es(t,p){if(t&1&&v(0,Jr,24,13,"div",7),t&2){let e,i=m();w((e=i.canvasUtils.getSelection())?0:-1,e)}}var fr=(()=>{class t{static{this.CONTROL_VISIBILITY_KEY="graph-control-visibility"}static{this.OPERATION_KEY="operation-control"}constructor(e,i,n,c,u,y){this.store=e,this.canvasUtils=i,this.canvasView=n,this.client=c,this.storage=u,this.canvasActionsService=y,this.operationCollapsed=$.operationCollapsed;try{let o=this.storage.getItem(t.CONTROL_VISIBILITY_KEY);o&&(this.operationCollapsed=!o[t.OPERATION_KEY],this.store.dispatch(ti({operationCollapsed:this.operationCollapsed})))}catch{}}toggleCollapsed(){this.operationCollapsed=!this.operationCollapsed,this.store.dispatch(ti({operationCollapsed:this.operationCollapsed}));let e=this.storage.getItem(t.CONTROL_VISIBILITY_KEY);e==null&&(e={}),e[t.OPERATION_KEY]=!this.operationCollapsed,this.storage.setItem(t.CONTROL_VISIBILITY_KEY,e)}getContextIcon(e){return e.size()===0?this.breadcrumbEntity.parentBreadcrumb==null?"icon-drop":"icon-group":e.size()>1?"icon-drop":this.canvasUtils.isProcessor(e)?"icon-processor":this.canvasUtils.isInputPort(e)?"icon-port-in":this.canvasUtils.isOutputPort(e)?"icon-port-out":this.canvasUtils.isFunnel(e)?"icon-funnel":this.canvasUtils.isLabel(e)?"icon-label":this.canvasUtils.isProcessGroup(e)?"icon-group":this.canvasUtils.isRemoteProcessGroup(e)?"icon-group-remote":"icon-connect"}getContextName(e){if(e.size()===0)return this.breadcrumbEntity.permissions.canRead?this.breadcrumbEntity.breadcrumb.name:this.breadcrumbEntity.id;if(e.size()>1)return"Multiple components selected";let i=e.datum();return i.permissions.canRead?this.canvasUtils.isLabel(e)?"label":this.canvasUtils.isConnection(e)?"connection":i.component.name:i.id}getContextType(e){return e.size()===0?C.ProcessGroup:e.size()>1?null:this.canvasUtils.isProcessor(e)?C.Processor:this.canvasUtils.isInputPort(e)?C.InputPort:this.canvasUtils.isOutputPort(e)?C.OutputPort:this.canvasUtils.isFunnel(e)?C.Funnel:this.canvasUtils.isLabel(e)?C.Label:this.canvasUtils.isProcessGroup(e)?C.ProcessGroup:this.canvasUtils.isRemoteProcessGroup(e)?C.RemoteProcessGroup:C.Connection}getContextId(e){return e.size()===0?this.breadcrumbEntity.id:e.size()>1?"":e.datum().id}canConfigure(e){return this.canvasActionsService.getConditionFunction("configure")(e)}configure(e){this.canvasActionsService.getActionFunction("configure")(e)}supportsManagedAuthorizer(){return this.canvasUtils.supportsManagedAuthorizer()}canManageAccess(e){return this.canvasActionsService.getConditionFunction("manageAccess")(e)}manageAccess(e){this.canvasActionsService.getActionFunction("manageAccess")(e,{processGroupId:this.breadcrumbEntity.id})}canEnable(e){return this.canvasActionsService.getConditionFunction("enable")(e)}enable(e){this.canvasActionsService.getActionFunction("enable")(e)}canDisable(e){return this.canvasActionsService.getConditionFunction("disable")(e)}disable(e){this.canvasActionsService.getActionFunction("disable")(e)}canStart(e){return this.canvasUtils.areAnyRunnable(e)}start(e){this.canvasActionsService.getActionFunction("start")(e)}canStop(e){return this.canvasActionsService.getConditionFunction("stop")(e)}stop(e){this.canvasActionsService.getActionFunction("stop")(e)}canCopy(e){return this.canvasActionsService.getConditionFunction("copy")(e)}copy(e){this.canvasActionsService.getActionFunction("copy")(e)}canGroup(e){return this.canvasActionsService.getConditionFunction("group")(e)}group(e){this.canvasActionsService.getActionFunction("group")(e)}canColor(e){return this.canvasActionsService.getConditionFunction("changeColor")(e)}color(e){this.canvasActionsService.getActionFunction("changeColor")(e)}canDelete(e){return this.canvasActionsService.getConditionFunction("delete")(e)}delete(e){this.canvasActionsService.getActionFunction("delete")(e)}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(Z),b(ce),b(se),b(he),b(De))}}static{this.\u0275cmp=k({type:t,selectors:[["operation-control"]],inputs:{shouldDockWhenCollapsed:"shouldDockWhenCollapsed",breadcrumbEntity:"breadcrumbEntity"},decls:7,vars:3,consts:[[1,"operation-control","border","flex","flex-col","gap-y-2"],[1,"operation-control-header","pointer","flex","justify-between",3,"click"],[1,"flex","items-center"],[1,"fa","fa-hand-o-up","primary-color"],[1,"text-sm"],[1,"fa","operation-control-expansion","primary-color",3,"fa-minus-square-o","fa-plus-square-o"],[1,"fa","operation-control-expansion","primary-color"],[1,"w-72","px-2.5","pb-2.5","flex","flex-col","gap-y-2"],[3,"type","name","id"],[1,"flex","flex-col","gap-y-1"],[1,"flex","gap-x-1"],["mat-icon-button","","type","button",1,"primary-icon-button",3,"click","disabled"],[1,"fa","fa-cog"],["mat-icon-button","","type","button",1,"primary-icon-button","mr-2",3,"disabled"],[1,"fa","fa-flash"],["mat-icon-button","","type","button",1,"primary-icon-button","mr-2",3,"click","disabled"],[1,"ml-1","icon","icon-enable-false"],[1,"fa","fa-play"],[1,"fa","fa-stop"],[1,"fa","fa-copy"],[1,"ml-1","icon","icon-group"],[1,"fa","fa-paint-brush"],[1,"fa","fa-trash"],[1,"fa","fa-key"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),x("click",function(){return n.toggleCollapsed()}),a(2,"div",2),f(3,"div",3),v(4,Qr,2,0,"div",4),d(),v(5,Zr,1,4,"div",5),d(),v(6,es,1,1),d()),i&2&&(s(4),w(!n.operationCollapsed||!n.shouldDockWhenCollapsed?4:-1),s(),w(!n.operationCollapsed||!n.shouldDockWhenCollapsed?5:-1),s(),w(n.operationCollapsed?-1:6))},dependencies:[Me,Ie,nt],styles:["div.operation-control[_ngcontent-%COMP%]{margin-bottom:2px;--mdc-icon-button-state-layer-size: 34px;--mdc-icon-button-icon-size: 17px}div.operation-control[_ngcontent-%COMP%]   .operation-control-header[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{height:34px;width:34px;line-height:34px;text-align:center}"]})}}return t})();var wt=(()=>{class t{constructor(e){this.store=e,this.navigationCollapsed$=this.store.select(tr),this.operationCollapsed$=this.store.select(ir),this.breadcrumbEntity$=this.store.select(Ae)}static{this.\u0275fac=function(i){return new(i||t)(b(F))}}static{this.\u0275cmp=k({type:t,selectors:[["graph-controls"]],decls:7,vars:9,consts:[[1,"relative"],[1,"graph-controls","flex","flex-col","gap-y-0.5"],[3,"shouldDockWhenCollapsed"],[3,"shouldDockWhenCollapsed","breadcrumbEntity"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),f(2,"navigation-control",2),B(3,"async"),f(4,"operation-control",3),B(5,"async"),B(6,"async"),d()()),i&2&&(s(2),h("shouldDockWhenCollapsed",N(3,3,n.operationCollapsed$)),s(2),h("shouldDockWhenCollapsed",N(5,5,n.navigationCollapsed$))("breadcrumbEntity",N(6,7,n.breadcrumbEntity$)))},dependencies:[hr,fr,Se],styles:["div.graph-controls[_ngcontent-%COMP%]{position:absolute;left:0;top:22px;z-index:2}"]})}}return t})();var _r=(()=>{class t{constructor(e,i,n){this.client=e,this.canvasView=i,this.store=n,this.iconClass="",this.iconHoverClass="",this.disabled=!1,this.tooltip="",this.TextTip=rn,this.tooltipPosition={originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:8},this.dragging=!1,this.hovering=!1,this.store.select(qo).pipe(G()).subscribe(c=>{this.dragging=c})}mouseEnter(){this.disabled||(this.hovering=!0)}mouseLeave(){this.disabled||(this.hovering=!1)}isHovering(){return this.hovering&&!this.dragging}onDragStarted(){this.store.dispatch(Jt({dragging:!0}))}onDragEnded(e){let i=e.dropPoint,n=this.canvasView.getCanvasPosition(i);n?this.store.dispatch(Un({request:{revision:{clientId:this.client.getClientId(),version:0},type:this.type,position:n}})):this.store.dispatch(Jt({dragging:!1})),e.source._dragRef.reset()}static{this.\u0275fac=function(i){return new(i||t)(b(se),b(ce),b(F))}}static{this.\u0275cmp=k({type:t,selectors:[["new-canvas-item"]],inputs:{type:"type",iconClass:"iconClass",iconHoverClass:"iconHoverClass",disabled:"disabled",tooltip:"tooltip"},decls:4,vars:12,consts:[["nifiTooltip","",1,"new-canvas-item",3,"tooltipComponentType","tooltipInputData","tooltipDisabled","position","delayClose"],[1,"h-16","w-16","pl-1.5","flex","items-center","justify-center","relative","icon","text-3xl"],["cdkDrag","","cdkDragBoundary","body",1,"h-16","w-16","pl-1.5","-mt-16","flex","items-center","justify-center","relative","icon","text-3xl",3,"mouseenter","mouseleave","cdkDragStarted","cdkDragEnded","disabled"],[1,"h-1","absolute","left-[3px]","right-[3px]","bottom-0.5","component-button-grip"]],template:function(i,n){i&1&&(a(0,"div",0),f(1,"div",1),a(2,"button",2),x("mouseenter",function(){return n.mouseEnter()})("mouseleave",function(){return n.mouseLeave()})("cdkDragStarted",function(){return n.onDragStarted()})("cdkDragEnded",function(u){return n.onDragEnded(u)}),f(3,"span",3),d()()),i&2&&(h("tooltipComponentType",n.TextTip)("tooltipInputData",n.tooltip)("tooltipDisabled",n.dragging)("position",n.tooltipPosition)("delayClose",!1),s(),z(n.iconClass),s(),z(n.isHovering()?n.iconHoverClass+" hovering":n.iconClass),O("dragging",n.dragging),h("disabled",n.disabled))},dependencies:[en,ke],styles:[".new-canvas-item[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{background:unset;height:64px;z-index:2}.new-canvas-item[_ngcontent-%COMP%]   .icon.hovering[_ngcontent-%COMP%]{cursor:grab}.new-canvas-item[_ngcontent-%COMP%]   .icon.dragging[_ngcontent-%COMP%]{cursor:grabbing}.new-canvas-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:disabled{box-shadow:none}.new-canvas-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{outline:none}.new-canvas-item[_ngcontent-%COMP%]   .icon-import-from-registry-add[_ngcontent-%COMP%]:before{margin-left:1px}"]})}}return t})();var gr=(()=>{class t{static{this.API="../nifi-api"}constructor(e){this.httpClient=e}search(e,i){return this.httpClient.get(`${t.API}/flow/search-results`,{params:{q:e,a:i}})}static{this.\u0275fac=function(i){return new(i||t)(L(ki))}}static{this.\u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ns(t,p){if(t&1&&(a(0,"li"),g(1),d()),t&2){let e=p.$implicit;s(),q(e)}}var vr=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=k({type:t,selectors:[["search-match-tip"]],inputs:{data:"data"},decls:5,vars:0,consts:[[1,"tooltip"]],template:function(i,n){i&1&&(a(0,"div",0),g(1," Search matched: "),a(2,"ul"),te(3,ns,2,1,"li",null,Ye),d()()),i&2&&(s(3),ie(n.data==null?null:n.data.matches))},encapsulation:2})}}return t})();var rs=["searchInput"],ss=(t,p)=>({$implicit:t,header:"Processors",icon:"icon-processor",path:p}),as=(t,p)=>({$implicit:t,header:"Connections",icon:"icon-connect",path:p}),cs=(t,p)=>({$implicit:t,header:"Process Groups",icon:"icon-group",path:p}),ls=(t,p)=>({$implicit:t,header:"Remote Process Groups",icon:"icon-group-remote",path:p}),ds=(t,p)=>({$implicit:t,header:"Input Ports",icon:"icon-port-in",path:p}),ps=(t,p)=>({$implicit:t,header:"Output Ports",icon:"icon-port-out",path:p}),us=(t,p)=>({$implicit:t,header:"Funnels",icon:"icon-funnel",path:p}),ms=(t,p)=>({$implicit:t,header:"Labels",icon:"icon-label",path:p}),hs=t=>({$implicit:t,header:"Controller Services",icon:""}),fs=t=>({$implicit:t,header:"Parameter Providers",icon:""}),_s=t=>({$implicit:t,header:"Parameter Contexts",icon:""}),gs=t=>({$implicit:t,header:"Parameters",icon:""}),Cr=t=>["/parameter-contexts",t],vs=t=>["/settings","parameter-providers",t],Cs=(t,p)=>["/process-groups",t,"controller-services",p],ys=t=>["/process-groups",t],yr=(t,p,e)=>["/process-groups",t,p,e];function ws(t,p){t&1&&(a(0,"div",9),g(1,"Searching"),d())}function bs(t,p){t&1&&K(0)}function xs(t,p){if(t&1&&v(0,bs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,ss,e.processorResults,e.ComponentType.Processor))}}function Ss(t,p){t&1&&K(0)}function Ps(t,p){if(t&1&&v(0,Ss,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,as,e.connectionResults,e.ComponentType.Connection))}}function Ts(t,p){t&1&&K(0)}function Is(t,p){if(t&1&&v(0,Ts,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,cs,e.processGroupResults,e.ComponentType.ProcessGroup))}}function Ms(t,p){t&1&&K(0)}function ks(t,p){if(t&1&&v(0,Ms,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,ls,e.remoteProcessGroupResults,e.ComponentType.RemoteProcessGroup))}}function As(t,p){t&1&&K(0)}function Ds(t,p){if(t&1&&v(0,As,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,ds,e.inputPortResults,e.ComponentType.InputPort))}}function Fs(t,p){t&1&&K(0)}function Rs(t,p){if(t&1&&v(0,Fs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,ps,e.outputPortResults,e.ComponentType.OutputPort))}}function Es(t,p){t&1&&K(0)}function Os(t,p){if(t&1&&v(0,Es,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,us,e.funnelResults,e.ComponentType.Funnel))}}function zs(t,p){t&1&&K(0)}function Vs(t,p){if(t&1&&v(0,zs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",re(2,ms,e.labelResults,e.ComponentType.Label))}}function Gs(t,p){t&1&&K(0)}function Us(t,p){if(t&1&&v(0,Gs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(2,hs,e.controllerServiceNodeResults))}}function Bs(t,p){t&1&&K(0)}function Ns(t,p){if(t&1&&v(0,Bs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(2,fs,e.parameterProviderNodeResults))}}function js(t,p){t&1&&K(0)}function Ls(t,p){if(t&1&&v(0,js,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(2,_s,e.parameterContextResults))}}function qs(t,p){t&1&&K(0)}function Ws(t,p){if(t&1&&v(0,qs,1,0,"ng-container",10),t&2){let e=m(4),i=D(8);h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(2,gs,e.parameterResults))}}function $s(t,p){if(t&1&&(a(0,"ul"),v(1,xs,1,5,"ng-container")(2,Ps,1,5,"ng-container")(3,Is,1,5,"ng-container")(4,ks,1,5,"ng-container")(5,Ds,1,5,"ng-container")(6,Rs,1,5,"ng-container")(7,Os,1,5,"ng-container")(8,Vs,1,5,"ng-container")(9,Us,1,4,"ng-container")(10,Ns,1,4,"ng-container")(11,Ls,1,4,"ng-container")(12,Ws,1,4,"ng-container"),d()),t&2){let e=m(3);s(),w(e.processorResults.length>0?1:-1),s(),w(e.connectionResults.length>0?2:-1),s(),w(e.processGroupResults.length>0?3:-1),s(),w(e.remoteProcessGroupResults.length>0?4:-1),s(),w(e.inputPortResults.length>0?5:-1),s(),w(e.outputPortResults.length>0?6:-1),s(),w(e.funnelResults.length>0?7:-1),s(),w(e.labelResults.length>0?8:-1),s(),w(e.controllerServiceNodeResults.length>0?9:-1),s(),w(e.parameterProviderNodeResults.length>0?10:-1),s(),w(e.parameterContextResults.length>0?11:-1),s(),w(e.parameterResults.length>0?12:-1)}}function Hs(t,p){t&1&&(a(0,"div",9),g(1,"No results matched the search terms"),d())}function Ys(t,p){if(t&1&&v(0,$s,13,12,"ul")(1,Hs,2,0,"div",9),t&2){let e=m(2);w(e.hasResults()?0:1)}}function Ks(t,p){if(t&1&&(a(0,"div",8),v(1,ws,2,0,"div",9)(2,Ys,2,1),d()),t&2){let e=m();s(),w(e.searching?1:2)}}function Qs(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m().$implicit;h("title",e.name)("routerLink",H(3,Cr,e.parentGroup.id)),s(),T(" ",e.name," ")}}function Zs(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m().$implicit;h("title",e.name)("routerLink",H(3,Cr,e.id)),s(),T(" ",e.name," ")}}function Xs(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m().$implicit;h("title",e.name)("routerLink",H(3,vs,e.parentGroup.id)),s(),T(" ",e.name," ")}}function Js(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m().$implicit;h("title",e.name)("routerLink",re(3,Cs,e.parentGroup.id,e.id)),s(),T(" ",e.name?e.name:e.id," ")}}function ea(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m(2).$implicit;h("title",e.name)("routerLink",H(3,ys,e.id)),s(),T(" ",e.name," ")}}function ta(t,p){if(t&1){let e=U();a(0,"a",17),x("click",function(){I(e);let n=m(3).$implicit,c=m(2).path,u=m();return M(u.componentLinkClicked(c,n.id))}),g(1),d()}if(t&2){let e=m(3).$implicit,i=m(2).path;h("title",e.name)("routerLink",Gt(3,yr,e.parentGroup.id,i,e.id)),s(),T(" ",e.name?e.name:e.id," ")}}function ia(t,p){if(t&1&&(a(0,"a",16),g(1),d()),t&2){let e=m(3).$implicit,i=m(2).path;h("title",e.name)("routerLink",Gt(3,yr,e.parentGroup.id,i,e.id)),s(),T(" ",e.name?e.name:e.id," ")}}function na(t,p){if(t&1&&v(0,ta,2,7,"a",16)(1,ia,2,7,"a",16),t&2){let e=m(2).$implicit,i=m(3);w(e.parentGroup.id==i.currentProcessGroupId?0:1)}}function oa(t,p){if(t&1&&v(0,ea,2,5,"a",16)(1,na,2,1),t&2){let e=m().$implicit;w(e.parentGroup?1:0)}}function ra(t,p){if(t&1&&(a(0,"li",14),f(1,"i",15),v(2,Qs,2,5,"a",16)(3,Zs,2,5,"a",16)(4,Xs,2,5,"a",16)(5,Js,2,6,"a",16)(6,oa,2,1),d()),t&2){let e=p.$implicit,i=m(2).header,n=m();s(),h("tooltipComponentType",n.SearchMatchTip)("tooltipInputData",n.getSearchMatchTipInput(e))("delayClose",!1),s(),w(i==="Parameters"?2:i==="Parameter Contexts"?3:i==="Parameter Providers"?4:i==="Controller Services"?5:6)}}function sa(t,p){if(t&1&&(a(0,"li",11),f(1,"span",12),a(2,"span",13),g(3),d()(),te(4,ra,7,4,"li",14,Ye)),t&2){let e=m(),i=e.$implicit,n=e.header,c=e.icon;s(),z(c),s(2),q(n),s(),ie(i)}}function aa(t,p){if(t&1&&v(0,sa,6,3),t&2){let e=p.$implicit;w(e.length>0?0:-1)}}var wr=(()=>{class t{constructor(e,i,n,c){this.formBuilder=e,this.searchService=i,this.store=n,this.errorHelper=c,this.ComponentType=C,this.SearchMatchTip=vr,this.currentProcessGroupId=$.id,this.originPos={originX:"end",originY:"bottom"},this.overlayPos={overlayX:"end",overlayY:"top"},this.position=new Ui(this.originPos,this.overlayPos,0,2),this.destroyRef=P(yi),this.positions=[this.position],this.searchInputVisible=!1,this.searching=!1,this.searchingResultsVisible=!1,this.processorResults=[],this.connectionResults=[],this.processGroupResults=[],this.inputPortResults=[],this.outputPortResults=[],this.remoteProcessGroupResults=[],this.funnelResults=[],this.labelResults=[],this.controllerServiceNodeResults=[],this.parameterContextResults=[],this.parameterProviderNodeResults=[],this.parameterResults=[],this.selectedComponentType=null,this.selectedComponentId=null,this.searchForm=this.formBuilder.group({searchBar:""}),this.store.select(ln).pipe(G()).subscribe(u=>{u?.params&&(this.selectedComponentId=u.params.id,this.selectedComponentType=u.params.type)})}ngOnInit(){this.searchForm.get("searchBar")?.valueChanges.pipe(G(this.destroyRef),E(e=>e?.trim().length>0),Ne(500),Ci(()=>this.searching=!0)).subscribe(e=>{this.searchService.search(e,this.currentProcessGroupId).pipe(me(1)).subscribe({next:i=>{let n=i.searchResultsDTO;this.processorResults=n.processorResults,this.connectionResults=n.connectionResults,this.processGroupResults=n.processGroupResults,this.inputPortResults=n.inputPortResults,this.outputPortResults=n.outputPortResults,this.remoteProcessGroupResults=n.remoteProcessGroupResults,this.funnelResults=n.funnelResults,this.labelResults=n.labelResults,this.controllerServiceNodeResults=n.controllerServiceNodeResults,this.parameterContextResults=n.parameterContextResults,this.parameterProviderNodeResults=n.parameterProviderNodeResults,this.parameterResults=n.parameterResults,this.searchingResultsVisible=!0,this.searching=!1},error:i=>{this.searchingResultsVisible=!1,this.searching=!1,this.snackBarOrFullScreenError(i)}})})}toggleSearchVisibility(){if(this.searchInputVisible=!this.searchInputVisible,this.searchInputVisible){let e=this.searchInput?.elementRef;e&&e.nativeElement.focus()}}hasResults(){return this.processorResults.length>0||this.connectionResults.length>0||this.processGroupResults.length>0||this.inputPortResults.length>0||this.outputPortResults.length>0||this.remoteProcessGroupResults.length>0||this.funnelResults.length>0||this.labelResults.length>0||this.controllerServiceNodeResults.length>0||this.parameterContextResults.length>0||this.parameterProviderNodeResults.length>0||this.parameterResults.length>0}backdropClicked(e){e.stopPropagation(),e.preventDefault(),this.searchingResultsVisible=!1,this.searchForm.get("searchBar")?.setValue(""),this.processorResults=[],this.connectionResults=[],this.processGroupResults=[],this.inputPortResults=[],this.outputPortResults=[],this.remoteProcessGroupResults=[],this.funnelResults=[],this.labelResults=[],this.controllerServiceNodeResults=[],this.parameterContextResults=[],this.parameterProviderNodeResults=[],this.parameterResults=[]}getSearchMatchTipInput(e){return{matches:e.matches}}componentLinkClicked(e,i){e==this.selectedComponentType&&i==this.selectedComponentId?this.store.dispatch(Ce({request:{allowTransition:!0}})):this.store.dispatch(eo({allowTransition:!0}))}onKeydown(e){e.key==="Escape"&&(this.searchingResultsVisible=!1)}snackBarOrFullScreenError(e){this.errorHelper.showErrorInContext(e.status)?this.store.dispatch(bo({error:this.errorHelper.getErrorString(e)})):this.store.dispatch(this.errorHelper.fullScreenError(e))}static{this.\u0275fac=function(i){return new(i||t)(b(Yi),b(gr),b(F),b(et))}}static{this.\u0275cmp=k({type:t,selectors:[["search"]],viewQuery:function(i,n){if(i&1&&Oe(rs,5),i&2){let c;de(c=pe())&&(n.searchInput=c.first)}},inputs:{currentProcessGroupId:"currentProcessGroupId"},decls:9,vars:11,consts:[["searchInput","cdkOverlayOrigin"],["renderResults",""],[1,"h-8","flex","justify-around","search-container","border-l"],[1,"w-8",3,"click"],[1,"fa","fa-search","primary-color"],[3,"formGroup"],["cdkConnectedOverlay","",3,"overlayOutsideClick","cdkConnectedOverlayDisableClose","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayBackdropClass"],["type","text","matInput","","placeholder","Search","cdkOverlayOrigin","","formControlName","searchBar",1,"search-input","neutral-contrast",3,"keydown"],[1,"search-results","w-96","border","p-2","text-base","max-h-96","overflow-y-auto"],[1,"unset","neutral-color","italic"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","items-center"],[1,"icon","mr-1","tertiary-color"],[1,"font-medium"],[1,"ml-4","py-1","flex","gap-x-2","items-center"],["nifiTooltip","",1,"fa","fa-info-circle",3,"tooltipComponentType","tooltipInputData","delayClose"],[1,"w-full","overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"title","routerLink"],[1,"w-full","overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"click","title","routerLink"]],template:function(i,n){if(i&1){let c=U();a(0,"div",2)(1,"button",3),x("click",function(){return I(c),M(n.toggleSearchVisibility())}),f(2,"i",4),d(),a(3,"form",5),v(4,Ks,3,1,"ng-template",6),x("overlayOutsideClick",function(y){return I(c),M(n.backdropClicked(y))}),a(5,"input",7,0),x("keydown",function(y){return I(c),M(n.onKeydown(y))}),d(),v(7,aa,1,1,"ng-template",null,1,ze),d()()}if(i&2){let c=D(6);O("open",n.searchInputVisible),s(3),h("formGroup",n.searchForm),s(),h("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayOrigin",c)("cdkConnectedOverlayOpen",n.searching||n.searchingResultsVisible)("cdkConnectedOverlayPositions",n.positions)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop"),s(),O("open",n.searchInputVisible)}},dependencies:[Qi,Wi,ji,ot,Li,$i,Hi,Bi,Ni,Xe,Je,sn,cn,an,ke],styles:[".search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:0;height:32px;outline:none;transition:width .4s ease-in-out}.search-container[_ngcontent-%COMP%]   .search-input.open[_ngcontent-%COMP%]{width:200px;transition:width .4s ease-in-out}"]})}}return t})();function la(t,p){if(t&1&&(a(0,"div",3),f(1,"div",39),a(2,"div",40),g(3),d()()),t&2){let e=m();s(),z(e.getClusterStyle()),s(2),q(e.formatClusterMessage())}}function da(t,p){if(t&1&&(a(0,"button",37),f(1,"i",41),d()),t&2){let e=m();h("delayClose",!0)("tooltipComponentType",e.BulletinsTip)("tooltipInputData",e.getBulletins())("position",e.getBulletinTooltipPosition())("ngClass",e.getMostSevereBulletinLevel())}}function pa(t,p){t&1&&(a(0,"button",38),f(1,"i",41),d())}var br=(()=>{class t{static{this.FLOW_ANALYSIS_VISIBILITY_KEY="flow-analysis-visibility"}static{this.FLOW_ANALYSIS_KEY="flow-analysis"}set flowAnalysisState(e){e.ruleViolations.length?e.ruleViolations.find(n=>n.enforcementPolicy==="ENFORCE")?this.flowAnalysisNotificationClass="enforce":this.flowAnalysisNotificationClass="warn":this.flowAnalysisNotificationClass="primary-color"}set bulletins(e){e?this.filteredBulletins=e.filter(i=>i.canRead):this.filteredBulletins=[]}constructor(e,i,n){this.store=e,this.storage=i,this.canvasUtils=n,this.flowAnalysisNotificationClass="",this.controllerStatus=$.flowStatus.controllerStatus,this.lastRefreshed=$.flow.processGroupFlow.lastRefreshed,this.clusterSummary=null,this.currentProcessGroupId=$.id,this.loadingStatus=!1,this.flowAnalysisOpen=$.flowAnalysisOpen,this.filteredBulletins=$.controllerBulletins.bulletins,this.BulletinsTip=wn;try{let c=this.storage.getItem(t.FLOW_ANALYSIS_VISIBILITY_KEY);if(c){let u=c[t.FLOW_ANALYSIS_KEY]===!0;this.store.dispatch(ii({flowAnalysisOpen:u}))}}catch{}}hasTerminatedThreads(){return this.controllerStatus.terminatedThreadCount>0}formatClusterMessage(){return this.clusterSummary?.connectedToCluster&&this.clusterSummary.connectedNodes?this.clusterSummary.connectedNodes:"Disconnected"}getClusterStyle(){return this.clusterSummary?.connectedToCluster===!1||this.clusterSummary?.connectedNodeCount!=this.clusterSummary?.totalNodeCount?"error-color":"secondary-color"}formatActiveThreads(){return this.hasTerminatedThreads()?`${this.controllerStatus.activeThreadCount} (${this.controllerStatus.terminatedThreadCount})`:`${this.controllerStatus.activeThreadCount}`}getActiveThreadsTitle(){return this.hasTerminatedThreads()?"Active Threads (Terminated)":"Active Threads"}getActiveThreadsStyle(){return this.hasTerminatedThreads()?"warning":this.controllerStatus.activeThreadCount===0?"zero secondary-color":"secondary-color"}getQueuedStyle(){return this.controllerStatus.queued.indexOf("0 / 0")==0?"zero secondary-color":"secondary-color"}formatValue(e){return e===void 0?"-":e}getActiveStyle(e,i){return e===void 0||e<=0?"zero secondary-color":i}hasBulletins(){return this.filteredBulletins.length>0}getBulletins(){return{bulletins:this.filteredBulletins}}getMostSevereBulletinLevel(){let e=this.canvasUtils.getMostSevereBulletin(this.filteredBulletins);return e?e.bulletin.level.toLowerCase():null}getBulletinTooltipPosition(){return{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetX:-8,offsetY:8}}toggleFlowAnalysis(){let e=!this.flowAnalysisOpen;this.store.dispatch(ii({flowAnalysisOpen:e}));let i=this.storage.getItem(t.FLOW_ANALYSIS_VISIBILITY_KEY);i==null&&(i={}),i[t.FLOW_ANALYSIS_KEY]=e,this.storage.setItem(t.FLOW_ANALYSIS_VISIBILITY_KEY,i)}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(he),b(Z))}}static{this.\u0275cmp=k({type:t,selectors:[["flow-status"]],inputs:{controllerStatus:"controllerStatus",lastRefreshed:"lastRefreshed",clusterSummary:"clusterSummary",currentProcessGroupId:"currentProcessGroupId",loadingStatus:"loadingStatus",flowAnalysisOpen:"flowAnalysisOpen",flowAnalysisState:"flowAnalysisState",bulletins:"bulletins"},decls:66,vars:47,consts:[[1,"h-8","flow-status","border-b","select-none"],[1,"flex","justify-between"],[1,"flex","flex-1","justify-around","pr-20"],["title","Connected nodes / Total number of nodes in the cluster",1,"flex","items-center","gap-x-2"],[1,"flex","items-center","gap-x-2",3,"title"],[1,"icon","icon-threads"],[1,"tertiary-color","font-medium"],["title","Total queued data",1,"flex","items-center","gap-x-2"],[1,"fa","fa-list"],["title","Transmitting Remote Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-bullseye"],["title","Not Transmitting Remote Process Groups",1,"flex","items-center","gap-x-2"],[1,"icon","icon-transmit-false"],["title","Running Components",1,"flex","items-center","gap-x-2"],[1,"fa","fa-play"],["title","Stopped Components",1,"flex","items-center","gap-x-2"],[1,"fa","fa-stop"],["title","Invalid Components",1,"flex","items-center","gap-x-2"],[1,"fa","fa-warning","invalid"],["title","Disabled Components",1,"flex","items-center","gap-x-2"],[1,"icon","icon-enable-false"],["title","Up to date Versioned Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-check"],["title","Locally modified Versioned Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-asterisk"],["title","Stale Versioned Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-arrow-circle-up"],["title","Locally modified and stale Versioned Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-exclamation-circle"],["title","Sync failure Versioned Process Groups",1,"flex","items-center","gap-x-2"],[1,"fa","fa-question"],["title","Last refresh",1,"flex","items-center","gap-x-2"],[1,"fa","fa-refresh","primary-color"],[1,"flex"],[3,"currentProcessGroupId"],[1,"flow-analysis-notifications","w-8","border-l","flex","justify-center","items-center","pointer",3,"click","ngClass"],[1,"fa","fa-medkit"],["nifiTooltip","",1,"h-8","w-8","controller-bulletins","border-l","has-bulletins",3,"delayClose","tooltipComponentType","tooltipInputData","position","ngClass"],[1,"h-8","w-8","controller-bulletins","border-l"],[1,"fa","fa-cubes"],[1,"text"],[1,"fa","fa-sticky-note-o"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),v(3,la,4,3,"div",3),a(4,"div",4),f(5,"div",5),a(6,"div",6),g(7),d()(),a(8,"div",7),f(9,"div",8),a(10,"div",6),g(11),d()(),a(12,"div",9),f(13,"div",10),a(14,"div",6),g(15),d()(),a(16,"div",11),f(17,"div",12),a(18,"div",6),g(19),d()(),a(20,"div",13),f(21,"div",14),a(22,"div",6),g(23),d()(),a(24,"div",15),f(25,"div",16),a(26,"div",6),g(27),d()(),a(28,"div",17),f(29,"div",18),a(30,"div",6),g(31),d()(),a(32,"div",19),f(33,"div",20),a(34,"div",6),g(35),d()(),a(36,"div",21),f(37,"div",22),a(38,"div",6),g(39),d()(),a(40,"div",23),f(41,"div",24),a(42,"div",6),g(43),d()(),a(44,"div",25),f(45,"div",26),a(46,"div",6),g(47),d()(),a(48,"div",27),f(49,"div",28),a(50,"div",6),g(51),d()(),a(52,"div",29),f(53,"div",30),a(54,"div",6),g(55),d()(),a(56,"div",31),f(57,"div",32),a(58,"div",6),g(59),d()()(),a(60,"div",33),f(61,"search",34),a(62,"button",35),x("click",function(){return n.toggleFlowAnalysis()}),f(63,"i",36),d(),v(64,da,2,5,"button",37)(65,pa,2,0,"button",38),d()()()),i&2&&(s(3),w(n.clusterSummary!=null&&n.clusterSummary.clustered?3:-1),s(),h("title",n.getActiveThreadsTitle()),s(),z(n.getActiveThreadsStyle()),s(2),q(n.formatActiveThreads()),s(2),z(n.getQueuedStyle()),s(2),q(n.controllerStatus.queued),s(2),z(n.getActiveStyle(n.controllerStatus.activeRemotePortCount,"success-color-variant")),s(2),T(" ",n.formatValue(n.controllerStatus.activeRemotePortCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.inactiveRemotePortCount,"neutral-color")),s(2),T(" ",n.formatValue(n.controllerStatus.inactiveRemotePortCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.runningCount,"success-color-default")),s(2),T(" ",n.formatValue(n.controllerStatus.runningCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.stoppedCount,"error-color-variant")),s(2),T(" ",n.formatValue(n.controllerStatus.stoppedCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.invalidCount,"caution-color")),s(2),T(" ",n.formatValue(n.controllerStatus.invalidCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.disabledCount,"neutral-color")),s(2),T(" ",n.formatValue(n.controllerStatus.disabledCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.upToDateCount,"success-color-default")),s(2),T(" ",n.formatValue(n.controllerStatus.upToDateCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.locallyModifiedCount,"neutral-color")),s(2),T(" ",n.formatValue(n.controllerStatus.locallyModifiedCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.staleCount,"error-color-variant")),s(2),T(" ",n.formatValue(n.controllerStatus.staleCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.locallyModifiedAndStaleCount,"error-color-variant")),s(2),T(" ",n.formatValue(n.controllerStatus.locallyModifiedAndStaleCount)," "),s(2),z(n.getActiveStyle(n.controllerStatus.syncFailureCount,"neutral-color")),s(2),T(" ",n.formatValue(n.controllerStatus.syncFailureCount)," "),s(2),O("fa-spin",n.loadingStatus),s(2),q(n.lastRefreshed),s(2),h("currentProcessGroupId",n.currentProcessGroupId),s(),h("ngClass",n.flowAnalysisNotificationClass),s(2),w(n.hasBulletins()?64:65))},dependencies:[wr,ke,Pe,Pi],styles:[".flow-status[_ngcontent-%COMP%]{box-sizing:content-box}.flow-status[_ngcontent-%COMP%]   .controller-bulletins[_ngcontent-%COMP%]{cursor:default}"]})}}return t})();var bt=Ai(Eo,t=>t[Ao]);function ua(t,p){if(t&1&&f(0,"new-canvas-item",2)(1,"new-canvas-item",3)(2,"new-canvas-item",4)(3,"new-canvas-item",5)(4,"new-canvas-item",6)(5,"new-canvas-item",7)(6,"new-canvas-item",8)(7,"new-canvas-item",9),t&2){let e=p,i=m();h("type",i.ComponentType.Processor)("disabled",!e.canWrite),s(),h("type",i.ComponentType.InputPort)("disabled",!e.canWrite),s(),h("type",i.ComponentType.OutputPort)("disabled",!e.canWrite),s(),h("type",i.ComponentType.ProcessGroup)("disabled",!e.canWrite),s(),h("type",i.ComponentType.RemoteProcessGroup)("disabled",!e.canWrite),s(),h("type",i.ComponentType.Funnel)("disabled",!e.canWrite),s(),h("type",i.ComponentType.Flow)("disabled",!e.canWrite),s(),h("type",i.ComponentType.Label)("disabled",!e.canWrite)}}var xt=(()=>{class t{constructor(e,i){this.store=e,this.loadingService=i,this.ComponentType=C,this.controllerStatus$=this.store.select(Xo),this.lastRefreshed$=this.store.select(Jo),this.clusterSummary$=this.store.select(_n),this.controllerBulletins$=this.store.select(er),this.currentProcessGroupId$=this.store.select(Y),this.canvasPermissions$=this.store.select(Oo),this.flowAnalysisState$=this.store.select(bt),this.flowAnalysisOpen$=this.store.select(_t)}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(cr))}}static{this.\u0275cmp=k({type:t,selectors:[["fd-header"]],decls:13,vars:27,consts:[[1,"nifi-header"],[3,"flowAnalysisOpen","controllerStatus","lastRefreshed","clusterSummary","bulletins","currentProcessGroupId","loadingStatus","flowAnalysisState"],["iconClass","icon-processor","iconHoverClass","icon-processor-add","tooltip","Processor",3,"type","disabled"],["iconClass","icon-port-in","iconHoverClass","icon-port-in-add","tooltip","Input Port",3,"type","disabled"],["iconClass","icon-port-out","iconHoverClass","icon-port-out-add","tooltip","Output Port",3,"type","disabled"],["iconClass","icon-group","iconHoverClass","icon-group-add","tooltip","Process Group",3,"type","disabled"],["iconClass","icon-group-remote","iconHoverClass","icon-group-remote-add","tooltip","Remote Process Group",3,"type","disabled"],["iconClass","icon-funnel","iconHoverClass","icon-funnel-add","tooltip","Funnel",3,"type","disabled"],["iconClass","icon-import-from-registry","iconHoverClass","icon-import-from-registry-add","tooltip","Import from Registry",3,"type","disabled"],["iconClass","icon-label","iconHoverClass","icon-label-add","tooltip","Label",3,"type","disabled"]],template:function(i,n){if(i&1&&(a(0,"header",0)(1,"navigation"),v(2,ua,8,16),B(3,"async"),d(),f(4,"flow-status",1),B(5,"async"),B(6,"async"),B(7,"async"),B(8,"async"),B(9,"async"),B(10,"async"),B(11,"async"),B(12,"async"),d()),i&2){let c;s(2),w((c=N(3,9,n.canvasPermissions$))?2:-1,c),s(2),h("flowAnalysisOpen",N(5,11,n.flowAnalysisOpen$))("controllerStatus",N(6,13,n.controllerStatus$))("lastRefreshed",N(7,15,n.lastRefreshed$))("clusterSummary",N(8,17,n.clusterSummary$))("bulletins",N(9,19,n.controllerBulletins$))("currentProcessGroupId",N(10,21,n.currentProcessGroupId$))("loadingStatus",N(11,23,n.loadingService.status$))("flowAnalysisState",N(12,25,n.flowAnalysisState$))}},dependencies:[_r,Me,rt,Se,fn,br,gn],styles:["new-canvas-item[_ngcontent-%COMP%]:focus-visible{outline:none}"]})}}return t})();var xr=(()=>{class t{constructor(e){this.store=e,this.breadcrumbs$=this.store.select(Ae),this.currentProcessGroupId$=this.store.select(Y)}static{this.\u0275fac=function(i){return new(i||t)(b(F))}}static{this.\u0275cmp=k({type:t,selectors:[["fd-footer"]],decls:5,vars:6,consts:[[1,"breadcrumb-container","border-t","neutral-contrast"],[3,"entity","currentProcessGroupId"]],template:function(i,n){i&1&&(a(0,"footer")(1,"div",0),f(2,"breadcrumbs",1),B(3,"async"),B(4,"async"),d()()),i&2&&(s(2),h("entity",N(3,2,n.breadcrumbs$))("currentProcessGroupId",N(4,4,n.currentProcessGroupId$)))},dependencies:[nr,Se],styles:[".breadcrumb-container[_ngcontent-%COMP%]{z-index:3}"]})}}return t})();var Pt=t=>({violation:t}),St=(t,p)=>p.scope,Sr=(t,p)=>p.id;function fa(t,p){t&1&&f(0,"span")}function _a(t,p){if(t&1&&(Ke(0),v(1,fa,1,0,"span",18),a(2,"div",19),g(3,"Rules analysis pending..."),d(),Qe()),t&2){let e=m();s(),h("nifiSpinner",e.isAnalysisPending)}}function ga(t,p){if(t&1&&g(0),t&2){let e=m(2).$implicit,i=m(2);T("",i.violationsMap.get(e.id).length," violation")}}function va(t,p){if(t&1&&g(0),t&2){let e=m(2).$implicit,i=m(2);T("",i.violationsMap.get(e.id).length," violations")}}function Ca(t,p){if(t&1&&(a(0,"div"),g(1),d()),t&2){let e=m().$implicit;s(),T(" ",e.subjectDisplayName," ")}}function ya(t,p){}function wa(t,p){if(t&1&&(a(0,"div",32)(1,"div",33),v(2,Ca,2,1,"div",34),a(3,"span",35),g(4),d()(),v(5,ya,0,0,"ng-template",36),d()),t&2){let e=p.$implicit;m(4);let i=D(48),n=D(50);s(2),h("ngIf",e==null||e.subjectPermissionDto==null?null:e.subjectPermissionDto.canRead)("ngIfElse",n),s(2),T(" ",e.subjectId," "),s(),h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(5,Pt,e))}}function ba(t,p){if(t&1&&(a(0,"div",28),Ke(1,29),v(2,ga,1,1,"ng-template",30)(3,va,1,1,"ng-template",31),Qe(),d(),te(4,wa,6,7,"div",32,St)),t&2){let e=m().$implicit,i=m(2);s(),h("ngPlural",i.violationsMap.get(e.id).length),s(3),ie(i.violationsMap.get(e.id))}}function xa(t,p){if(t&1){let e=U();a(0,"div",20)(1,"div",21)(2,"div",22),g(3),d(),a(4,"button",23),f(5,"i",24),d(),a(6,"mat-menu",null,2)(8,"button",25),x("click",function(){let n=I(e).$implicit,c=m(2);return M(c.openDocumentation(n))}),f(9,"i",26),g(10," View Documentation "),d(),a(11,"button",25),x("click",function(){let n=I(e).$implicit,c=m(2);return M(c.openRule(n))}),f(12,"i",27),g(13," Edit Rule "),d()()(),v(14,ba,6,1),d()}if(t&2){let e=p.$implicit,i=D(7),n=m(2);s(3),q(e.name),s(),h("matMenuTriggerFor",i),s(10),w(n.violationsMap.size>0&&n.violationsMap.get(e.id)?14:-1)}}function Sa(t,p){if(t&1&&te(0,xa,15,3,"div",20,Sr),t&2){let e=m();ie(e.enforcedRules)}}function Pa(t,p){if(t&1&&g(0),t&2){let e=m(2).$implicit,i=m(2);T("",i.violationsMap.get(e.id).length," violation")}}function Ta(t,p){if(t&1&&g(0),t&2){let e=m(2).$implicit,i=m(2);T("",i.violationsMap.get(e.id).length," violations")}}function Ia(t,p){if(t&1&&(a(0,"div"),g(1),d()),t&2){let e=m().$implicit;s(),T(" ",e.subjectDisplayName," ")}}function Ma(t,p){}function ka(t,p){if(t&1&&(a(0,"li",32)(1,"div",33),v(2,Ia,2,1,"div",34),a(3,"span",35),g(4),d()(),v(5,Ma,0,0,"ng-template",36),d()),t&2){let e=p.$implicit;m(4);let i=D(48),n=D(50);s(2),h("ngIf",e==null||e.subjectPermissionDto==null?null:e.subjectPermissionDto.canRead)("ngIfElse",n),s(2),T(" ",e.subjectId," "),s(),h("ngTemplateOutlet",i)("ngTemplateOutletContext",H(5,Pt,e))}}function Aa(t,p){if(t&1&&(a(0,"div",38),Ke(1,29),v(2,Pa,1,1,"ng-template",30)(3,Ta,1,1,"ng-template",31),Qe(),d(),a(4,"ul"),te(5,ka,6,7,"li",32,St),d()),t&2){let e=m().$implicit,i=m(2);s(),h("ngPlural",i.violationsMap.get(e.id).length),s(4),ie(i.violationsMap.get(e.id))}}function Da(t,p){if(t&1){let e=U();a(0,"div")(1,"div",21)(2,"div",22),g(3),d(),a(4,"button",23),f(5,"i",24),d(),a(6,"mat-menu",37,2)(8,"button",25),x("click",function(){let n=I(e).$implicit,c=m(2);return M(c.openDocumentation(n))}),f(9,"i",26),g(10," View Documentation "),d(),a(11,"button",25),x("click",function(){let n=I(e).$implicit,c=m(2);return M(c.openRule(n))}),f(12,"i",27),g(13," Edit Rule "),d()()(),v(14,Aa,7,1),d()}if(t&2){let e=p.$implicit,i=D(7),n=m(2);s(3),q(e.name),s(),h("matMenuTriggerFor",i),s(10),w(n.violationsMap.size>0&&n.violationsMap.get(e.id)?14:-1)}}function Fa(t,p){if(t&1&&te(0,Da,15,3,"div",null,Sr),t&2){let e=m();ie(e.warningRules)}}function Ra(t,p){if(t&1&&(a(0,"div"),g(1),d()),t&2){let e=m().$implicit;s(),T(" ",e.subjectDisplayName," ")}}function Ea(t,p){}function Oa(t,p){if(t&1&&(a(0,"li",17)(1,"div",39),g(2),d(),a(3,"div",40)(4,"div",41),v(5,Ra,2,1,"div",34),a(6,"span",35),g(7),d()(),v(8,Ea,0,0,"ng-template",36),d()()),t&2){let e=p.$implicit,i=m(),n=D(48),c=D(50);s(2),q(i.getRuleName(e.ruleId)),s(3),h("ngIf",e==null||e.subjectPermissionDto==null?null:e.subjectPermissionDto.canRead)("ngIfElse",c),s(2),q(e.subjectId),s(),h("ngTemplateOutlet",n)("ngTemplateOutletContext",H(6,Pt,e))}}function za(t,p){if(t&1&&(a(0,"div"),g(1),d()),t&2){let e=m().$implicit;s(),T(" ",e.subjectDisplayName," ")}}function Va(t,p){}function Ga(t,p){if(t&1&&(a(0,"li",17)(1,"div",39),g(2),d(),a(3,"div",40)(4,"div",41),v(5,za,2,1,"div",34),a(6,"span",35),g(7),d()(),v(8,Va,0,0,"ng-template",36),d()()),t&2){let e=p.$implicit,i=m(),n=D(48),c=D(50);s(2),q(i.getRuleName(e.ruleId)),s(3),h("ngIf",e==null||e.subjectPermissionDto==null?null:e.subjectPermissionDto.canRead)("ngIfElse",c),s(2),q(e.subjectId),s(),h("ngTemplateOutlet",n)("ngTemplateOutletContext",H(6,Pt,e))}}function Ua(t,p){if(t&1&&(a(0,"button",45),f(1,"i",46),g(2,"Go to component "),d()),t&2){let e=m().violation,i=m();h("routerLink",i.getProcessorLink(e))}}function Ba(t,p){if(t&1){let e=U();a(0,"button",23),f(1,"i",24),d(),a(2,"mat-menu",null,3)(4,"button",42),x("click",function(){let n=I(e).violation,c=m();return M(c.viewViolationDetails(n))}),f(5,"i",43),g(6,"Violation details "),d(),v(7,Ua,3,1,"button",44),d()}if(t&2){let e=p.violation,i=D(3);h("matMenuTriggerFor",i),s(4),h("disabled",!(!(e==null||e.subjectPermissionDto==null)&&e.subjectPermissionDto.canRead)),s(3),h("ngIf",(e==null?null:e.subjectComponentType)==="PROCESSOR"&&(e==null||e.subjectPermissionDto==null?null:e.subjectPermissionDto.canRead))}}function Na(t,p){t&1&&g(0," Unauthorized ")}var Tt=(()=>{class t{constructor(e){this.store=e,this.violationsMap=new Map,this.warningRules=[],this.enforcedRules=[],this.warningViolations=[],this.enforcedViolations=[],this.rules=[],this.currentProcessGroupId="",this.isAnalysisPending=!1,this.showEnforcedViolations=Rt(!1),this.showWarningViolations=Rt(!1),this.flowAnalysisState$=this.store.select(bt),this.currentProcessGroupId$=this.store.select(Y),this.processGroupName="",this.store.dispatch(Do()),this.flowAnalysisState$.pipe(G()).subscribe(i=>{this.clearRulesTracking(),this.isAnalysisPending=i.flowAnalysisPending,this.rules=i.rules,i.rules.forEach(n=>{n.enforcementPolicy==="WARN"?this.warningRules.push(n):this.enforcedRules.push(n)}),i.ruleViolations.forEach(n=>{this.violationsMap.has(n.ruleId)?this.violationsMap.get(n.ruleId).push(n):this.violationsMap.set(n.ruleId,[n])}),this.enforcedViolations=i.ruleViolations.filter(function(n){return n.enforcementPolicy==="ENFORCE"}),this.warningViolations=i.ruleViolations.filter(function(n){return n.enforcementPolicy==="WARN"})}),this.currentProcessGroupId$.subscribe(i=>{this.currentProcessGroupId=i}),this.store.select(Ae).pipe(G()).subscribe(i=>{i.permissions.canRead&&i.breadcrumb?this.processGroupName=i.breadcrumb.name:this.processGroupName=this.currentProcessGroupId})}openRule(e){this.store.dispatch(Fo({id:e.id}))}clearRulesTracking(){this.enforcedRules=[],this.warningRules=[],this.violationsMap.clear()}openDocumentation(e){this.store.dispatch(at({request:{backNavigation:{route:["/process-groups",this.currentProcessGroupId],routeBoundary:["/documentation"],context:"Canvas"},parameters:{componentType:C.FlowAnalysisRule,type:e.type,group:e.bundle.group,artifact:e.bundle.artifact,version:e.bundle.version}}}))}viewViolationDetails(e){let i=this.rules.find(n=>n.id===e.ruleId);this.store.dispatch(Ro({violation:e,rule:i}))}getProcessorLink(e){return["/process-groups",e.groupId,e.subjectComponentType,e.subjectId]}getRuleName(e){let i=this.rules.find(function(n){return n.id===e});return i?i.name:""}static{this.\u0275fac=function(i){return new(i||t)(b(F))}}static{this.\u0275cmp=k({type:t,selectors:[["flow-analysis-drawer"]],inputs:{showEnforcedViolations:[1,"showEnforcedViolations"],showWarningViolations:[1,"showWarningViolations"]},outputs:{showEnforcedViolations:"showEnforcedViolationsChange",showWarningViolations:"showWarningViolationsChange"},decls:51,vars:16,consts:[["violationMenuTemplate",""],["unauthorized",""],["menu","matMenu"],["violationMenu","matMenu"],[1,"flow-analysis-drawer","h-full","w-96","p-5"],["type","ProcessGroup",3,"name","id"],[1,"flex","items-center","w-full"],[4,"ngIf"],[1,"mt-5"],[1,"flex","items-center","justify-between"],[1,"text-sm",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"mt-5","mb-2",3,"hidden"],[1,"flex","flex-col","gap-y-2"],["hideToggle",""],[1,"flex","flex-1","justify-start"],[1,"border-b","pb-2"],[1,"mt-2","pb-2","border-b","last-of-type:border-0"],[4,"nifiSpinner"],[1,"ml-1"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","items-center"],["mat-icon-button","","type","button",1,"h-16","w-16","flex","items-center","justify-center",3,"matMenuTriggerFor"],[1,"fa","fa-ellipsis-v"],["mat-menu-item","",3,"click"],[1,"fa","fa-book","mr-2","primary-color"],[1,"fa","fa-cog","mr-2","primary-color"],[1,"error-color","text-sm"],[3,"ngPlural"],["ngPluralCase","=1"],["ngPluralCase","other"],[1,"flex","align-center","justify-between","mt-2"],[1,"flex","flex-col","items-start","ml-2"],[4,"ngIf","ngIfElse"],[1,"text-sm"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rule-menu","w-52","shadow-lg"],[1,"primary-color","text-sm"],[1,"error-color"],[1,"flex","align-center","justify-between","ml-2"],[1,"flex","flex-col","items-start"],["mat-menu-item","",3,"click","disabled"],[1,"fa","fa-info-circle","mr-2","primary-color"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","",3,"routerLink"],[1,"fa","mr-2","fa-long-arrow-right","primary-color"]],template:function(i,n){if(i&1){let c=U();a(0,"div",4),f(1,"component-context",5),a(2,"div",6),v(3,_a,4,1,"ng-container",7),d(),a(4,"div",8)(5,"div",9)(6,"div")(7,"div")(8,"mat-checkbox",10),Vt("ngModelChange",function(y){return I(c),zt(n.showEnforcedViolations,y)||(n.showEnforcedViolations=y),M(y)}),g(9," Show enforced violations "),d()(),a(10,"div")(11,"mat-checkbox",11),Vt("ngModelChange",function(y){return I(c),zt(n.showWarningViolations,y)||(n.showWarningViolations=y),M(y)}),g(12," Show warning violations "),d()()()()(),a(13,"div",12)(14,"div",13)(15,"mat-expansion-panel",14)(16,"mat-expansion-panel-header")(17,"mat-panel-title")(18,"div",15)(19,"div"),g(20),d()()()(),v(21,Sa,2,0),d(),a(22,"mat-expansion-panel",14)(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"div",15)(26,"div"),g(27),d()()()(),v(28,Fa,2,0),d()()(),a(29,"div",12)(30,"div",16)(31,"div"),g(32," Enforced Violations "),a(33,"span"),g(34),d()()(),a(35,"ul"),te(36,Oa,9,8,"li",17,St),d()(),a(38,"div",12)(39,"div",16)(40,"div"),g(41," Warning Violations "),a(42,"span"),g(43),d()()(),a(44,"ul"),te(45,Ga,9,8,"li",17,St),d()()(),v(47,Ba,8,3,"ng-template",null,0,ze)(49,Na,1,0,"ng-template",null,1,ze)}i&2&&(s(),h("name",n.processGroupName)("id",n.currentProcessGroupId),s(2),h("ngIf",n.isAnalysisPending),s(5),Ot("ngModel",n.showEnforcedViolations),s(3),Ot("ngModel",n.showWarningViolations),s(2),h("hidden",n.showEnforcedViolations()||n.showWarningViolations()),s(7),T("Enforced Rules (",n.enforcedRules.length,")"),s(),w(n.rules?21:-1),s(6),T("Warning Rules (",n.warningRules.length,")"),s(),w(n.rules?28:-1),s(),O("mb-5",!n.showWarningViolations()),h("hidden",!n.showEnforcedViolations()),s(5),T("(",n.enforcedViolations.length,")"),s(2),ie(n.enforcedViolations),s(2),h("hidden",!n.showWarningViolations()),s(5),T("(",n.warningViolations.length,")"),s(2),ie(n.warningViolations))},dependencies:[Pe,Ti,Xe,Ii,Mi,rt,Xi,Zi,Ji,xn,hn,pn,un,mn,nn,tn,Ki,ot,qi,Je,Cn,Ie,nt],encapsulation:2})}}return t})();var fe=(()=>{class t{constructor(e,i,n,c,u,y,o,r){this.store=e,this.canvasView=i,this.storage=n,this.canvasUtils=c,this.canvasContextMenu=u,this.canvasActionsService=y,this.dialog=o,this.nifiCommon=r,this.scale=Yt,this.canvasClicked=!1,this.flowAnalysisOpen=this.store.selectSignal(_t),this.store.select(or).pipe(G()).subscribe(l=>{this.scale=l.scale}),this.store.select(dn).pipe(G()).subscribe(l=>{!l.endsWith("/edit")&&!l.endsWith("/history")&&this.storage.setItem("current-canvas-route",l)}),this.store.select(zo).pipe(E(l=>l!=null),G()).subscribe(l=>{this.store.dispatch(On({request:{id:l,transitionRequired:!1}}))}),this.store.select(mt).pipe(E(l=>l==="complete"),Q(()=>this.store.select(Y)),je(),Q(()=>this.store.select(Vo)),E(l=>l!=null),st(()=>this.store.select(ht)),G()).subscribe(([,l])=>{l?this.store.dispatch(ut({skipTransform:!1})):this.store.dispatch(In())}),this.store.select(mt).pipe(E(l=>l==="complete"),Q(()=>this.store.select(Y)),je(),Q(()=>this.store.select(Uo)),E(l=>l!=null),st(()=>[this.store.select(ht),this.store.select(ri)]),G()).subscribe(([,l,_])=>{l?this.store.dispatch(ut({skipTransform:!1})):this.store.dispatch(Ce({request:{allowTransition:_}}))}),this.store.select(mt).pipe(E(l=>l==="complete"),Q(()=>this.store.select(Y)),je(),Q(()=>this.store.select(Go)),E(l=>l.length>0),st(()=>[this.store.select(ht),this.store.select(ri)]),G()).subscribe(([,l,_])=>{l?this.store.dispatch(ut({skipTransform:!1})):this.store.dispatch(Ce({request:{allowTransition:_}}))}),this.store.select(Y).pipe(E(l=>l!=$.id),Q(()=>this.store.select(Bo)),Lt(),Q(l=>{let _;switch(l.componentType){case C.Processor:_=this.store.select(ft(l.id));break;case C.InputPort:_=this.store.select(Yo(l.id));break;case C.OutputPort:_=this.store.select(Ko(l.id));break;case C.ProcessGroup:_=this.store.select($o(l.id));break;case C.RemoteProcessGroup:_=this.store.select(Ho(l.id));break;case C.Connection:_=this.store.select(Zo(l.id));break;case C.Funnel:_=this.store.select(Wo(l.id));break;case C.Label:_=this.store.select(Qo(l.id));break;default:_=gi;break}return _.pipe(E(R=>R!=null),me(1),_e(R=>[l,R]))}),G()).subscribe(([l,_])=>{this.store.dispatch($n({request:{type:l.componentType,uri:_.uri,entity:_}}))}),this.store.select(No).pipe(E(l=>l!=null),G()).subscribe(l=>{this.store.dispatch(Kn({request:{id:l}}))}),this.store.select(Y).pipe(E(l=>l!=$.id),Q(()=>this.store.select(jo)),E(l=>l!=null),G()).subscribe(l=>{l&&this.store.dispatch(qt({request:{source:"canvas",componentType:l.componentType,componentId:l.id}}))}),this.store.select(Lo).pipe(Lt(),G()).subscribe(l=>{this.store.dispatch(qt({request:{source:"canvas",componentType:C.ProcessGroup,componentId:l}}))})}ngOnInit(){this.createSvg(),this.canvasView.init(this.svg,this.canvas),this.store.dispatch(zn())}createSvg(){this.svg=ae("#canvas-container").append("svg").attr("class","canvas-svg").on("contextmenu",e=>{this.canvasClicked=!1,e.target===this.svg.node()&&this.store.dispatch(Gn())}),this.createDefs(),this.initCanvas()}createDefs(){let e=this.svg.append("defs");e.selectAll("marker").data(["normal","ghost","unauthorized","full"]).enter().append("marker").attr("id",y=>y).attr("viewBox","0 0 6 6").attr("refX",5).attr("refY",3).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").attr("class",y=>y==="ghost"?"ghost neutral-color":y==="unauthorized"?"unauthorized error-color":y==="full"?"full error-color":"neutral-contrast").append("path").attr("d","M2,3 L0,6 L6,3 L0,0 z");let i=e.append("filter").attr("id","component-drop-shadow").attr("height","140%").attr("y","-20%");i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",1).attr("result","offsetBlur"),i.append("feFlood").attr("flood-opacity",.4).attr("result","offsetColor"),i.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetColorBlur");let n=i.append("feMerge");n.append("feMergeNode").attr("in","offsetColorBlur"),n.append("feMergeNode").attr("in","SourceGraphic");let c=e.append("filter").attr("id","connection-full-drop-shadow").attr("height","140%").attr("y","-20%");c.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3).attr("result","blur"),c.append("feOffset").attr("in","blur").attr("dx",0).attr("dy",1).attr("result","offsetBlur"),c.append("feFlood").attr("flood-opacity",1).attr("result","offsetColor"),c.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetColorBlur");let u=c.append("feMerge");u.append("feMergeNode").attr("in","offsetColorBlur"),u.append("feMergeNode").attr("in","SourceGraphic")}initCanvas(){let e=[Ht.x,Ht.y];this.canvas=this.svg.append("g").attr("transform","translate("+e+") scale("+Yt+")").attr("pointer-events","all").attr("id","canvas"),this.svg.on("mousedown.selection",i=>{if(this.canvasClicked=!0,i.button!==0){i.stopImmediatePropagation();return}if(i.shiftKey){let n=$t(i,this.canvas.node());this.canvas.append("rect").attr("rx",6).attr("ry",6).attr("x",n[0]).attr("y",n[1]).attr("class","component-selection").attr("width",0).attr("height",0).attr("stroke-width",()=>1/this.scale).attr("stroke-dasharray",()=>4/this.scale).datum(n),i.stopImmediatePropagation(),i.preventDefault()}}).on("mousemove.selection",i=>{if(i.shiftKey){let n=ae("rect.component-selection");if(!n.empty()){let c=n.datum(),u=$t(i,this.canvas.node()),y={};c[0]<u[0]?(y.x=c[0],y.width=u[0]-c[0]):(y.x=u[0],y.width=c[0]-u[0]),c[1]<u[1]?(y.y=c[1],y.height=u[1]-c[1]):(y.y=u[1],y.height=c[1]-u[1]),n.attr("width",y.width).attr("height",y.height).attr("x",y.x).attr("y",y.y),i.stopPropagation()}}}).on("mouseup.selection",()=>{if(!this.canvasClicked)return;this.canvasClicked=!1;let i=ae("rect.component-selection");if(!i.empty()){let n=[],c={x:parseInt(i.attr("x"),10),y:parseInt(i.attr("y"),10),width:parseInt(i.attr("width"),10),height:parseInt(i.attr("height"),10)};Ge("g.component").each((u,y,o)=>{let r=o[y];(ae(r).classed("selected")||u.position.x>=c.x&&u.position.x+u.dimensions.width<=c.x+c.width&&u.position.y>=c.y&&u.position.y+u.dimensions.height<=c.y+c.height)&&n.push({id:u.id,componentType:u.type})}),Ge("g.connection").each((u,y,o)=>{let r=[u.start].concat(u.bends,[u.end]),l=Wt(r,A=>A.x),_=Wt(r,A=>A.y),R=o[y];(ae(R).classed("selected")||l[0]>=c.x&&l[1]<=c.x+c.width&&_[0]>=c.y&&_[1]<=c.y+c.height)&&n.push({id:u.id,componentType:u.type})}),this.store.dispatch(lt({request:{components:n}})),i.remove()}})}ngOnDestroy(){this.store.dispatch(Fn()),this.store.dispatch(Vn()),this.canvasView.destroy()}processKeyboardEvents(e){let i=e.target,n=!1;return i&&(n=i.classList.contains("search-input")||!1),this.dialog.openDialogs.length===0&&!n}executeAction(e,i,n){if(this.processKeyboardEvents(i)){let c=this.canvasUtils.getSelection(),u=this.canvasActionsService.getAction(e);if(u&&(n||u.condition(c)))return u.action(c),!0}return!1}handleKeyDownDelete(e){this.executeAction("delete",e)}handleKeyDownBackspace(e){this.executeAction("delete",e)}handleKeyDownCtrlR(e){this.executeAction("refresh",e,!0)&&e.preventDefault()}handleKeyDownMetaR(e){this.executeAction("refresh",e,!0)&&e.preventDefault()}handleKeyDownEsc(e){this.executeAction("leaveGroup",e)}handleKeyDownCtrlC(e){this.canvasUtils.isClipboardAvailable()&&this.executeAction("copy",e)&&e.preventDefault()}handleKeyDownMetaC(e){this.executeAction("copy",e)&&e.preventDefault()}handlePasteEvent(e){if(!this.processKeyboardEvents(e)||!this.canvasUtils.isPastable())return;let i=e.clipboardData?.getData("text/plain");if(i){let n=this.toCopyResponseEntity(i);n?(this.store.dispatch(Jn({request:n})),e.preventDefault()):this.store.dispatch(Ve({error:"Cannot paste: incompatible format"}))}}handleKeyDownCtrlA(e){this.executeAction("selectAll",e)&&e.preventDefault()}handleKeyDownMetaA(e){this.executeAction("selectAll",e)&&e.preventDefault()}toCopyResponseEntity(e){try{let i=JSON.parse(e),n=["processGroups","remoteProcessGroups","processors","inputPorts","outputPorts","connections","labels","funnels"];if(Object.entries(i).some(o=>n.includes(o[0])&&Array.isArray(o[1])&&o[1].length>0))return i;let u=JSON.parse(e);if(this.nifiCommon.isDefinedAndNotNull(u.flowContents)&&Object.entries(u.flowContents).some(r=>n.includes(r[0])&&Array.isArray(r[1]))){let r={id:u.flowContents.identifier,processGroups:[Fe({},u.flowContents)]};return this.nifiCommon.isDefinedAndNotNull(u.parameterContexts)&&(r.parameterContexts=Fe({},u.parameterContexts)),this.nifiCommon.isDefinedAndNotNull(u.parameterProviders)&&(r.parameterProviders=Fe({},u.parameterProviders)),this.nifiCommon.isDefinedAndNotNull(u.externalControllerServices)&&(r.externalControllerServiceReferences=Fe({},u.externalControllerServices)),r}return null}catch{return null}}static{this.\u0275fac=function(i){return new(i||t)(b(F),b(ce),b(he),b(Z),b(ur),b(De),b(it),b(on))}}static{this.\u0275cmp=k({type:t,selectors:[["fd-canvas"]],hostBindings:function(i,n){i&1&&x("keydown.delete",function(u){return n.handleKeyDownDelete(u)},!1,ee)("keydown.backspace",function(u){return n.handleKeyDownBackspace(u)},!1,ee)("keydown.control.r",function(u){return n.handleKeyDownCtrlR(u)},!1,ee)("keydown.meta.r",function(u){return n.handleKeyDownMetaR(u)},!1,ee)("keydown.escape",function(u){return n.handleKeyDownEsc(u)},!1,ee)("keydown.control.c",function(u){return n.handleKeyDownCtrlC(u)},!1,ee)("keydown.meta.c",function(u){return n.handleKeyDownMetaC(u)},!1,ee)("paste",function(u){return n.handlePasteEvent(u)},!1,ee)("keydown.control.a",function(u){return n.handleKeyDownCtrlA(u)},!1,ee)("keydown.meta.a",function(u){return n.handleKeyDownMetaA(u)},!1,ee)},standalone:!1,decls:12,vars:3,consts:[["contextMenu",""],[1,"flex","flex-col","h-full"],[1,"flex-1"],[1,"h-full"],["mode","side","position","end",3,"opened"],["id","canvas-container",1,"canvas-background","select-none","h-full","w-full",3,"cdkContextMenuTriggerFor"],["menuId","root",3,"menuProvider"]],template:function(i,n){if(i&1&&(a(0,"div",1),f(1,"fd-header"),a(2,"div",2)(3,"mat-sidenav-container",3)(4,"mat-sidenav",4),f(5,"flow-analysis-drawer"),d(),a(6,"mat-sidenav-content"),f(7,"graph-controls")(8,"div",5)(9,"fd-context-menu",6,0),d()()(),f(11,"fd-footer"),d()),i&2){let c=D(10);s(4),h("opened",n.flowAnalysisOpen()),s(4),h("cdkContextMenuTriggerFor",c.menu),s(),h("menuProvider",n.canvasContextMenu)}},dependencies:[Sn,wt,Pn,xt,xr,li,lr,vt,Tt],styles:[".canvas-background[_ngcontent-%COMP%]{background-size:14px 14px;z-index:1;overflow:hidden}[_nghost-%COMP%]     svg.canvas-svg{width:100%;height:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[_nghost-%COMP%]     svg.canvas-svg text.unset{font-style:italic;font-weight:400}[_nghost-%COMP%]     svg.canvas-svg .moveable{cursor:pointer}[_nghost-%COMP%]     svg.canvas-svg g.component rect.border.unauthorized{stroke-width:3;stroke-dasharray:4}[_nghost-%COMP%]     svg.canvas-svg g.component rect.border.ghost{stroke-width:3;stroke-dasharray:4}[_nghost-%COMP%]     svg.canvas-svg g.component.selected rect.border{stroke-width:3}[_nghost-%COMP%]     svg.canvas-svg text.stats-label{font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.stats-value{font-size:12px;font-weight:700}[_nghost-%COMP%]     svg.canvas-svg text.stats-value tspan.size, [_nghost-%COMP%]     svg.canvas-svg text.stats-value tspan.public-ports{font-weight:400}[_nghost-%COMP%]     svg.canvas-svg text.stats-info{font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.bulletin-icon{font-size:13px;font-family:FontAwesome}[_nghost-%COMP%]     svg.canvas-svg text.active-thread-count-icon{font-family:flowfont;font-size:12px;text-anchor:end}[_nghost-%COMP%]     svg.canvas-svg text.component-comments{font-size:10px;font-family:FontAwesome}[_nghost-%COMP%]     svg.canvas-svg text.active-thread-count{font-size:12px;font-weight:700}[_nghost-%COMP%]     svg.canvas-svg text.spin{-webkit-animation-name:_ngcontent-%COMP%_rotate;-webkit-animation-duration:2s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;-moz-animation-name:rotate;-moz-animation-duration:2s;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:linear;animation-name:_ngcontent-%COMP%_rotate;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}@-webkit-keyframes _ngcontent-%COMP%_rotate{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotate{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]     svg.canvas-svg g.component.connectable-destination rect.border{stroke-width:3}[_nghost-%COMP%]     svg.canvas-svg rect.component-selection, [_nghost-%COMP%]     svg.canvas-svg rect.drag-selection, [_nghost-%COMP%]     svg.canvas-svg rect.label-drag{stroke-opacity:.5}[_nghost-%COMP%]     svg.canvas-svg text.add-connect{cursor:pointer;font-family:flowfont;font-size:28px}[_nghost-%COMP%]     svg.canvas-svg text.processor-name{font-size:14px}[_nghost-%COMP%]     svg.canvas-svg text.processor-type{font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.processor-bundle{font-size:10px}[_nghost-%COMP%]     svg.canvas-svg text.processor-icon{font-family:flowfont;font-size:30px}[_nghost-%COMP%]     svg.canvas-svg circle.restricted-background, [_nghost-%COMP%]     svg.canvas-svg circle.is-primary-background{visibility:hidden}[_nghost-%COMP%]     svg.canvas-svg text.restricted{visibility:hidden;font-family:FontAwesome;font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.is-primary{visibility:hidden;font-size:12px;font-weight:700}[_nghost-%COMP%]     svg.canvas-svg text.run-status-icon{font-size:14px;transform-origin:62px 18px 0}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.border.unauthorized{stroke-width:1.5;stroke-dasharray:3,3}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.border.full{stroke-width:1}[_nghost-%COMP%]     svg.canvas-svg g.connection.selected rect.border{stroke-width:3}[_nghost-%COMP%]     svg.canvas-svg path.connector{fill:none;pointer-events:none;stroke-width:3;stroke-opacity:.5;stroke-dasharray:2}[_nghost-%COMP%]     svg.canvas-svg path.connector.connectable{stroke-width:3;stroke-dasharray:4}[_nghost-%COMP%]     svg.canvas-svg g.connection path.connection-path{stroke-width:2;cursor:pointer}[_nghost-%COMP%]     svg.canvas-svg g.connection path.connection-path.unauthorized{stroke-dasharray:3,3}[_nghost-%COMP%]     svg.canvas-svg text.connection-from-run-status, [_nghost-%COMP%]     svg.canvas-svg text.connection-to-run-status, [_nghost-%COMP%]     svg.canvas-svg text.expiration-icon, [_nghost-%COMP%]     svg.canvas-svg text.load-balance-icon, [_nghost-%COMP%]     svg.canvas-svg text.penalized-icon{font-family:FontAwesome;font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.load-balance-icon-184{transform-origin:197px 10px 0}[_nghost-%COMP%]     svg.canvas-svg text.load-balance-icon-200{transform-origin:213px 10px 0}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.backpressure-object>title>tspan, [_nghost-%COMP%]     svg.canvas-svg g.connection rect.backpressure-data-size>title>tspan{display:block}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.backpressure-percent{pointer-events:none}[_nghost-%COMP%]     svg.canvas-svg g.connection.grouped path.connection-path, [_nghost-%COMP%]     svg.canvas-svg g.connection.grouped rect.connection-label{stroke-width:3}[_nghost-%COMP%]     svg.canvas-svg g.connection.ghost path.connection-path, [_nghost-%COMP%]     svg.canvas-svg g.connection.ghost rect.connection-label{stroke-dasharray:4}[_nghost-%COMP%]     svg.canvas-svg g.connection path.connection-selection-path{visibility:hidden;stroke-width:1}[_nghost-%COMP%]     svg.canvas-svg g.connection path.connection-path-selectable{visibility:hidden;stroke-width:20;cursor:pointer}[_nghost-%COMP%]     svg.canvas-svg g.connection.selected path.connection-selection-path{visibility:visible}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.linepoint{visibility:hidden;stroke-width:1}[_nghost-%COMP%]     svg.canvas-svg g.connection.selected rect.linepoint{visibility:visible}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.midpoint{cursor:pointer}[_nghost-%COMP%]     svg.canvas-svg g.connection rect.endpoint{cursor:pointer}[_nghost-%COMP%]     svg.canvas-svg g.label path.labelpoint{stroke-width:1;cursor:se-resize}[_nghost-%COMP%]     svg.canvas-svg text.funnel-icon{font-family:flowfont;font-size:30px}[_nghost-%COMP%]     svg.canvas-svg text.port-name{font-size:14px}[_nghost-%COMP%]     svg.canvas-svg text.port-icon{font-family:flowfont;font-size:30px}[_nghost-%COMP%]     svg.canvas-svg text.port-transmission-icon{font-size:15px}[_nghost-%COMP%]     svg.canvas-svg text.active-thread-count{font-size:10px}[_nghost-%COMP%]     svg.canvas-svg text.process-group-name{font-size:14px}[_nghost-%COMP%]     svg.canvas-svg text.version-control{font-family:FontAwesome;font-size:18px;visibility:hidden}[_nghost-%COMP%]     svg.canvas-svg text.process-group-contents-count{font-size:15px;font-weight:500}[_nghost-%COMP%]     svg.canvas-svg g.process-group.drop rect.border{stroke-width:3}[_nghost-%COMP%]     svg.canvas-svg text.process-group-contents-icon{font-size:15px}[_nghost-%COMP%]     svg.canvas-svg text.remote-process-group-name{font-size:14px}[_nghost-%COMP%]     svg.canvas-svg text.remote-process-group-uri{font-size:12px}[_nghost-%COMP%]     svg.canvas-svg text.remote-process-group-transmission-status{font-size:15px}[_nghost-%COMP%]     svg.canvas-svg text.remote-process-group-transmission-secure{font-family:FontAwesome;font-size:13px}[_nghost-%COMP%]     svg.canvas-svg text.remote-process-group-last-refresh{font-size:10px}"]})}}return t})();var Pr=t=>{let p=P(F),e=P(Tn),i=P(se),n=P(vn),c=P(et),u=t.paramMap.get("id");return u?p.select(ft(u)).pipe(Q(y=>y?mi(y):e.getProcessor(u).pipe(vi(o=>(p.dispatch(Di({errorDetail:{title:"Unable to Open Advanced UI",message:c.getErrorString(o)}})),It)))),_e(y=>{let o=i.getRevision(y),r=!(y.status.aggregateSnapshot.runStatus==="Running"||y.status.aggregateSnapshot.activeThreadCount>0)&&y.permissions.canWrite;return{url:y.component.config.customUiUrl,id:y.id,clientId:o.clientId,revision:o.version,editable:r,disconnectedNodeAcknowledged:n.isDisconnectionAcknowledged()}}),me(1)):It};var La=[{path:`${C.Processor}/:id/advanced`,resolve:{advancedUiParams:Pr},component:bn},{path:"",component:fe,children:[{path:"bulk/:ids",component:fe},{path:"edit",component:fe},{path:"history",component:fe},{path:":type/:id",component:fe,children:[{path:"edit",component:fe},{path:"history",component:fe}]}]}],Tr=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=be({type:t})}static{this.\u0275inj=we({imports:[Ut.forChild(La),Ut]})}}return t})();var Qp=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=be({type:t})}static{this.\u0275inj=we({imports:[Pe,Tr,wt,xt,dr,Tt]})}}return t})();export{Qp as CanvasModule};
