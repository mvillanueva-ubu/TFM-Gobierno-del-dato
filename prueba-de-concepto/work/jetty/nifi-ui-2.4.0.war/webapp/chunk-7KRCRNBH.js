import{a as un,b as pn,d as dn,e as ke,i as ce,n as It,o as kt,p as hn,za as pe}from"./chunk-SZKED3CF.js";import{a as Ot}from"./chunk-J5U3LEM3.js";import{a as In,c as En,f as Ne}from"./chunk-ADIACNFY.js";import{Ba as wn,Qa as Kt,Ra as Pn,U as vn,ca as xn,d as fn,na as Cn,sa as ue,w as mn,x as le,xa as bn,y as gn,z as yn,za as Sn}from"./chunk-4HCP6ZL4.js";import{i as m,j as $t,k as jt,l as Pt,t as on,u as an,w as cn,x as ln}from"./chunk-ZSGRQJXI.js";import{a as Lt}from"./chunk-EHRR3YRI.js";import{a as rn,b as Yt}from"./chunk-ZLF5NQAA.js";import{a as Mt}from"./chunk-VO6YYVE4.js";import{a as Ft}from"./chunk-3DWBQ3AZ.js";import{a as Dt}from"./chunk-RJ7V3MDH.js";import{a as sn}from"./chunk-47SKYL5X.js";import{b as tt}from"./chunk-AGWUCOZB.js";import{c as tn}from"./chunk-5TWJAVHX.js";import{$a as Te,Bc as Je,Dc as ae,Hb as gt,Ib as _t,Jb as Ze,Je as N,La as at,Va as oe,Vc as ht,W as mt,X as V,ba as U,bb as Ht,c as ft,cb as He,ea as S,fa as ie,hb as Ae,hd as q,jb as Ye,kb as Ke,kd as k,lb as Qe,mb as ut,nb as dt,ta as re,te as nn,vb as Re,xd as en,z as Y}from"./chunk-6VUBUCMU.js";import{a as X,b as it,d as We,e as Xe,f as ee}from"./chunk-EQDQRRRY.js";var Fn=We((gi,fe)=>{"use strict";(function(){var a=Object.assign||function(n){for(var w,A=1;A<arguments.length;A++){w=arguments[A];for(var L in w)d(w,L)&&(n[L]=w[L])}return n},i=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},t=e(function(n){return n===1?"\u03C7\u03C1\u03CC\u03BD\u03BF\u03C2":"\u03C7\u03C1\u03CC\u03BD\u03B9\u03B1"},function(n){return n===1?"\u03BC\u03AE\u03BD\u03B1\u03C2":"\u03BC\u03AE\u03BD\u03B5\u03C2"},function(n){return n===1?"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B1":"\u03B5\u03B2\u03B4\u03BF\u03BC\u03AC\u03B4\u03B5\u03C2"},function(n){return n===1?"\u03BC\u03AD\u03C1\u03B1":"\u03BC\u03AD\u03C1\u03B5\u03C2"},function(n){return n===1?"\u03CE\u03C1\u03B1":"\u03CE\u03C1\u03B5\u03C2"},function(n){return n===1?"\u03BB\u03B5\u03C0\u03C4\u03CC":"\u03BB\u03B5\u03C0\u03C4\u03AC"},function(n){return n===1?"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03BF":"\u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03CC\u03BB\u03B5\u03C0\u03C4\u03B1"},function(n){return(n===1?"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03CC":"\u03C7\u03B9\u03BB\u03B9\u03BF\u03C3\u03C4\u03AC")+" \u03C4\u03BF\u03C5 \u03B4\u03B5\u03C5\u03C4\u03B5\u03C1\u03BF\u03BB\u03AD\u03C0\u03C4\u03BF\u03C5"},","),s={af:e("jaar",function(n){return"maand"+(n===1?"":"e")},function(n){return n===1?"week":"weke"},function(n){return n===1?"dag":"dae"},function(n){return n===1?"uur":"ure"},function(n){return n===1?"minuut":"minute"},function(n){return"sekonde"+(n===1?"":"s")},function(n){return"millisekonde"+(n===1?"":"s")},","),am:e("\u12D3\u1218\u1275","\u12C8\u122D","\u1233\u121D\u1295\u1275","\u1240\u1295","\u1230\u12D3\u1275","\u12F0\u1242\u1243","\u1230\u12A8\u1295\u12F5","\u121A\u120A\u1230\u12A8\u1295\u12F5"),ar:a(e(function(n){return["\u0633\u0646\u0629","\u0633\u0646\u062A\u0627\u0646","\u0633\u0646\u0648\u0627\u062A"][r(n)]},function(n){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][r(n)]},function(n){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064A\u0646","\u0623\u0633\u0627\u0628\u064A\u0639"][r(n)]},function(n){return["\u064A\u0648\u0645","\u064A\u0648\u0645\u064A\u0646","\u0623\u064A\u0627\u0645"][r(n)]},function(n){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062A\u064A\u0646","\u0633\u0627\u0639\u0627\u062A"][r(n)]},function(n){return["\u062F\u0642\u064A\u0642\u0629","\u062F\u0642\u064A\u0642\u062A\u0627\u0646","\u062F\u0642\u0627\u0626\u0642"][r(n)]},function(n){return["\u062B\u0627\u0646\u064A\u0629","\u062B\u0627\u0646\u064A\u062A\u0627\u0646","\u062B\u0648\u0627\u0646\u064A"][r(n)]},function(n){return["\u062C\u0632\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u062C\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629","\u0623\u062C\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062B\u0627\u0646\u064A\u0629"][r(n)]},","),{delimiter:" \uFEED ",_hideCountIf2:!0,_digitReplacements:["\u06F0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:e(function(n){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][c(n)]},function(n){return["\u043C\u0435\u0441\u0435\u0446\u0430","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][c(n)]},function(n){return["\u0441\u0435\u0434\u043C\u0438\u0446\u0438","\u0441\u0435\u0434\u043C\u0438\u0446\u0430","\u0441\u0435\u0434\u043C\u0438\u0446\u0438"][c(n)]},function(n){return["\u0434\u043D\u0438","\u0434\u0435\u043D","\u0434\u043D\u0438"][c(n)]},function(n){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][c(n)]},function(n){return["\u043C\u0438\u043D\u0443\u0442\u0438","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u0438"][c(n)]},function(n){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][c(n)]},function(n){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][c(n)]},","),bn:e("\u09AC\u099B\u09B0","\u09AE\u09BE\u09B8","\u09B8\u09AA\u09CD\u09A4\u09BE\u09B9","\u09A6\u09BF\u09A8","\u0998\u09A8\u09CD\u099F\u09BE","\u09AE\u09BF\u09A8\u09BF\u099F","\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1","\u09AE\u09BF\u09B2\u09BF\u09B8\u09C7\u0995\u09C7\u09A8\u09CD\u09A1"),ca:e(function(n){return"any"+(n===1?"":"s")},function(n){return"mes"+(n===1?"":"os")},function(n){return"setman"+(n===1?"a":"es")},function(n){return"di"+(n===1?"a":"es")},function(n){return"hor"+(n===1?"a":"es")},function(n){return"minut"+(n===1?"":"s")},function(n){return"segon"+(n===1?"":"s")},function(n){return"milisegon"+(n===1?"":"s")},","),ckb:e("\u0633\u0627\u06B5","\u0645\u0627\u0646\u06AF","\u0647\u06D5\u0641\u062A\u06D5","\u0695\u06C6\u0698","\u06A9\u0627\u0698\u06CE\u0631","\u062E\u0648\u0644\u06D5\u06A9","\u0686\u0631\u06A9\u06D5","\u0645\u06CC\u0644\u06CC \u0686\u0631\u06A9\u06D5","."),cs:e(function(n){return["rok","roku","roky","let"][u(n)]},function(n){return["m\u011Bs\xEDc","m\u011Bs\xEDce","m\u011Bs\xEDce","m\u011Bs\xEDc\u016F"][u(n)]},function(n){return["t\xFDden","t\xFDdne","t\xFDdny","t\xFDdn\u016F"][u(n)]},function(n){return["den","dne","dny","dn\xED"][u(n)]},function(n){return["hodina","hodiny","hodiny","hodin"][u(n)]},function(n){return["minuta","minuty","minuty","minut"][u(n)]},function(n){return["sekunda","sekundy","sekundy","sekund"][u(n)]},function(n){return["milisekunda","milisekundy","milisekundy","milisekund"][u(n)]},","),cy:e("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:e("\xE5r",function(n){return"m\xE5ned"+(n===1?"":"er")},function(n){return"uge"+(n===1?"":"r")},function(n){return"dag"+(n===1?"":"e")},function(n){return"time"+(n===1?"":"r")},function(n){return"minut"+(n===1?"":"ter")},function(n){return"sekund"+(n===1?"":"er")},function(n){return"millisekund"+(n===1?"":"er")},","),de:e(function(n){return"Jahr"+(n===1?"":"e")},function(n){return"Monat"+(n===1?"":"e")},function(n){return"Woche"+(n===1?"":"n")},function(n){return"Tag"+(n===1?"":"e")},function(n){return"Stunde"+(n===1?"":"n")},function(n){return"Minute"+(n===1?"":"n")},function(n){return"Sekunde"+(n===1?"":"n")},function(n){return"Millisekunde"+(n===1?"":"n")},","),el:t,en:e(function(n){return"year"+(n===1?"":"s")},function(n){return"month"+(n===1?"":"s")},function(n){return"week"+(n===1?"":"s")},function(n){return"day"+(n===1?"":"s")},function(n){return"hour"+(n===1?"":"s")},function(n){return"minute"+(n===1?"":"s")},function(n){return"second"+(n===1?"":"s")},function(n){return"millisecond"+(n===1?"":"s")}),eo:e(function(n){return"jaro"+(n===1?"":"j")},function(n){return"monato"+(n===1?"":"j")},function(n){return"semajno"+(n===1?"":"j")},function(n){return"tago"+(n===1?"":"j")},function(n){return"horo"+(n===1?"":"j")},function(n){return"minuto"+(n===1?"":"j")},function(n){return"sekundo"+(n===1?"":"j")},function(n){return"milisekundo"+(n===1?"":"j")},","),es:e(function(n){return"a\xF1o"+(n===1?"":"s")},function(n){return"mes"+(n===1?"":"es")},function(n){return"semana"+(n===1?"":"s")},function(n){return"d\xEDa"+(n===1?"":"s")},function(n){return"hora"+(n===1?"":"s")},function(n){return"minuto"+(n===1?"":"s")},function(n){return"segundo"+(n===1?"":"s")},function(n){return"milisegundo"+(n===1?"":"s")},","),et:e(function(n){return"aasta"+(n===1?"":"t")},function(n){return"kuu"+(n===1?"":"d")},function(n){return"n\xE4dal"+(n===1?"":"at")},function(n){return"p\xE4ev"+(n===1?"":"a")},function(n){return"tund"+(n===1?"":"i")},function(n){return"minut"+(n===1?"":"it")},function(n){return"sekund"+(n===1?"":"it")},function(n){return"millisekund"+(n===1?"":"it")},","),eu:e("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:e("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062A\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062A","\u062F\u0642\u06CC\u0642\u0647","\u062B\u0627\u0646\u06CC\u0647","\u0645\u06CC\u0644\u06CC \u062B\u0627\u0646\u06CC\u0647"),fi:e(function(n){return n===1?"vuosi":"vuotta"},function(n){return n===1?"kuukausi":"kuukautta"},function(n){return"viikko"+(n===1?"":"a")},function(n){return"p\xE4iv\xE4"+(n===1?"":"\xE4")},function(n){return"tunti"+(n===1?"":"a")},function(n){return"minuutti"+(n===1?"":"a")},function(n){return"sekunti"+(n===1?"":"a")},function(n){return"millisekunti"+(n===1?"":"a")},","),fo:e("\xE1r",function(n){return n===1?"m\xE1na\xF0ur":"m\xE1na\xF0ir"},function(n){return n===1?"vika":"vikur"},function(n){return n===1?"dagur":"dagar"},function(n){return n===1?"t\xEDmi":"t\xEDmar"},function(n){return n===1?"minuttur":"minuttir"},"sekund","millisekund",","),fr:e(function(n){return"an"+(n>=2?"s":"")},"mois",function(n){return"semaine"+(n>=2?"s":"")},function(n){return"jour"+(n>=2?"s":"")},function(n){return"heure"+(n>=2?"s":"")},function(n){return"minute"+(n>=2?"s":"")},function(n){return"seconde"+(n>=2?"s":"")},function(n){return"milliseconde"+(n>=2?"s":"")},","),gr:t,he:e(function(n){return n===1?"\u05E9\u05E0\u05D4":"\u05E9\u05E0\u05D9\u05DD"},function(n){return n===1?"\u05D7\u05D5\u05D3\u05E9":"\u05D7\u05D5\u05D3\u05E9\u05D9\u05DD"},function(n){return n===1?"\u05E9\u05D1\u05D5\u05E2":"\u05E9\u05D1\u05D5\u05E2\u05D5\u05EA"},function(n){return n===1?"\u05D9\u05D5\u05DD":"\u05D9\u05DE\u05D9\u05DD"},function(n){return n===1?"\u05E9\u05E2\u05D4":"\u05E9\u05E2\u05D5\u05EA"},function(n){return n===1?"\u05D3\u05E7\u05D4":"\u05D3\u05E7\u05D5\u05EA"},function(n){return n===1?"\u05E9\u05E0\u05D9\u05D4":"\u05E9\u05E0\u05D9\u05D5\u05EA"},function(n){return n===1?"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D9\u05D4":"\u05DE\u05D9\u05DC\u05D9\u05E9\u05E0\u05D9\u05D5\u05EA"}),hr:e(function(n){return n%10===2||n%10===3||n%10===4?"godine":"godina"},function(n){return n===1?"mjesec":n===2||n===3||n===4?"mjeseca":"mjeseci"},function(n){return n%10===1&&n!==11?"tjedan":"tjedna"},function(n){return n===1?"dan":"dana"},function(n){return n===1?"sat":n===2||n===3||n===4?"sata":"sati"},function(n){var w=n%10;return(w===2||w===3||w===4)&&(n<10||n>14)?"minute":"minuta"},function(n){var w=n%10;return w===5||Math.floor(n)===n&&n>=10&&n<=19?"sekundi":w===1?"sekunda":w===2||w===3||w===4?"sekunde":"sekundi"},function(n){return n===1?"milisekunda":n%10===2||n%10===3||n%10===4?"milisekunde":"milisekundi"},","),hi:e("\u0938\u093E\u0932",function(n){return n===1?"\u092E\u0939\u0940\u0928\u093E":"\u092E\u0939\u0940\u0928\u0947"},function(n){return n===1?"\u0939\u095E\u094D\u0924\u093E":"\u0939\u092B\u094D\u0924\u0947"},"\u0926\u093F\u0928",function(n){return n===1?"\u0918\u0902\u091F\u093E":"\u0918\u0902\u091F\u0947"},"\u092E\u093F\u0928\u091F","\u0938\u0947\u0915\u0902\u0921","\u092E\u093F\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:e("\xE9v","h\xF3nap","h\xE9t","nap","\xF3ra","perc","m\xE1sodperc","ezredm\xE1sodperc",","),id:e("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:e("\xE1r",function(n){return"m\xE1nu\xF0"+(n===1?"ur":"ir")},function(n){return"vik"+(n===1?"a":"ur")},function(n){return"dag"+(n===1?"ur":"ar")},function(n){return"klukkut\xEDm"+(n===1?"i":"ar")},function(n){return"m\xEDn\xFAt"+(n===1?"a":"ur")},function(n){return"sek\xFAnd"+(n===1?"a":"ur")},function(n){return"millisek\xFAnd"+(n===1?"a":"ur")}),it:e(function(n){return"ann"+(n===1?"o":"i")},function(n){return"mes"+(n===1?"e":"i")},function(n){return"settiman"+(n===1?"a":"e")},function(n){return"giorn"+(n===1?"o":"i")},function(n){return"or"+(n===1?"a":"e")},function(n){return"minut"+(n===1?"o":"i")},function(n){return"second"+(n===1?"o":"i")},function(n){return"millisecond"+(n===1?"o":"i")},","),ja:e("\u5E74","\u30F6\u6708","\u9031","\u65E5","\u6642\u9593","\u5206","\u79D2","\u30DF\u30EA\u79D2"),km:e("\u1786\u17D2\u1793\u17B6\u17C6","\u1781\u17C2","\u179F\u1794\u17D2\u178F\u17B6\u17A0\u17CD","\u1790\u17D2\u1784\u17C3","\u1798\u17C9\u17C4\u1784","\u1793\u17B6\u1791\u17B8","\u179C\u17B7\u1793\u17B6\u1791\u17B8","\u1798\u17B7\u179B\u17D2\u179B\u17B8\u179C\u17B7\u1793\u17B6\u1791\u17B8"),kn:e(function(n){return n===1?"\u0CB5\u0CB0\u0CCD\u0CB7":"\u0CB5\u0CB0\u0CCD\u0CB7\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1":"\u0CA4\u0CBF\u0C82\u0C97\u0CB3\u0CC1\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CB5\u0CBE\u0CB0":"\u0CB5\u0CBE\u0CB0\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CA6\u0CBF\u0CA8":"\u0CA6\u0CBF\u0CA8\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0C97\u0C82\u0C9F\u0CC6":"\u0C97\u0C82\u0C9F\u0CC6\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7":"\u0CA8\u0CBF\u0CAE\u0CBF\u0CB7\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"},function(n){return n===1?"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CCD":"\u0CAE\u0CBF\u0CB2\u0CBF\u0CB8\u0CC6\u0C95\u0CC6\u0C82\u0CA1\u0CC1\u0C97\u0CB3\u0CC1"}),ko:e("\uB144","\uAC1C\uC6D4","\uC8FC\uC77C","\uC77C","\uC2DC\uAC04","\uBD84","\uCD08","\uBC00\uB9AC \uCD08"),ku:e("sal","meh","hefte","roj","seet","deqe","saniye","m\xEEl\xEE\xE7irk",","),lo:e("\u0E9B\u0EB5","\u0EC0\u0E94\u0EB7\u0EAD\u0E99","\u0EAD\u0EB2\u0E97\u0EB4\u0E94","\u0EA1\u0EB7\u0EC9","\u0E8A\u0EBB\u0EC8\u0EA7\u0EC2\u0EA1\u0E87","\u0E99\u0EB2\u0E97\u0EB5","\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5","\u0EA1\u0EB4\u0E99\u0EA5\u0EB4\u0EA7\u0EB4\u0E99\u0EB2\u0E97\u0EB5",","),lt:e(function(n){return n%10===0||n%100>=10&&n%100<=20?"met\u0173":"metai"},function(n){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][p(n)]},function(n){return["savait\u0117","savait\u0117s","savai\u010Di\u0173"][p(n)]},function(n){return["diena","dienos","dien\u0173"][p(n)]},function(n){return["valanda","valandos","valand\u0173"][p(n)]},function(n){return["minut\u0117","minut\u0117s","minu\u010Di\u0173"][p(n)]},function(n){return["sekund\u0117","sekund\u0117s","sekund\u017Ei\u0173"][p(n)]},function(n){return["milisekund\u0117","milisekund\u0117s","milisekund\u017Ei\u0173"][p(n)]},","),lv:e(function(n){return f(n)?"gads":"gadi"},function(n){return f(n)?"m\u0113nesis":"m\u0113ne\u0161i"},function(n){return f(n)?"ned\u0113\u013Ca":"ned\u0113\u013Cas"},function(n){return f(n)?"diena":"dienas"},function(n){return f(n)?"stunda":"stundas"},function(n){return f(n)?"min\u016Bte":"min\u016Btes"},function(n){return f(n)?"sekunde":"sekundes"},function(n){return f(n)?"milisekunde":"milisekundes"},","),mk:e(function(n){return n===1?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0438"},function(n){return n===1?"\u043C\u0435\u0441\u0435\u0446":"\u043C\u0435\u0441\u0435\u0446\u0438"},function(n){return n===1?"\u043D\u0435\u0434\u0435\u043B\u0430":"\u043D\u0435\u0434\u0435\u043B\u0438"},function(n){return n===1?"\u0434\u0435\u043D":"\u0434\u0435\u043D\u0430"},function(n){return n===1?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(n){return n===1?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0438"},function(n){return n===1?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},function(n){return n===1?"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430":"\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438"},","),mn:e("\u0436\u0438\u043B","\u0441\u0430\u0440","\u0434\u043E\u043B\u043E\u043E \u0445\u043E\u043D\u043E\u0433","\u04E9\u0434\u04E9\u0440","\u0446\u0430\u0433","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),mr:e(function(n){return n===1?"\u0935\u0930\u094D\u0937":"\u0935\u0930\u094D\u0937\u0947"},function(n){return n===1?"\u092E\u0939\u093F\u0928\u093E":"\u092E\u0939\u093F\u0928\u0947"},function(n){return n===1?"\u0906\u0920\u0935\u0921\u093E":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093F\u0935\u0938","\u0924\u093E\u0938",function(n){return n===1?"\u092E\u093F\u0928\u093F\u091F":"\u092E\u093F\u0928\u093F\u091F\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092E\u093F\u0932\u093F\u0938\u0947\u0915\u0902\u0926"),ms:e("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:e("jaar",function(n){return n===1?"maand":"maanden"},function(n){return n===1?"week":"weken"},function(n){return n===1?"dag":"dagen"},"uur",function(n){return n===1?"minuut":"minuten"},function(n){return n===1?"seconde":"seconden"},function(n){return n===1?"milliseconde":"milliseconden"},","),no:e("\xE5r",function(n){return"m\xE5ned"+(n===1?"":"er")},function(n){return"uke"+(n===1?"":"r")},function(n){return"dag"+(n===1?"":"er")},function(n){return"time"+(n===1?"":"r")},function(n){return"minutt"+(n===1?"":"er")},function(n){return"sekund"+(n===1?"":"er")},function(n){return"millisekund"+(n===1?"":"er")},","),pl:e(function(n){return["rok","roku","lata","lat"][o(n)]},function(n){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][o(n)]},function(n){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][o(n)]},function(n){return["dzie\u0144","dnia","dni","dni"][o(n)]},function(n){return["godzina","godziny","godziny","godzin"][o(n)]},function(n){return["minuta","minuty","minuty","minut"][o(n)]},function(n){return["sekunda","sekundy","sekundy","sekund"][o(n)]},function(n){return["milisekunda","milisekundy","milisekundy","milisekund"][o(n)]},","),pt:e(function(n){return"ano"+(n===1?"":"s")},function(n){return n===1?"m\xEAs":"meses"},function(n){return"semana"+(n===1?"":"s")},function(n){return"dia"+(n===1?"":"s")},function(n){return"hora"+(n===1?"":"s")},function(n){return"minuto"+(n===1?"":"s")},function(n){return"segundo"+(n===1?"":"s")},function(n){return"milissegundo"+(n===1?"":"s")},","),ro:e(function(n){return n===1?"an":"ani"},function(n){return n===1?"lun\u0103":"luni"},function(n){return n===1?"s\u0103pt\u0103m\xE2n\u0103":"s\u0103pt\u0103m\xE2ni"},function(n){return n===1?"zi":"zile"},function(n){return n===1?"or\u0103":"ore"},function(n){return n===1?"minut":"minute"},function(n){return n===1?"secund\u0103":"secunde"},function(n){return n===1?"milisecund\u0103":"milisecunde"},","),ru:e(function(n){return["\u043B\u0435\u0442","\u0433\u043E\u0434","\u0433\u043E\u0434\u0430"][c(n)]},function(n){return["\u043C\u0435\u0441\u044F\u0446\u0435\u0432","\u043C\u0435\u0441\u044F\u0446","\u043C\u0435\u0441\u044F\u0446\u0430"][c(n)]},function(n){return["\u043D\u0435\u0434\u0435\u043B\u044C","\u043D\u0435\u0434\u0435\u043B\u044F","\u043D\u0435\u0434\u0435\u043B\u0438"][c(n)]},function(n){return["\u0434\u043D\u0435\u0439","\u0434\u0435\u043D\u044C","\u0434\u043D\u044F"][c(n)]},function(n){return["\u0447\u0430\u0441\u043E\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][c(n)]},function(n){return["\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442\u044B"][c(n)]},function(n){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][c(n)]},function(n){return["\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u044B"][c(n)]},","),sq:e(function(n){return n===1?"vit":"vjet"},"muaj","jav\xEB","dit\xEB","or\xEB",function(n){return"minut"+(n===1?"\xEB":"a")},function(n){return"sekond"+(n===1?"\xEB":"a")},function(n){return"milisekond"+(n===1?"\xEB":"a")},","),sr:e(function(n){return["\u0433\u043E\u0434\u0438\u043D\u0438","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0435"][c(n)]},function(n){return["\u043C\u0435\u0441\u0435\u0446\u0438","\u043C\u0435\u0441\u0435\u0446","\u043C\u0435\u0441\u0435\u0446\u0430"][c(n)]},function(n){return["\u043D\u0435\u0434\u0435\u0459\u0438","\u043D\u0435\u0434\u0435\u0459\u0430","\u043D\u0435\u0434\u0435\u0459\u0435"][c(n)]},function(n){return["\u0434\u0430\u043D\u0438","\u0434\u0430\u043D","\u0434\u0430\u043D\u0430"][c(n)]},function(n){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][c(n)]},function(n){return["\u043C\u0438\u043D\u0443\u0442\u0430","\u043C\u0438\u043D\u0443\u0442","\u043C\u0438\u043D\u0443\u0442\u0430"][c(n)]},function(n){return["\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][c(n)]},function(n){return["\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0438","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0438\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0435"][c(n)]},","),ta:e(function(n){return n===1?"\u0BB5\u0BB0\u0BC1\u0B9F\u0BAE\u0BCD":"\u0B86\u0BA3\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD"},function(n){return n===1?"\u0BAE\u0BBE\u0BA4\u0BAE\u0BCD":"\u0BAE\u0BBE\u0BA4\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(n){return n===1?"\u0BB5\u0BBE\u0BB0\u0BAE\u0BCD":"\u0BB5\u0BBE\u0BB0\u0B99\u0BCD\u0B95\u0BB3\u0BCD"},function(n){return n===1?"\u0BA8\u0BBE\u0BB3\u0BCD":"\u0BA8\u0BBE\u0B9F\u0BCD\u0B95\u0BB3\u0BCD"},function(n){return n===1?"\u0BAE\u0BA3\u0BBF":"\u0BAE\u0BA3\u0BBF\u0BA8\u0BC7\u0BB0\u0BAE\u0BCD"},function(n){return"\u0BA8\u0BBF\u0BAE\u0BBF\u0B9F"+(n===1?"\u0BAE\u0BCD":"\u0B99\u0BCD\u0B95\u0BB3\u0BCD")},function(n){return"\u0BB5\u0BBF\u0BA9\u0BBE\u0B9F\u0BBF"+(n===1?"":"\u0B95\u0BB3\u0BCD")},function(n){return"\u0BAE\u0BBF\u0BB2\u0BCD\u0BB2\u0BBF \u0BB5\u0BBF\u0BA8\u0BBE\u0B9F\u0BBF"+(n===1?"":"\u0B95\u0BB3\u0BCD")}),te:e(function(n){return"\u0C38\u0C02\u0C35\u0C24\u0C4D\u0C38"+(n===1?"\u0C30\u0C02":"\u0C30\u0C3E\u0C32")},function(n){return"\u0C28\u0C46\u0C32"+(n===1?"":"\u0C32")},function(n){return n===1?"\u0C35\u0C3E\u0C30\u0C02":"\u0C35\u0C3E\u0C30\u0C3E\u0C32\u0C41"},function(n){return"\u0C30\u0C4B\u0C1C\u0C41"+(n===1?"":"\u0C32\u0C41")},function(n){return"\u0C17\u0C02\u0C1F"+(n===1?"":"\u0C32\u0C41")},function(n){return n===1?"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C02":"\u0C28\u0C3F\u0C2E\u0C3F\u0C37\u0C3E\u0C32\u0C41"},function(n){return n===1?"\u0C38\u0C46\u0C15\u0C28\u0C41":"\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"},function(n){return n===1?"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D":"\u0C2E\u0C3F\u0C32\u0C4D\u0C32\u0C40\u0C38\u0C46\u0C15\u0C28\u0C4D\u0C32\u0C41"}),uk:e(function(n){return["\u0440\u043E\u043A\u0456\u0432","\u0440\u0456\u043A","\u0440\u043E\u043A\u0438"][c(n)]},function(n){return["\u043C\u0456\u0441\u044F\u0446\u0456\u0432","\u043C\u0456\u0441\u044F\u0446\u044C","\u043C\u0456\u0441\u044F\u0446\u0456"][c(n)]},function(n){return["\u0442\u0438\u0436\u043D\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043D\u044C","\u0442\u0438\u0436\u043D\u0456"][c(n)]},function(n){return["\u0434\u043D\u0456\u0432","\u0434\u0435\u043D\u044C","\u0434\u043D\u0456"][c(n)]},function(n){return["\u0433\u043E\u0434\u0438\u043D","\u0433\u043E\u0434\u0438\u043D\u0430","\u0433\u043E\u0434\u0438\u043D\u0438"][c(n)]},function(n){return["\u0445\u0432\u0438\u043B\u0438\u043D","\u0445\u0432\u0438\u043B\u0438\u043D\u0430","\u0445\u0432\u0438\u043B\u0438\u043D\u0438"][c(n)]},function(n){return["\u0441\u0435\u043A\u0443\u043D\u0434","\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][c(n)]},function(n){return["\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0430","\u043C\u0456\u043B\u0456\u0441\u0435\u043A\u0443\u043D\u0434\u0438"][c(n)]},","),ur:e("\u0633\u0627\u0644",function(n){return n===1?"\u0645\u06C1\u06CC\u0646\u06C1":"\u0645\u06C1\u06CC\u0646\u06D2"},function(n){return n===1?"\u06C1\u0641\u062A\u06C1":"\u06C1\u0641\u062A\u06D2"},"\u062F\u0646",function(n){return n===1?"\u06AF\u06BE\u0646\u0679\u06C1":"\u06AF\u06BE\u0646\u0679\u06D2"},"\u0645\u0646\u0679","\u0633\u06CC\u06A9\u0646\u0688","\u0645\u0644\u06CC \u0633\u06CC\u06A9\u0646\u0688"),sk:e(function(n){return["rok","roky","roky","rokov"][u(n)]},function(n){return["mesiac","mesiace","mesiace","mesiacov"][u(n)]},function(n){return["t\xFD\u017Ede\u0148","t\xFD\u017Edne","t\xFD\u017Edne","t\xFD\u017Ed\u0148ov"][u(n)]},function(n){return["de\u0148","dni","dni","dn\xED"][u(n)]},function(n){return["hodina","hodiny","hodiny","hod\xEDn"][u(n)]},function(n){return["min\xFAta","min\xFAty","min\xFAty","min\xFAt"][u(n)]},function(n){return["sekunda","sekundy","sekundy","sek\xFAnd"][u(n)]},function(n){return["milisekunda","milisekundy","milisekundy","milisek\xFAnd"][u(n)]},","),sl:e(function(n){return n%10===1?"leto":n%100===2?"leti":n%100===3||n%100===4||Math.floor(n)!==n&&n%100<=5?"leta":"let"},function(n){return n%10===1?"mesec":n%100===2||Math.floor(n)!==n&&n%100<=5?"meseca":n%10===3||n%10===4?"mesece":"mesecev"},function(n){return n%10===1?"teden":n%10===2||Math.floor(n)!==n&&n%100<=4?"tedna":n%10===3||n%10===4?"tedne":"tednov"},function(n){return n%100===1?"dan":"dni"},function(n){return n%10===1?"ura":n%100===2?"uri":n%10===3||n%10===4||Math.floor(n)!==n?"ure":"ur"},function(n){return n%10===1?"minuta":n%10===2?"minuti":n%10===3||n%10===4||Math.floor(n)!==n&&n%100<=4?"minute":"minut"},function(n){return n%10===1?"sekunda":n%100===2?"sekundi":n%100===3||n%100===4||Math.floor(n)!==n?"sekunde":"sekund"},function(n){return n%10===1?"milisekunda":n%100===2?"milisekundi":n%100===3||n%100===4||Math.floor(n)!==n?"milisekunde":"milisekund"},","),sv:e("\xE5r",function(n){return"m\xE5nad"+(n===1?"":"er")},function(n){return"veck"+(n===1?"a":"or")},function(n){return"dag"+(n===1?"":"ar")},function(n){return"timm"+(n===1?"e":"ar")},function(n){return"minut"+(n===1?"":"er")},function(n){return"sekund"+(n===1?"":"er")},function(n){return"millisekund"+(n===1?"":"er")},","),sw:a(e(function(n){return n===1?"mwaka":"miaka"},function(n){return n===1?"mwezi":"miezi"},"wiki",function(n){return n===1?"siku":"masiku"},function(n){return n===1?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:e("y\u0131l","ay","hafta","g\xFCn","saat","dakika","saniye","milisaniye",","),th:e("\u0E1B\u0E35","\u0E40\u0E14\u0E37\u0E2D\u0E19","\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C","\u0E27\u0E31\u0E19","\u0E0A\u0E31\u0E48\u0E27\u0E42\u0E21\u0E07","\u0E19\u0E32\u0E17\u0E35","\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35","\u0E21\u0E34\u0E25\u0E25\u0E34\u0E27\u0E34\u0E19\u0E32\u0E17\u0E35"),uz:e("yil","oy","hafta","kun","soat","minut","sekund","millisekund"),uz_CYR:e("\u0439\u0438\u043B","\u043E\u0439","\u04B3\u0430\u0444\u0442\u0430","\u043A\u0443\u043D","\u0441\u043E\u0430\u0442","\u043C\u0438\u043D\u0443\u0442","\u0441\u0435\u043A\u0443\u043D\u0434","\u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434"),vi:e("n\u0103m","th\xE1ng","tu\u1EA7n","ng\xE0y","gi\u1EDD","ph\xFAt","gi\xE2y","mili gi\xE2y",","),zh_CN:e("\u5E74","\u4E2A\u6708","\u5468","\u5929","\u5C0F\u65F6","\u5206\u949F","\u79D2","\u6BEB\u79D2"),zh_TW:e("\u5E74","\u500B\u6708","\u5468","\u5929","\u5C0F\u6642","\u5206\u9418","\u79D2","\u6BEB\u79D2")};function e(n,w,A,L,O,K,j,D,H){var F={y:n,mo:w,w:A,d:L,h:O,m:K,s:j,ms:D};return typeof H<"u"&&(F.decimal=H),F}function r(n){return n===2?1:n>2&&n<11?2:0}function o(n){return n===1?0:Math.floor(n)!==n?1:n%10>=2&&n%10<=4&&!(n%100>10&&n%100<20)?2:3}function c(n){return Math.floor(n)!==n?2:n%100>=5&&n%100<=20||n%10>=5&&n%10<=9||n%10===0?0:n%10===1?1:n>1?2:0}function u(n){return n===1?0:Math.floor(n)!==n?1:n%10>=2&&n%10<=4&&n%100<10?2:3}function p(n){return n===1||n%10===1&&n%100>20?0:Math.floor(n)!==n||n%10>=2&&n%100>20||n%10>=2&&n%100<10?1:2}function f(n){return n%10===1&&n%100!==11}function d(n,w){return Object.prototype.hasOwnProperty.call(n,w)}function y(n){var w=[n.language];if(d(n,"fallbacks"))if(i(n.fallbacks)&&n.fallbacks.length)w=w.concat(n.fallbacks);else throw new Error("fallbacks must be an array with at least one element");for(var A=0;A<w.length;A++){var L=w[A];if(d(n.languages,L))return n.languages[L];if(d(s,L))return s[L]}throw new Error("No language found.")}function x(n,w,A){var L=n.unitName,O=n.unitCount,K=A.spacer,j=A.maxDecimalPoints,D;d(A,"decimal")?D=A.decimal:d(w,"decimal")?D=w.decimal:D=".";var H;"digitReplacements"in A?H=A.digitReplacements:"_digitReplacements"in w&&(H=w._digitReplacements);var F,ot=j===void 0?O:Math.floor(O*Math.pow(10,j))/Math.pow(10,j),Z=ot.toString();if(w._hideCountIf2&&O===2)F="",K="";else if(H){F="";for(var g=0;g<Z.length;g++){var G=Z[g];G==="."?F+=D:F+=H[G]}}else F=Z.replace(".",D);var st=w[L],J;return typeof st=="function"?J=st(O):J=st,w._numberFirst?J+K+F:F+K+J}function v(n,w){var A,L,O,K,j=w.units,D=w.unitMeasures,H="largest"in w?w.largest:1/0;if(!j.length)return[];var F={};for(K=n,L=0;L<j.length;L++){A=j[L];var ot=D[A],Z=L===j.length-1;O=Z?K/ot:Math.floor(K/ot),F[A]=O,K-=O*ot}if(w.round){var g=H;for(L=0;L<j.length;L++)if(A=j[L],O=F[A],O!==0&&(g--,g===0)){for(var G=L+1;G<j.length;G++){var st=j[G],J=F[st];F[A]+=J*D[st]/D[A],F[st]=0}break}for(L=j.length-1;L>=0;L--)if(A=j[L],O=F[A],O!==0){var ct=Math.round(O);if(F[A]=ct,L===0)break;var lt=j[L-1],Nt=D[lt],$=Math.floor(ct*D[A]/Nt);if($)F[lt]+=$,F[A]=0;else break}}var B=[];for(L=0;L<j.length&&B.length<H;L++)A=j[L],O=F[A],O&&B.push({unitName:A,unitCount:O});return B}function C(n,w){var A=y(w);if(!n.length){var L=w.units,O=L[L.length-1];return x({unitName:O,unitCount:0},A,w)}var K=w.conjunction,j=w.serialComma,D;d(w,"delimiter")?D=w.delimiter:d(A,"delimiter")?D=A.delimiter:D=", ";for(var H=[],F=0;F<n.length;F++)H.push(x(n[F],A,w));return!K||n.length===1?H.join(D):n.length===2?H.join(K):H.slice(0,-1).join(D)+(j?",":"")+K+H.slice(-1)}function I(n){var w=function(L,O){L=Math.abs(L);var K=a({},w,O||{}),j=v(L,K);return C(j,K)};return a(w,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},n)}var E=a(I({}),{getSupportedLanguages:function(){var w=[];for(var A in s)d(s,A)&&A!=="gr"&&w.push(A);return w},humanizer:I});typeof define=="function"&&define.amd?define(function(){return E}):typeof fe<"u"&&fe.exports?fe.exports=E:this.humanizeDuration=E})()});var $n=We((Yr,ye)=>{"use strict";(function(){function a(l,h,P){return l.call.apply(l.bind,arguments)}function i(l,h,P){if(!l)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,b),l.apply(h,T)}}return function(){return l.apply(h,arguments)}}function t(l,h,P){return t=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?a:i,t.apply(null,arguments)}var s=Date.now||function(){return+new Date};function e(l,h){this.a=l,this.o=h||l,this.c=this.o.document}var r=!!window.FontFace;function o(l,h,P,b){if(h=l.c.createElement(h),P)for(var T in P)P.hasOwnProperty(T)&&(T=="style"?h.style.cssText=P[T]:h.setAttribute(T,P[T]));return b&&h.appendChild(l.c.createTextNode(b)),h}function c(l,h,P){l=l.c.getElementsByTagName(h)[0],l||(l=document.documentElement),l.insertBefore(P,l.lastChild)}function u(l){l.parentNode&&l.parentNode.removeChild(l)}function p(l,h,P){h=h||[],P=P||[];for(var b=l.className.split(/\s+/),T=0;T<h.length;T+=1){for(var R=!1,M=0;M<b.length;M+=1)if(h[T]===b[M]){R=!0;break}R||b.push(h[T])}for(h=[],T=0;T<b.length;T+=1){for(R=!1,M=0;M<P.length;M+=1)if(b[T]===P[M]){R=!0;break}R||h.push(b[T])}l.className=h.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(l,h){for(var P=l.className.split(/\s+/),b=0,T=P.length;b<T;b++)if(P[b]==h)return!0;return!1}function d(l){return l.o.location.hostname||l.a.location.hostname}function y(l,h,P){function b(){z&&T&&R&&(z(M),z=null)}h=o(l,"link",{rel:"stylesheet",href:h,media:"all"});var T=!1,R=!0,M=null,z=P||null;r?(h.onload=function(){T=!0,b()},h.onerror=function(){T=!0,M=Error("Stylesheet failed to load"),b()}):setTimeout(function(){T=!0,b()},0),c(l,"head",h)}function x(l,h,P,b){var T=l.c.getElementsByTagName("head")[0];if(T){var R=o(l,"script",{src:h}),M=!1;return R.onload=R.onreadystatechange=function(){M||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(M=!0,P&&P(null),R.onload=R.onreadystatechange=null,R.parentNode.tagName=="HEAD"&&T.removeChild(R))},T.appendChild(R),setTimeout(function(){M||(M=!0,P&&P(Error("Script load timeout")))},b||5e3),R}return null}function v(){this.a=0,this.c=null}function C(l){return l.a++,function(){l.a--,E(l)}}function I(l,h){l.c=h,E(l)}function E(l){l.a==0&&l.c&&(l.c(),l.c=null)}function n(l){this.a=l||"-"}n.prototype.c=function(l){for(var h=[],P=0;P<arguments.length;P++)h.push(arguments[P].replace(/[\W_]+/g,"").toLowerCase());return h.join(this.a)};function w(l,h){this.c=l,this.f=4,this.a="n";var P=(h||"n4").match(/^([nio])([1-9])$/i);P&&(this.a=P[1],this.f=parseInt(P[2],10))}function A(l){return K(l)+" "+(l.f+"00")+" 300px "+L(l.c)}function L(l){var h=[];l=l.split(/,\s*/);for(var P=0;P<l.length;P++){var b=l[P].replace(/['"]/g,"");b.indexOf(" ")!=-1||/^\d/.test(b)?h.push("'"+b+"'"):h.push(b)}return h.join(",")}function O(l){return l.a+l.f}function K(l){var h="normal";return l.a==="o"?h="oblique":l.a==="i"&&(h="italic"),h}function j(l){var h=4,P="n",b=null;return l&&((b=l.match(/(normal|oblique|italic)/i))&&b[1]&&(P=b[1].substr(0,1).toLowerCase()),(b=l.match(/([1-9]00|normal|bold)/i))&&b[1]&&(/bold/i.test(b[1])?h=7:/[1-9]00/.test(b[1])&&(h=parseInt(b[1].substr(0,1),10)))),P+h}function D(l,h){this.c=l,this.f=l.o.document.documentElement,this.h=h,this.a=new n("-"),this.j=h.events!==!1,this.g=h.classes!==!1}function H(l){l.g&&p(l.f,[l.a.c("wf","loading")]),ot(l,"loading")}function F(l){if(l.g){var h=f(l.f,l.a.c("wf","active")),P=[],b=[l.a.c("wf","loading")];h||P.push(l.a.c("wf","inactive")),p(l.f,P,b)}ot(l,"inactive")}function ot(l,h,P){l.j&&l.h[h]&&(P?l.h[h](P.c,O(P)):l.h[h]())}function Z(){this.c={}}function g(l,h,P){var b=[],T;for(T in h)if(h.hasOwnProperty(T)){var R=l.c[T];R&&b.push(R(h[T],P))}return b}function G(l,h){this.c=l,this.f=h,this.a=o(this.c,"span",{"aria-hidden":"true"},this.f)}function st(l){c(l.c,"body",l.a)}function J(l){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+L(l.c)+";"+("font-style:"+K(l)+";font-weight:"+(l.f+"00")+";")}function ct(l,h,P,b,T,R){this.g=l,this.j=h,this.a=b,this.c=P,this.f=T||3e3,this.h=R||void 0}ct.prototype.start=function(){var l=this.c.o.document,h=this,P=s(),b=new Promise(function(M,z){function W(){s()-P>=h.f?z():l.fonts.load(A(h.a),h.h).then(function(et){1<=et.length?M():setTimeout(W,25)},function(){z()})}W()}),T=null,R=new Promise(function(M,z){T=setTimeout(z,h.f)});Promise.race([R,b]).then(function(){T&&(clearTimeout(T),T=null),h.g(h.a)},function(){h.j(h.a)})};function lt(l,h,P,b,T,R,M){this.v=l,this.B=h,this.c=P,this.a=b,this.s=M||"BESbswy",this.f={},this.w=T||3e3,this.u=R||null,this.m=this.j=this.h=this.g=null,this.g=new G(this.c,this.s),this.h=new G(this.c,this.s),this.j=new G(this.c,this.s),this.m=new G(this.c,this.s),l=new w(this.a.c+",serif",O(this.a)),l=J(l),this.g.a.style.cssText=l,l=new w(this.a.c+",sans-serif",O(this.a)),l=J(l),this.h.a.style.cssText=l,l=new w("serif",O(this.a)),l=J(l),this.j.a.style.cssText=l,l=new w("sans-serif",O(this.a)),l=J(l),this.m.a.style.cssText=l,st(this.g),st(this.h),st(this.j),st(this.m)}var Nt={D:"serif",C:"sans-serif"},$=null;function B(){if($===null){var l=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);$=!!l&&(536>parseInt(l[1],10)||parseInt(l[1],10)===536&&11>=parseInt(l[2],10))}return $}lt.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),Wt(this)};function Bt(l,h,P){for(var b in Nt)if(Nt.hasOwnProperty(b)&&h===l.f[Nt[b]]&&P===l.f[Nt[b]])return!0;return!1}function Wt(l){var h=l.g.a.offsetWidth,P=l.h.a.offsetWidth,b;(b=h===l.f.serif&&P===l.f["sans-serif"])||(b=B()&&Bt(l,h,P)),b?s()-l.A>=l.w?B()&&Bt(l,h,P)&&(l.u===null||l.u.hasOwnProperty(l.a.c))?Pe(l,l.v):Pe(l,l.B):Zn(l):Pe(l,l.v)}function Zn(l){setTimeout(t(function(){Wt(this)},l),50)}function Pe(l,h){setTimeout(t(function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.m.a),h(this.a)},l),0)}function Ie(l,h,P){this.c=l,this.a=h,this.f=0,this.m=this.j=!1,this.s=P}var se=null;Ie.prototype.g=function(l){var h=this.a;h.g&&p(h.f,[h.a.c("wf",l.c,O(l).toString(),"active")],[h.a.c("wf",l.c,O(l).toString(),"loading"),h.a.c("wf",l.c,O(l).toString(),"inactive")]),ot(h,"fontactive",l),this.m=!0,je(this)},Ie.prototype.h=function(l){var h=this.a;if(h.g){var P=f(h.f,h.a.c("wf",l.c,O(l).toString(),"active")),b=[],T=[h.a.c("wf",l.c,O(l).toString(),"loading")];P||b.push(h.a.c("wf",l.c,O(l).toString(),"inactive")),p(h.f,b,T)}ot(h,"fontinactive",l),je(this)};function je(l){--l.f==0&&l.j&&(l.m?(l=l.a,l.g&&p(l.f,[l.a.c("wf","active")],[l.a.c("wf","loading"),l.a.c("wf","inactive")]),ot(l,"active")):F(l.a))}function Ge(l){this.j=l,this.a=new Z,this.h=0,this.f=this.g=!0}Ge.prototype.load=function(l){this.c=new e(this.j,l.context||this.j),this.g=l.events!==!1,this.f=l.classes!==!1,ts(this,new D(this.c,l),l)};function Jn(l,h,P,b,T){var R=--l.h==0;(l.f||l.g)&&setTimeout(function(){var M=T||null,z=b||null||{};if(P.length===0&&R)F(h.a);else{h.f+=P.length,R&&(h.j=R);var W,et=[];for(W=0;W<P.length;W++){var nt=P[W],pt=z[nt.c],Rt=h.a,Xt=nt;if(Rt.g&&p(Rt.f,[Rt.a.c("wf",Xt.c,O(Xt).toString(),"loading")]),ot(Rt,"fontloading",Xt),Rt=null,se===null)if(window.FontFace){var Xt=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ps=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);se=Xt?42<parseInt(Xt[1],10):!ps}else se=!1;se?Rt=new ct(t(h.g,h),t(h.h,h),h.c,nt,h.s,pt):Rt=new lt(t(h.g,h),t(h.h,h),h.c,nt,h.s,M,pt),et.push(Rt)}for(W=0;W<et.length;W++)et[W].start()}},0)}function ts(l,h,P){var T=[],b=P.timeout;H(h);var T=g(l.a,P,l.c),R=new Ie(l.c,h,b);for(l.h=T.length,h=0,P=T.length;h<P;h++)T[h].load(function(M,z,W){Jn(l,R,M,z,W)})}function ze(l,h){this.c=l,this.a=h}ze.prototype.load=function(l){function h(){if(R["__mti_fntLst"+b]){var M=R["__mti_fntLst"+b](),z=[],W;if(M)for(var et=0;et<M.length;et++){var nt=M[et].fontfamily;M[et].fontStyle!=null&&M[et].fontWeight!=null?(W=M[et].fontStyle+M[et].fontWeight,z.push(new w(nt,W))):z.push(new w(nt))}l(z)}else setTimeout(function(){h()},50)}var P=this,b=P.a.projectId,T=P.a.version;if(b){var R=P.c.o;x(this.c,(P.a.api||"https://fast.fonts.net/jsapi")+"/"+b+".js"+(T?"?v="+T:""),function(M){M?l([]):(R["__MonotypeConfiguration__"+b]=function(){return P.a},h())}).id="__MonotypeAPIScript__"+b}else l([])};function _e(l,h){this.c=l,this.a=h}_e.prototype.load=function(l){var h,P,b=this.a.urls||[],T=this.a.families||[],R=this.a.testStrings||{},M=new v;for(h=0,P=b.length;h<P;h++)y(this.c,b[h],C(M));var z=[];for(h=0,P=T.length;h<P;h++)if(b=T[h].split(":"),b[1])for(var W=b[1].split(","),et=0;et<W.length;et+=1)z.push(new w(b[0],W[et]));else z.push(new w(b[0]));I(M,function(){l(z,R)})};function es(l,h){l?this.c=l:this.c=ns,this.a=[],this.f=[],this.g=h||""}var ns="https://fonts.googleapis.com/css";function ss(l,h){for(var P=h.length,b=0;b<P;b++){var T=h[b].split(":");T.length==3&&l.f.push(T.pop());var R="";T.length==2&&T[1]!=""&&(R=":"),l.a.push(T.join(R))}}function is(l){if(l.a.length==0)throw Error("No fonts to load!");if(l.c.indexOf("kit=")!=-1)return l.c;for(var h=l.a.length,P=[],b=0;b<h;b++)P.push(l.a[b].replace(/ /g,"+"));return h=l.c+"?family="+P.join("%7C"),0<l.f.length&&(h+="&subset="+l.f.join(",")),0<l.g.length&&(h+="&text="+encodeURIComponent(l.g)),h}function rs(l){this.f=l,this.a=[],this.c={}}var De={latin:"BESbswy","latin-ext":"\xE7\xF6\xFC\u011F\u015F",cyrillic:"\u0439\u044F\u0416",greek:"\u03B1\u03B2\u03A3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},os={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},as={i:"i",italic:"i",n:"n",normal:"n"},cs=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ls(l){for(var h=l.f.length,P=0;P<h;P++){var b=l.f[P].split(":"),T=b[0].replace(/\+/g," "),R=["n4"];if(2<=b.length){var M,z=b[1];if(M=[],z)for(var z=z.split(","),W=z.length,et=0;et<W;et++){var nt;if(nt=z[et],nt.match(/^[\w-]+$/)){var pt=cs.exec(nt.toLowerCase());if(pt==null)nt="";else{if(nt=pt[2],nt=nt==null||nt==""?"n":as[nt],pt=pt[1],pt==null||pt=="")pt="4";else var Rt=os[pt],pt=Rt||(isNaN(pt)?"4":pt.substr(0,1));nt=[nt,pt].join("")}}else nt="";nt&&M.push(nt)}0<M.length&&(R=M),b.length==3&&(b=b[2],M=[],b=b?b.split(","):M,0<b.length&&(b=De[b[0]])&&(l.c[T]=b))}for(l.c[T]||(b=De[T])&&(l.c[T]=b),b=0;b<R.length;b+=1)l.a.push(new w(T,R[b]))}}function $e(l,h){this.c=l,this.a=h}var us={Arimo:!0,Cousine:!0,Tinos:!0};$e.prototype.load=function(l){var h=new v,P=this.c,b=new es(this.a.api,this.a.text),T=this.a.families;ss(b,T);var R=new rs(T);ls(R),y(P,is(b),C(h)),I(h,function(){l(R.a,R.c,us)})};function Ve(l,h){this.c=l,this.a=h}Ve.prototype.load=function(l){var h=this.a.id,P=this.c.o;h?x(this.c,(this.a.api||"https://use.typekit.net")+"/"+h+".js",function(b){if(b)l([]);else if(P.Typekit&&P.Typekit.config&&P.Typekit.config.fn){b=P.Typekit.config.fn;for(var T=[],R=0;R<b.length;R+=2)for(var M=b[R],z=b[R+1],W=0;W<z.length;W++)T.push(new w(M,z[W]));try{P.Typekit.load({events:!1,classes:!1,async:!0})}catch{}l(T)}},2e3):l([])};function qe(l,h){this.c=l,this.f=h,this.a=[]}qe.prototype.load=function(l){var h=this.f.id,P=this.c.o,b=this;h?(P.__webfontfontdeckmodule__||(P.__webfontfontdeckmodule__={}),P.__webfontfontdeckmodule__[h]=function(T,R){for(var M=0,z=R.fonts.length;M<z;++M){var W=R.fonts[M];b.a.push(new w(W.name,j("font-weight:"+W.weight+";font-style:"+W.style)))}l(b.a)},x(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+d(this.c)+"/"+h+".js",function(T){T&&l([])})):l([])};var zt=new Ge(window);zt.a.c.custom=function(l,h){return new _e(h,l)},zt.a.c.fontdeck=function(l,h){return new qe(h,l)},zt.a.c.monotype=function(l,h){return new ze(h,l)},zt.a.c.typekit=function(l,h){return new Ve(h,l)},zt.a.c.google=function(l,h){return new $e(h,l)};var Ee={load:t(zt.load,zt)};typeof define=="function"&&define.amd?define(function(){return Ee}):typeof ye<"u"&&ye.exports?ye.exports=Ee:(window.WebFont=Ee,window.WebFontConfig&&zt.load(window.WebFontConfig))})()});var Ts=(()=>{class a{static{this.API="../nifi-api"}constructor(t,s,e,r){this.httpClient=t,this.client=s,this.nifiCommon=e,this.clusterConnectionService=r}getFlow(t="root"){let s={uiOnly:!0};return this.httpClient.get(`${a.API}/flow/process-groups/${t}`,{params:s})}getProcessGroupStatus(t="root",s=!1){return this.httpClient.get(`${a.API}/flow/process-groups/${t}/status`,{params:{recursive:s}})}getFlowStatus(){return this.httpClient.get(`${a.API}/flow/status`)}getControllerBulletins(){return this.httpClient.get(`${a.API}/flow/controller/bulletins`)}getProcessor(t){return this.httpClient.get(`${a.API}/processors/${t}`)}getInputPort(t){return this.httpClient.get(`${a.API}/input-ports/${t}`)}getRemoteProcessGroup(t){return this.httpClient.get(`${a.API}/remote-process-groups/${t}`)}getConnection(t){return this.httpClient.get(`${a.API}/connections/${t}`)}getProcessGroup(t){return this.httpClient.get(`${a.API}/process-groups/${t}`)}createFunnel(t="root",s){return this.httpClient.post(`${a.API}/process-groups/${t}/funnels`,{revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position}})}createLabel(t="root",s){return this.httpClient.post(`${a.API}/process-groups/${t}/labels`,{revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position,zIndex:s.zIndex}})}goToRemoteProcessGroup(t){window.open(encodeURI(t.uri))}createProcessor(t="root",s){return this.httpClient.post(`${a.API}/process-groups/${t}/processors`,{revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position,type:s.processorType,bundle:s.processorBundle}})}createConnection(t="root",s){return this.httpClient.post(`${a.API}/process-groups/${t}/connections`,s.payload)}createProcessGroup(t="root",s){let e={revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position,name:s.name}};return s.parameterContextId&&(e.component.parameterContext={id:s.parameterContextId}),this.httpClient.post(`${a.API}/process-groups/${t}/process-groups`,e)}createRemoteProcessGroup(t="root",s){let e={revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position,targetUris:s.targetUris,transportProtocol:s.transportProtocol,localNetworkInterface:s.localNetworkInterface,proxyHost:s.proxyHost,proxyPort:s.proxyPort,proxyUser:s.proxyUser,proxyPassword:s.proxyPassword,communicationsTimeout:s.communicationsTimeout,yieldDuration:s.yieldDuration}};return this.httpClient.post(`${a.API}/process-groups/${t}/remote-process-groups`,e)}uploadProcessGroup(t="root",s){let e=new FormData;return e.append("id",t),e.append("groupName",s.name),e.append("positionX",s.position.x.toString()),e.append("positionY",s.position.y.toString()),e.append("clientId",s.revision.clientId),e.append("disconnectedNodeAcknowledged",String(this.clusterConnectionService.isDisconnectionAcknowledged())),e.append("file",s.flowDefinition),this.httpClient.post(`${a.API}/process-groups/${t}/process-groups/upload`,e)}getPropertyDescriptor(t,s,e){let r={propertyName:s,sensitive:e};return this.httpClient.get(`${a.API}/processors/${t}/descriptors`,{params:r})}createPort(t="root",s){let e=N.InputPort==s.type?"input-ports":"output-ports";return this.httpClient.post(`${a.API}/process-groups/${t}/${e}`,{revision:s.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:s.position,name:s.name,allowRemoteAccess:s.allowRemoteAccess}})}updateComponent(t){return this.httpClient.put(this.nifiCommon.stripProtocol(t.uri),t.payload)}deleteComponent(t){let s=new Je({fromObject:it(X({},this.client.getRevision(t.entity)),{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()})});return this.httpClient.delete(this.nifiCommon.stripProtocol(t.uri),{params:s})}replayLastProvenanceEvent(t){return this.httpClient.post(`${a.API}/provenance-events/latest/replays`,t)}runOnce(t){let s={revision:t.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"RUN_ONCE"};return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,s)}enableComponent(t){let s={revision:t.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"STOPPED"};return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,s)}disableComponent(t){let s={revision:t.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"DISABLED"};return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,s)}enableAllControllerServices(t){let s={id:t,state:"ENABLED",disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()};return this.httpClient.put(`${a.API}/flow/process-groups/${t}/controller-services`,s)}disableAllControllerServices(t){let s={id:t,state:"DISABLED",disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()};return this.httpClient.put(`${a.API}/flow/process-groups/${t}/controller-services`,s)}startComponent(t){let s={revision:t.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:t.type===N.RemoteProcessGroup?"TRANSMITTING":"RUNNING"};return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,s)}stopComponent(t){let s={revision:t.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"STOPPED"};return this.httpClient.put(`${this.nifiCommon.stripProtocol(t.uri)}/run-status`,s)}terminateThreads(t){return this.httpClient.delete(`${this.nifiCommon.stripProtocol(t.uri)}/threads`)}enableProcessGroup(t){let s={id:t.id,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"ENABLED"};return this.httpClient.put(`${a.API}/flow/process-groups/${t.id}`,s)}disableProcessGroup(t){let s={id:t.id,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"DISABLED"};return this.httpClient.put(`${a.API}/flow/process-groups/${t.id}`,s)}startProcessGroup(t){let s={id:t.id,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"RUNNING"};return this.httpClient.put(`${a.API}/flow/process-groups/${t.id}`,s)}startRemoteProcessGroupsInProcessGroup(t){let s={disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"TRANSMITTING"};return this.httpClient.put(`${a.API}/remote-process-groups/process-group/${t.id}/run-status`,s)}stopProcessGroup(t){let s={id:t.id,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"STOPPED"};return this.httpClient.put(`${a.API}/flow/process-groups/${t.id}`,s)}stopRemoteProcessGroupsInProcessGroup(t){let s={disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),state:"STOPPED"};return this.httpClient.put(`${a.API}/remote-process-groups/process-group/${t.id}/run-status`,s)}getVersionInformation(t){return this.httpClient.get(`${a.API}/versions/process-groups/${t}`)}saveToFlowRegistry(t){let s=it(X({},t),{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()});return this.httpClient.post(`${a.API}/versions/process-groups/${t.processGroupId}`,s)}stopVersionControl(t){let s={version:t.revision.version,clientId:t.revision.clientId,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()};return this.httpClient.delete(`${a.API}/versions/process-groups/${t.processGroupId}`,{params:s})}initiateChangeVersionUpdate(t){return this.httpClient.post(`${a.API}/versions/update-requests/process-groups/${t.versionControlInformation?.groupId}`,X({},t))}getChangeVersionUpdateRequest(t){return this.httpClient.get(`${a.API}/versions/update-requests/${t}`)}deleteChangeVersionUpdateRequest(t){let s={disconnectedNodeAcknowledged:!1};return this.httpClient.delete(`${a.API}/versions/update-requests/${t}`,{params:s})}initiateRevertFlowVersion(t){return this.httpClient.post(`${a.API}/versions/revert-requests/process-groups/${t.versionControlInformation?.groupId}`,X({},t))}getRevertChangesUpdateRequest(t){return this.httpClient.get(`${a.API}/versions/revert-requests/${t}`)}deleteRevertChangesUpdateRequest(t){let s={disconnectedNodeAcknowledged:!1};return this.httpClient.delete(`${a.API}/versions/revert-requests/${t}`,{params:s})}getLocalModifications(t){return this.httpClient.get(`${a.API}/process-groups/${t}/local-modifications`)}downloadFlow(t){window.open(`${a.API}/process-groups/${t.processGroupId}/download?includeReferencedServices=${t.includeReferencedServices}`)}static{this.\u0275fac=function(s){return new(s||a)(S(ae),S(Dt),S(tt),S(Lt))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var _=k(pe,a=>a[un]),yt=k(_,a=>a.status),Ls=k(_,a=>a.changeVersionRequest),Os=k(_,a=>a.pollingProcessor),Us=k(_,a=>a.saving),Fs=k(_,a=>a.versionSaving),Qt=k(_,a=>a.id),js=k(_,a=>a.flow.revision),Gs=k(_,a=>a.refreshRpgDetails),Tn=k(_,a=>a.flow.processGroupFlow.parameterContext),An=k(_,a=>a.flow.permissions),Rn=k(_,a=>a.flow.processGroupFlow.breadcrumb),kn=k(_,a=>a.flow.processGroupFlow.parentGroupId),zs=k(Mt,a=>a?a.params.processGroupId:null),_s=k(Mt,a=>a&&a.params.ids==null&&a.params.type==null?a.params.processGroupId:null),vt=k(Mt,a=>{let i=[];return a?.params.ids?i.push(...a.params.ids.split(",")):a?.params.id&&i.push(a.params.id),i}),Ds=k(Mt,a=>{let i=[];return a?.params.ids&&i.push(...a.params.ids.split(",")),i}),$s=k(Mt,a=>{let i=null;return a?.params.id&&a?.params.type&&(i={id:a.params.id,componentType:a.params.type}),i}),Vs=k(Mt,a=>{let i=null;return a?.routeConfig?.path=="edit"&&a.params.id&&a.params.type&&(i={id:a.params.id,componentType:a.params.type}),i}),qs=k(Mt,a=>a?.routeConfig?.path=="edit"&&a.params.ids==null&&a.params.id==null&&a.params.type==null?a.params.processGroupId:null),Ws=k(Mt,a=>{let i=null;return a?.routeConfig?.path=="history"&&a.params.id&&a.params.type&&(i={id:a.params.id,componentType:a.params.type}),i}),Xs=k(Mt,a=>a?.routeConfig?.path=="history"&&a.params.processGroupId?a.params.processGroupId:null),xt=k(_,a=>a.transitionRequired),Hs=k(_,a=>a.dragging),Ys=k(_,a=>a.skipTransform),Ks=k(_,a=>a.allowTransition),Me=k(_,a=>a.flow.processGroupFlow?.flow.funnels),Qs=a=>k(Me,i=>i.find(t=>a==t.id)),Le=k(_,a=>a.flow.processGroupFlow?.flow.processors),Zs=a=>k(Le,i=>i.find(t=>a==t.id)),Oe=k(_,a=>a.flow.processGroupFlow?.flow.processGroups),Js=a=>k(Oe,i=>i.find(t=>a==t.id)),Ue=k(_,a=>a.flow.processGroupFlow?.flow.remoteProcessGroups),ti=a=>k(Ue,i=>i.find(t=>a==t.id)),Nn=k(_,a=>a.flow.processGroupFlow?.flow.inputPorts),ei=a=>k(Nn,i=>i.find(t=>a==t.id)),Bn=k(_,a=>a.flow.processGroupFlow?.flow.outputPorts),ni=a=>k(Bn,i=>i.find(t=>a==t.id)),Mn=k(Nn,Bn,(a,i)=>[...a,...i]),he=k(_,a=>a.flow.processGroupFlow?.flow.labels),si=a=>k(he,i=>i.find(t=>a==t.id)),Zt=k(_,a=>a.flow.processGroupFlow?.flow.connections),ii=a=>k(Zt,i=>i.find(t=>a==t.id)),ri=k(_,a=>a.flowStatus.controllerStatus),oi=k(_,a=>a.flow.processGroupFlow.lastRefreshed),ai=k(_,a=>a.controllerBulletins.bulletins),Ln=k(_,a=>a.registryClients),On=k(_,a=>a.navigationCollapsed),ci=k(_,a=>a.operationCollapsed),li=a=>a===N.Connection?k(Zt,i=>i.reduce((t,s)=>Math.max(t,s.zIndex),0)):k(he,i=>i.reduce((t,s)=>Math.max(t,s.zIndex),0)),ui=k(_,a=>a.flowAnalysisOpen);var Vt=k(pe,a=>a[dn]),Un=k(Vt,a=>a.scale);var jn=Xe(Fn());var Q=class a{static{this.TWO_PI=2*Math.PI}constructor(i,t,s){this.store=i,this.nifiCommon=t,this.overlay=s,this.destroyRef=ie(re),this.trimLengthCaches=new Map,this.currentProcessGroupId=Ot.id,this.parentProcessGroupId=Ot.flow.processGroupFlow.parentGroupId,this.canvasPermissions=Ot.flow.permissions,this.currentUser=In.user,this.currentParameterContext=Ot.flow.processGroupFlow.parameterContext,this.flowConfiguration=En.flowConfiguration,this.scale=hn.scale,this.connections=[],this.breadcrumbs=null,this.copiedSnippet=null,this.humanizeDuration=(0,jn.humanizer)(),this.store.select(Qt).pipe(ht(this.destroyRef)).subscribe(e=>{this.currentProcessGroupId=e,this.trimLengthCaches.clear()}),this.store.select(kn).pipe(ht(this.destroyRef)).subscribe(e=>{this.parentProcessGroupId=e}),this.store.select(An).pipe(ht(this.destroyRef)).subscribe(e=>{this.canvasPermissions=e}),this.store.select(Zt).pipe(ht(this.destroyRef)).subscribe(e=>{this.connections=e}),this.store.select(tn).pipe(ht(this.destroyRef)).subscribe(e=>{this.currentUser=e}),this.store.select(Tn).pipe(ht(this.destroyRef)).subscribe(e=>{this.currentParameterContext=e}),this.store.select(sn).pipe(ht(this.destroyRef)).subscribe(e=>{this.flowConfiguration=e}),this.store.select(Rn).pipe(ht(this.destroyRef)).subscribe(e=>{this.breadcrumbs=e}),this.store.select(Un).pipe(ht(this.destroyRef)).subscribe(e=>{this.scale=e})}hasDownstream(i){return i.size()!==1?!1:this.isFunnel(i)||this.isProcessor(i)||this.isProcessGroup(i)||this.isRemoteProcessGroup(i)||this.isInputPort(i)||this.isOutputPort(i)&&this.parentProcessGroupId!==null}hasUpstream(i){return i.size()!==1?!1:this.isFunnel(i)||this.isProcessor(i)||this.isProcessGroup(i)||this.isRemoteProcessGroup(i)||this.isOutputPort(i)||this.isInputPort(i)&&this.parentProcessGroupId!==null}removeTempEdge(){m("path.connector").remove()}canAccessProvenance(){return this.currentUser.provenancePermissions.canRead}emptySelection(i){return i.empty()}isNotRootGroup(){return this.parentProcessGroupId!=null}getProcessGroupId(){return this.currentProcessGroupId}getParentProcessGroupId(){return this.parentProcessGroupId}getParameterContextId(){return this.currentParameterContext?this.currentParameterContext.id:null}isNotRootGroupAndEmptySelection(i){return this.isNotRootGroup()&&i.empty()}canAlign(i){let t=!0,s=i.filter(e=>e.type==N.Connection);return i.size()-s.size()<2&&(t=!1),this.canModify(i)||(t=!1),t}canModify(i){let t=i.size(),s=i.filter(function(e){return e.permissions.canWrite}).size();return t===s}canRead(i){let t=i.size(),s=i.filter(function(e){return e.permissions.canRead}).size();return t===s}runnableSupportsModification(i){return!(i.status.aggregateSnapshot.runStatus==="Running"||i.status.aggregateSnapshot.activeThreadCount>0)}remoteProcessGroupSupportsModification(i){return!(i.status.transmissionStatus==="Transmitting"||i.status.aggregateSnapshot.activeThreadCount>0)}supportsModification(i){if(i.size()!==1)return!1;let t=i.datum(),s=!1;if(this.isProcessor(i)||this.isInputPort(i)||this.isOutputPort(i))s=this.runnableSupportsModification(t);else if(this.isRemoteProcessGroup(i))s=this.remoteProcessGroupSupportsModification(t);else if(this.isProcessGroup(i))s=!0;else if(this.isFunnel(i))s=!0;else if(this.isLabel(i))s=!0;else if(this.isConnection(i)){let e=!1,r=!1,o=this.getConnectionSourceComponentId(t),c=m("#id-"+o);c.empty()||(this.isRemoteProcessGroup(c)||this.isProcessGroup(c)?e=!0:e=this.supportsModification(c));let u=this.getConnectionDestinationComponentId(t),p=m("#id-"+u);p.empty()||(this.isRemoteProcessGroup(p)||this.isProcessGroup(p)?r=!0:r=this.supportsModification(p)),s=e&&r}return s}areDeletable(i){if(i.empty())return!1;let t=!0;return i.each((s,e,r)=>{this.isDeletable(m(r[e]))||(t=!1)}),t}isDeletable(i){return i.size()!==1||!this.canvasPermissions.canWrite||!this.canModify(i)?!1:this.supportsModification(i)}canModifyParentGroup(){return this.breadcrumbs&&this.breadcrumbs.parentBreadcrumb?this.breadcrumbs.parentBreadcrumb.permissions.canWrite:!1}isConfigurable(i){return i.empty()?this.canvasPermissions.canRead&&this.canvasPermissions.canWrite:i.size()>1||!this.canRead(i)||!this.canModify(i)||this.isFunnel(i)?!1:this.supportsModification(i)}hasDetails(i){if(i.empty())return this.canvasPermissions.canRead&&!this.canvasPermissions.canWrite;if(i.size()>1||!this.canRead(i))return!1;if(this.canModify(i)){if(this.isProcessor(i)||this.isInputPort(i)||this.isOutputPort(i)||this.isRemoteProcessGroup(i)||this.isProcessGroup(i)||this.isConnection(i))return!this.isConfigurable(i)}else return this.isProcessor(i)||this.isInputPort(i)||this.isOutputPort(i)||this.isRemoteProcessGroup(i)||this.isProcessGroup(i)||this.isConnection(i);return!1}isConnection(i){return i.size()===1&&i.classed("connection")}isRemoteProcessGroup(i){return i.size()===1&&i.classed("remote-process-group")}isProcessor(i){return i.size()===1&&i.classed("processor")}isLabel(i){return i.size()===1&&i.classed("label")}isInputPort(i){return i.size()===1&&i.classed("input-port")}isOutputPort(i){return i.size()===1&&i.classed("output-port")}isProcessGroup(i){return i.size()===1&&i.classed("process-group")}isFunnel(i){return i.size()===1&&i.classed("funnel")}isSourceSelected(i,t){return t.filter(s=>this.getConnectionSourceComponentId(i)===s.id).size()>0}isStatefulProcessor(i){return i.size()!==1||this.canRead(i)===!1||this.canModify(i)===!1?!1:this.isProcessor(i)?i.datum().component.persistsState===!0:!1}canManagePolicies(i){return i.size()<=1?!i.empty()&&this.isConnection(i)?!1:this.canAccessTenants():!1}supportsManagedAuthorizer(){return this.flowConfiguration?this.flowConfiguration.supportsManagedAuthorizer:!1}canAccessTenants(){return this.currentUser.tenantsPermissions.canRead===!0}canAccessComponentProvenance(i){return i.size()!==1?!1:!this.isLabel(i)&&!this.isConnection(i)&&!this.isProcessGroup(i)&&!this.isRemoteProcessGroup(i)&&this.canAccessProvenance()}canReplayComponentProvenance(i){return i.size()!==1?!1:this.isProcessor(i)&&this.canAccessProvenance()}hasParameterContext(i){let t;return i.empty()?t=this.currentParameterContext:this.isProcessGroup(i)&&(t=i.datum().parameterContext),t?t.permissions.canRead:!1}canViewStatusHistory(i){return i.empty()?!0:i.size()!==1?!1:this.isProcessor(i)||this.isConnection(i)||this.isRemoteProcessGroup(i)||this.isProcessGroup(i)}getSelection(){return jt("g.component.selected, g.connection.selected")}getComponentConnections(i){return this.connections.filter(t=>this.getConnectionSourceComponentId(t)===i||this.getConnectionDestinationComponentId(t)===i)}getPositionForCenteringConnection(i){let t,s;if(i.bends.length>0){let e=Math.min(Math.max(0,i.labelIndex),i.bends.length-1);t=i.bends[e].x,s=i.bends[e].y}else t=(i.start.x+i.end.x)/2,s=(i.start.y+i.end.y)/2;return{x:t,y:s}}getConnectionSourceComponentId(i){let t=i.sourceId;return i.sourceGroupId!==this.currentProcessGroupId&&(t=i.sourceGroupId),t}getConnectionDestinationComponentId(i){let t=i.destinationId;return i.destinationGroupId!==this.currentProcessGroupId&&(t=i.destinationGroupId),t}getConnectableTypeForSource(i){switch(i){case N.Processor:return"PROCESSOR";case N.RemoteProcessGroup:return"REMOTE_OUTPUT_PORT";case N.ProcessGroup:return"OUTPUT_PORT";case N.InputPort:return"INPUT_PORT";case N.Funnel:return"FUNNEL";default:return""}}getComponentTypeForSource(i){switch(i){case"PROCESSOR":return N.Processor;case"REMOTE_OUTPUT_PORT":return N.RemoteProcessGroup;case"OUTPUT_PORT":return N.ProcessGroup;case"INPUT_PORT":return N.InputPort;case"FUNNEL":return N.Funnel;default:return null}}getConnectableTypeForDestination(i){switch(i){case N.Processor:return"PROCESSOR";case N.RemoteProcessGroup:return"REMOTE_INPUT_PORT";case N.ProcessGroup:return"INPUT_PORT";case N.OutputPort:return"OUTPUT_PORT";case N.Funnel:return"FUNNEL";default:return""}}getComponentTypeForDestination(i){switch(i){case"PROCESSOR":return N.Processor;case"REMOTE_INPUT_PORT":return N.RemoteProcessGroup;case"INPUT_PORT":return N.ProcessGroup;case"OUTPUT_PORT":return N.OutputPort;case"FUNNEL":return N.Funnel;default:return null}}isDisconnected(i){if(i.empty())return!1;let t=new Map,s=new Map,e=!0;return i.filter(r=>r.type==="Connection").each(r=>{t.set(r.id,r)}),i.filter(r=>r.type!=="Connection").each(r=>{s.set(r.id,r.component),this.getComponentConnections(r.id).forEach(o=>{t.has(o.id)||(e=!1)})}),e&&t.forEach(r=>{e&&(e=s.has(this.getConnectionSourceComponentId(r))&&s.has(this.getConnectionDestinationComponentId(r)))}),e}getOrigin(i){let t,s;return i.each((e,r,o)=>{let c=m(o[r]);this.isConnection(c)||((t==null||e.position.x<t)&&(t=e.position.x),(s==null||e.position.y<s)&&(s=e.position.y))}),t==null||s==null?{x:0,y:0}:{x:t,y:s}}isClipboardAvailable(){return window.isSecureContext&&Object.hasOwn(window,"ClipboardItem")}isCopyable(i){if(!this.isClipboardAvailable()||i.empty()||!this.canRead(i))return!1;let t=i.filter((s,e,r)=>{let o=m(r[e]);if(this.isConnection(o)){let c=!i.filter(p=>this.getConnectionSourceComponentId(s)===p.id).empty(),u=!i.filter(p=>this.getConnectionDestinationComponentId(s)===p.id).empty();return c&&u}else return this.isProcessor(o)||this.isFunnel(o)||this.isLabel(o)||this.isProcessGroup(o)||this.isRemoteProcessGroup(o)||this.isInputPort(o)||this.isOutputPort(o)});return i.size()===t.size()}isPastable(){return this.isClipboardAvailable()&&this.canvasPermissions.canWrite}formatConnectionName(i){if(this.nifiCommon.isBlank(i.name)){if(i.selectedRelationships)return i.selectedRelationships.join(", ")}else return i.name;return""}formatPredictedDuration(i){return i===0?"now":this.humanizeDuration(i,{round:!0})}getPerimeterPoint(i,t){let s=Math.atan2(t.height,t.width),e=t.width/2,r=t.height/2,o=t.x+e,c=t.y+r,u=i.x-o,p=i.y-c,f=Math.atan2(p,u);f=f%a.TWO_PI,f<0&&(f+=a.TWO_PI);let d=Math.PI/2-f;return f>=0&&f<s||f>=a.TWO_PI-s&&f<a.TWO_PI?{x:t.x+t.width,y:c+Math.tan(f)*e}:f>=s&&f<Math.PI-s?{x:o+Math.tan(d)*r,y:t.y+t.height}:f>=Math.PI-s&&f<Math.PI+s?{x:t.x,y:c-Math.tan(f)*e}:{x:o-Math.tan(d)*r,y:t.y}}isValidConnectionSource(i){return i.size()!==1?!1:this.isProcessGroup(i)?!0:!this.canRead(i)||!this.canModify(i)?!1:this.isProcessor(i)||this.isRemoteProcessGroup(i)||this.isInputPort(i)||this.isFunnel(i)}isValidConnectionDestination(i){return i.size()!==1?!1:this.isProcessGroup(i)?!0:this.canModify(i)?this.isRemoteProcessGroup(i)||this.isOutputPort(i)||this.isFunnel(i)?!0:this.isProcessor(i)?i.datum().inputRequirement!=="INPUT_FORBIDDEN":!1:!1}binarySearch(i,t){let s=0,e=i-1,r=0,o=0;for(;s<=e;)if(r=~~((s+e)/2),o=t(r),o<0)e=r-1;else if(o>0)s=r+1;else break;return r}canvasTooltip(i,t,s){let e=-1,r=-1,o=this.overlay,c=null,u=null;t.on("mouseenter",function(){c?.hasAttached()||c||(r=window.setTimeout(()=>{u=o.position().flexibleConnectedTo(m(this).node()).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top",offsetX:8,offsetY:8}]).withPush(!0),c=o.create({positionStrategy:u});let p=c.attach(new en(i));p.setInput("data",s),p.location.nativeElement.addEventListener("mouseenter",()=>{e>0&&(window.clearTimeout(e),e=-1)}),p.location.nativeElement.addEventListener("mouseleave",()=>{c?.detach(),c?.dispose(),c=null,u?.detach&&u.detach(),u?.dispose(),u=null})},tt.TOOLTIP_DELAY_OPEN_MILLIS))}).on("mouseleave",function(){r>0&&(window.clearTimeout(r),r=-1),e=window.setTimeout(()=>{c?.detach(),c?.dispose(),c=null,u?.detach&&u.detach(),u?.dispose(),u=null},tt.TOOLTIP_DELAY_OPEN_MILLIS)})}resetCanvasTooltip(i){i.on("mouseenter",null).on("mouseleave",null)}getHigherSeverityBulletinLevel(i,t){let s={TRACE:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},e=0,r=0;return i.bulletin&&(e=s[i.bulletin.level.toUpperCase()]||0),t.bulletin&&(r=s[t.bulletin.level.toUpperCase()]||0),e>=r?i:t}getMostSevereBulletin(i){if(i&&i.length>0){let t=i.reduce((s,e)=>this.getHigherSeverityBulletinLevel(s,e));if(t.bulletin)return t}return null}resetBulletin(i){i.select("text.bulletin-icon").style("visibility","hidden"),i.select("rect.bulletin-background").style("visibility","hidden"),this.resetCanvasTooltip(i)}bulletins(i,t){let s=[];if(t&&(s=t.filter(e=>e.canRead&&e.bulletin)),this.nifiCommon.isEmpty(s))this.resetBulletin(i);else{let e=this.getMostSevereBulletin(s);if(e){let r=i.select("text.bulletin-icon").style("visibility","visible");i.select("rect.bulletin-background").style("visibility","visible");let o=i.select("rect.bulletin-background").style("visibility","visible");r.classed("trace",!1).classed("debug",!1).classed("info",!1).classed("warning",!1).classed("error",!1),o.classed("trace",!1).classed("debug",!1).classed("info",!1).classed("warning",!1).classed("error",!1),r.classed(e.bulletin.level.toLowerCase(),!0),o.classed(e.bulletin.level.toLowerCase(),!0),this.canvasTooltip(rn,r,{bulletins:s})}else this.resetBulletin(i)}}ellipsis(i,t,s){t=t.trim();let e=parseInt(i.attr("width"),10),r=i.node();if(i.text(t),t.length<5)return;let c=this.trimLengthCaches.get(s);c||(c=new Map,this.trimLengthCaches.set(s,c));let u=c.get(t),p=u===void 0?void 0:u.get(e);if(!p){if(r.getSubStringLength(0,t.length-1)>e){i.text("\u2026");let y=r.getSubStringLength(0,1);i.text(t),e-=y*1.5,p=this.binarySearch(t.length,function(x){let v=r.getSubStringLength(0,x);return v>e?-1:v<e?1:0})}else p=-1;let d=c.get(t);d===void 0&&(d=new Map,c.set(t,d)),d.set(e,p)}p!==-1&&i.text(t.substring(0,p)+"\u2026")}boundedMultilineEllipsis(i,t,s,e,r){let o=1,c=parseInt(i.attr("x"),10),u=!1,p=1,f=s;for(let d of e){let y=d.trimStart(),x=d.slice(0,d.length-y.length),v=y.split(/\s+/).reverse();x.length>0&&v.length>0&&(v[v.length-1]=x+v[v.length-1]);let C=!0,I=[],E=i.append("tspan").attr("x",c).attr("width",t).attr("xml:space","preserve"),n=v.pop();for(;n;){if(I.push(n),E.text(I.join(" ")),u||(f=E.node().getBoundingClientRect().height/this.scale,p=Math.floor(s/f),u=!0),C&&(E.attr("y",f*o++),C=!1),E.node().getComputedTextLength()>t)if(I.pop(),E.text(I.join(" ")),E=i.append("tspan").attr("x",c).attr("dy","1.2em").attr("width",t).attr("xml:space","preserve"),o++>=p){let w=[n].concat(v.reverse());this.ellipsis(E,w.join(" "),r);return}else E.text(n),I=[n];n=v.pop()}if(C&&E.attr("y",f*o++),o>=p)return}}multilineEllipsis(i,t,s,e){let r=1,o=s.split(/\s+/).reverse(),c=parseInt(i.attr("x"),10),u=parseInt(i.attr("y"),10),p=parseInt(i.attr("width"),10),f=[],d=i.append("tspan").attr("x",c).attr("y",u).attr("width",p),y=o.pop();for(;y;){if(f.push(y),d.text(f.join(" ")),d.node().getComputedTextLength()>p)if(f.pop(),d.text(f.join(" ")),d=i.append("tspan").attr("x",c).attr("dy","1.2em").attr("width",p),++r>=t){let x=[y].concat(o.reverse());this.ellipsis(d,x.join(" "),e);break}else d.text(y),f=[y];y=o.pop()}}activeThreadCount(i,t){let s=t.status.aggregateSnapshot.activeThreadCount,e=t.status.aggregateSnapshot.terminatedThreadCount;if(s>0||e>0){let r=function(){let c=s+" active threads";return e>0&&(c+=" ("+e+" terminated)"),c},o=i.select("text.active-thread-count").text(function(){return e>0?s+" ("+e+")":s}).attr("class",function(){switch(t.type){case N.Processor:case N.InputPort:case N.OutputPort:return"active-thread-count tertiary-color";default:return"active-thread-count secondary-contrast"}}).style("display","block").each(function(){let c=m(this),u=this.getBBox();c.attr("x",function(){return t.dimensions.width-u.width-15}),c.selectAll("title").remove()});o.append("title").text(r),i.select("text.active-thread-count-icon").attr("x",function(){let c=o.node().getBBox();return t.dimensions.width-c.width-20}).attr("class",function(){switch(t.type){case N.Processor:case N.InputPort:case N.OutputPort:return e>0?"active-thread-count-icon error-color":"active-thread-count-icon primary-color";default:return"active-thread-count-icon secondary-contrast"}}).style("display","block").each(function(){m(this).selectAll("title").remove()}).append("title").text(r)}else i.selectAll("text.active-thread-count, text.active-thread-count-icon").style("display","none").each(function(){m(this).selectAll("title").remove()})}determineContrastColor(i){return parseInt(i,16)>16777215/1.5?"#000000":"#ffffff"}filterEnable(i){return i.filter((t,s,e)=>{let r=m(e[s]);return this.isProcessGroup(r)?!0:this.canOperate(r)?(this.isProcessor(r)||this.isInputPort(r)||this.isOutputPort(r))&&this.supportsModification(r)&&t.status.aggregateSnapshot.runStatus==="Disabled":!1})}canEnable(i){return i.empty()?!0:this.filterEnable(i).size()===i.size()}filterDisable(i){return i.filter((t,s,e)=>{let r=m(e[s]);return this.isProcessGroup(r)?!0:this.canOperate(r)?(this.isProcessor(r)||this.isInputPort(r)||this.isOutputPort(r))&&this.supportsModification(r)&&(t.status.aggregateSnapshot.runStatus==="Stopped"||t.status.aggregateSnapshot.runStatus==="Invalid"):!1})}canDisable(i){return i.empty()?!0:this.filterDisable(i).size()===i.size()}areRunnable(i){if(i.empty())return!0;let t=!0;return i.each((s,e,r)=>{this.isRunnable(m(r[e]))||(t=!1)}),t}areAnyRunnable(i){if(i.empty())return!0;let t=!1;return i.each((s,e,r)=>{let o=m(r[e]);(this.isRunnable(o)||this.canStartTransmitting(o))&&(t=!0)}),t}isRunnable(i){if(i.size()!==1)return!1;if(this.isProcessGroup(i))return!0;if(!this.canOperate(i))return!1;let t=!1,s=i.datum();return(this.isProcessor(i)||this.isInputPort(i)||this.isOutputPort(i))&&(t=this.supportsModification(i)&&s.status.aggregateSnapshot.runStatus==="Stopped"),t}areStoppable(i){if(i.empty())return!0;let t=!0;return i.each((s,e,r)=>{this.isStoppable(m(r[e]))||(t=!1)}),t}areAnyStoppable(i){if(i.empty())return!0;let t=!1;return i.each((s,e,r)=>{let o=m(r[e]);(this.isStoppable(o)||this.canStopTransmitting(o))&&(t=!0)}),t}isStoppable(i){if(i.size()!==1)return!1;if(this.isProcessGroup(i))return!0;if(!this.canOperate(i))return!1;let t=!1,s=i.datum();return(this.isProcessor(i)||this.isInputPort(i)||this.isOutputPort(i))&&(t=s.status.aggregateSnapshot.runStatus==="Running"),t}getStartable(i){return i.filter((t,s,e)=>{let r=e[s];return this.isRunnable(m(r))||this.canStartTransmitting(m(r))})}getStoppable(i){return i.filter((t,s,e)=>{let r=e[s];return this.isStoppable(m(r))||this.canStopTransmitting(m(r))})}canAllStartTransmitting(i){if(i.empty())return!1;let t=!0;return i.each((s,e,r)=>{this.canStartTransmitting(m(r[e]))||(t=!1)}),t}canStartTransmitting(i){return i.size()!==1||(!this.canModify(i)||!this.canRead(i))&&!this.canOperate(i)?!1:this.isRemoteProcessGroup(i)}canStopTransmitting(i){return i.size()!==1||(!this.canModify(i)||this.canRead(i))&&!this.canOperate(i)?!1:this.isRemoteProcessGroup(i)}canAllStopTransmitting(i){if(i.empty())return!1;let t=!0;return i.each((s,e,r)=>{this.canStopTransmitting(m(r[e]))||(t=!1)}),t}canOperate(i){let t=i.size(),s=i.filter(e=>e.permissions.canWrite||e.operatePermissions?.canWrite).size();return t===s}canTerminate(i){if(i.size()!==1||!this.canOperate(i))return!1;if(this.isProcessor(i)){let s=i.datum().status.aggregateSnapshot;return s.runStatus!=="Running"&&s.activeThreadCount>0}return!1}supportsStartFlowVersioning(i){return this.supportsFlowVersioning(i)?i.empty()&&this.breadcrumbs?this.breadcrumbs.permissions.canRead?!this.breadcrumbs.breadcrumb.versionControlInformation:!1:!i.datum().component.versionControlInformation:!1}supportsFlowVersioning(i){return this.canVersionFlows()?i.empty()?this.getParentProcessGroupId()?this.canvasPermissions.canRead&&this.canvasPermissions.canWrite:!1:this.isProcessGroup(i)?this.canRead(i)&&this.canModify(i):!1:!1}supportsCommitFlowVersion(i){let t=this.getFlowVersionControlInformation(i);return t!==null&&t.state==="LOCALLY_MODIFIED"}supportsForceCommitFlowVersion(i){let t=this.getFlowVersionControlInformation(i);return t!==null&&t.state==="LOCALLY_MODIFIED_AND_STALE"}hasLocalChanges(i){let t=this.getFlowVersionControlInformation(i);return t!==null&&(t.state==="LOCALLY_MODIFIED"||t.state==="LOCALLY_MODIFIED_AND_STALE")}supportsChangeFlowVersion(i){let t=this.getFlowVersionControlInformation(i);return t!==null&&t.state!=="LOCALLY_MODIFIED"&&t.state!=="LOCALLY_MODIFIED_AND_STALE"&&t.state!=="SYNC_FAILURE"}supportsStopFlowVersioning(i){return this.getFlowVersionControlInformation(i)!==null}canVersionFlows(){return this.currentUser.canVersionFlows}getFlowVersionControlInformation(i){return this.supportsFlowVersioning(i)?i.empty()?this.breadcrumbs&&this.breadcrumbs.permissions.canRead&&this.breadcrumbs.breadcrumb.versionControlInformation||null:i.datum().component.versionControlInformation||null:null}supportsDownloadFlow(i){return i.empty()?this.canvasPermissions.canRead:i.size()===1?this.isProcessGroup(i)&&this.canRead(i):!1}canChangeProcessorVersion(i){if(i.size()!==1||!this.canRead(i)||!this.canModify(i))return!1;if(this.isProcessor(i)){let t=i.datum();return this.runnableSupportsModification(t)&&t.component.multipleVersionsAvailable}return!1}canMoveToFront(i){return i.size()!==1||this.canModify(i)===!1?!1:this.isConnection(i)||this.isLabel(i)}isColorable(i){if(i.empty()||!this.canRead(i)||!this.canModify(i))return!1;let t=i.filter((o,c,u)=>{let p=m(u[c]);return this.isProcessor(p)&&this.canModify(p)}),s=i.filter((o,c,u)=>{let p=m(u[c]);return this.isLabel(p)&&this.canModify(p)}),e=t.size()===i.size(),r=s.size()===i.size();return e||r}static{this.\u0275fac=function(t){return new(t||a)(S(q),S(tt),S(nn))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}};var bt=(()=>{class a{constructor(t){this.store=t}select(t,s){let e=s.data().map(function(r){return{id:r.id,componentType:r.type}});s.classed("selected")?t.shiftKey&&this.store.dispatch(yn({request:{components:e}})):t.shiftKey?this.store.dispatch(mn({request:{components:e}})):this.store.dispatch(le({request:{components:e}})),t.stopPropagation()}activate(t){let s=this;t.on("mousedown.selection",function(e){s.select(e,m(this))})}static{this.\u0275fac=function(s){return new(s||a)(S(q))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var me=(()=>{class a{transition(t,s){return s&&!t.empty()?t.transition().duration(400):t}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function hs(a,i){if(a&1&&(ut(0,"li"),gt(1),dt()),a&2){let t=i.$implicit;at(),_t(t)}}var Fe=(()=>{class a{static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=oe({type:a,selectors:[["unordered-list-tip"]],inputs:{data:"data"},decls:4,vars:0,consts:[[1,"tooltip"]],template:function(s,e){s&1&&(ut(0,"div",0)(1,"ul"),Ke(2,hs,2,1,"li",null,Ye),dt()()),s&2&&(at(2),Qe(e.data==null?null:e.data.items))},encapsulation:2})}}return a})();var Ut=(()=>{class a{constructor(t,s){this.canvasUtils=t,this.store=s}quickSelect(t){let s=this.canvasUtils.getSelection(),e=s.datum();(this.canvasUtils.isConfigurable(s)||this.canvasUtils.hasDetails(s))&&this.store.dispatch(xn({request:{type:e.type,id:e.id}})),t.preventDefault(),t.stopPropagation()}activate(t){let s=this;t.on("dblclick",function(e){s.quickSelect(e)})}static{this.\u0275fac=function(s){return new(s||a)(S(Q),S(q))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var wt=class a{static{this.DIMENSIONS={width:224,height:0}}static{this.BACKPRESSURE_BAR_WIDTH=a.DIMENSIONS.width/2-15-2}static{this.BACKPRESSURE_COUNT_OFFSET=6}static{this.BACKPRESSURE_DATASIZE_OFFSET=a.DIMENSIONS.width/2+10+1}static{this.SELF_LOOP_X_OFFSET=a.DIMENSIONS.width/2+5}static{this.SELF_LOOP_Y_OFFSET=25}static{this.CONNECTION_OFFSET_Y_INCREMENT=75}static{this.CONNECTION_OFFSET_X_INCREMENT=250}static{this.HEIGHT_FOR_BACKPRESSURE=3}static{this.SNAP_ALIGNMENT_PIXELS=8}constructor(i,t,s,e,r,o,c,u){this.store=i,this.canvasUtils=t,this.nifiCommon=s,this.client=e,this.selectableBehavior=r,this.transitionBehavior=o,this.quickSelectBehavior=c,this.clusterConnectionService=u,this.destroyed$=new ft,this.connections=[],this.connectionContainer=null,this.transitionRequired=!1,this.currentProcessGroupId=Ot.id,this.scale=kt,this.snapEnabled=!0;let p=this;this.lineGenerator=an().x(function(f){return f.x}).y(function(f){return f.y}).curve(on),this.bendPointDrag=Pt().on("start",function(f){f.sourceEvent.stopPropagation();let y=m(this.parentNode).datum();y.dragging=!0}).on("drag",function(f,d){m(this.parentNode).datum().dragging&&(p.snapEnabled=!f.sourceEvent.shiftKey,d.x=p.snapEnabled?Math.round(f.x/a.SNAP_ALIGNMENT_PIXELS)*a.SNAP_ALIGNMENT_PIXELS:f.x,d.y=p.snapEnabled?Math.round(f.y/a.SNAP_ALIGNMENT_PIXELS)*a.SNAP_ALIGNMENT_PIXELS:f.y,p.updateConnections(m(this.parentNode),{updatePath:!0,updateLabel:!1}))}).on("end",function(f){let d=m(this.parentNode),y=d.datum();if(y.dragging){let x=d.selectAll("rect.midpoint").data();if(x.length===y.component.bends.length){let v=!1;for(let C=0;C<x.length&&!v;C++)(x[C].x!==y.component.bends[C].x||x[C].y!==y.component.bends[C].y)&&(v=!0);v&&p.save(y,{id:y.id,bends:x},{bends:[...y.component.bends]})}}f.sourceEvent.stopPropagation(),y.dragging=!1}),this.endpointDrag=Pt().on("start",function(f,d){d.endPointDragging=!0,f.sourceEvent.stopPropagation();let x=m(this.parentNode).datum();x.dragging=!0}).on("drag",function(f,d){m(this.parentNode).datum().dragging&&(d.x=f.x-8,d.y=f.y-8,m("g.hover").classed("connectable-destination",function(){return p.canvasUtils.isValidConnectionDestination(m(this))}),p.updateConnections(m(this.parentNode),{updatePath:!0,updateLabel:!1}))}).on("end",function(f,d){d.endPointDragging=!1;let y=m(this.parentNode),x=y.datum();if(x.dragging){let v=m("g.connectable-destination");if(v.empty())p.updateConnections(y,{updatePath:!0,updateLabel:!1});else{let C=v.datum();if(p.canvasUtils.isProcessGroup(v)||p.canvasUtils.isRemoteProcessGroup(v))p.store.dispatch(Cn({request:{type:N.Connection,uri:x.uri,entity:X({},x),newDestination:{type:C.type,groupId:C.id,name:C.permissions.canRead?C.component.name:C.id}}}));else{let I=p.canvasUtils.getConnectableTypeForDestination(C.type),E={revision:p.client.getRevision(x),disconnectedNodeAcknowledged:p.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:x.id,destination:{id:C.id,groupId:p.currentProcessGroupId,type:I}}};if(x.bends.length<2&&x.sourceId===C.id){let n={x:C.position.x+C.dimensions.width,y:C.position.y+C.dimensions.height/2};E.component.bends=[],E.component.bends.push({x:n.x+a.SELF_LOOP_X_OFFSET,y:n.y-a.SELF_LOOP_Y_OFFSET}),E.component.bends.push({x:n.x+a.SELF_LOOP_X_OFFSET,y:n.y+a.SELF_LOOP_Y_OFFSET})}p.store.dispatch(bn({request:{id:x.id,type:N.Connection,uri:x.uri,previousDestination:x.component.destination,payload:E,errorStrategy:"snackbar"}}))}}}f.sourceEvent.stopPropagation(),x.dragging=!1}),this.labelDrag=Pt().on("start",function(f,d){f.sourceEvent.stopPropagation(),d.dragging=!0}).on("drag",function(f,d){if(d.dragging&&d.bends.length>1){let y=m("rect.label-drag");if(y.empty()){let E=m(this).select("rect.body"),n=p.getLabelPosition(E),w=a.DIMENSIONS.width,A=E.attr("height");y=m("#canvas").append("rect").attr("x",n.x).attr("y",n.y).attr("class","label-drag").attr("width",w).attr("height",A).attr("stroke-width",function(){return 1/p.scale}).attr("stroke-dasharray",function(){return 4/p.scale}).datum({x:n.x,y:n.y,width:w,height:A})}else y.attr("x",function(E){return E.x+=f.dx,E.x}).attr("y",function(E){return E.y+=f.dy,E.y});let x=y.datum(),v={x:x.x+x.width/2,y:x.y+x.height/2},C=-1,I;d.bends.forEach((E,n)=>{let w={x:E.x,y:E.y},A=p.distanceBetweenPoints(v,w);(C===-1||A<I)&&(C=n,I=A)}),d.labelIndex=C,p.updateConnections(m(this.parentNode),{updatePath:!0,updateLabel:!1})}}).on("end",function(f,d){if(d.dragging&&d.bends.length>1){let y=m("rect.label-drag");y.empty()||y.remove(),d.labelIndex!==d.component.labelIndex&&p.save(d,{id:d.id,labelIndex:d.labelIndex},{labelIndex:d.component.labelIndex})}f.sourceEvent.stopPropagation(),d.dragging=!1})}getLabelPosition(i){let t=i.datum(),{x:s,y:e}=this.canvasUtils.getPositionForCenteringConnection(t);return s-=a.DIMENSIONS.width/2,e-=i.attr("height")/2,{x:s,y:e}}distanceSquared(i,t){return Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)}distanceBetweenPoints(i,t){return Math.sqrt(this.distanceSquared(i,t))}distanceToSegment(i,t,s){let e=this.distanceSquared(t,s);if(e===0)return Math.sqrt(this.distanceSquared(i,t));let r=((i.x-t.x)*(s.x-t.x)+(i.y-t.y)*(s.y-t.y))/e;return r<0?Math.sqrt(this.distanceSquared(i,t)):r>1?Math.sqrt(this.distanceSquared(i,s)):Math.sqrt(this.distanceSquared(i,{x:t.x+r*(s.x-t.x),y:t.y+r*(s.y-t.y)}))}getNearestSegment(i,t){if(t.bends.length===0)return 0;let s,e=0,r=[t.start].concat(t.bends,[t.end]);for(let o=0;o<r.length;o++)if(o+1<r.length){let c=this.distanceToSegment(i,r[o],r[o+1]);(s===void 0||c<s)&&(s=c,e=o)}return e}isInputPortType(i){return i.indexOf("INPUT_PORT")>=0}isOutputPortType(i){return i.indexOf("OUTPUT_PORT")>=0}isGroup(i){return i.groupId!==this.currentProcessGroupId&&(this.isInputPortType(i.type)||this.isOutputPortType(i.type))}isExpirationConfigured(i){if(i.flowFileExpiration!=null){let t=i.flowFileExpiration.match(/^(\d+).*/);if(t!==null&&t.length>0&&parseInt(t[0],10)>0)return!0}return!1}isLoadBalanceConfigured(i){return i.loadBalanceStrategy!=null&&i.loadBalanceStrategy!=="DO_NOT_LOAD_BALANCE"}sort(i){i.sort((t,s)=>this.nifiCommon.compareNumber(t.zIndex,s.zIndex))}hasUnavailableRelationship(i){return i.component.selectedRelationships!=null&&i.component.availableRelationships!=null?i.component.selectedRelationships.filter(s=>!i.component.availableRelationships.includes(s)).length>0:!1}isFullCount(i){return i.status.aggregateSnapshot.percentUseCount===100}isWarningCount(i){let t=i.status.aggregateSnapshot.percentUseCount;return t!=null?t>=61&&t<=85:!1}isErrorCount(i){let t=i.status.aggregateSnapshot.percentUseCount;return t!=null?t>85:!1}isFullBytes(i){return i.status.aggregateSnapshot.percentUseBytes===100}isWarningBytes(i){let t=i.status.aggregateSnapshot.percentUseBytes;return t!=null?t>=61&&t<=85:!1}isErrorBytes(i){let t=i.status.aggregateSnapshot.percentUseBytes;return t!=null?t>85:!1}save(i,t,s){let e={id:i.id,type:N.Connection,uri:i.uri,payload:{revision:this.client.getRevision(i),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:t},restoreOnFailure:s,errorStrategy:"snackbar"};this.store.dispatch(ue({request:e}))}isAtBackPressure(i){let t=i.status.aggregateSnapshot.percentUseCount,s=i.status.aggregateSnapshot.percentUseBytes;return Math.max(t,s)>=100}getBackPressureCountTip(i){let t=[],s=i.status.aggregateSnapshot.percentUseCount;if(s!=null){let e=i.status.aggregateSnapshot.predictions,r=Math.min(Math.max(s,0),100);if(i.permissions.canRead){let o=i.component.backPressureObjectThreshold;t.push(`Queue: ${r}% full (based on ${o} object threshold)`)}else t.push(`Queue: ${r}% full`);if(e!=null){let o=e.predictedPercentCount,c=e.predictedMillisUntilCountBackpressure,u=e.predictionIntervalSeconds,p=Math.min(Math.max(o,0),100);t.push(`Predicted queue (next ${u/60} mins): ${p}%`);let f=this.isAtBackPressure(i);if(c>=0&&c<Number.MAX_SAFE_INTEGER&&!f){let d=this.canvasUtils.formatPredictedDuration(c);t.push(`Estimated time to back pressure: ${d}`)}else t.push(`Estimated time to back pressure: ${f?"now":"NA"}`)}else t.push("Queue Prediction is not configured")}else t.push("Back Pressure Object Threshold is not configured");return t}getBackPressureSizeTip(i){let t=[],s=i.status.aggregateSnapshot.percentUseBytes;if(s!=null){let e=i.status.aggregateSnapshot.predictions,r=Math.min(Math.max(s,0),100);if(i.permissions.canRead){let o=i.component.backPressureDataSizeThreshold;t.push(`Queue: ${r}% full (based on ${o} data size threshold)`)}else t.push(`Queue: ${r}% full`);if(e!=null){let o=e.predictedPercentBytes,c=e.predictedMillisUntilBytesBackpressure,u=e.predictionIntervalSeconds,p=Math.min(Math.max(o,0),100);t.push(`Predicted queue (next ${u/60} mins): ${p}%`);let f=this.isAtBackPressure(i);if(c>=0&&c<Number.MAX_SAFE_INTEGER&&!f){let d=this.canvasUtils.formatPredictedDuration(c);t.push(`Estimated time to back pressure: ${d}`)}else t.push(`Estimated time to back pressure: ${f?"now":"NA"}`)}else t.push("Queue Prediction is not configured")}else t.push("Back Pressure Data Size Threshold is not configured");return t}select(){return this.connectionContainer.selectAll("g.connection").data(this.connections,function(i){return i.id})}renderConnections(i){if(i.empty())return i;let t=this,s=i.append("g").attr("id",function(e){return"id-"+e.id}).attr("class","connection");return s.append("path").attr("class","connection-path").attr("pointer-events","none"),s.append("path").attr("class","connection-selection-path").attr("pointer-events","none"),s.append("path").attr("class","connection-path-selectable").attr("pointer-events","stroke").on("mousedown.selection",function(e){t.selectableBehavior.select(e,m(this.parentNode))}).on("dblclick",function(e,r){if(r.permissions.canWrite&&r.permissions.canRead){let o=$t(e,this.parentNode),c=t.getNearestSegment({x:o[0],y:o[1]},r),u=r.component.bends.slice();u.splice(c,0,{x:o[0],y:o[1]});let p={id:r.id,bends:u},f=r.component.labelIndex;u.length===1?p.labelIndex=0:c<=f&&(p.labelIndex=f+1),t.save(r,p),e.stopPropagation()}}),s}updateConnections(i,{updatePath:t=!0,updateLabel:s=!0}={}){if(i.empty())return;let e=this;t&&(i.classed("grouped",function(r){let o=!1;return r.permissions.canRead&&r.component.selectedRelationships?.length>1&&(o=!0),o}).classed("ghost",function(r){let o=!1;return r.permissions.canRead&&e.hasUnavailableRelationship(r)&&(o=!0),o}),i.select("path.connection-path").classed("unauthorized",function(r){return r.permissions.canRead===!1})),i.each(function(r){let o=m(this);if(t){let c=e.canvasUtils.getConnectionSourceComponentId(r),u=m("#id-"+c).datum(),p,f;if(r.bends.length>0?f=r.bends[r.bends.length-1]:f={x:u.position.x+u.dimensions.width/2,y:u.position.y+u.dimensions.height/2},r.end?.endPointDragging){p=r.end;let I=m("g.hover.connectable-destination");if(!I.empty()){let E=I.datum(),n=e.canvasUtils.getPerimeterPoint(f,{x:E.position.x,y:E.position.y,width:E.dimensions.width,height:E.dimensions.height});p.x=n.x,p.y=n.y}}else{let I=e.canvasUtils.getConnectionDestinationComponentId(r),E=m("#id-"+I).datum();p=e.canvasUtils.getPerimeterPoint(f,{x:E.position.x,y:E.position.y,width:E.dimensions.width,height:E.dimensions.height})}let d;r.bends.length>0?d=r.bends[0]:d=p;let y=e.canvasUtils.getPerimeterPoint(d,{x:u.position.x,y:u.position.y,width:u.dimensions.width,height:u.dimensions.height});r.start=y,r.end=p,e.transitionBehavior.transition(o.select("path.connection-path"),e.transitionRequired).attr("d",function(){let I=[r.start].concat(r.bends,[r.end]);return e.lineGenerator(I)}),e.transitionBehavior.transition(o.select("path.connection-selection-path"),e.transitionRequired).attr("d",function(){let I=[r.start].concat(r.bends,[r.end]);return e.lineGenerator(I)}),e.transitionBehavior.transition(o.select("path.connection-path-selectable"),e.transitionRequired).attr("d",function(){let I=[r.start].concat(r.bends,[r.end]);return e.lineGenerator(I)});let x=o.selectAll("rect.startpoint"),v=o.selectAll("rect.endpoint"),C=o.selectAll("rect.midpoint");if(r.permissions.canWrite&&r.permissions.canRead){x=x.data([r.start]);let I=x.enter().append("rect").attr("class","startpoint linepoint").attr("pointer-events","all").attr("width",8).attr("height",8).on("mousedown.selection",function(w){e.selectableBehavior.select(w,m(this.parentNode))});e.transitionBehavior.transition(x.merge(I),e.transitionRequired).attr("transform",function(w){return"translate("+(w.x-4)+", "+(w.y-4)+")"}),x.exit().remove(),v=v.data([r.end]);let E=v.enter().append("rect").attr("class","endpoint linepoint").attr("pointer-events","all").attr("width",8).attr("height",8).on("mousedown.selection",function(w){e.selectableBehavior.select(w,m(this.parentNode))}).call(e.endpointDrag);e.transitionBehavior.transition(v.merge(E),e.transitionRequired).attr("transform",function(w){return"translate("+(w.x-4)+", "+(w.y-4)+")"}),v.exit().remove(),C=C.data(r.bends);let n=C.enter().append("rect").attr("class","midpoint linepoint").attr("pointer-events","all").attr("width",8).attr("height",8).on("dblclick",function(w,A){w.stopPropagation();let O=m(this.parentNode).datum(),K=e.canvasUtils.getConnectionSourceComponentId(O),j=e.canvasUtils.getConnectionDestinationComponentId(O);if(K===j&&r.component.bends.length<=2){this.store.dispatch(Kt({title:"Connection",message:"Looping connections must have at least two bend points."}));return}let D=[],H=-1;if(O.component.bends.forEach((Z,g)=>{A.x!==Z.x&&A.y!==Z.y?D.push(Z):H=g}),H<0)return;let F={id:O.id,bends:D},ot=O.component.labelIndex;D.length<=1?F.labelIndex=0:H<=ot&&(F.labelIndex=Math.max(0,ot-1)),e.save(O,F)}).on("mousedown.selection",function(w){e.selectableBehavior.select(w,m(this.parentNode))}).call(e.bendPointDrag);e.transitionBehavior.transition(C.merge(n),e.transitionRequired).attr("transform",function(w){return"translate("+(w.x-4)+", "+(w.y-4)+")"}),C.exit().remove()}else x.remove(),v.remove(),C.remove()}if(s){let c=o.select("g.connection-label-container");if(o.classed("visible")){c.empty()&&(c=o.insert("g","rect.startpoint").attr("class","connection-label-container").attr("pointer-events","all").on("mousedown.selection",function(I){e.selectableBehavior.select(I,m(this.parentNode))}),e.quickSelectBehavior.activate(c),c.append("rect").attr("class","body").attr("width",a.DIMENSIONS.width).attr("x",0).attr("y",0),c.append("rect").attr("class","border").attr("width",a.DIMENSIONS.width).attr("fill","transparent").attr("stroke","transparent"));let u=0,p=19,f=[],d=[],y=c.select("g.connection-from-container"),x=c.select("g.connection-to-container"),v=c.select("g.connection-name-container");if(r.permissions.canRead){e.isGroup(r.component.source)?(y.empty()?(y=c.append("g").attr("class","connection-from-container"),f.push(y.append("rect").attr("class","connection-label-background").attr("width",a.DIMENSIONS.width).attr("height",p)),d.push(y.append("rect").attr("class","connection-label-border").attr("width",a.DIMENSIONS.width).attr("height",1)),y.append("text").attr("class","stats-label").attr("x",5).attr("y",14).text("From"),y.append("text").attr("class","stats-value connection-from").attr("x",43).attr("y",14).attr("width",130),y.append("text").attr("class","connection-from-run-status").attr("x",208).attr("y",14)):(f.push(y.select("rect.connection-label-background")),d.push(y.select("rect.connection-label-border"))),y.attr("transform",function(){return"translate(0, "+p*u+++")"}),y.select("text.connection-from").each(function(){let E=m(this);E.text(null).selectAll("title").remove(),e.canvasUtils.ellipsis(E,r.component.source.name,"connection-from")}).append("title").text(function(){return r.component.source.name}),y.select("text.connection-from-run-status").text(function(){return r.component.source.exists===!1?"\uF071":r.component.source.running===!0?"\uF04B":"\uF04D"}).classed("running success-color-default",function(){return r.component.source.exists===!1?!1:r.component.source.running}).classed("stopped error-color-variant",function(){return r.component.source.exists===!1?!1:!r.component.source.running}).classed("is-missing-port invalid caution-color",function(){return r.component.source.exists===!1})):y.remove(),e.isGroup(r.component.destination)?(x.empty()?(x=c.append("g").attr("class","connection-to-container"),f.push(x.append("rect").attr("class","connection-label-background").attr("width",a.DIMENSIONS.width).attr("height",p)),d.push(x.append("rect").attr("class","connection-label-border").attr("width",a.DIMENSIONS.width).attr("height",1)),x.append("text").attr("class","stats-label").attr("x",5).attr("y",14).text("To"),x.append("text").attr("class","stats-value connection-to").attr("x",25).attr("y",14).attr("width",145),x.append("text").attr("class","connection-to-run-status").attr("x",208).attr("y",14)):(f.push(x.select("rect.connection-label-background")),d.push(x.select("rect.connection-label-border"))),x.attr("transform",function(){return"translate(0, "+p*u+++")"}),x.select("text.connection-to").each(function(E){let n=m(this);n.text(null).selectAll("title").remove(),e.canvasUtils.ellipsis(n,E.component.destination.name,"connection-to")}).append("title").text(function(E){return E.component.destination.name}),x.select("text.connection-to-run-status").text(function(){return r.component.destination.exists===!1?"\uF071":r.component.destination.running===!0?"\uF04B":"\uF04D"}).classed("running success-color-default",function(){return r.component.destination.exists===!1?!1:r.component.destination.running}).classed("stopped error-color-variant",function(){return r.component.destination.exists===!1?!1:!r.component.destination.running}).classed("is-missing-port invalid caution-color",function(){return r.component.destination.exists===!1})):x.remove();let I=e.canvasUtils.formatConnectionName(r.component);e.nifiCommon.isBlank(I)?v.remove():(v.empty()?(v=c.append("g").attr("class","connection-name-container"),f.push(v.append("rect").attr("class","connection-label-background").attr("width",a.DIMENSIONS.width).attr("height",p)),d.push(v.append("rect").attr("class","connection-label-border").attr("width",a.DIMENSIONS.width).attr("height",1)),v.append("text").attr("class","stats-label").attr("x",5).attr("y",14).text("Name"),v.append("text").attr("class","stats-value connection-name").attr("x",45).attr("y",14).attr("width",142)):(f.push(v.select("rect.connection-label-background")),d.push(v.select("rect.connection-label-border"))),v.attr("transform",function(){return"translate(0, "+p*u+++")"}),v.select("text.connection-name").each(function(){let E=m(this);E.text(null).selectAll("title").remove(),e.canvasUtils.ellipsis(E,I,"connection-name")}).append("title").text(function(){return I}))}else y.remove(),x.remove(),v.remove();let C=c.select("g.queued-container");if(C.empty()){C=c.append("g").attr("class","queued-container"),f.push(C.append("rect").attr("class","connection-label-background").attr("width",a.DIMENSIONS.width).attr("height",p+a.HEIGHT_FOR_BACKPRESSURE)),d.push(C.append("rect").attr("class","connection-label-border").attr("width",a.DIMENSIONS.width).attr("height",1)),C.append("text").attr("class","stats-label").attr("x",5).attr("y",14).text("Queued");let I=C.append("text").attr("class","stats-value queued").attr("x",55).attr("y",14);I.append("tspan").attr("class","count"),I.append("tspan").attr("class","size"),C.append("text").attr("class","load-balance-icon").attr("y",14).text(function(){return"\uF042"}).append("title"),C.append("text").attr("class","expiration-icon primary-color").attr("x",208).attr("y",14).text(function(){return"\uF017"}).append("title");let E=p+a.HEIGHT_FOR_BACKPRESSURE-4,n=C.append("g").attr("transform","translate("+a.BACKPRESSURE_COUNT_OFFSET+", "+E+")").attr("class","backpressure-object-container");n.append("rect").attr("class","backpressure-tick object").attr("width",1).attr("height",3).attr("x",0).attr("y",0),n.append("rect").attr("class","backpressure-object").attr("width",a.BACKPRESSURE_BAR_WIDTH).attr("height",3).attr("x",0).attr("y",0),n.append("rect").attr("class","backpressure-tick object").attr("width",1).attr("height",3).attr("x",a.BACKPRESSURE_BAR_WIDTH).attr("y",0),n.append("rect").attr("class","backpressure-percent object").attr("width",0).attr("height",3).attr("x",0).attr("y",0),n.append("rect").attr("class","backpressure-tick object-prediction").attr("width",1).attr("height",3).attr("x",a.BACKPRESSURE_BAR_WIDTH).attr("y",0);let w=C.append("g").attr("transform","translate("+a.BACKPRESSURE_DATASIZE_OFFSET+", "+E+")").attr("class","backpressure-data-size-container");w.append("rect").attr("class","backpressure-tick data-size").attr("width",1).attr("height",3).attr("x",0).attr("y",0),w.append("rect").attr("class","backpressure-data-size").attr("width",a.BACKPRESSURE_BAR_WIDTH).attr("height",3).attr("x",0).attr("y",0).append("title"),w.append("rect").attr("class","backpressure-tick data-size").attr("width",1).attr("height",3).attr("x",a.BACKPRESSURE_BAR_WIDTH).attr("y",0),w.append("rect").attr("class","backpressure-percent data-size").attr("width",0).attr("height",3).attr("x",0).attr("y",0),w.append("rect").attr("class","backpressure-tick data-size-prediction").attr("width",1).attr("height",3).attr("x",a.BACKPRESSURE_BAR_WIDTH).attr("y",0)}else f.push(C.select("rect.connection-label-background")),d.push(C.select("rect.connection-label-border"));C.attr("transform",function(){return"translate(0, "+p*u+++")"}),c.select("rect.body").attr("height",function(){return p*u+a.HEIGHT_FOR_BACKPRESSURE}).classed("unauthorized",function(){return r.permissions.canRead===!1}),c.select("rect.border").attr("height",function(){return p*u+a.HEIGHT_FOR_BACKPRESSURE}).classed("unauthorized",function(){return r.permissions.canRead===!1}),f.forEach((I,E)=>{E%2===0?I.attr("class","odd"):I.attr("class","even")}),d.forEach((I,E)=>{E>0?I.attr("class","row-border"):I.attr("class","transparent")}),c.select("text.load-balance-icon").classed("hidden",function(){return r.permissions.canRead?!e.isLoadBalanceConfigured(r.component):!0}).classed("load-balance-icon-active fa-rotate-90 success-color-variant",function(I){return I.permissions.canRead&&I.component.loadBalanceStatus==="LOAD_BALANCE_ACTIVE"}).classed("primary-color",function(I){return I.permissions.canRead&&I.component.loadBalanceStatus!=="LOAD_BALANCE_ACTIVE"}).classed("load-balance-icon-184",function(){return r.permissions.canRead&&e.isExpirationConfigured(r.component)}).classed("load-balance-icon-200",function(){return r.permissions.canRead&&!e.isExpirationConfigured(r.component)}).attr("x",function(){return r.permissions.canRead&&e.isExpirationConfigured(r.component)?192:208}).select("title").text(function(){if(r.permissions.canRead){let I="",E=pn.find(A=>A.value==r.component.loadBalanceStrategy);E&&(I=E.text),r.component.loadBalanceStrategy==="PARTITION_BY_ATTRIBUTE"&&(I+=" ("+r.component.loadBalancePartitionAttribute+")");let n="no compression";switch(r.component.loadBalanceCompression){case"COMPRESS_ATTRIBUTES_ONLY":n="'Attribute' compression";break;case"COMPRESS_ATTRIBUTES_AND_CONTENT":n="'Attribute and content' compression";break}let w=r.component.loadBalanceStatus==="LOAD_BALANCE_ACTIVE"?" Actively balancing...":"";return"Load Balance is configured with '"+I+"' strategy and "+n+"."+w}else return""}),c.select("text.expiration-icon").classed("hidden",function(){return r.permissions.canRead?!e.isExpirationConfigured(r.component):!0}).select("title").text(function(){return r.permissions.canRead?"Expires FlowFiles older than "+r.component.flowFileExpiration:""}),c.select("rect.backpressure-object").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseCount==null}),c.selectAll("rect.backpressure-tick.object").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseCount==null}),c.selectAll("rect.backpressure-tick.object-prediction").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseCount==null}),c.select("rect.backpressure-data-size").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseBytes==null}),c.selectAll("rect.backpressure-tick.data-size").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseBytes==null}),c.selectAll("rect.backpressure-tick.data-size-prediction").classed("not-configured",function(){return r.status.aggregateSnapshot.percentUseBytes==null}),r.permissions.canWrite&&c.call(e.labelDrag),e.updateConnectionStatus(o)}else c.empty()||c.remove()}e.transitionBehavior.transition(o.select("g.connection-label-container"),e.transitionRequired).attr("transform",function(){let c=m(this).select("rect.body"),u=e.getLabelPosition(c);return"translate("+u.x+", "+u.y+")"})})}updateConnectionStatus(i){if(i.empty())return;let t=this,s=i.select("g.connection-label-container");s.select("text.penalized-icon").empty()&&s.select("g.queued-container").append("text").attr("class","penalized-icon primary-color").attr("y",14).text(function(){return"\uF252"}).append("title"),s.select("text.penalized-icon").classed("hidden",function(e){return e.status.aggregateSnapshot.flowFileAvailability!=="HEAD_OF_QUEUE_PENALIZED"}).attr("x",function(){let e=0;return s.select("text.expiration-icon").classed("hidden")||(e+=16),s.select("text.load-balance-icon").classed("hidden")||(e+=16),208-e}).select("title").text(function(){return"A FlowFile is currently penalized and data cannot be processed at this time."}),Promise.all([this.updateDataSize(i),this.updateObjectCount(i)]).then(()=>{i.select("path.connection-path").classed("full",function(e){return t.isFullCount(e)||t.isFullBytes(e)}).attr("marker-end",function(e){let r="normal";return e.permissions.canRead?t.isFullBytes(e)||t.isFullCount(e)?r="full":t.hasUnavailableRelationship(e)&&(r="ghost"):r="unauthorized","url(#"+r+")"}),i.select("rect.border").classed("full",function(e){return t.isFullCount(e)||t.isFullBytes(e)}),i.select("rect.body").attr("filter",function(e){return t.isFullCount(e)||t.isFullBytes(e)?"url(#connection-full-drop-shadow)":"url(#component-drop-shadow)"})})}updateDataSize(i){return ee(this,null,function*(){let t=this;yield new Promise(function(s){i.select("text.queued tspan.count").text(function(o){return t.nifiCommon.substringBeforeFirst(o.status.aggregateSnapshot.queued," ")});let e=i.select("rect.backpressure-percent.data-size");e.transition().duration(400).attr("width",function(o){return o.status.aggregateSnapshot.percentUseBytes!=null?a.BACKPRESSURE_BAR_WIDTH*o.status.aggregateSnapshot.percentUseBytes/100:0}).on("end",function(){e.classed("warning",function(o){return t.isWarningBytes(o)}).classed("error",function(o){return t.isErrorBytes(o)}),s()});let r=i.select("rect.backpressure-tick.data-size-prediction");r.transition().duration(400).attr("x",function(o){let c=o.status.aggregateSnapshot.predictions?.predictedPercentBytes??0;return a.BACKPRESSURE_BAR_WIDTH*Math.min(Math.max(c,0),100)/100}).attr("display",function(o){return(o.status.aggregateSnapshot.predictions?.predictedPercentBytes??-1)>=0?"unset neutral-color":"none"}).on("end",function(){r.classed("prediction-down",function(o){let c=o.status.aggregateSnapshot.predictions?.percentUseBytes??0;return(o.status.aggregateSnapshot.predictions?.predictedPercentBytes??0)<c})}),i.select("g.backpressure-data-size-container").each(function(o){t.canvasUtils.canvasTooltip(Fe,m(this),{items:t.getBackPressureSizeTip(o)})})})})}updateObjectCount(i){return ee(this,null,function*(){let t=this;yield new Promise(function(s){i.select("text.queued tspan.size").text(function(o){return" "+t.nifiCommon.substringAfterFirst(o.status.aggregateSnapshot.queued," ")});let e=i.select("rect.backpressure-percent.object");e.transition().duration(400).attr("width",function(o){return o.status.aggregateSnapshot.percentUseCount!=null?a.BACKPRESSURE_BAR_WIDTH*o.status.aggregateSnapshot.percentUseCount/100:0}).on("end",function(){e.classed("warning",function(o){return t.isWarningCount(o)}).classed("error",function(o){return t.isErrorCount(o)}),s()});let r=i.select("rect.backpressure-tick.object-prediction");r.transition().duration(400).attr("x",function(o){let c=o.status.aggregateSnapshot.predictions?.predictedPercentCount??0;return a.BACKPRESSURE_BAR_WIDTH*Math.min(Math.max(c,0),100)/100}).attr("display",function(o){return(o.status.aggregateSnapshot.predictions?.predictedPercentCount??-1)>=0?"unset neutral-color":"none"}).on("end",function(){r.classed("prediction-down",function(o){let c=o.status.aggregateSnapshot.percentUseCount;return(o.status.aggregateSnapshot.predictions?.predictedPercentCount??0)<c})}),i.select("g.backpressure-object-container").each(function(o){t.canvasUtils.canvasTooltip(Fe,m(this),{items:t.getBackPressureCountTip(o)})})})})}removeProcessGroups(i){i.empty()||i.remove()}init(){this.connectionContainer=m("#canvas").append("g").attr("pointer-events","stroke").attr("class","connections"),this.store.select(Zt).pipe(Y(()=>this.connectionContainer!==null),V(this.destroyed$)).subscribe(i=>{this.set(i)}),this.store.select(yt).pipe(Y(i=>i==="success"),Y(()=>this.connectionContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(i=>{this.connectionContainer.selectAll("g.connection").classed("selected",function(t){return i.includes(t.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(i=>{this.transitionRequired=i}),this.store.select(Qt).pipe(V(this.destroyed$)).subscribe(i=>{this.currentProcessGroupId=i}),this.store.select(Vt).pipe(V(this.destroyed$)).subscribe(i=>{this.scale=i.scale})}destroy(){this.connectionContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(i){this.connections=i.map(r=>{let o=this.connections.find(d=>d.id===r.id),c=r.revision.version>o?.revision.version,u=!1;o?.dragging&&!c&&(u=!0);let p;u?p=o.bends:p=r.bends.map(d=>X({},d));let f;return u&&(f=o.end),it(X({},r),{type:N.Connection,dragging:u,labelIndex:u?o.labelIndex:r.labelIndex,bends:p,end:f})});let t=this.select(),s=this.renderConnections(t.enter()),e=t.merge(s);this.updateConnections(e),this.sort(e),this.removeProcessGroups(t.exit())}selectAll(){return this.connectionContainer.selectAll("g.connection")}render({updatePath:i=!1,updateLabel:t=!0}={}){this.updateConnections(this.selectAll(),{updatePath:i,updateLabel:t})}renderConnection(i,{updatePath:t=!1,updateLabel:s=!0}={}){this.updateConnections(this.connectionContainer.select("#id-"+i),{updatePath:t,updateLabel:s})}renderConnectionsForComponent(i,{updatePath:t=!1,updateLabel:s=!0}={}){this.connections.filter(r=>this.canvasUtils.getConnectionSourceComponentId(r)===i||this.canvasUtils.getConnectionDestinationComponentId(r)===i).forEach(r=>{this.renderConnection(r.id,{updatePath:t,updateLabel:s})})}pan(){this.updateConnections(this.connectionContainer.selectAll("g.connection.entering, g.connection.leaving"),{updatePath:!1,updateLabel:!0})}static{this.\u0275fac=function(t){return new(t||a)(S(q),S(Q),S(tt),S(Dt),S(bt),S(me),S(Ut),S(Lt))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}};var Tt=(()=>{class a{constructor(t){this.transitionBehavior=t}position(t,s){if(!t.empty())return this.transitionBehavior.transition(t,s).attr("transform",function(e){return"translate("+e.position.x+", "+e.position.y+")"})}static{this.\u0275fac=function(s){return new(s||a)(S(me))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var zn=(()=>{class a{constructor(t,s,e,r){this.store=t,this.client=s,this.canvasUtils=e,this.clusterConnectionService=r,this.snapEnabled=!1,this.snapAlignmentPixels=8,this.scale=kt,this.updatePositionRequestId=0;let o=this;this.store.select(Vt).pipe(ht()).subscribe(c=>{this.scale=c.scale}),this.drag=Pt().on("start",function(c){c.sourceEvent.stopPropagation()}).on("drag",function(c){let u=m("rect.drag-selection");if(u.empty()){let p=jt("g.component.selected"),f=null,d=null,y=null,x=null;p.each(function(v){(f===null||v.position.x<f)&&(f=v.position.x),(y===null||v.position.y<y)&&(y=v.position.y);let C=v.position.x+v.dimensions.width,I=v.position.y+v.dimensions.height;(d===null||C>d)&&(d=C),(x===null||I>x)&&(x=I)}),m("#canvas").append("rect").attr("rx",6).attr("ry",6).attr("x",f).attr("y",y).attr("class","drag-selection").attr("pointer-events","none").attr("width",d-f).attr("height",x-y).attr("stroke-width",function(){return 1/o.scale}).attr("stroke-dasharray",function(){return 4/o.scale}).datum({original:{x:f,y},x:f,y})}else o.snapEnabled=!c.sourceEvent.shiftKey,u.attr("x",function(p){return p.x+=c.dx,o.snapEnabled?Math.round(p.x/o.snapAlignmentPixels)*o.snapAlignmentPixels:p.x}).attr("y",function(p){return p.y+=c.dy,o.snapEnabled?Math.round(p.y/o.snapAlignmentPixels)*o.snapAlignmentPixels:p.y})}).on("end",function(c){c.sourceEvent.stopPropagation();let u=m("rect.drag-selection");if(u.empty())return;let p=m("g.drop").classed("drop",!1);p.empty()?o.updateComponentsPosition(u):o.updateComponentsGroup(p),u.remove()})}updateComponentsPosition(t){let s=new Map,e=new Map,r=t.datum(),o={x:r.x-r.original.x,y:r.y-r.original.y};if(o.x===0&&o.y===0)return;let c=jt("g.connection.selected"),u=jt("g.component.selected");if(!this.canvasUtils.canModify(c)||!this.canvasUtils.canModify(u)){this.store.dispatch(Kt({title:"Component Position",message:"Must be authorized to modify every component selected."}));return}c.each(p=>{let f=this.updateConnectionPosition(p,o);f&&e.set(p.id,f)}),u.each(p=>{this.canvasUtils.getComponentConnections(p.id).forEach(d=>{if(!e.has(d.id)){let y=this.canvasUtils.getConnectionSourceComponentId(d),x=this.canvasUtils.getConnectionDestinationComponentId(d);if(y===x){let v=this.updateConnectionPosition(d,o);v&&e.set(d.id,v)}}}),s.set(p.id,this.updateComponentPosition(p,o))}),this.store.dispatch(Sn({request:{requestId:this.updatePositionRequestId++,componentUpdates:Array.from(s.values()),connectionUpdates:Array.from(e.values())}}))}updateComponentsGroup(t){let s=jt("g.component.selected, g.connection.selected").classed("selected",!1);if(!this.canvasUtils.canModify(s)){this.store.dispatch(Kt({title:"Component Position",message:"Must be authorized to modify every component selected."}));return}if(!this.canvasUtils.canModify(t)){this.store.dispatch(Kt({title:"Component Position",message:"Not authorized to modify the destination group."}));return}let e=t.datum(),r=[];s.each(function(o){r.push({id:o.id,type:o.type,uri:o.uri,entity:o})}),this.store.dispatch(wn({request:{components:r,groupId:e.id}}))}updateComponentPosition(t,s){let e={x:this.snapEnabled?Math.round((t.position.x+s.x)/this.snapAlignmentPixels)*this.snapAlignmentPixels:t.position.x+s.x,y:this.snapEnabled?Math.round((t.position.y+s.y)/this.snapAlignmentPixels)*this.snapAlignmentPixels:t.position.y+s.y};return{id:t.id,type:t.type,uri:t.uri,payload:{revision:this.client.getRevision(t),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:t.id,position:e}},restoreOnFailure:{position:t.position},errorStrategy:"snackbar"}}updateConnectionPosition(t,s){if(t.bends.length===0)return null;let e=t.bends.map(r=>({x:r.x+s.x,y:r.y+s.y}));return{id:t.id,type:N.Connection,uri:t.uri,payload:{revision:this.client.getRevision(t),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:t.id,bends:e}},restoreOnFailure:{bends:t.bends},errorStrategy:"snackbar"}}activate(t){t.classed("moveable",!0).call(this.drag)}deactivate(t){t.classed("moveable",!1).on(".drag",null)}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Dt),S(Q),S(Lt))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var _n=(()=>{class a{constructor(t,s,e){this.store=t,this.canvasUtils=s,this.nifiCommon=e;let r=this;this.connect=Pt().subject(function(o){return r.origin=$t(o,m("#canvas")),{x:r.origin[0],y:r.origin[1]}}).on("start",function(o){o.sourceEvent.stopPropagation();let u=m(this.parentNode).datum();r.store.dispatch(le({request:{components:[{id:u.id,componentType:u.type}]}})),m(this).classed("dragging",!0);let p=m("#canvas"),f=$t(o,p.node());p.insert("path",":first-child").datum({sourceId:u.id,sourceWidth:u.dimensions.width,x:u.position.x+u.dimensions.width/2,y:u.position.y+u.dimensions.height/2}).attr("class","connector").attr("d",function(d){return"M"+d.x+" "+d.y+"L"+d.x+" "+d.y}),m(this).attr("transform",function(){return"translate("+f[0]+", "+(f[1]+20)+")"}),p.node().appendChild(this)}).on("drag",function(o){let c=$t(o,m("#canvas").node());m(this).attr("transform",function(){return"translate("+c[0]+", "+(c[1]+50)+")"});let u=m("g.hover").classed("connectable-destination",function(){return(Math.abs(r.origin[0]-c[0])>10||Math.abs(r.origin[1]-c[1])>10)&&r.canvasUtils.isValidConnectionDestination(m(this))});m("path.connector").classed("connectable",function(){return u.empty()?!1:u.classed("connectable-destination")}).attr("d",function(p){if(!u.empty()&&u.classed("connectable-destination")){let f=u.datum();if(p.sourceId===f.id){let d=p.x,y=p.y,x=p.sourceWidth/2-50,v=wt.SELF_LOOP_X_OFFSET,C=wt.SELF_LOOP_Y_OFFSET;return"M"+(d+x)+" "+y+"L"+(d+x+v)+" "+(y-C)+"L"+(d+x+v)+" "+(y+C)+"Z"}else{let d=r.canvasUtils.getPerimeterPoint(p,{x:f.position.x,y:f.position.y,width:f.dimensions.width,height:f.dimensions.height});return"M"+p.x+" "+p.y+"L"+d.x+" "+d.y}}else return"M"+p.x+" "+p.y+"L"+c[0]+" "+c[1]})}).on("end",function(o,c){o.sourceEvent.stopPropagation();let u=m(this),p=m("path.connector"),f=p.datum(),d=m("#id-"+f.sourceId),y=d.datum(),x=m("g.connectable-destination");if(x.empty()){let v=$t(o,d.node());v[0]<0||v[0]>y.dimensions.width||v[1]<0||v[1]>y.dimensions.height?u.remove():(u.classed("dragging",!1).attr("transform",function(){return"translate("+c.origX+", "+c.origY+")"}),d.node().appendChild(this)),p.remove()}else{u.remove();let v=x.datum(),C={source:{id:y.id,componentType:y.type,entity:y},destination:{id:v.id,componentType:v.type,entity:v}},I=r.calculateInitialBendPoints(y,v);I&&(C.bends=I),r.store.dispatch(vn({request:C}))}})}calculateInitialBendPoints(t,s){let e=[];if(t.id==s.id){let r={x:t.position.x+t.dimensions.width,y:t.position.y+t.dimensions.height/2},o=wt.SELF_LOOP_X_OFFSET,c=wt.SELF_LOOP_Y_OFFSET;e.push({x:r.x+o,y:r.y-c}),e.push({x:r.x+o,y:r.y+c})}else{let r=[];if(this.canvasUtils.getComponentConnections(t.id).forEach(c=>{let u=this.canvasUtils.getConnectionSourceComponentId(c),p=this.canvasUtils.getConnectionDestinationComponentId(c);(u===t.id&&p===s.id||p===t.id&&u===s.id)&&r.push(c)}),r&&r.some(u=>this.nifiCommon.isEmpty(u.bends))){let u={x:t.position.x+t.dimensions.width/2,y:t.position.y+t.dimensions.height/2},p={x:s.position.x+s.dimensions.width/2,y:s.position.y+s.dimensions.height/2},f=(u.y-p.y)/(u.x-p.x),d=f<=1&&f>=-1,y=(u.x+p.x)/2,x=(u.y+p.y)/2,v=d?0:wt.CONNECTION_OFFSET_X_INCREMENT,C=d?wt.CONNECTION_OFFSET_Y_INCREMENT:0,I=!1;for(;!I;)this.collides(r,y-v,x-C)?this.collides(r,y+v,x+C)||(e.push({x:y+v,y:x+C}),I=!0):(e.push({x:y-v,y:x-C}),I=!0),d?C+=wt.CONNECTION_OFFSET_Y_INCREMENT:v+=wt.CONNECTION_OFFSET_X_INCREMENT}}return e}collides(t,s,e){return t.some(r=>{if(!this.nifiCommon.isEmpty(r.bends)){let o=r.labelIndex;return o>=r.bends.length&&(o=0),r.bends[o].y-25<e&&r.bends[o].y+25>e&&r.bends[o].x-100<s&&r.bends[o].x+100>s}return!1})}allowConnection(t){return!t.shiftKey&&m("rect.drag-selection").empty()&&m("rect.component-selection").empty()}activate(t){let s=this;t.classed("connectable",!0).on("mouseenter.connectable",function(e,r){if(s.allowConnection(e)){let o=m(this);if(s.canvasUtils.isValidConnectionSource(o)&&m("text.add-connect").empty()){let u=r.dimensions.width/2-14,p=r.dimensions.height/2+14;o.append("text").attr("class","add-connect").attr("transform","translate("+u+", "+p+")").text("\uE834").datum({origX:u,origY:p}).call(s.connect)}}}).on("mouseleave.connectable",function(){let e=m(this).select("text.add-connect");!e.empty()&&!e.classed("dragging")&&e.remove()}).on("mouseover.connectable",function(e){m(this).classed("hover",function(){return s.allowConnection(e)})}).on("mouseout.connection",function(){m(this).classed("hover connectable-destination",!1)})}deactivate(t){t.classed("connectable",!1).on("mouseenter.connectable",null).on("mouseleave.connectable",null).on("mouseover.connectable",null).on("mouseout.connectable",null)}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var At=(()=>{class a{constructor(t,s,e){this.draggableBehavior=t,this.connectableBehavior=s,this.canvasUtils=e}editable(t){this.canvasUtils.canModify(t)?(t.classed("connectable")||this.connectableBehavior.activate(t),t.classed("moveable")||this.draggableBehavior.activate(t)):(t.classed("connectable")&&this.connectableBehavior.deactivate(t),t.classed("moveable")&&this.draggableBehavior.deactivate(t))}static{this.\u0275fac=function(s){return new(s||a)(S(zn),S(_n),S(Q))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var ge=(()=>{class a{static{this.INITIAL_WIDTH=148}static{this.INITIAL_HEIGHT=148}static{this.MIN_HEIGHT=24}static{this.MIN_WIDTH=64}static{this.SNAP_ALIGNMENT_PIXELS=8}constructor(t,s,e,r,o,c,u,p,f){this.store=t,this.canvasUtils=s,this.nifiCommon=e,this.client=r,this.clusterConnectionService=o,this.positionBehavior=c,this.selectableBehavior=u,this.quickSelectBehavior=p,this.editableBehavior=f,this.destroyed$=new ft,this.labels=[],this.labelContainer=null,this.transitionRequired=!1,this.snapEnabled=!0;let d=this;this.labelPointDrag=Pt().on("start",function(y){y.sourceEvent.stopPropagation();let v=m(this.parentNode).datum();v.dragging=!0}).on("drag",function(y){let x=m(this.parentNode),v=x.datum();v.dragging&&(d.snapEnabled=!y.sourceEvent.shiftKey,v.dimensions.width=Math.max(a.MIN_WIDTH,d.snapEnabled?Math.round(y.x/a.SNAP_ALIGNMENT_PIXELS)*a.SNAP_ALIGNMENT_PIXELS:y.x),v.dimensions.height=Math.max(a.MIN_HEIGHT,d.snapEnabled?Math.round(y.y/a.SNAP_ALIGNMENT_PIXELS)*a.SNAP_ALIGNMENT_PIXELS:y.y),d.updateLabels(x))}).on("end",function(y){let v=m(this.parentNode).datum();if(v.dragging){let C=!1,I=!!v.component.width;(I||v.dimensions.width!==v.component.width)&&(C=!0);let E=!!v.component.height;if((!C&&E||v.dimensions.height!==v.component.height)&&(C=!0),C){let n={id:v.id,type:N.Label,uri:v.uri,payload:{revision:d.client.getRevision(v),disconnectedNodeAcknowledged:d.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:v.id,width:v.dimensions.width,height:v.dimensions.height}},restoreOnFailure:{dimensions:{width:I?v.component.width:a.INITIAL_WIDTH,height:E?v.component.height:a.INITIAL_HEIGHT}},errorStrategy:"snackbar"};d.store.dispatch(ue({request:n}))}}y.sourceEvent.stopPropagation(),v.dragging=!1})}select(){return this.labelContainer.selectAll("g.label").data(this.labels,function(t){return t.id})}sort(t){t.sort((s,e)=>this.nifiCommon.compareNumber(s.zIndex,e.zIndex))}renderLabels(t){if(t.empty())return t;let s=t.append("g").attr("id",function(e){return"id-"+e.id}).attr("class","label component");return s.append("rect").attr("class","border").attr("fill","transparent").attr("stroke","transparent"),s.append("rect").attr("class","body").attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),s.append("text").attr("x",10).attr("xml:space","preserve").attr("font-weight","bold").attr("fill","black").attr("class","label-value"),this.selectableBehavior.activate(s),this.quickSelectBehavior.activate(s),s}updateLabels(t){if(t.empty())return;let s=this;t.select("rect.border").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.select("rect.body").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).style("fill",function(e){if(!e.permissions.canRead)return null;let r=s.defaultColor();return e.component.style["background-color"]&&(r=e.component.style["background-color"]),r}).classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.each(function(e){let r=m(this);s.editableBehavior.editable(r);let o=r.select("text.label-value"),c=r.selectAll("path.labelpoint");if(e.permissions.canRead){o.attr("font-size",function(){let y="12px";return e.component.style["font-size"]&&(y=e.component.style["font-size"]),y}),o.selectAll("tspan").remove();let u=[];e.component.label?u=e.component.label.split(`
`):u.push("");let p=s.defaultColor();e.component.style["background-color"]&&(p=e.component.style["background-color"]);let f=e.dimensions.width-15,d=e.dimensions.height;if(s.canvasUtils.boundedMultilineEllipsis(o,f,d,u,`label-text.${e.id}.width.${f}`),o.selectAll("tspan").style("fill",function(){return s.canvasUtils.determineContrastColor(s.nifiCommon.substringAfterLast(p,"#"))}),e.permissions.canWrite){let y=[{x:e.dimensions.width,y:e.dimensions.height}],x=c.data(y),v=x.enter().append("path").attr("class","labelpoint resizable-triangle").attr("d","m0,0 l0,8 l-8,0 z").call(s.labelPointDrag);x.merge(v).attr("transform",function(C){return"translate("+(C.x-2)+", "+(C.y-10)+")"}),x.exit().remove()}}else o.selectAll("tspan").remove(),c.remove()})}defaultColor(){return"#fff7d7"}removeLabels(t){t.remove()}init(){this.labelContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","labels"),this.store.select(he).pipe(Y(()=>this.labelContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.labelContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.labelContainer.selectAll("g.label").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.labelContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.labels=t.map(o=>{let c=this.labels.find(f=>f.id===o.id),u=o.revision.version>c?.revision.version,p=!1;return c?.dragging&&!u&&(p=!0),it(X({},o),{type:N.Label,dragging:p,dimensions:X({},p?c.dimensions:o.dimensions)})});let s=this.select(),e=this.renderLabels(s.enter()),r=s.merge(e);this.updateLabels(r),this.sort(r),this.positionBehavior.position(r,this.transitionRequired),this.removeLabels(s.exit())}selectAll(){return this.labelContainer.selectAll("g.label")}render(){this.updateLabels(this.selectAll())}pan(){this.updateLabels(this.labelContainer.selectAll("g.label.entering, g.label.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt),S(Dt),S(Lt),S(Tt),S(bt),S(Ut),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Kn=Xe($n());function ys(a,i){if(a&1&&(ut(0,"div")(1,"div"),gt(2,"Branch"),dt(),ut(3,"div",3),gt(4),dt()()),a&2){let t=Re();at(3),Ht("title",t.branch),at(),_t(t.branch)}}function vs(a,i){if(a&1&&(ut(0,"div",1)(1,"div")(2,"div"),gt(3,"Flow Name"),dt(),ut(4,"div",3),gt(5),dt()(),ut(6,"div")(7,"div"),gt(8,"Version"),dt(),ut(9,"div",3),gt(10),dt()(),ut(11,"div")(12,"div"),gt(13,"Registry"),dt(),ut(14,"div",3),gt(15),dt()(),Te(16,ys,5,2,"div"),ut(17,"div")(18,"div"),gt(19,"Bucket"),dt(),ut(20,"div",3),gt(21),dt()()()),a&2){let t=i,s=Re();at(4),Ht("title",t.flowName),at(),_t(t.flowName),at(4),Ht("title",t.version),at(),_t(t.version),at(4),Ht("title",t.registryName),at(),_t(t.registryName),at(),Ae(s.supportsBranching()&&t.branch?16:-1),at(4),Ht("title",t.bucketName),at(),_t(t.bucketName)}}var Vn=(()=>{class a{constructor(){this.left=0,this.top=0}getTrackingMessage(){if(this.data){let t=this.data.versionControlInformation;return`Tracking to "${t.flowName}" Version ${t.version} in "${t.registryName} - ${t.bucketName}"`}return""}supportsBranching(){if(this.data?.registryClients&&this.data?.registryClients.length>0){let t=this.data.versionControlInformation;return this.data.registryClients.some(s=>s.id===t.registryId&&s.component.supportsBranching)}return!1}static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275cmp=oe({type:a,selectors:[["version-control-tip"]],inputs:{left:"left",top:"top",data:"data"},decls:4,vars:6,consts:[[1,"tooltip"],[1,"flex","flex-col","gap-y-2","mb-3"],[1,"italic"],[1,"tertiary-color","font-medium","truncate",3,"title"]],template:function(s,e){if(s&1&&(ut(0,"div",0),Te(1,vs,22,9,"div",1),ut(2,"div",2),gt(3),dt()()),s&2){let r;He("left",e.left,"px")("top",e.top,"px"),at(),Ae((r=e.data==null?null:e.data.versionControlInformation)?1:-1,r),at(2),Ze(" ",e.data==null||e.data.versionControlInformation==null?null:e.data.versionControlInformation.stateExplanation," ")}},encapsulation:2})}}return a})();var ve=(()=>{class a{static{this.CONTENTS_SPACER=10}static{this.CONTENTS_VALUE_SPACER=5}static{this.PREVIEW_NAME_LENGTH=30}constructor(t,s,e,r,o,c){this.store=t,this.canvasUtils=s,this.nifiCommon=e,this.positionBehavior=r,this.selectableBehavior=o,this.editableBehavior=c,this.destroyed$=new ft,this.registryClients=this.store.selectSignal(Ln),this.dimensions={width:384,height:176},this.processGroups=[],this.processGroupContainer=null,this.transitionRequired=!1}select(){return this.processGroupContainer.selectAll("g.process-group").data(this.processGroups,function(t){return t.id})}renderProcessGroups(t){if(t.empty())return t;let s=this,e=t.append("g").attr("id",function(r){return"id-"+r.id}).attr("class","process-group component");return e.append("rect").attr("class","border").attr("width",function(r){return r.dimensions.width}).attr("height",function(r){return r.dimensions.height}).attr("fill","transparent").attr("stroke","transparent"),e.append("rect").attr("class","body").attr("width",function(r){return r.dimensions.width}).attr("height",function(r){return r.dimensions.height}).attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),e.append("rect").attr("class","process-group-banner").attr("width",function(r){return r.dimensions.width}).attr("height",32),e.append("text").attr("x",10).attr("y",20).attr("width",300).attr("height",16).attr("class","process-group-name secondary-contrast"),e.append("text").attr("x",10).attr("y",21).attr("class","version-control"),e.on("dblclick",function(r,o){s.store.dispatch(fn({request:{id:o.id}}))}),this.selectableBehavior.activate(e),e.filter(function(r){return r.permissions.canWrite&&r.permissions.canRead}).on("mouseover.drop",function(){let r=m(this);if(!r.classed("drop")){let o=r.datum();m("rect.drag-selection").empty()||s.canvasUtils.getSelection().filter(function(p){return o.id===p.id}).empty()&&r.classed("drop",function(){return s.canvasUtils.isDisconnected(s.canvasUtils.getSelection())})}}).on("mouseout.drop",function(){m(this).classed("drop",!1)}),e}updateProcessGroups(t){if(t.empty())return;let s=this;t.select("rect.border").classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.select("rect.body").classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.each(function(e){let r=m(this),o=r.select("g.process-group-details");if(s.editableBehavior.editable(r),r.classed("visible")){if(o.empty()){o=r.append("g").attr("class","process-group-details"),o.append("rect").attr("class","process-group-details-banner banner").attr("x",0).attr("y",32).attr("width",function(){return e.dimensions.width}).attr("height",24),o.append("rect").attr("class","process-group-details-banner banner").attr("x",0).attr("y",function(){return e.dimensions.height-24}).attr("width",function(){return e.dimensions.width}).attr("height",24),o.append("text").attr("x",10).attr("y",49).attr("class","process-group-transmitting process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF140").append("title").text("Transmitting Remote Process Groups"),o.append("text").attr("y",49).attr("class","process-group-transmitting-count process-group-contents-count"),o.append("text").attr("y",49).attr("class","process-group-not-transmitting process-group-contents-icon secondary-color").attr("font-family","flowfont").text("\uE80A").append("title").text("Not Transmitting Remote Process Groups"),o.append("text").attr("y",49).attr("class","process-group-not-transmitting-count process-group-contents-count"),o.append("text").attr("y",49).attr("class","process-group-running process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF04B").append("title").text("Running Components"),o.append("text").attr("y",49).attr("class","process-group-running-count process-group-contents-count"),o.append("text").attr("y",49).attr("class","process-group-stopped process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF04D").append("title").text("Stopped Components"),o.append("text").attr("y",49).attr("class","process-group-stopped-count process-group-contents-count"),o.append("text").attr("y",49).attr("class","process-group-invalid process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF071").append("title").text("Invalid Components"),o.append("text").attr("y",49).attr("class","process-group-invalid-count process-group-contents-count"),o.append("text").attr("y",49).attr("class","process-group-disabled process-group-contents-icon secondary-color").attr("font-family","flowfont").text("\uE802").append("title").text("Disabled Components"),o.append("text").attr("y",49).attr("class","process-group-disabled-count process-group-contents-count"),o.append("text").attr("x",10).attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-up-to-date process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF00C").append("title").text("Up to date Versioned Process Groups"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-up-to-date-count process-group-contents-count"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-locally-modified process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF069").append("title").text("Locally modified Versioned Process Groups"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-locally-modified-count process-group-contents-count"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-stale process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF0AA").append("title").text("Stale Versioned Process Groups"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-stale-count process-group-contents-count"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-locally-modified-and-stale process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF06A").append("title").text("Locally modified and stale Versioned Process Groups"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-locally-modified-and-stale-count process-group-contents-count"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-sync-failure process-group-contents-icon secondary-color").attr("font-family","FontAwesome").text("\uF128").append("title").text("Sync failure Versioned Process Groups"),o.append("text").attr("y",function(){return e.dimensions.height-7}).attr("class","process-group-sync-failure-count process-group-contents-count"),o.append("rect").attr("class","process-group-queued-stats odd").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",66),o.append("rect").attr("class","process-group-stats-border").attr("width",function(){return e.dimensions.width}).attr("height",1).attr("x",0).attr("y",84),o.append("rect").attr("class","process-group-stats-in-out even").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",85),o.append("rect").attr("class","process-group-stats-border").attr("width",function(){return e.dimensions.width}).attr("height",1).attr("x",0).attr("y",103),o.append("rect").attr("class","process-group-read-write-stats odd").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",104),o.append("rect").attr("class","process-group-stats-border").attr("width",function(){return e.dimensions.width}).attr("height",1).attr("x",0).attr("y",122),o.append("rect").attr("class","process-group-stats-in-out even").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",123);let g=o.append("g").attr("transform","translate(6, 75)");g.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",5).attr("class","stats-label").text("Queued"),g.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",24).attr("class","stats-label").text("In"),g.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",42).attr("class","stats-label").text("Read/Write"),g.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",60).attr("class","stats-label").text("Out");let G=o.append("g").attr("transform","translate(95, 75)"),st=G.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",5).attr("class","process-group-queued stats-value");st.append("tspan").attr("class","count"),st.append("tspan").attr("class","size");let J=G.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",24).attr("class","process-group-in stats-value");J.append("tspan").attr("class","count"),J.append("tspan").attr("class","size"),J.append("tspan").attr("class","ports"),J.append("tspan").attr("class","public-ports"),G.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",42).attr("class","process-group-read-write stats-value");let ct=G.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",60).attr("class","process-group-out stats-value");ct.append("tspan").attr("class","ports"),ct.append("tspan").attr("class","public-ports"),ct.append("tspan").attr("class","count"),ct.append("tspan").attr("class","size");let lt=o.append("g").attr("transform","translate(335, 75)");lt.append("text").attr("width",25).attr("height",10).attr("x",4).attr("y",24).attr("class","stats-info").text("5 min"),lt.append("text").attr("width",25).attr("height",10).attr("x",4).attr("y",42).attr("class","stats-info").text("5 min"),lt.append("text").attr("width",25).attr("height",10).attr("x",4).attr("y",60).attr("class","stats-info").text("5 min"),o.append("text").attr("class","component-comments").attr("transform","translate("+(e.dimensions.width-11)+", "+(e.dimensions.height-3)+")").text("\uF075"),o.append("text").attr("class","active-thread-count-icon").attr("y",20).text("\uE83F"),o.append("text").attr("class","active-thread-count").attr("y",20),o.append("rect").attr("class","bulletin-background").attr("x",function(){return e.dimensions.width-24}).attr("y",32).attr("width",24).attr("height",24),o.append("text").attr("class","bulletin-icon").attr("x",function(){return e.dimensions.width-17}).attr("y",49).text("\uF24A")}let c=o.select("text.process-group-transmitting").classed("success-color-variant",function(g){return g.permissions.canRead&&g.activeRemotePortCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.activeRemotePortCount===0}),u=o.select("text.process-group-transmitting-count").attr("x",function(){return parseInt(c.attr("x"),10)+Math.round(c.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.activeRemotePortCount});u.append("title").text("Transmitting Remote Process Groups");let p=o.select("text.process-group-not-transmitting").classed("not-transmitting neutral-color",function(g){return g.permissions.canRead&&g.inactiveRemotePortCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.inactiveRemotePortCount===0}).attr("x",function(){return parseInt(u.attr("x"),10)+Math.round(u.node().getComputedTextLength())+a.CONTENTS_SPACER}),f=o.select("text.process-group-not-transmitting-count").attr("x",function(){return parseInt(p.attr("x"),10)+Math.round(p.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.inactiveRemotePortCount});f.append("title").text("Not transmitting Remote Process Groups");let d=o.select("text.process-group-running").classed("success-color-default",function(g){return g.permissions.canRead&&g.component.runningCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.runningCount===0}).attr("x",function(){return parseInt(f.attr("x"),10)+Math.round(f.node().getComputedTextLength())+a.CONTENTS_SPACER}),y=o.select("text.process-group-running-count").attr("x",function(){return parseInt(d.attr("x"),10)+Math.round(d.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.runningCount});y.append("title").text("Running Components");let x=o.select("text.process-group-stopped").classed("error-color-variant",function(g){return g.permissions.canRead&&g.component.stoppedCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.stoppedCount===0}).attr("x",function(){return parseInt(y.attr("x"),10)+Math.round(y.node().getComputedTextLength())+a.CONTENTS_SPACER}),v=o.select("text.process-group-stopped-count").attr("x",function(){return parseInt(x.attr("x"),10)+Math.round(x.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.stoppedCount});v.append("title").text("Stopped Components");let C=o.select("text.process-group-invalid").classed("invalid caution-color",function(g){return g.permissions.canRead&&g.component.invalidCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.invalidCount===0}).attr("x",function(){return parseInt(v.attr("x"),10)+Math.round(v.node().getComputedTextLength())+a.CONTENTS_SPACER}),I=o.select("text.process-group-invalid-count").attr("x",function(){return parseInt(C.attr("x"),10)+Math.round(C.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.invalidCount});I.append("title").text("Invalid Components");let E=o.select("text.process-group-disabled").classed("disabled neutral-color",function(g){return g.permissions.canRead&&g.component.disabledCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.disabledCount===0}).attr("x",function(){return parseInt(I.attr("x"),10)+Math.round(I.node().getComputedTextLength())+a.CONTENTS_SPACER});o.select("text.process-group-disabled-count").attr("x",function(){return parseInt(E.attr("x"),10)+Math.round(E.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.disabledCount}).append("title").text("Disabled Components");let w=o.select("text.process-group-up-to-date").classed("success-color-variant",function(g){return g.permissions.canRead&&g.component.upToDateCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.upToDateCount===0}),A=o.select("text.process-group-up-to-date-count").attr("x",function(){return parseInt(w.attr("x"),10)+Math.round(w.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.upToDateCount});A.append("title").text("Up to date Versioned Process Groups");let L=o.select("text.process-group-locally-modified").classed("neutral-color",function(g){return g.permissions.canRead&&g.component.locallyModifiedCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.locallyModifiedCount===0}).attr("x",function(){return parseInt(A.attr("x"),10)+Math.round(A.node().getComputedTextLength())+a.CONTENTS_SPACER}),O=o.select("text.process-group-locally-modified-count").attr("x",function(){return parseInt(L.attr("x"),10)+Math.round(L.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.locallyModifiedCount});O.append("title").text("Locally modified Versioned Process Groups");let K=o.select("text.process-group-stale").classed("error-color-variant",function(g){return g.permissions.canRead&&g.component.staleCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.staleCount===0}).attr("x",function(){return parseInt(O.attr("x"),10)+Math.round(O.node().getComputedTextLength())+a.CONTENTS_SPACER}),j=o.select("text.process-group-stale-count").attr("x",function(){return parseInt(K.attr("x"),10)+Math.round(K.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.staleCount});j.append("title").text("Stale Versioned Process Groups");let D=o.select("text.process-group-locally-modified-and-stale").classed("error-color-variant",function(g){return g.permissions.canRead&&g.component.locallyModifiedAndStaleCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.locallyModifiedAndStaleCount===0}).attr("x",function(){return parseInt(j.attr("x"),10)+Math.round(j.node().getComputedTextLength())+a.CONTENTS_SPACER}),H=o.select("text.process-group-locally-modified-and-stale-count").attr("x",function(){return parseInt(D.attr("x"),10)+Math.round(D.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.locallyModifiedAndStaleCount});H.append("title").text("Locally modified and stale Versioned Process Groups");let F=o.select("text.process-group-sync-failure").classed("neutral-color",function(g){return g.permissions.canRead&&g.component.syncFailureCount>0}).classed("zero",function(g){return g.permissions.canRead&&g.component.syncFailureCount===0}).attr("x",function(){return parseInt(H.attr("x"),10)+Math.round(H.node().getComputedTextLength())+a.CONTENTS_SPACER-2});o.select("text.process-group-sync-failure-count").attr("x",function(){return parseInt(F.attr("x"),10)+Math.round(F.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER}).text(function(g){return g.syncFailureCount}).append("title").text("Sync failure Versioned Process Groups");let Z=r.select("text.version-control").style("visibility",s.isUnderVersionControl(e)?"visible":"hidden").attr("class",function(){if(s.isUnderVersionControl(e)){let g=e.versionedFlowState;return g==="SYNC_FAILURE"?"version-control neutral-color":g==="LOCALLY_MODIFIED_AND_STALE"||g==="STALE"?"version-control error-color-variant":g==="LOCALLY_MODIFIED"?"version-control neutral-color":"version-control success-color-default"}else return"version-control neutral-contrast"}).text(function(){if(s.isUnderVersionControl(e)){let g=e.versionedFlowState;return g==="SYNC_FAILURE"?"\uF128":g==="LOCALLY_MODIFIED_AND_STALE"?"\uF06A":g==="STALE"?"\uF0AA":g==="LOCALLY_MODIFIED"?"\uF069":"\uF00C"}else return""});e.permissions.canRead?(Z.each(function(){s.isUnderVersionControl(e)?s.canvasUtils.canvasTooltip(Vn,m(this),{versionControlInformation:e.component.versionControlInformation,registryClients:s.registryClients()}):s.canvasUtils.resetCanvasTooltip(m(this))}),r.select("text.component-comments").style("visibility",s.nifiCommon.isBlank(e.component.comments)?"hidden":"visible").each(function(){s.nifiCommon.isBlank(e.component.comments)?s.canvasUtils.resetCanvasTooltip(m(this)):s.canvasUtils.canvasTooltip(Ft,m(this),e.component.comments)}),r.select("text.process-group-name").attr("x",function(){return s.isUnderVersionControl(e)?parseInt(Z.attr("x"),10)+Math.round(Z.node().getComputedTextLength())+a.CONTENTS_VALUE_SPACER:10}).attr("width",function(){if(s.isUnderVersionControl(e)){let g=parseInt(Z.attr("x"),10);return 300-(parseInt(m(this).attr("x"),10)-g)}else return 300}).each(function(g){let G=m(this);G.text(null).selectAll("title").remove(),s.canvasUtils.ellipsis(G,g.component.name,"group-name")}).append("title").text(function(g){return g.component.name})):(r.select("text.component-comments").style("visibility","hidden"),r.select("text.process-group-name").attr("x",10).attr("width",316).text(null)),s.updateProcessGroupStatus(r)}else e.permissions.canRead?r.select("text.process-group-name").text(function(c){let u=c.component.name;return u.length>a.PREVIEW_NAME_LENGTH?u.substring(0,a.PREVIEW_NAME_LENGTH)+"\u2026":u}):r.select("text.process-group-name").text(null),o.empty()||o.remove()})}updateProcessGroupStatus(t){if(t.empty())return;let s=this;t.select("text.process-group-queued tspan.count").text(function(e){return s.nifiCommon.substringBeforeFirst(e.status.aggregateSnapshot.queued," ")}),t.select("text.process-group-queued tspan.size").text(function(e){return" "+s.nifiCommon.substringAfterFirst(e.status.aggregateSnapshot.queued," ")}),t.select("text.process-group-in tspan.count").text(function(e){return s.nifiCommon.substringBeforeFirst(e.status.aggregateSnapshot.input," ")}),t.select("text.process-group-in tspan.size").text(function(e){return" "+s.nifiCommon.substringAfterFirst(e.status.aggregateSnapshot.input," ")}),t.select("text.process-group-in tspan.ports").text(function(e){return" \u2192 "+e.inputPortCount}),t.select("text.process-group-in tspan.public-ports").text(function(e){return e.publicInputPortCount>0?" ("+e.publicInputPortCount+" remote)":""}),t.select("text.process-group-read-write").text(function(e){return e.status.aggregateSnapshot.read+" / "+e.status.aggregateSnapshot.written}),t.select("text.process-group-out tspan.ports").text(function(e){return e.outputPortCount}),t.select("text.process-group-out tspan.public-ports").text(function(e){return e.publicOutputPortCount>0?" ("+e.publicOutputPortCount+" remote) ":""}),t.select("text.process-group-out tspan.count").text(function(e){return" \u2192 "+s.nifiCommon.substringBeforeFirst(e.status.aggregateSnapshot.output," ")}),t.select("text.process-group-out tspan.size").text(function(e){return" "+s.nifiCommon.substringAfterFirst(e.status.aggregateSnapshot.output," ")}),t.each(function(e){let r=m(this);s.canvasUtils.activeThreadCount(r,e),s.canvasUtils.bulletins(r,e.bulletins)})}removeProcessGroups(t){t.empty()||t.remove()}isUnderVersionControl(t){return!!t.versionedFlowState}init(){this.processGroupContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","process-groups"),this.store.select(Oe).pipe(Y(()=>this.processGroupContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.processGroupContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.processGroupContainer.selectAll("g.process-group").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.processGroupContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.processGroups=t.map(o=>it(X({},o),{type:N.ProcessGroup,dimensions:this.dimensions}));let s=this.select(),e=this.renderProcessGroups(s.enter()),r=s.merge(e);this.updateProcessGroups(r),this.positionBehavior.position(r,this.transitionRequired),this.removeProcessGroups(s.exit())}selectAll(){return this.processGroupContainer.selectAll("g.process-group")}render(){this.updateProcessGroups(this.selectAll())}pan(){this.updateProcessGroups(this.processGroupContainer.selectAll("g.process-group.entering, g.process-group.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt),S(Tt),S(bt),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var xe=(()=>{class a{constructor(t,s,e,r){this.store=t,this.positionBehavior=s,this.selectableBehavior=e,this.editableBehavior=r,this.destroyed$=new ft,this.dimensions={width:48,height:48},this.funnels=[],this.funnelContainer=null,this.transitionRequired=!1}select(){return this.funnelContainer.selectAll("g.funnel").data(this.funnels,function(t){return t.id})}renderFunnels(t){if(t.empty())return t;let s=t.append("g").attr("id",function(e){return"id-"+e.id}).attr("class","funnel component");return this.positionBehavior.position(s,this.transitionRequired),s.append("rect").attr("rx",2).attr("ry",2).attr("class","border").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("fill","transparent").attr("stroke","transparent"),s.append("rect").attr("rx",2).attr("ry",2).attr("class","body").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),s.append("text").attr("class","funnel-icon").attr("x",9).attr("y",34).text("\uE803"),this.selectableBehavior.activate(s),s}updateFunnels(t){t.empty()||(t.select("rect.border").classed("unauthorized",function(s){return s.permissions.canRead===!1}),t.select("rect.body").classed("unauthorized",function(s){return s.permissions.canRead===!1}),this.editableBehavior.editable(t))}removeFunnels(t){t.remove()}init(){this.funnelContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","funnels"),this.store.select(Me).pipe(Y(()=>this.funnelContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.funnelContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.funnelContainer.selectAll("g.funnel").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.funnelContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.funnels=t.map(o=>it(X({},o),{type:N.Funnel,dimensions:this.dimensions}));let s=this.select(),e=this.renderFunnels(s.enter()),r=s.merge(e);this.updateFunnels(r),this.positionBehavior.position(r,this.transitionRequired),this.removeFunnels(s.exit())}selectAll(){return this.funnelContainer.selectAll("g.funnel")}render(){this.updateFunnels(this.selectAll())}pan(){this.updateFunnels(this.funnelContainer.selectAll("g.funnel.entering, g.funnel.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Tt),S(bt),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Ce=(()=>{class a{static{this.PREVIEW_NAME_LENGTH=25}constructor(t,s,e,r,o,c,u){this.store=t,this.canvasUtils=s,this.nifiCommon=e,this.positionBehavior=r,this.selectableBehavior=o,this.quickSelectBehavior=c,this.editableBehavior=u,this.destroyed$=new ft,this.dimensions={width:352,height:128},this.processors=[],this.processorContainer=null,this.transitionRequired=!1}select(){return this.processorContainer.selectAll("g.processor").data(this.processors,function(t){return t.id})}renderProcessors(t){if(t.empty())return t;let s=t.append("g").attr("id",function(e){return"id-"+e.id}).attr("class","processor component");return s.append("rect").attr("class","border").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("fill","transparent").attr("stroke","transparent"),s.append("rect").attr("class","body").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),s.append("text").attr("x",75).attr("y",18).attr("width",230).attr("height",14).attr("class","processor-name"),s.append("rect").attr("x",0).attr("y",0).attr("width",50).attr("height",50).attr("class","processor-icon-container"),s.append("text").attr("x",9).attr("y",35).attr("class","processor-icon").text("\uE807"),s.append("circle").attr("r",9).attr("cx",12).attr("cy",12).attr("class","restricted-background"),s.append("text").attr("x",7.75).attr("y",17).attr("class","restricted").text("\uF132"),s.append("circle").attr("r",9).attr("cx",38).attr("cy",36).attr("class","is-primary-background"),s.append("text").attr("x",34.75).attr("y",40).attr("class","is-primary").text("P").append("title").text(function(){return"This component is only scheduled to execute on the Primary Node"}),this.selectableBehavior.activate(s),this.quickSelectBehavior.activate(s),s}updateProcessors(t){t.empty()||(t.select("rect.border").classed("unauthorized",s=>s.permissions.canRead===!1).classed("ghost",s=>s.permissions.canRead===!0&&s.component.extensionMissing===!0),t.select("rect.body").classed("unauthorized",s=>s.permissions.canRead===!1),t.each((s,e,r)=>{let o=m(r[e]),c=o.select("g.processor-canvas-details");if(this.editableBehavior.editable(o),o.classed("visible")){if(c.empty()){c=o.append("g").attr("class","processor-canvas-details"),c.append("text").attr("class","run-status-icon").attr("x",55).attr("y",23).attr("width",14).attr("height",14),c.append("text").attr("class","processor-type").attr("x",75).attr("y",32).attr("width",230).attr("height",12),c.append("text").attr("class","processor-bundle").attr("x",75).attr("y",45).attr("width",200).attr("height",12),c.append("rect").attr("class","processor-stats-in-out odd").attr("width",()=>s.dimensions.width).attr("height",19).attr("x",0).attr("y",50),c.append("rect").attr("class","processor-stats-border").attr("width",()=>s.dimensions.width).attr("height",1).attr("x",0).attr("y",68),c.append("rect").attr("class","processor-read-write-stats even").attr("width",()=>s.dimensions.width).attr("height",19).attr("x",0).attr("y",69),c.append("rect").attr("class","processor-stats-border").attr("width",()=>s.dimensions.width).attr("height",1).attr("x",0).attr("y",87),c.append("rect").attr("class","processor-stats-in-out odd").attr("width",()=>s.dimensions.width).attr("height",20).attr("x",0).attr("y",88),c.append("rect").attr("class","processor-stats-border").attr("width",()=>s.dimensions.width).attr("height",1).attr("x",0).attr("y",106),c.append("rect").attr("class","processor-read-write-stats even").attr("width",()=>s.dimensions.width).attr("height",19).attr("x",0).attr("y",107);let u=c.append("g").attr("transform","translate(10, 55)");u.append("text").attr("width",73).attr("height",10).attr("y",9).attr("class","stats-label").text("In"),u.append("text").attr("width",73).attr("height",10).attr("y",27).attr("class","stats-label").text("Read/Write"),u.append("text").attr("width",73).attr("height",10).attr("y",46).attr("class","stats-label").text("Out"),u.append("text").attr("width",73).attr("height",10).attr("y",65).attr("class","stats-label").text("Tasks/Time");let p=c.append("g").attr("transform","translate(85, 55)"),f=p.append("text").attr("width",180).attr("height",9).attr("y",9).attr("class","processor-in stats-value");f.append("tspan").attr("class","count"),f.append("tspan").attr("class","size"),p.append("text").attr("width",180).attr("height",10).attr("y",27).attr("class","processor-read-write stats-value");let d=p.append("text").attr("width",180).attr("height",10).attr("y",46).attr("class","processor-out stats-value");d.append("tspan").attr("class","count"),d.append("tspan").attr("class","size"),p.append("text").attr("width",180).attr("height",10).attr("y",65).attr("class","processor-tasks-time stats-value");let y=c.append("g").attr("transform","translate(305, 55)");y.append("text").attr("width",25).attr("height",10).attr("y",9).attr("class","stats-info").text("5 min"),y.append("text").attr("width",25).attr("height",10).attr("y",27).attr("class","stats-info").text("5 min"),y.append("text").attr("width",25).attr("height",10).attr("y",46).attr("class","stats-info").text("5 min"),y.append("text").attr("width",25).attr("height",10).attr("y",65).attr("class","stats-info").text("5 min"),c.append("text").attr("class","component-comments").attr("transform","translate("+(s.dimensions.width-11)+", "+(s.dimensions.height-3)+")").text("\uF075"),c.append("text").attr("class","active-thread-count-icon").attr("y",46).text("\uE83F"),c.append("text").attr("class","active-thread-count").attr("y",46),c.append("rect").attr("class","bulletin-background").attr("x",()=>s.dimensions.width-24).attr("width",24).attr("height",24),c.append("text").attr("class","bulletin-icon").attr("x",()=>s.dimensions.width-17).attr("y",17).text("\uF24A")}s.permissions.canRead?(o.select("text.processor-name").each((u,p,f)=>{let d=m(f[p]);d.text(null).selectAll("title").remove(),this.canvasUtils.ellipsis(d,u.component.name,"processor-name")}).append("title").text(u=>u.component.name),o.select("text.processor-type").each((u,p,f)=>{let d=m(f[p]);d.text(null).selectAll("title").remove(),this.canvasUtils.ellipsis(d,this.nifiCommon.formatType(u.component),"processor-type")}).append("title").text(u=>this.nifiCommon.formatType(u.component)),o.select("text.processor-bundle").each((u,p,f)=>{let d=m(f[p]);d.text(null).selectAll("title").remove(),this.canvasUtils.ellipsis(d,this.nifiCommon.formatBundle(u.component.bundle),"processor-bundle")}).append("title").text(u=>this.nifiCommon.formatBundle(u.component.bundle)),o.select("text.component-comments").style("visibility",this.nifiCommon.isBlank(s.component.config.comments)?"hidden":"visible").each((u,p,f)=>{this.nifiCommon.isBlank(s.component.config.comments)?this.canvasUtils.resetCanvasTooltip(m(f[p])):this.canvasUtils.canvasTooltip(Ft,m(f[p]),s.component.config.comments)})):(o.select("text.processor-name").text(null),o.select("text.processor-type").text(null),o.select("text.processor-bundle").text(null),o.select("text.component-comments").style("visibility","hidden")),this.updateProcessorStatus(o)}else s.permissions.canRead?o.select("text.processor-name").text(u=>{let p=u.component.name;return p.length>a.PREVIEW_NAME_LENGTH?p.substring(0,a.PREVIEW_NAME_LENGTH)+"\u2026":p}):o.select("text.processor-name").text(null),c.empty()||c.remove();if(o.select("rect.processor-icon-container").classed("unauthorized",!s.permissions.canRead),o.select("text.processor-icon").classed("unauthorized tertiary-color",!s.permissions.canRead),o.select("rect.border").classed("unauthorized",!s.permissions.canRead),s.permissions.canRead)if(s.component.style["background-color"]){let u=s.component.style["background-color"];o.select("rect.processor-icon-container").style("fill",()=>u),o.select("rect.border").style("stroke",()=>u),u&&(o.select("text.processor-icon").attr("class",()=>"processor-icon"),o.style("fill",p=>{let f="unset";return p.permissions.canRead&&p.component.style["background-color"]&&(f=p.component.style["background-color"],f=this.canvasUtils.determineContrastColor(this.nifiCommon.substringAfterLast(f,"#"))),f}))}else o.select("text.processor-icon").attr("class",()=>"processor-icon tertiary-color"),o.select("rect.processor-icon-container").style("fill",null),o.select("rect.border").style("stroke",null);o.select("circle.restricted-background").style("visibility",u=>this.showRestricted(u)),o.select("text.restricted").style("visibility",u=>this.showRestricted(u)),o.select("circle.is-primary-background").style("visibility",u=>this.showIsPrimary(u)),o.select("text.is-primary").style("visibility",u=>this.showIsPrimary(u))}))}updateProcessorStatus(t){t.empty()||(t.select("text.run-status-icon").attr("class",s=>{let e="primary-color";return s.status.aggregateSnapshot.runStatus==="Validating"?e="validating neutral-color":s.status.aggregateSnapshot.runStatus==="Invalid"?e="invalid caution-color":s.status.aggregateSnapshot.runStatus==="Running"?e="running success-color-default":s.status.aggregateSnapshot.runStatus==="Stopped"&&(e="stopped error-color-variant"),`run-status-icon ${e}`}).attr("font-family",s=>{let e="FontAwesome";return s.status.aggregateSnapshot.runStatus==="Disabled"&&(e="flowfont"),e}).classed("fa-spin",s=>s.status.aggregateSnapshot.runStatus==="Validating").text(s=>{let e="";return s.status.aggregateSnapshot.runStatus==="Disabled"?e="\uE802":s.status.aggregateSnapshot.runStatus==="Validating"?e="\uF1CE":s.status.aggregateSnapshot.runStatus==="Invalid"?e="\uF071":s.status.aggregateSnapshot.runStatus==="Running"?e="\uF04B":s.status.aggregateSnapshot.runStatus==="Stopped"&&(e="\uF04D"),e}).each((s,e,r)=>{this.needsTip(s)?this.canvasUtils.canvasTooltip(Yt,m(r[e]),{isValidating:s.status.aggregateSnapshot.runStatus==="Validating",validationErrors:s.component.validationErrors}):this.canvasUtils.resetCanvasTooltip(m(r[e]))}),t.select("text.processor-in tspan.count").text(s=>this.nifiCommon.substringBeforeFirst(s.status.aggregateSnapshot.input," ")),t.select("text.processor-in tspan.size").text(s=>" "+this.nifiCommon.substringAfterFirst(s.status.aggregateSnapshot.input," ")),t.select("text.processor-read-write").text(s=>s.status.aggregateSnapshot.read+" / "+s.status.aggregateSnapshot.written),t.select("text.processor-out tspan.count").text(s=>this.nifiCommon.substringBeforeFirst(s.status.aggregateSnapshot.output," ")),t.select("text.processor-out tspan.size").text(s=>" "+this.nifiCommon.substringAfterFirst(s.status.aggregateSnapshot.output," ")),t.select("text.processor-tasks-time").text(s=>s.status.aggregateSnapshot.tasks+" / "+s.status.aggregateSnapshot.tasksDuration),t.each((s,e,r)=>{let o=m(r[e]);this.canvasUtils.activeThreadCount(o,s),this.canvasUtils.bulletins(o,s.bulletins)}))}removeProcessors(t){t.remove()}needsTip(t){return t.permissions.canRead&&!this.nifiCommon.isEmpty(t.component.validationErrors)||t.status.aggregateSnapshot.runStatus==="Validating"}showRestricted(t){return t.permissions.canRead&&t.component.restricted?"visible":"hidden"}showIsPrimary(t){return t.status.aggregateSnapshot.executionNode==="PRIMARY"?"visible":"hidden"}init(){this.processorContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","processors"),this.store.select(Le).pipe(Y(()=>this.processorContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.processorContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.processorContainer.selectAll("g.processor").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.processorContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.processors=t.map(o=>it(X({},o),{type:N.Processor,dimensions:this.dimensions}));let s=this.select(),e=this.renderProcessors(s.enter()),r=s.merge(e);this.updateProcessors(r),this.positionBehavior.position(r,this.transitionRequired),this.removeProcessors(s.exit())}selectAll(){return this.processorContainer.selectAll("g.processor")}render(){this.updateProcessors(this.selectAll())}pan(){this.updateProcessors(this.processorContainer.selectAll("g.processor.entering, g.processor.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt),S(Tt),S(bt),S(Ut),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var be=(()=>{class a{static{this.PREVIEW_NAME_LENGTH=15}static{this.OFFSET_VALUE=25}constructor(t,s,e,r,o,c,u){this.store=t,this.canvasUtils=s,this.nifiCommon=e,this.positionBehavior=r,this.selectableBehavior=o,this.quickSelectBehavior=c,this.editableBehavior=u,this.destroyed$=new ft,this.portDimensions={width:240,height:48},this.remotePortDimensions={width:240,height:80},this.ports=[],this.portContainer=null,this.transitionRequired=!1}dimensions(t){return t.allowRemoteAccess===!0?this.remotePortDimensions:this.portDimensions}portType(t){return t.portType==="INPUT_PORT"?N.InputPort:N.OutputPort}isLocalPort(t){return t.allowRemoteAccess!==!0}offsetY(t){let s=this;return function(e){return t+(s.isLocalPort(e)?0:a.OFFSET_VALUE)}}select(){return this.portContainer.selectAll("g.input-port, g.output-port").data(this.ports,function(t){return t.id})}renderPorts(t){if(t.empty())return t;let s=t.append("g").attr("id",function(e){return"id-"+e.id}).attr("class",function(e){return e.portType==="INPUT_PORT"?"input-port component":"output-port component"});return s.append("rect").attr("class","border").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("fill","transparent").attr("stroke","transparent"),s.append("rect").attr("class","body").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),s.append("rect").attr("class","remote-banner banner").attr("width",this.remotePortDimensions.width).attr("height",a.OFFSET_VALUE).classed("hidden",this.isLocalPort),s.append("text").attr("class","port-icon").attr("x",10).attr("y",this.offsetY(38)).text(function(e){return e.portType==="INPUT_PORT"?"\uE832":"\uE833"}),s.append("text").attr("x",70).attr("y",this.offsetY(25)).attr("width",95).attr("height",30).attr("class","port-name"),this.selectableBehavior.activate(s),this.quickSelectBehavior.activate(s),s}updatePorts(t){if(t.empty())return;let s=this;t.select("rect.border").attr("height",function(e){return e.dimensions.height}).classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.select("rect.body").attr("height",function(e){return e.dimensions.height}).classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.each(function(e){let r=m(this),o=r.select("g.port-details");s.editableBehavior.editable(r),r.classed("visible")?(o.empty()&&(o=r.append("g").attr("class","port-details"),o.append("text").attr("class","port-transmission-icon").attr("x",10).attr("y",18).classed("hidden",s.isLocalPort),o.append("rect").attr("class","bulletin-background").attr("x",s.remotePortDimensions.width-a.OFFSET_VALUE).attr("width",a.OFFSET_VALUE).attr("height",a.OFFSET_VALUE).classed("hidden",s.isLocalPort),o.append("text").attr("class","bulletin-icon").attr("x",s.remotePortDimensions.width-18).attr("y",18).text("\uF24A").classed("hidden",s.isLocalPort),o.append("text").attr("class","run-status-icon").attr("x",50).attr("y",s.offsetY(25)),o.append("text").attr("class","component-comments").attr("transform","translate("+(e.dimensions.width-11)+", "+(e.dimensions.height-3)+")").text("\uF075"),o.append("text").attr("class","active-thread-count-icon").attr("y",s.offsetY(43)).text("\uE83F"),o.append("text").attr("class","active-thread-count").attr("y",s.offsetY(43))),e.permissions.canRead?(r.select("rect.remote-banner").classed("hidden",s.isLocalPort),r.select("text.port-icon").attr("y",s.offsetY(38)),o.select("text.port-transmission-icon").classed("hidden",s.isLocalPort),o.select("rect.bulletin-background").classed("hidden",s.isLocalPort),o.select("rect.bulletin-icon").classed("hidden",s.isLocalPort),r.select("text.port-name").attr("y",s.offsetY(25)).each(function(c){let u=m(this),p=c.component.name,f=p.split(/\s+/);u.text(null).selectAll("tspan, title").remove(),f.length===1?s.canvasUtils.ellipsis(u,p,"port-name"):s.canvasUtils.multilineEllipsis(u,2,p,"port-name")}).append("title").text(function(c){return c.component.name}),r.select("text.component-comments").style("visibility",s.nifiCommon.isBlank(e.component.comments)?"hidden":"visible").each(function(){s.nifiCommon.isBlank(e.component.comments)?s.canvasUtils.resetCanvasTooltip(m(this)):s.canvasUtils.canvasTooltip(Ft,m(this),e.component.comments)})):(r.select("text.port-name").text(null),r.select("text.component-comments").style("visibility","hidden")),s.updatePortStatus(r),s.store.dispatch(Pn({id:e.id,updatePath:!0,updateLabel:!0}))):(e.permissions.canRead?r.select("text.port-name").text(function(c){let u=c.component.name;return u.length>a.PREVIEW_NAME_LENGTH?u.substring(0,a.PREVIEW_NAME_LENGTH)+"\u2026":u}):r.select("text.port-name").text(null),o.empty()||o.remove())})}updatePortStatus(t){if(t.empty())return;let s=this;t.select("text.run-status-icon").attr("class",function(e){let r="primary-color";return e.status.aggregateSnapshot.runStatus==="Invalid"?r="invalid caution-color":e.status.aggregateSnapshot.runStatus==="Running"?r="running success-color-default":e.status.aggregateSnapshot.runStatus==="Stopped"&&(r="stopped error-color-variant"),`run-status-icon ${r}`}).attr("font-family",function(e){let r="FontAwesome";return e.status.aggregateSnapshot.runStatus==="Disabled"&&(r="flowfont"),r}).attr("y",this.offsetY(25)).text(function(e){let r="";return e.status.aggregateSnapshot.runStatus==="Disabled"?r="\uE802":e.status.aggregateSnapshot.runStatus==="Invalid"?r="\uF071":e.status.aggregateSnapshot.runStatus==="Running"?r="\uF04B":e.status.aggregateSnapshot.runStatus==="Stopped"&&(r="\uF04D"),r}).each(function(e){e.permissions.canRead&&!s.nifiCommon.isEmpty(e.component.validationErrors)?s.canvasUtils.canvasTooltip(Yt,m(this),{isValidating:!1,validationErrors:e.component.validationErrors}):s.canvasUtils.resetCanvasTooltip(m(this))}),t.select("text.port-transmission-icon").attr("font-family",function(e){return e.status.transmitting===!0?"FontAwesome":"flowfont"}).text(function(e){return e.status.transmitting===!0?"\uF140":"\uE80A"}).classed("transmitting success-color-variant",function(e){return e.status.transmitting===!0}).classed("not-transmitting neutral-color",function(e){return e.status.transmitting!==!0}),t.each(function(e){let r=m(this);s.canvasUtils.activeThreadCount(r,e),r.select("text.active-thread-count-icon").attr("y",s.offsetY(43)),r.select("text.active-thread-count").attr("y",s.offsetY(43)),s.canvasUtils.bulletins(r,e.bulletins)})}removePorts(t){t.remove()}init(){this.portContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","ports"),this.store.select(Mn).pipe(Y(()=>this.portContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.portContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.portContainer.selectAll("g.input-port, g.output-port").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.portContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.ports=t.map(o=>it(X({},o),{type:this.portType(o),dimensions:this.dimensions(o)}));let s=this.select(),e=this.renderPorts(s.enter()),r=s.merge(e);this.updatePorts(r),this.positionBehavior.position(r,this.transitionRequired),this.removePorts(s.exit())}selectAll(){return this.portContainer.selectAll("g.input-port, g.output-port")}render(){this.updatePorts(this.selectAll())}pan(){this.updatePorts(this.portContainer.selectAll("g.input-port.entering, g.output-port.entering, g.input-port.leaving, g.output-port.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt),S(Tt),S(bt),S(Ut),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Se=(()=>{class a{static{this.PREVIEW_NAME_LENGTH=30}constructor(t,s,e,r,o,c,u){this.store=t,this.canvasUtils=s,this.nifiCommon=e,this.positionBehavior=r,this.selectableBehavior=o,this.quickSelectBehavior=c,this.editableBehavior=u,this.destroyed$=new ft,this.dimensions={width:384,height:176},this.remoteProcessGroups=[],this.remoteProcessGroupContainer=null,this.transitionRequired=!1}select(){return this.remoteProcessGroupContainer.selectAll("g.remote-process-group").data(this.remoteProcessGroups,function(t){return t.id})}renderRemoteProcessGroups(t){if(t.empty())return t;let s=t.append("g").attr("id",function(e){return"id-"+e.id}).attr("class","remote-process-group component");return s.append("rect").attr("class","border").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("fill","transparent").attr("stroke","transparent"),s.append("rect").attr("class","body").attr("width",function(e){return e.dimensions.width}).attr("height",function(e){return e.dimensions.height}).attr("filter","url(#component-drop-shadow)").attr("stroke-width",0),s.append("rect").attr("class","remote-process-group-banner").attr("width",function(e){return e.dimensions.width}).attr("height",32),s.append("text").attr("x",30).attr("y",20).attr("width",305).attr("height",16).attr("class","remote-process-group-name secondary-contrast"),this.selectableBehavior.activate(s),this.quickSelectBehavior.activate(s),s}updateRemoteProcessGroups(t){if(t.empty())return;let s=this;t.select("rect.border").classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.select("rect.body").classed("unauthorized",function(e){return e.permissions.canRead===!1}),t.each(function(e){let r=m(this),o=r.select("g.remote-process-group-details");if(s.editableBehavior.editable(r),r.classed("visible")){if(o.empty()){o=r.append("g").attr("class","remote-process-group-details"),o.append("text").attr("class","remote-process-group-transmission-status").attr("x",10).attr("y",20),o.append("rect").attr("class","remote-process-group-details-banner banner").attr("x",0).attr("y",32).attr("width",function(){return e.dimensions.width}).attr("height",24),o.append("text").attr("class","remote-process-group-transmission-secure").attr("x",10).attr("y",48),o.append("text").attr("x",30).attr("y",48).attr("width",305).attr("height",12).attr("class","remote-process-group-uri"),o.append("rect").attr("class","remote-process-group-sent-stats odd").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",66),o.append("rect").attr("class","remote-process-group-stats-border").attr("width",function(){return e.dimensions.width}).attr("height",1).attr("x",0).attr("y",84),o.append("rect").attr("class","remote-process-group-received-stats even").attr("width",function(){return e.dimensions.width}).attr("height",19).attr("x",0).attr("y",85);let c=o.append("g").attr("transform","translate(6, 75)");c.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",5).attr("class","stats-label").text("Sent"),c.append("text").attr("width",73).attr("height",10).attr("x",4).attr("y",23).attr("class","stats-label").text("Received");let u=o.append("g").attr("transform","translate(95, 75)"),p=u.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",5).attr("class","remote-process-group-sent stats-value");p.append("tspan").attr("class","count"),p.append("tspan").attr("class","size"),p.append("tspan").attr("class","ports");let f=u.append("text").attr("width",180).attr("height",10).attr("x",4).attr("y",23).attr("class","remote-process-group-received stats-value");f.append("tspan").attr("class","ports"),f.append("tspan").attr("class","count"),f.append("tspan").attr("class","size");let d=o.append("g").attr("transform","translate(335, 75)");d.append("text").attr("width",25).attr("height",10).attr("x",4).attr("y",5).attr("class","stats-info").text("5 min"),d.append("text").attr("width",25).attr("height",10).attr("x",4).attr("y",23).attr("class","stats-info").text("5 min"),o.append("rect").attr("class","remote-process-group-last-refresh-rect banner").attr("x",0).attr("y",function(){return e.dimensions.height-24}).attr("width",function(){return e.dimensions.width}).attr("height",24),o.append("text").attr("x",10).attr("y",168).attr("class","remote-process-group-last-refresh"),o.append("text").attr("class","component-comments").attr("transform","translate("+(e.dimensions.width-11)+", "+(e.dimensions.height-3)+")").text("\uF075"),o.append("text").attr("class","active-thread-count-icon").attr("y",20).text("\uE83F"),o.append("text").attr("class","active-thread-count").attr("y",20),o.append("rect").attr("class","bulletin-background").attr("x",function(){return e.dimensions.width-24}).attr("y",32).attr("width",24).attr("height",24),o.append("text").attr("class","bulletin-icon").attr("x",function(){return e.dimensions.width-17}).attr("y",49).text("\uF24A")}e.permissions.canRead?(o.select("text.remote-process-group-uri").each(function(c){let u=m(this);u.text(null).selectAll("title").remove(),s.canvasUtils.ellipsis(u,c.component.targetUris,"rpg-uri")}).append("title").text(function(c){return c.component.name}),o.select("text.remote-process-group-transmission-secure").text(function(c){let u;return c.component.targetSecure===!0?u="\uF023":u="\uF09C",u}).each(function(c){s.canvasUtils.canvasTooltip(Ft,m(this),c.component.targetSecure?"Site-to-Site is secure.":"Site-to-Site is NOT secure.")}),o.select("text.component-comments").style("visibility",s.nifiCommon.isBlank(e.component.comments)?"hidden":"visible").each(function(){s.nifiCommon.isBlank(e.component.comments)?s.canvasUtils.resetCanvasTooltip(m(this)):s.canvasUtils.canvasTooltip(Ft,m(this),e.component.comments)}),o.select("text.remote-process-group-last-refresh").text(function(c){return c.component.flowRefreshed?c.component.flowRefreshed:"Remote flow not current"}),r.select("text.remote-process-group-name").each(function(c){let u=m(this);u.text(null).selectAll("title").remove(),s.canvasUtils.ellipsis(u,c.component.name,"rpg-name")}).append("title").text(function(c){return c.component.name})):(o.select("text.remote-process-group-uri").text(null),o.select("text.remote-process-group-transmission-secure").text(null),o.select("text.component-comments").style("visibility","hidden"),o.select("text.remote-process-group-last-refresh").text(null),r.select("text.remote-process-group-name").text(null)),s.updateRemoteProcessGroupStatus(r)}else e.permissions.canRead?r.select("text.remote-process-group-name").text(function(c){let u=c.component.name;return u.length>a.PREVIEW_NAME_LENGTH?u.substring(0,a.PREVIEW_NAME_LENGTH)+"\u2026":u}):r.select("text.remote-process-group-name").text(null),o.empty()||o.remove()})}updateRemoteProcessGroupStatus(t){if(t.empty())return;let s=this;t.select("text.remote-process-group-sent tspan.count").text(function(e){return s.nifiCommon.substringBeforeFirst(e.status.aggregateSnapshot.sent," ")}),t.select("text.remote-process-group-sent tspan.size").text(function(e){return" "+s.nifiCommon.substringAfterFirst(e.status.aggregateSnapshot.sent," ")}),t.select("text.remote-process-group-sent tspan.ports").text(function(e){return" \u2192 "+e.inputPortCount}),t.select("text.remote-process-group-received tspan.ports").text(function(e){return e.outputPortCount+" \u2192 "}),t.select("text.remote-process-group-received tspan.count").text(function(e){return s.nifiCommon.substringBeforeFirst(e.status.aggregateSnapshot.received," ")}),t.select("text.remote-process-group-received tspan.size").text(function(e){return" "+s.nifiCommon.substringAfterFirst(e.status.aggregateSnapshot.received," ")}),t.select("text.remote-process-group-transmission-status").text(function(e){let r;return s.hasIssues(e)?r="\uF071":e.status.transmissionStatus==="Transmitting"?r="\uF140":r="\uE80A",r}).attr("font-family",function(e){let r;return s.hasIssues(e)||e.status.transmissionStatus==="Transmitting"?r="FontAwesome":r="flowfont",r}).classed("invalid caution-color",function(e){return s.hasIssues(e)}).classed("transmitting success-color-variant",function(e){return!s.hasIssues(e)&&e.status.transmissionStatus==="Transmitting"}).classed("not-transmitting neutral-color",function(e){return!s.hasIssues(e)&&e.status.transmissionStatus!=="Transmitting"}).each(function(e){e.permissions.canRead&&s.hasIssues(e)?s.canvasUtils.canvasTooltip(Yt,m(this),{isValidating:!1,validationErrors:s.getIssues(e)}):s.canvasUtils.resetCanvasTooltip(m(this))}),t.each(function(e){let r=m(this);s.canvasUtils.activeThreadCount(r,e),s.canvasUtils.bulletins(r,e.bulletins)})}hasIssues(t){return t.status.validationStatus==="INVALID"}getIssues(t){let s=[];return this.nifiCommon.isEmpty(t.component.authorizationIssues)||(s=s.concat(t.component.authorizationIssues)),this.nifiCommon.isEmpty(t.component.validationErrors)||(s=s.concat(t.component.validationErrors)),s}removeRemoteProcessGroups(t){t.remove()}init(){this.remoteProcessGroupContainer=m("#canvas").append("g").attr("pointer-events","all").attr("class","remote-process-groups"),this.store.select(Ue).pipe(Y(()=>this.remoteProcessGroupContainer!==null),V(this.destroyed$)).subscribe(t=>{this.set(t)}),this.store.select(yt).pipe(Y(t=>t==="success"),Y(()=>this.remoteProcessGroupContainer!==null),mt(()=>this.store.select(vt)),V(this.destroyed$)).subscribe(t=>{this.remoteProcessGroupContainer.selectAll("g.remote-process-group").classed("selected",function(s){return t.includes(s.id)})}),this.store.select(xt).pipe(V(this.destroyed$)).subscribe(t=>{this.transitionRequired=t})}destroy(){this.remoteProcessGroupContainer=null,this.destroyed$.next(!0)}ngOnDestroy(){this.destroyed$.complete()}set(t){this.remoteProcessGroups=t.map(o=>it(X({},o),{type:N.RemoteProcessGroup,dimensions:this.dimensions}));let s=this.select(),e=this.renderRemoteProcessGroups(s.enter()),r=s.merge(e);this.updateRemoteProcessGroups(r),this.positionBehavior.position(r,this.transitionRequired),this.removeRemoteProcessGroups(s.exit())}selectAll(){return this.remoteProcessGroupContainer.selectAll("g.remote-process-group")}render(){this.updateRemoteProcessGroups(this.selectAll())}pan(){this.updateRemoteProcessGroups(this.remoteProcessGroupContainer.selectAll("g.remote-process-group.entering, g.remote-process-group.leaving"))}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(tt),S(Tt),S(bt),S(Ut),S(At))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var we=(()=>{class a{static{this.INCREMENT=1.2}static{this.MAX_SCALE=8}static{this.MIN_SCALE=.2}static{this.MIN_SCALE_TO_RENDER=.4}constructor(t,s,e,r,o,c,u,p,f){this.store=t,this.canvasUtils=s,this.processorManager=e,this.processGroupManager=r,this.remoteProcessGroupManager=o,this.portManager=c,this.funnelManager=u,this.labelManager=p,this.connectionManager=f,this.k=kt,this.x=It.x,this.y=It.y,this.birdseyeTranslateInProgress=!1,this.allowTransition=!1,this.canvasInitialized=!1;let d=this,y,x=!1;this.behavior=ln().scaleExtent([a.MIN_SCALE,a.MAX_SCALE]).on("zoom",function(v){isNaN(v.transform.x)||(d.x=v.transform.x),isNaN(v.transform.y)||(d.y=v.transform.y),isNaN(v.transform.k)||(d.k=v.transform.k),x=!0,y=d.refresh({transition:d.shouldTransition(),refreshComponents:!1,refreshBirdseye:!1})}).on("end",function(){d.isBirdseyeEvent()||(y&&(d.store.dispatch(ke({transform:{translate:{x:d.x,y:d.y},scale:d.k}})),d.updateCanvasVisibility(),y.then(function(){d.store.dispatch(ce())}),y=null),x||d.store.dispatch(gn())),x=!1})}init(t,s){let e=this;Kn.load({custom:{families:["Inter","flowfont","FontAwesome"]},active:function(){e.processorManager.render(),e.processGroupManager.render(),e.remoteProcessGroupManager.render(),e.portManager.render(),e.labelManager.render(),e.funnelManager.render(),e.connectionManager.render()}}),this.svg=t,this.canvas=s,this.k=kt,this.x=It.x,this.y=It.y,this.labelManager.init(),this.funnelManager.init(),this.portManager.init(),this.remoteProcessGroupManager.init(),this.processGroupManager.init(),this.processorManager.init(),this.connectionManager.init(),this.svg.call(this.behavior).on("dblclick.zoom",null),this.canvasInitialized=!0}getCanvasBoundingClientRect(){let t=document.getElementById("canvas-container");return t==null?null:t.getBoundingClientRect()}isBirdseyeEvent(){return this.birdseyeTranslateInProgress}shouldTransition(){return this.birdseyeTranslateInProgress?!1:this.allowTransition}isSelectedComponentOnScreen(){let t=document.getElementById("canvas-container");if(t==null)return!1;let s=this.canvasUtils.getSelection();if(s.size()!==1)return!1;let e=s.datum(),r=[this.x,this.y],o=this.k;r=[r[0]/o,r[1]/o];let c=t.offsetWidth/o,u=t.offsetHeight/o,p=-r[0],f=-r[1],d=p+c,y=f+u;if(this.canvasUtils.isConnection(s)){let x,v;if(e.bends.length>0){let C=Math.min(Math.max(0,e.labelIndex),e.bends.length-1);x=e.bends[C].x,v=e.bends[C].y}else x=(e.start.x+e.end.x)/2,v=(e.start.y+e.end.y)/2;return p<x&&d>x&&f<v&&y>v}else{let x=e.position.x,v=e.position.y,C=x+e.dimensions.width,I=v+e.dimensions.height;return p<C&&d>x&&f<I&&y>v}}isBoundingBoxInViewport(t,s){let e=document.getElementById("canvas-container");if(!e)return!1;let r=[this.x/this.k,this.y/this.k],o=e.offsetWidth/this.k,c=e.offsetHeight/this.k,u=-r[0],p=-r[1],f=u+o,d=p+c,y=Math.ceil(t.x),x=Math.floor(t.x+t.width),v=Math.ceil(t.y),C=Math.floor(t.y+t.height);return s?!(y<u||x>f||v<p||C>d):(y>u&&y<f||x<f&&x>u)&&(v>p&&v<d||C<d&&C>p)}updateCanvasVisibility(){let t=this,s=document.getElementById("canvas-container");if(s==null)return;let e=[this.x,this.y],r=this.k;e=[e[0]/r,e[1]/r];let o=s.offsetWidth/r,c=s.offsetHeight/r,u=-e[0]-o,p=-e[1]-c,f=u+o*3,d=p+c*3,y=function(C){if(!t.shouldRenderPerScale())return!1;let I=C.position.x,E=C.position.y,n=I+C.dimensions.width,w=E+C.dimensions.height;return u<n&&f>I&&p<w&&d>E},x=function(C){if(!t.shouldRenderPerScale())return!1;let{x:I,y:E}=t.canvasUtils.getPositionForCenteringConnection(C);return u<I&&f>I&&p<E&&d>E},v=function(C,I,E){let n=E(I),w=C.classed("visible");C.classed("visible",n).classed("entering",function(){return n&&!w}).classed("leaving",function(){return!n&&w})};this.processorManager.selectAll().each(function(C){v(m(this),C,y)}),this.processGroupManager.selectAll().each(function(C){v(m(this),C,y)}),this.remoteProcessGroupManager.selectAll().each(function(C){v(m(this),C,y)}),this.portManager.selectAll().each(function(C){v(m(this),C,y)}),this.labelManager.selectAll().each(function(C){v(m(this),C,y)}),this.funnelManager.selectAll().each(function(C){v(m(this),C,y)}),this.connectionManager.selectAll().each(function(C){v(m(this),C,x)}),this.processorManager.pan(),this.processGroupManager.pan(),this.remoteProcessGroupManager.pan(),this.portManager.pan(),this.labelManager.pan(),this.funnelManager.pan(),this.connectionManager.pan()}shouldRenderPerScale(){return this.k>=a.MIN_SCALE_TO_RENDER}centerSelectedComponents(t){let s=this.canvasUtils.getSelection();if(s.empty())return;let e;s.size()===1?e=this.getSingleSelectionBoundingClientRect(s):e=this.getSelectionBoundingClientRect(s),this.allowTransition=t,this.centerBoundingBox(e),this.allowTransition=!1}getSingleSelectionBoundingClientRect(t){let s;if(this.canvasUtils.isConnection(t)){let e=t.datum(),{x:r,y:o}=this.canvasUtils.getPositionForCenteringConnection(e);s={x:r,y:o,width:1,height:1}}else{let e=t.datum(),r=e.position;s={x:r.x,y:r.y,width:e.dimensions.width,height:e.dimensions.height}}return s}getSelectionBoundingClientRect(t){let s=0,e=document.getElementById("canvas-container");e&&(s=e.getBoundingClientRect().top);let r={x:Number.MAX_VALUE,y:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE},o=t.nodes().reduce((c,u)=>{let p=u.getBoundingClientRect();return c.x=Math.min(p.x,c.x),c.y=Math.min(p.y,c.y),c.right=Math.max(p.right,c.right),c.bottom=Math.max(p.bottom,c.bottom),c},r);return o.x=(o.x-this.x)/this.k,o.y=(o.y-s-this.y)/this.k,o.right=(o.right-this.x)/this.k,o.bottom=(o.bottom-s-this.y)/this.k,o.width=o.right-o.x,o.height=o.bottom-o.y,o.top=o.y,o.left=o.x,o}getCanvasPosition(t){let s=document.getElementById("canvas-container");if(!s)return null;let e=s.getBoundingClientRect(),r={x:t.x-e.left,y:t.y-e.top};if(r.x>=0&&r.x<e.width&&r.y>=0&&r.y<e.height){let o=r.x/this.k-this.x/this.k,c=r.y/this.k-this.y/this.k;return{x:o,y:c}}return null}centerBoundingBox(t){let s=this.k;t.scale!=null&&(s=t.scale);let e=this.getCenterForBoundingBox(t);this.transform([(e[0]-t.x)*s,(e[1]-t.y)*s],s)}getCenterForBoundingBox(t){let s=this.k;t.scale!=null&&(s=t.scale);let e=document.getElementById("canvas-container"),r=e.offsetWidth/s,o=e.offsetHeight/s;return[r/2-t.width/2,o/2-t.height/2]}translate(t){this.behavior.translateBy(this.svg,t[0],t[1])}birdseyeDragStart(){this.birdseyeTranslateInProgress=!0}birdseyeDragEnd(){this.birdseyeTranslateInProgress=!1,this.updateCanvasVisibility(),this.store.dispatch(ke({transform:{translate:{x:this.x,y:this.y},scale:this.k}}))}scale(t){this.behavior.scaleBy(this.svg,t)}transform(t,s){this.behavior.transform(this.svg,cn.translate(t[0],t[1]).scale(s))}zoomIn(){this.allowTransition=!0,this.scale(a.INCREMENT),this.allowTransition=!1}zoomOut(){this.allowTransition=!0,this.scale(1/a.INCREMENT),this.allowTransition=!1}fit(t){let s=[this.x,this.y],e=this.k,r,c=document.getElementById("canvas-container").getBoundingClientRect(),u=c.width-50,p=c.height-50,d=m("#canvas").node().getBoundingClientRect(),y=d.width/e,x=d.height/e,v=d.left/e,C=(d.top-c.top)/e,I=s[0]/e,E=s[1]/e;y>u||x>p?(r=Math.min(u/y,p/x),r=Math.min(Math.max(r,a.MIN_SCALE),a.MAX_SCALE)):(r=1,v-=(u-y)/2,C-=(p-x)/2),this.allowTransition=t,this.centerBoundingBox({x:v-I,y:C-E,width:u/r,height:p/r,scale:r}),this.allowTransition=!1}actualSize(){let t=[this.x,this.y],s=this.k,e=this.canvasUtils.getSelection(),r,c=document.getElementById("canvas-container").getBoundingClientRect();if(e.empty()){let u=c.width/s,p=c.height/s;r={x:u/2-t[0]/s,y:p/2-t[1]/s,width:1,height:1,scale:1}}else{let u=e.node().getBoundingClientRect();r={x:u.left/s-t[0]/s,y:(u.top-c.top)/s-t[1]/s,width:u.width/s,height:u.height/s,scale:1}}this.allowTransition=!0,this.centerBoundingBox(r),this.allowTransition=!1}refresh(){return ee(this,arguments,function*({transition:t=!1,refreshComponents:s=!0,refreshBirdseye:e=!0}={}){let r=this;yield new Promise(function(o){s&&r.updateCanvasVisibility();let c=[r.x,r.y],u=r.k;t?r.canvas.transition().duration(500).attr("transform",function(){return"translate("+c+") scale("+u+")"}).on("end",function(){e&&r.store.dispatch(ce()),o()}):(r.canvas.attr("transform",function(){return"translate("+c+") scale("+u+")"}),e&&r.store.dispatch(ce()),o())})})}isCanvasInitialized(){return this.canvasInitialized}destroy(){this.canvasInitialized=!1,this.labelManager.destroy(),this.funnelManager.destroy(),this.portManager.destroy(),this.remoteProcessGroupManager.destroy(),this.processGroupManager.destroy(),this.processorManager.destroy(),this.connectionManager.destroy(),this.k=kt,this.x=It.x,this.y=It.y,this.svg=null,this.canvas=null}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(Q),S(Ce),S(ve),S(Se),S(be),S(xe),S(ge),S(wt))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var Va=(()=>{class a{static{this.API="../nifi-api"}constructor(t,s,e,r){this.httpClient=t,this.clusterConnectionService=s,this.canvasView=e,this.store=r,this.currentProcessGroupId=this.store.selectSignal(Qt)}copy(t){return this.httpClient.post(`${a.API}/process-groups/${t.processGroupId}/copy`,t.copyRequestEntity)}paste(t){let s=it(X({},t.pasteRequest),{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()});return this.httpClient.put(`${a.API}/process-groups/${t.processGroupId}/paste`,s)}isCopiedContentInView(t){let s=this.calculateBoundingBoxForCopiedContent(t);return this.canvasView.isBoundingBoxInViewport(s,!1)}toOffsetPasteRequest(t,s=0){let r={copyResponse:this.cloneCopyResponseEntity(t),strategy:Ne.OFFSET_FROM_ORIGINAL};return Object.values(r.copyResponse).filter(o=>!!o&&Array.isArray(o)).forEach(o=>{o.forEach(c=>{c.position?(c.position.x+=25*(s+1),c.position.y+=25*(s+1)):c.bends&&c.bends.forEach(u=>{u.x+=25*(s+1),u.y+=25*(s+1)})})}),r}toCenteredPasteRequest(t){let s={copyResponse:this.cloneCopyResponseEntity(t),strategy:Ne.CENTER_ON_CANVAS},e=this.canvasView.getCanvasBoundingClientRect();if(e){let r=this.canvasView.getCanvasPosition({x:e.width/2+e.left,y:e.height/2+e.top});if(r){let o=this.calculateBoundingBoxForCopiedContent(s.copyResponse),c={x:o.width/2+o.x,y:o.height/2+o.y},u={x:r.x-c.x,y:r.y-c.y},p=this.calculateOffsetForCenterPaste(s.copyResponse,u);if(Object.values(s.copyResponse).filter(d=>!!d&&Array.isArray(d)).forEach(d=>{d.forEach(y=>{y.position?(y.position.x+=u.x+p,y.position.y+=u.y+p):y.bends&&y.bends.forEach(x=>{x.x+=u.x+p,x.y+=u.y+p})})}),s.bbox={height:o.height,width:o.width,x:o.x+u.x,y:o.y+u.y},!this.canvasView.isBoundingBoxInViewport(s.bbox,!0)){s.fitToScreen=!0;let d=Math.min(e.width/o.width,e.height/o.height);s.bbox.scale=d*.95}}}return s}calculateOffsetForCenterPaste(t,s){let e=this.getAllComponentPositions(),r=25,o=4,c=0,u=Object.values(t).filter(p=>!!p&&Array.isArray(p)).flat().filter(p=>!!p.position).map(p=>p.position);if(u.length>0){let p={x:u[0].x+s.x,y:u[0].y+s.y},f=e.some(d=>d.x>=p.x-o&&d.x<=p.x+o&&d.y>=p.y-o&&d.y<=p.y+o);for(;f;)c+=r,f=e.some(d=>d.x>=p.x+c-o&&d.x<=p.x+c+o&&d.y>=p.y+c-o&&d.y<=p.y+c+o)}return c}getAllComponentPositions(){let t=[];return this.canvasView.getCanvasBoundingClientRect()&&jt("g.component").each(e=>{t.push(e.position)}),t}cloneCopyResponseEntity(t){let s=e=>{if(e&&Array.isArray(e)&&e.length>0)return e[0].position?e.map(r=>{if(r.position)return it(X({},r),{position:X({},r.position)})}):e.map(r=>{if(r.bends&&r.bends.length>0){let o=r.bends.map(c=>X({},c));return it(X({},r),{bends:o})}return X({},r)})};return{id:t.id,connections:s(t.connections),funnels:s(t.funnels),inputPorts:s(t.inputPorts),labels:s(t.labels),outputPorts:s(t.outputPorts),processGroups:s(t.processGroups),processors:s(t.processors),remoteProcessGroups:s(t.remoteProcessGroups),externalControllerServiceReferences:t.externalControllerServiceReferences,parameterContexts:t.parameterContexts,parameterProviders:t.parameterProviders}}calculateBoundingBoxForCopiedContent(t){let s={left:Number.MAX_SAFE_INTEGER,top:Number.MAX_SAFE_INTEGER,right:Number.MIN_SAFE_INTEGER,bottom:Number.MIN_SAFE_INTEGER};return Object.values(t).flat().filter(e=>!!e).reduce((e,r)=>{if(r.componentType){let o=this.getComponentWidth(r);r.componentType==="CONNECTION"?r.bends.forEach(c=>{e.left=Math.min(e.left,c.x),e.top=Math.min(e.top,c.y),e.right=Math.max(e.right,c.x),e.bottom=Math.max(e.bottom,c.y)}):(e.left=Math.min(e.left,r.position.x),e.top=Math.min(e.top,r.position.y),e.right=Math.max(e.right,r.position.x+o.width),e.bottom=Math.max(e.bottom,r.position.y+o.height))}return e},s),{x:s.left,y:s.top,width:s.right-s.left,height:s.bottom-s.top}}getComponentWidth(t){if(!t)return{height:0,width:0};switch(t.componentType){case"PROCESSOR":return{width:352,height:128};case"PROCESS_GROUP":case"REMOTE_PROCESS_GROUP":return{width:384,height:176};case"INPUT_PORT":case"OUTPUT_PORT":case"REMOTE_INPUT_PORT":case"REMOTE_OUTPUT_PORT":return{width:240,height:48};case"FUNNEL":return{height:48,width:48};case"LABEL":return{height:t.height,width:t.width};default:return{height:0,width:0}}}static{this.\u0275fac=function(s){return new(s||a)(S(ae),S(Lt),S(we),S(q))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var gc=(()=>{class a{constructor(t,s,e,r,o,c,u,p,f,d){this.store=t,this.canvasView=s,this.nifiCommon=e,this.canvasUtils=r,this.processorManager=o,this.processGroupManager=c,this.remoteProcessGroupManager=u,this.portManager=p,this.funnelManager=f,this.labelManager=d,this.destroyRef=ie(re),this.birdseyeGroup=null,this.componentGroup=null,this.navigationCollapsed=Ot.navigationCollapsed,this.k=kt,this.x=It.x,this.y=It.y,this.initialized=!1,this.store.select(Vt).pipe(ht(this.destroyRef)).subscribe(y=>{this.k=y.scale,this.x=y.translate.x,this.y=y.translate.y}),this.store.select(On).pipe(ht(this.destroyRef)).subscribe(y=>{this.navigationCollapsed=y})}init(t){let s=this,e=t.getBoundingClientRect();m(t).append("canvas").attr("id","birdseye-canvas").attr("width",e.width-2).attr("height",e.height-2);let r=m(t).append("svg").attr("class","birdseye-svg").attr("width",e.width-2).attr("height",e.height-2);this.birdseyeGroup=r.append("g").attr("class","birdseye"),this.componentGroup=this.birdseyeGroup.append("g").attr("pointer-events","none");let o=Pt().subject(function(c){return{x:c.x,y:c.y,source:"birdseye"}}).on("start",function(){s.canvasView.birdseyeDragStart()}).on("drag",function(c,u){u.x+=c.dx,u.y+=c.dy,m(this).attr("transform",function(){return"translate("+u.x+", "+u.y+")"}),s.canvasView.translate([-c.dx,-c.dy])}).on("end",function(){s.canvasView.birdseyeDragEnd(),s.refresh()});this.birdseyeGroup.append("g").attr("pointer-events","all").attr("class","birdseye-brush-container").append("rect").attr("class","birdseye-brush pointer").datum({x:0,y:0}).call(o),this.initialized=!0}refresh(){if(!this.initialized||this.navigationCollapsed)return;let t=[this.x/this.k,this.y/this.k],e=document.getElementById("canvas-container").getBoundingClientRect(),o=m("#canvas").node().getBoundingClientRect(),c=o.left/this.k-t[0],u=(o.top-e.top)/this.k-t[1],p=o.right/this.k-t[0],f=o.bottom/this.k-t[1],d=e.width/this.k,y=e.height/this.k,x=-t[0],v=-t[1],C=x+d,I=v+y,E=Math.min(c,x),n=Math.min(u,v),w=Math.max(p,C),A=Math.max(f,I),L=w-E,O=A-n,j=document.getElementById("birdseye").getBoundingClientRect(),D=j.width,H=j.height,F=D/L,ot=H/O,Z=Math.min(F,ot),g=[0,0],G=[0,0];t[0]<0&&t[1]<0?(g=[0,0],G=[-t[0],-t[1]]):t[0]>=0&&t[1]<0?(g=[t[0],0],G=[0,-t[1]]):t[0]<0&&t[1]>=0?(g=[0,t[1]],G=[-t[0],0]):(g=[t[0],t[1]],G=[0,0]);let st=0,J=-c;t[0]<0?t[0]<J?st=J:st=J-(J-t[0]):t[0]<J&&(st=J-t[0]);let ct=0,lt=-u;t[1]<0?t[1]<lt?ct=lt:ct=lt-(lt-t[1]):t[1]<lt&&(ct=lt-t[1]),g=[g[0]+st,g[1]+ct],G=[G[0]+st,G[1]+ct],this.birdseyeGroup.attr("transform","scale("+Z+")"),this.componentGroup.attr("transform","translate("+g+")"),m("rect.birdseye-brush").attr("width",d).attr("height",y).attr("stroke-width",2/Z).attr("transform",function(B){return B.x=G[0],B.y=G[1],"translate("+G+")"});let Nt=m("#birdseye-canvas").node(),$=Nt.getContext("2d");$.save(),$.setTransform(1,0,0,1,0,0),$.clearRect(0,0,Nt.width,Nt.height),$.restore(),$.save(),$.translate(g[0]*Z,g[1]*Z),$.scale(Z,Z),this.labelManager.selectAll().each(B=>{let Bt="#fff7d7";B.permissions.canRead&&B.component.style["background-color"]&&(Bt=B.component.style["background-color"]);let Wt=this.canvasUtils.determineContrastColor(this.nifiCommon.substringAfterLast(Bt,"#"));$.fillStyle=Bt,$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height),$.strokeStyle=Wt,$.strokeRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),$.fillStyle="#ad9897",this.funnelManager.selectAll().each(function(B){$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),$.fillStyle="#bbdcde",this.portManager.selectAll().each(function(B){$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),$.fillStyle="#728e9b",this.remoteProcessGroupManager.selectAll().each(function(B){$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),this.processGroupManager.selectAll().each(function(B){$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),this.processorManager.selectAll().each(B=>{let Bt="#dde4eb";B.permissions.canRead&&B.component.style["background-color"]&&(Bt=B.component.style["background-color"]);let Wt=this.canvasUtils.determineContrastColor(this.nifiCommon.substringAfterLast(Bt,"#"));$.fillStyle=Bt,$.fillRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height),$.strokeStyle=Wt,$.strokeRect(B.position.x,B.position.y,B.dimensions.width,B.dimensions.height)}),$.restore()}destroy(){this.initialized=!1,this.navigationCollapsed=Ot.navigationCollapsed,this.k=kt,this.x=It.x,this.y=It.y,this.birdseyeGroup=null,this.componentGroup=null}static{this.\u0275fac=function(s){return new(s||a)(S(q),S(we),S(tt),S(Q),S(Ce),S(ve),S(Se),S(be),S(xe),S(ge))}}static{this.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();export{Ts as a,yt as b,Ls as c,Os as d,Us as e,Fs as f,Qt as g,js as h,Gs as i,Tn as j,An as k,Rn as l,kn as m,zs as n,_s as o,vt as p,Ds as q,$s as r,Vs as s,qs as t,Ws as u,Xs as v,Hs as w,Ys as x,Ks as y,Qs as z,Zs as A,Js as B,ti as C,ei as D,ni as E,si as F,ii as G,ri as H,oi as I,ai as J,On as K,ci as L,li as M,ui as N,Vt as O,Q as P,zn as Q,wt as R,ge as S,we as T,Va as U,gc as V};
