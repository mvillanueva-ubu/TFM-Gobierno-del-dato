import{b as Ps,c as Pc,d as Rt,e as wc,j as $n}from"./chunk-IZIEUFRL.js";import{A as bs,B as _c,C as xc,D as Sc,E as bc,M as Nn,P as wt,R as Tc,S as Fc,T as Vn,U as Dc,V as Bn,a as Hi,b as gc,c as gi,d as xs,e as We,f as Cc,g as Y,h as vc,i as yc,j as Gn,l as On,m as kn,p as Ss}from"./chunk-7KRCRNBH.js";import{$ as rc,A as Yl,B as Xl,C as Jl,D as Zl,E as bn,F as as,G as ec,H as tc,I as oc,J as ls,K as cs,L as Zo,M as ic,O as nc,P as Pn,Q as wn,R as ps,S as ms,T as ds,U as us,V as ei,W as Tn,X as ui,Y as ti,Z as fs,_ as fi,aa as hs,b as Wi,ba as hi,c as Qi,ca as sc,da as ac,e as Fa,ea as gs,f as Ea,fa as lc,g as ar,ga as Cs,h as Da,ha as Fn,i as Ia,ia as vs,j as Ma,ja as ys,k as Ra,ka as _s,l as Ki,la as Po,m as Aa,ma as En,na as Dn,pa as cc,qa as In,ra as Mn,s as Jo,sa as pc,t as Hl,ta as mc,u as ns,ua as Rn,v as Wl,va as dc,w as rs,wa as uc,x as ss,xa as fc,y as Ql,ya as hc,z as Kl,za as An}from"./chunk-SZKED3CF.js";import{a as zl}from"./chunk-J5U3LEM3.js";import{s as Ta}from"./chunk-K6YRI473.js";import{a as Ic,b as Mc,d as Rc,f as Ac,g as ws}from"./chunk-6JHNLUDL.js";import{e as Ec}from"./chunk-ADIACNFY.js";import{$ as pn,$a as _l,$b as os,A as za,Aa as Ir,Ab as Vr,B as Ha,Ba as Mr,Bb as Br,C as dr,Ca as cl,Cb as Lr,D as ur,Da as pl,Db as qr,E as Zi,Ea as Rr,Eb as jr,F as fr,Fa as ml,Fb as Cn,G as hr,Ga as di,Gb as vn,H as Wa,Ha as xo,Hb as Ur,I as en,Ia as dl,Ib as zr,J as Qa,Jb as yn,K as gr,Ka as ul,Kb as _n,L as tn,La as Ar,Lb as xn,M as on,Ma as So,Mb as Hr,N as nn,Nb as $l,O as Ka,Ob as Wr,P as Cr,Pb as Qr,Q as rn,Qa as so,Qb as Mt,R as vr,Ra as Gr,Rb as ao,S as yr,Sa as fl,Sb as Vl,T as sn,Ta as hl,Tb as Bl,U as Ya,Ua as Qo,Ub as Kr,V as an,Va as gl,Vb as Yr,W as _r,Wa as Cl,Wb as Xr,X as ln,Xa as un,Xb as Jr,Y as xr,Ya as vl,Yb as Zr,Z as cn,Za as Ko,Zb as es,_ as Wt,_a as yl,_b as ts,aa as Xa,ab as fn,ac as is,b as Pt,ba as Ja,bb as xl,bc as Sn,c as Ga,ca as Za,cb as Sl,cc as Ll,d as Oa,da as el,db as bl,dc as ql,e as zo,ea as tl,eb as Yo,ec as jl,f as lr,fa as ol,fb as Pl,fc as Ul,g as cr,ga as il,gb as wl,h as oo,ha as nl,hb as hn,i as ka,ia as rl,ib as Xo,j as Na,ja as sl,jb as Tl,k as $a,ka as al,kb as Fl,l as pr,la as Sr,lb as El,m as li,ma as br,mb as gn,n as ci,na as Pr,nb as Dl,o as Va,oa as mn,ob as Il,p as pi,pa as wr,pb as Ml,q as Yi,qa as Tr,qb as Rl,r as Ba,ra as ll,rb as Al,s as Xi,sa as Qt,sb as Gl,t as La,ta as Ho,tb as Ol,u as Ji,ua as Wo,ub as kl,v as mr,va as mi,vb as Or,w as qa,wa as Fr,wb as Nl,x as It,xa as dn,xb as kr,y as ja,ya as Er,yb as Nr,z as Ua,za as Dr,zb as $r}from"./chunk-4HCP6ZL4.js";import{a as fa,b as ha,c as Ca,d as va,e as ya,f as Bi}from"./chunk-7Y77X6YM.js";import{D as $i,E as Vi,F as Li,O as qi,S as ji,T as Ui,e as da,f as ua}from"./chunk-JQEOB3VZ.js";import{a as pa}from"./chunk-QXWNQE7J.js";import"./chunk-MA6JW2A4.js";import{a as na,b as ra,c as ki}from"./chunk-ML7AX7WG.js";import{a as ia}from"./chunk-2HTFTBIT.js";import{a as ba,b as Pa,c as zi}from"./chunk-NRJW2N7R.js";import"./chunk-M24IBW2G.js";import{a as sr}from"./chunk-NTC6HRTJ.js";import"./chunk-7RWCIHFI.js";import"./chunk-ZSGRQJXI.js";import{A as _o,B as ai,C as wa,a as Gi}from"./chunk-SYUJ4C72.js";import"./chunk-EYCZVYFF.js";import{a as to}from"./chunk-GYCUYRIS.js";import{a as Ys,b as Ai,c as Xs,d as Js,e as Zs,f as ea}from"./chunk-KNM6FCYO.js";import{a as Ue}from"./chunk-SN6NWPRN.js";import{a as dt}from"./chunk-EHRR3YRI.js";import{a as _a,b as xa,c as Sa}from"./chunk-3UFA6TFV.js";import{a as ma}from"./chunk-ZLF5NQAA.js";import{a as Eo}from"./chunk-IOA5VAZG.js";import{a as Uo}from"./chunk-YPBQUHFA.js";import{c as ga,d as tt}from"./chunk-UUTSXDDJ.js";import{b as ee}from"./chunk-ABVNDMIM.js";import{a as Co,b as vo,f as yo}from"./chunk-AGAPB23W.js";import"./chunk-M5FSYXXJ.js";import{a as Oi}from"./chunk-LEU5GMJJ.js";import"./chunk-VO6YYVE4.js";import{a as ye}from"./chunk-HKBFZV3L.js";import{a as _e}from"./chunk-3DWBQ3AZ.js";import"./chunk-SUMTKICK.js";import{a as eo}from"./chunk-DHXHPS42.js";import"./chunk-GDM375JW.js";import{a as je}from"./chunk-RJ7V3MDH.js";import{a as Lo,b as qo,c as jo}from"./chunk-UCNXABJ7.js";import{a as be,b as $e}from"./chunk-WTLSZVSU.js";import{a as Je}from"./chunk-D7WAZQPE.js";import{b as me,c as Vt,d as de,e as ue,f as fe,g as he,h as ge}from"./chunk-4P6JHET6.js";import{d as Se,g as qe}from"./chunk-7WEK5KIV.js";import"./chunk-2G27YEIW.js";import{a as ca}from"./chunk-BWMXRJDM.js";import{b as Ni}from"./chunk-47SKYL5X.js";import{a as Do,b as Io,c as Mo,d as Ro,e as Ao,f as Go,g as Oo,h as ko,i as No,j as $o,k as ho,l as Vo}from"./chunk-FC4XU2XU.js";import"./chunk-5AH45KVW.js";import{a as A}from"./chunk-SW63VHA3.js";import{A as la,a as Lt,b as Ze,c as go,l as sa,v as aa}from"./chunk-AJIV73VZ.js";import{a as Ii,b as Mi,c as Ri,d as Ks}from"./chunk-TGSF3K3X.js";import{b as we}from"./chunk-AGWUCOZB.js";import"./chunk-3RK6DDJD.js";import"./chunk-IN2CUFXI.js";import{a as C,b as jt,c as g,d as oa}from"./chunk-YPF27OPI.js";import{a as $t}from"./chunk-QNZ3LUPX.js";import"./chunk-EAFEU3LN.js";import{b as Ge,c as Le}from"./chunk-HP7XJUQG.js";import{b as ce,c as qt,d as ta,h as pe,i as et}from"./chunk-SAY7LY4C.js";import{c as To,e as Bo,f as Ce,g as Ne}from"./chunk-5TWJAVHX.js";import{$a as x,$b as po,Ab as Vs,Bb as Bs,Bc as mo,C as B,Cb as Ls,Dc as Xt,E as ks,F as te,Fe as Et,Gb as pt,Ge as xt,Hb as l,He as St,Ib as Q,Ie as ro,Jb as R,Je as _,Kb as Pi,Ke as Dt,La as a,Mb as it,Nb as nt,Ob as rt,Oe as yt,Pa as D,Pe as Ee,Qc as zs,Rc as uo,Re as q,Sb as Ct,Sc as Hs,Tb as qs,Ub as Be,Uc as rr,Ue as ne,V as Ns,Va as z,Vb as nr,Vc as fo,Ve as De,W as S,Wa as bi,X as Te,Xe as I,Y as F,Yb as X,Ye as Bt,Z as $s,Za as Fe,Zb as Z,Ze as Ie,_b as wi,_e as Jt,aa as gt,af as Me,ba as Qe,bb as p,ca as xi,cb as ri,cf as Re,db as Ht,df as Zt,ea as k,ef as Qs,f as ht,fa as co,ff as Ae,gf as mt,hb as T,hd as ie,hf as xe,i as or,j as bo,jb as ve,k as L,kb as ae,kc as Ti,kd as Ft,l as y,lb as le,lc as Fi,ld as Di,ma as N,mb as s,mc as Ei,na as $,nb as r,ob as v,od as Ws,p as f,pb as Ye,q as no,qb as Xe,qc as js,r as lt,rb as ir,rc as ke,sb as W,sc as Us,sd as vt,ta as Si,td as Fo,ua as Ke,ub as M,uc as wo,vb as u,w as Nt,y as Os,yb as si,z as Pe}from"./chunk-6VUBUCMU.js";import{a as V,b as j}from"./chunk-EQDQRRRY.js";var Fs=(()=>{class t{constructor(e){this.store=e}ngOnInit(){this.store.dispatch(ia())}static{this.\u0275fac=function(i){return new(i||t)(D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["flow-designer"]],standalone:!1,decls:2,vars:0,template:function(i,n){i&1&&(s(0,"banner-text"),v(1,"router-outlet"),r())},dependencies:[zs,ca],encapsulation:2})}}return t})();var Gc=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["root-group-redirector"]],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return t})();var Oc=()=>{let t=co(uo),m=co(Hi);return co(ie).select(Y).pipe(te(1),S(i=>i==zl.id?m.getProcessGroupStatus().pipe(te(1),S(n=>t.navigate(["/process-groups",n.processGroupStatus.id]))):t.navigate(["/process-groups",i])))};var wp=[{path:"process-groups/:processGroupId",component:Fs,children:[{path:"controller-services",loadChildren:()=>import("./chunk-4USVKGSZ.js").then(t=>t.ControllerServicesModule)},{path:"",loadChildren:()=>import("./chunk-KXHH2JA2.js").then(t=>t.CanvasModule)}]},{path:"remote-process-group/:rpgId",component:Fs,children:[{path:"manage-remote-ports",loadChildren:()=>import("./chunk-4EFK5UEX.js").then(t=>t.ManageRemotePortsModule)}]},{path:"",component:Gc,canActivate:[Oc],pathMatch:"full"}],kc=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=bi({type:t})}static{this.\u0275inj=xi({imports:[rr.forChild(wp),rr]})}}return t})();var Tp=t=>({value:t});function Fp(t,m){if(t&1&&(s(0,"mat-option",7),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function Ep(t,m){if(t&1&&(s(0,"mat-option",8),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function Dp(t,m){if(t&1&&x(0,Fp,2,5,"mat-option",7)(1,Ep,2,2,"mat-option",8),t&2){let e=m.$implicit;T(e.description?0:1)}}function Ip(t,m){if(t&1&&(s(0,"mat-form-field")(1,"mat-label"),l(2),v(3,"i",5),r(),s(4,"mat-select",6),ae(5,Dp,2,1,null,null,ve),r()()),t&2){let e=u();a(2),R(" ",e.ComponentType.InputPort==e.request.type?"Receive From":"Send To"," "),a(),p("tooltipComponentType",e.TextTip)("tooltipInputData",e.ComponentType.InputPort==e.request.type?"Specify where FlowFiles are received from.":"Specify where FlowFiles are sent."),a(2),le(e.allowRemoteAccessOptions)}}function Mp(t,m){t&1&&(s(0,"span"),l(1,"Add"),r())}function Rp(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",4)(1,"button",9),l(2,"Cancel"),r(),s(3,"button",10),M("click",function(){N(e);let n=u();return $(n.createPort())}),x(4,Mp,2,0,"span",11),r()()}if(t&2){let e=m,i=u();a(3),p("disabled",!i.createPortForm.dirty||i.createPortForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}var Nc=(()=>{class t extends Je{constructor(e,i,n){super(),this.request=e,this.formBuilder=i,this.store=n,this.saving$=this.store.select(We),this.TextTip=_e,this.isRootProcessGroup=!1,this.allowRemoteAccessOptions=[{text:"Local connections",value:"false",description:"Receive FlowFiles from components in parent process groups"},{text:"Remote connections (site-to-site)",value:"true",description:"Receive FlowFiles from remote process group (site-to-site)"}],this.ComponentType=_,this.ErrorContextKey=ee,_.InputPort==this.request.type?this.portTypeLabel="Input Port":this.portTypeLabel="Output Port",this.createPortForm=this.formBuilder.group({newPortName:new I("",q.required),newPortAllowRemoteAccess:new I(this.allowRemoteAccessOptions[0].value,q.required)}),this.store.select(kn).pipe(fo()).subscribe(d=>{this.isRootProcessGroup=d==null})}createPort(){this.store.dispatch(ln({request:j(V({},this.request),{name:this.createPortForm.get("newPortName")?.value,allowRemoteAccess:this.createPortForm.get("newPortAllowRemoteAccess")?.value})}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["create-port"]],features:[Fe],decls:12,vars:10,consts:[["mat-dialog-title",""],[1,"create-port-form",3,"formGroup"],[3,"context"],["matInput","","formControlName","newPortName","type","text"],["align","end"],["nifiTooltip","",1,"fa","fa-info-circle",3,"tooltipComponentType","tooltipInputData"],["formControlName","newPortAllowRemoteAccess"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[3,"value"],["mat-button","","mat-dialog-close",""],["type","submit","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-dialog-content")(5,"mat-form-field")(6,"mat-label"),l(7),r(),v(8,"input",3),r(),x(9,Ip,7,3,"mat-form-field"),r(),x(10,Rp,5,2,"mat-dialog-actions",4),X(11,"async"),r()),i&2){let d;a(),R("Create New ",n.portTypeLabel,""),a(),p("formGroup",n.createPortForm),a(),p("context",n.ErrorContextKey.PORT),a(4),R("",n.portTypeLabel," Name"),a(2),T(n.isRootProcessGroup?-1:9),a(),T((d=Be(8,Tp,Z(11,6,n.saving$)))?10:-1,d)}},dependencies:[xe,Ie,Ee,ne,De,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,$e,be,Se,Ne,Ce,ke,Ue,ye,tt],styles:[".create-port-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.create-port-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.create-port-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.create-port-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.create-port-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.create-port-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.create-port-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.create-port-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.create-port-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var Ap=t=>({value:t});function Gp(t,m){if(t&1&&(s(0,"mat-form-field")(1,"mat-label"),l(2," Concurrent Tasks "),v(3,"i",7),r(),v(4,"input",8),r()),t&2){let e=u();a(3),p("tooltipComponentType",e.TextTip),a(),p("readonly",e.readonly)}}function Op(t,m){if(t&1&&(s(0,"div",4)(1,"mat-label"),l(2," Failure Port "),v(3,"i",9),r(),v(4,"mat-checkbox",10),r()),t&2){let e=u();a(3),p("tooltipComponentType",e.TextTip)}}function kp(t,m){t&1&&(s(0,"button",11),l(1,"Close"),r())}function Np(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function $p(t,m){if(t&1){let e=W();s(0,"button",12),l(1,"Cancel"),r(),s(2,"button",13),M("click",function(){N(e);let n=u(2);return $(n.editPort())}),x(3,Np,2,0,"span",14),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editPortForm.dirty||i.editPortForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function Vp(t,m){if(t&1&&(s(0,"mat-dialog-actions",6),x(1,kp,2,0,"button",11)(2,$p,4,2),r()),t&2){let e=u();a(),T(e.readonly?1:2)}}var $c=(()=>{class t extends Je{constructor(e,i,n,d,b,w){super(),this.request=e,this.formBuilder=i,this.store=n,this.canvasUtils=d,this.client=b,this.clusterConnectionService=w,this.saving$=this.store.select(We),this.TextTip=_e,this.ErrorContextKey=ee,this.readonly=!e.entity.permissions.canWrite||!this.canvasUtils.runnableSupportsModification(e.entity),_.InputPort==this.request.type?this.portTypeLabel="Input Port":this.portTypeLabel="Output Port",this.editPortForm=this.formBuilder.group({name:new I(e.entity.component.name,q.required),concurrentTasks:new I(e.entity.component.concurrentlySchedulableTaskCount,q.required),comments:new I(e.entity.component.comments),portFunction:new I({value:e.entity.component.portFunction=="FAILURE",disabled:this.readonly})})}editPort(){let e={revision:this.client.getRevision(this.request.entity),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:this.request.entity.id,name:this.editPortForm.get("name")?.value,comments:this.editPortForm.get("comments")?.value}};this.request.entity.component.allowRemoteAccess&&(e.component.concurrentlySchedulableTaskCount=this.editPortForm.get("concurrentTasks")?.value),_.OutputPort==this.request.type&&(e.component.portFunction=this.editPortForm.get("portFunction")?.value?"FAILURE":"STANDARD"),this.store.dispatch(Qt({request:{id:this.request.entity.id,type:this.request.type,uri:this.request.uri,payload:e,errorStrategy:"banner"}}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(wt),D(je),D(dt))}}static{this.\u0275cmp=z({type:t,selectors:[["edit-port"]],features:[Fe],decls:20,vars:13,consts:[["mat-dialog-title",""],[1,"edit-port-form",3,"formGroup"],[3,"context"],["matInput","","formControlName","name","type","text",3,"readonly"],[1,"mb-3.5"],["matInput","","formControlName","comments","type","text",3,"readonly"],["align","end"],["nifiTooltip","","tooltipInputData","The number of tasks that should be concurrently scheduled for this port.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","concurrentTasks","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","When using the Stateless Engine, if any FlowFile is routed to a port marked as a Failure Port, all data in the transaction is rolled back, and the input FlowFile, if any, is routed to the Failure Port.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","portFunction"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-dialog-content")(5,"div")(6,"mat-form-field")(7,"mat-label"),l(8),r(),v(9,"input",3),r()(),s(10,"div"),x(11,Gp,5,2,"mat-form-field"),r(),x(12,Op,5,1,"div",4),s(13,"div")(14,"mat-form-field")(15,"mat-label"),l(16,"Comments"),r(),v(17,"textarea",5),r()()(),x(18,Vp,3,1,"mat-dialog-actions",6),X(19,"async"),r()),i&2){let d;a(),Q(n.readonly?n.portTypeLabel+" Details":"Edit "+n.portTypeLabel),a(),p("formGroup",n.editPortForm),a(),p("context",n.ErrorContextKey.PORT),a(5),R("",n.portTypeLabel," Name"),a(),p("readonly",n.readonly),a(2),T(n.request.entity.component.allowRemoteAccess?11:-1),a(),T(n.portTypeLabel=="Output Port"?12:-1),a(5),p("readonly",n.readonly),a(),T((d=Be(11,Ap,Z(19,9,n.saving$)))?18:-1,d)}},dependencies:[xe,Ie,Ee,ne,De,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,Ze,Lt,Ne,Ce,ke,Ue,ye,tt],styles:[".edit-port-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.edit-port-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.edit-port-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.edit-port-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.edit-port-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.edit-port-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.edit-port-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.edit-port-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.edit-port-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var Vc=(()=>{class t{constructor(e,i){this.dialogRequest=e,this.store=i,this.saving$=this.store.select(We),this.processorTypes=e.processorTypes}createProcessor(e){this.store.dispatch(sn({request:j(V({},this.dialogRequest.request),{processorType:e.type,processorBundle:e.bundle})}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["create-processor"]],decls:2,vars:5,consts:[[3,"extensionTypeSelected","componentType","documentedTypes","saving"]],template:function(i,n){i&1&&(s(0,"extension-creation",0),X(1,"async"),M("extensionTypeSelected",function(b){return n.createProcessor(b)}),r()),i&2&&p("componentType","Processor")("documentedTypes",n.processorTypes)("saving",Z(1,3,n.saving$))},dependencies:[da,ke],encapsulation:2})}}return t})();function Bp(t,m){if(t&1&&(s(0,"div",1),l(1),r()),t&2){let e=u();a(),Q(e.formatLabel(e.runDurationIndex))}}function Lp(t,m){if(t&1){let e=W();s(0,"div",2)(1,"mat-slider",3)(2,"input",4),M("valueChange",function(n){N(e);let d=u();return $(d.runDurationChanged(n))}),r()()(),s(3,"div",5)(4,"div",1),l(5,"Lower latency"),r(),s(6,"div",1),l(7,"Higher throughput"),r()()}if(t&2){let e=u();a(),p("min",0)("max",7)("step",1)("displayWith",e.formatLabel),a(),p("value",e.runDurationIndex)}}var Bc=(()=>{class t{constructor(){this.runDurationValues=[0,25,50,100,250,500,1e3,2e3],this.isDisabled=!1,this.isTouched=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}formatLabel(e){return e===0?"0ms":e===1?"25ms":e===2?"50ms":e===3?"100ms":e===4?"250ms":e===5?"500ms":e===6?"1s":"2s"}writeValue(e){let i=this.runDurationValues.indexOf(e);i<0?this.runDurationIndex=0:this.runDurationIndex=i}runDurationChanged(e){this.runDurationIndex=e,this.handleChanged()}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.runDurationValues[this.runDurationIndex])}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["run-duration-slider"]],features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:3,vars:1,consts:[[1,"run-duration-slider","flex","flex-col"],[1,"tertiary-color","font-medium"],[1,"pl-4","pr-7"],["showTickMarks","","discrete","",3,"min","max","step","displayWith"],["matSliderThumb","",3,"valueChange","value"],[1,"flex","justify-between","items-center"]],template:function(i,n){i&1&&(s(0,"div",0),x(1,Bp,2,1,"div",1)(2,Lp,8,5),r()),i&2&&(a(),T(n.isDisabled?1:2))},dependencies:[zi,ba,Pa],styles:[".run-duration-slider[_ngcontent-%COMP%]   .mat-mdc-slider[_ngcontent-%COMP%]{width:100%;margin:0}"]})}}return t})();function qp(t,m){if(t&1&&(s(0,"div",11),l(1),r()),t&2){let e=u().$implicit;a(),Q(e.description)}}function jp(t,m){if(t&1){let e=W();s(0,"div",6)(1,"div",8),l(2),r(),s(3,"div",9)(4,"mat-checkbox",10),rt("ngModelChange",function(n){let d=N(e).$implicit;return nt(d.autoTerminate,n)||(d.autoTerminate=n),$(n)}),M("change",function(){N(e);let n=u();return $(n.handleChanged())}),l(5,"terminate "),r(),s(6,"mat-checkbox",10),rt("ngModelChange",function(n){let d=N(e).$implicit;return nt(d.retry,n)||(d.retry=n),$(n)}),M("change",function(){N(e);let n=u();return $(n.handleChanged())}),l(7,"retry "),r()(),x(8,qp,2,1,"div",11),r()}if(t&2){let e=m.$implicit,i=m.$index,n=u();a(),p("title",e.name),a(),R(" ",e.name," "),a(2),si("name","autoTerminate-",i,""),it("ngModel",e.autoTerminate),p("disabled",n.isDisabled),a(2),si("name","retry-",i,""),it("ngModel",e.retry),p("disabled",n.isDisabled),a(2),T(n.hasDescription(e)?8:-1)}}function Up(t,m){if(t&1){let e=W();s(0,"div")(1,"mat-form-field")(2,"mat-label"),l(3," Number of Retry Attempts "),v(4,"i",12),r(),s(5,"input",13),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.retryCount,n)||(d.retryCount=n),$(n)}),M("keyup",function(){N(e);let n=u();return $(n.handleChanged())}),r()()(),s(6,"div",14)(7,"div",3)(8,"div"),l(9,"Retry Back Off Policy"),r(),v(10,"i",15),r(),s(11,"mat-radio-group",16),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.backoffMechanism,n)||(d.backoffMechanism=n),$(n)}),M("change",function(){N(e);let n=u();return $(n.handleChanged())}),s(12,"mat-radio-button",17),l(13,"Penalize"),r(),s(14,"mat-radio-button",18),l(15,"Yield"),r()()(),s(16,"div")(17,"mat-form-field")(18,"mat-label"),l(19," Retry Maximum Back Off Period "),v(20,"i",19),r(),s(21,"input",20),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.maxBackoffPeriod,n)||(d.maxBackoffPeriod=n),$(n)}),M("keyup",function(){N(e);let n=u();return $(n.handleChanged())}),r()()()}if(t&2){let e=u();a(4),p("tooltipComponentType",e.TextTip),a(),it("ngModel",e.retryCount),p("required",!0)("readonly",e.isDisabled),a(5),p("tooltipComponentType",e.TextTip),a(),it("ngModel",e.backoffMechanism),p("disabled",e.isDisabled),a(9),p("tooltipComponentType",e.TextTip),a(),it("ngModel",e.maxBackoffPeriod),p("required",!0)("readonly",e.isDisabled)}}var Lc=(()=>{class t{constructor(e){this.nifiCommon=e,this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.relationships=e.relationships.map(i=>V({},i)),this.backoffMechanism=e.backoffMechanism,this.maxBackoffPeriod=e.maxBackoffPeriod,this.retryCount=e.retryCount}hasDescription(e){return!this.nifiCommon.isBlank(e.description)}isRelationshipRetried(){return this.relationships?this.relationships.some(e=>e.retry):!1}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeRelationshipConfiguration())}serializeRelationshipConfiguration(){return{relationships:[...this.relationships],backoffMechanism:this.backoffMechanism,maxBackoffPeriod:this.maxBackoffPeriod,retryCount:this.retryCount}}static{this.\u0275fac=function(i){return new(i||t)(D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["relationship-settings"]],features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:13,vars:2,consts:[[1,"relationship-settings","flex","gap-y-4"],[1,"flex","basis-1/2","flex-col","gap-y-4","pr-4","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","items-center","gap-x-1.5"],["nifiTooltip","","tooltipInputData","Will automatically terminate and/or retry FlowFiles sent to a given relationship if it is not defined elsewhere. If both terminate and retry are selected, any retry logic will happen first, then auto-termination.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"flex","flex-col","gap-y-3"],[1,"flex","flex-col","gap-y-1.5"],[1,"flex","basis-1/2","flex-col"],[1,"tertiary-color","font-medium","overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"title"],[1,"flex","items-center","gap-x-2"],[3,"ngModelChange","change","ngModel","name","disabled"],[1,"ml-2"],["nifiTooltip","","tooltipInputData","For relationships set to retry, this number indicates how many times a FlowFile will attempt to reprocess before it is routed elsewhere. Must be a non-negative integer.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","type","number","min","0","name","retryCount",3,"ngModelChange","keyup","ngModel","required","readonly"],[1,"flex","flex-col","mb-6"],["nifiTooltip","","tooltipInputData","Penalize: Retry attempts will occur in time, but the processor will continue to process other FlowFiles. Yield: No other FlowFile processing will occur until all retry attempts have been made.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"flex","gap-x-2",3,"ngModelChange","change","ngModel","disabled"],["value","PENALIZE_FLOWFILE"],["value","YIELD_PROCESSOR"],["nifiTooltip","","tooltipInputData","Initial retries are based on the Penalty/Yield Duration time specified in the Settings tab. The duration time is repeatedly doubled for every subsequent retry attempt. This number indicates the maximum allowable time period before another retry attempt occurs.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","type","text",3,"ngModelChange","keyup","ngModel","required","readonly"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),l(5,"Automatically Terminate/Retry Relationships"),r(),v(6,"i",4),r(),s(7,"div",5),ae(8,jp,9,11,"div",6,ve),r()()(),s(10,"div",7)(11,"div",2),x(12,Up,22,11),r()()()),i&2&&(a(6),p("tooltipComponentType",n.TextTip),a(2),le(n.relationships),a(4),T(n.isRelationshipRetried()?12:-1))},dependencies:[zi,Ze,Lt,mt,Ee,Jt,ne,Qs,Zt,Bt,et,pe,ce,Le,Ge,xe,Sa,_a,xa,ye,to],styles:[".relationship-settings[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var zp=t=>({value:t});function Hp(t,m){if(t&1&&(s(0,"div",7)(1,"div",50),v(2,"i",51),r()()),t&2){let e=u();a(),p("delayClose",!0)("tooltipComponentType",e.BulletinsTip)("tooltipInputData",e.getBulletinsTipData())("position",e.getBulletinTooltipPosition())("ngClass",e.getMostSevereBulletinLevel())}}function Wp(t,m){if(t&1&&(s(0,"mat-option",26),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly),a(),R(" ",e.text," ")}}function Qp(t,m){if(t&1&&(s(0,"mat-option",30),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Kp(t,m){if(t&1&&(s(0,"mat-option",38),l(1),r()),t&2){let e=m.$implicit,i=u();p("disabled",i.executionStrategyDisabled(e)||i.readonly)("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Yp(t,m){t&1&&(s(0,"div",54),v(1,"div",55),l(2," Source Processors with a run duration greater than 0ms and no incoming connections could lose data when NiFi is shutdown. "),r())}function Xp(t,m){if(t&1){let e=W();s(0,"div",15)(1,"div"),l(2," Run Duration "),v(3,"i",52),r(),s(4,"run-duration-slider",53),M("change",function(){N(e);let n=u();return $(n.runDurationChanged())}),r(),x(5,Yp,3,0,"div",54),r()}if(t&2){let e=u();a(3),p("tooltipComponentType",e.TextTip),a(2),T(e.shouldShowWarning()?5:-1)}}function Jp(t,m){t&1&&v(0,"relationship-settings",45)}function Zp(t,m){t&1&&(s(0,"div",46),l(1,"This processor has no relationships."),r())}function em(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",63),l(3,"Running"),v(4,"i",64),r()()),t&2){u();let e=pt(10),i=u();p("disabled",!i.canOperate())("matMenuTriggerFor",e)}}function tm(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",65),l(3,"Stopped"),v(4,"i",64),r()()),t&2){u();let e=pt(10),i=u();p("disabled",!i.canOperate())("matMenuTriggerFor",e)}}function om(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",66),l(3,"Disable"),v(4,"i",64),r()()),t&2){u();let e=pt(10),i=u();p("disabled",!i.canOperate())("matMenuTriggerFor",e)}}function im(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",67),l(3),r()()),t&2){u();let e=pt(10),i=u();p("disabled",!0)("matMenuTriggerFor",e),a(3),R("Stopping (",i.status.aggregateSnapshot.activeThreadCount,") ")}}function nm(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",67),l(3,"Validating "),r()()),t&2){u();let e=pt(10);p("disabled",!0)("matMenuTriggerFor",e)}}function rm(t,m){if(t&1&&(s(0,"button",57)(1,"div",62),v(2,"i",68),l(3,"Invalid"),v(4,"i",64),r()()),t&2){u();let e=pt(10),i=u();p("disabled",!i.canOperate())("matMenuTriggerFor",e)}}function sm(t,m){if(t&1){let e=W();s(0,"button",69),M("click",function(){N(e);let n=u(2);return $(n.stop())}),v(1,"i",70),l(2,"Stop "),r()}}function am(t,m){if(t&1){let e=W();s(0,"button",71),M("click",function(){N(e);let n=u(2);return $(n.start())}),v(1,"i",72),l(2,"Start "),r()}if(t&2){let e=u(2);p("disabled",e.editProcessorForm.dirty)}}function lm(t,m){if(t&1){let e=W();s(0,"button",71),M("click",function(){N(e);let n=u(2);return $(n.disable())}),v(1,"i",66),l(2,"Disable "),r()}if(t&2){let e=u(2);p("disabled",e.editProcessorForm.dirty)}}function cm(t,m){if(t&1){let e=W();s(0,"button",71),M("click",function(){N(e);let n=u(2);return $(n.enable())}),v(1,"i",73),l(2,"Enable "),r()}if(t&2){let e=u(2);p("disabled",e.editProcessorForm.dirty)}}function pm(t,m){t&1&&(s(0,"button",61),l(1,"Close"),r())}function mm(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function dm(t,m){if(t&1){let e=W();s(0,"button",74),l(1,"Cancel"),r(),s(2,"button",75),M("click",function(){N(e);let n=u(2);return $(n.submitForm())}),x(3,mm,2,0,"span",76),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editProcessorForm.dirty||i.editProcessorForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function um(t,m){if(t&1&&(s(0,"mat-dialog-actions",49)(1,"div",56)(2,"div"),x(3,em,5,2,"button",57)(4,tm,5,2,"button",57)(5,om,5,2,"button",57)(6,im,4,3,"button",57)(7,nm,4,2,"button",57)(8,rm,5,2,"button",57),s(9,"mat-menu",58,0),x(11,sm,3,0,"button",59)(12,am,3,1,"button",60)(13,lm,3,1,"button",60)(14,cm,3,1,"button",60),r()(),s(15,"div"),x(16,pm,2,0,"button",61)(17,dm,4,2),r()()()),t&2){let e=u();a(3),T(e.isStoppable()?3:e.isRunnable()?4:e.isDisabled()?5:e.isStopping()?6:e.isValidating()?7:e.isInvalid()?8:-1),a(8),T(e.isStoppable()&&e.canOperate()?11:-1),a(),T(e.isRunnable()&&e.canOperate()?12:-1),a(),T(e.isDisableable()&&e.canOperate()?13:-1),a(),T(e.isEnableable()&&e.canOperate()?14:-1),a(2),T(e.readonly?16:17)}}var qc=(()=>{class t extends Uo{set processorUpdates(e){this.processRunStateUpdates(e)}constructor(e,i,n,d,b,w){super("edit-processor-selected-index"),this.request=e,this.formBuilder=i,this.client=n,this.canvasUtils=d,this.clusterConnectionService=b,this.nifiCommon=w,this.propertyVerificationStatus$=y("pending"),this.verify=new Ke,this.editProcessor=new Ke,this.stopComponentRequest=new Ke,this.startComponentRequest=new Ke,this.disableComponentRequest=new Ke,this.enableComponentRequest=new Ke,this.TextTip=_e,this.BulletinsTip=ma,this.readonly=!0,this.bulletinLevels=[{text:"DEBUG",value:"DEBUG"},{text:"INFO",value:"INFO"},{text:"WARN",value:"WARN"},{text:"ERROR",value:"ERROR"},{text:"NONE",value:"NONE"}],this.schedulingStrategies=[{text:"Timer driven",value:"TIMER_DRIVEN",description:"Processor will be scheduled to run on an interval defined by the run schedule."},{text:"CRON driven",value:"CRON_DRIVEN",description:"Processor will be scheduled to run on at specific times based on the specified CRON string."}],this.executionStrategies=[{text:"All nodes",value:"ALL",description:"Processor will be scheduled to run on all nodes"},{text:"Primary node",value:"PRIMARY",description:"Processor will be scheduled to run only on the primary node"}],this.ErrorContextKey=ee;let H=e.entity.component.config.properties,G=Object.entries(H).map(K=>{let[re,ze]=K;return{property:re,value:ze,descriptor:e.entity.component.config.descriptors[re]}}),U=e.entity.component.config.defaultConcurrentTasks,ot=e.entity.component.config.defaultSchedulingPeriod,Oe,at;this.schedulingStrategy=e.entity.component.config.schedulingStrategy,this.schedulingStrategy==="CRON_DRIVEN"?(this.cronDrivenConcurrentTasks=e.entity.component.config.concurrentlySchedulableTaskCount,this.cronDrivenSchedulingPeriod=e.entity.component.config.schedulingPeriod,this.timerDrivenConcurrentTasks=U.TIMER_DRIVEN,this.timerDrivenSchedulingPeriod=ot.TIMER_DRIVEN,Oe=this.cronDrivenConcurrentTasks,at=this.cronDrivenSchedulingPeriod):(this.cronDrivenConcurrentTasks=U.CRON_DRIVEN,this.cronDrivenSchedulingPeriod=ot.CRON_DRIVEN,this.timerDrivenConcurrentTasks=e.entity.component.config.concurrentlySchedulableTaskCount,this.timerDrivenSchedulingPeriod=e.entity.component.config.schedulingPeriod,Oe=this.timerDrivenConcurrentTasks,at=this.timerDrivenSchedulingPeriod),this.runDurationMillis=e.entity.component.config.runDurationMillis;let E={relationships:e.entity.component.relationships,backoffMechanism:e.entity.component.config.backoffMechanism,retryCount:e.entity.component.config.retryCount,maxBackoffPeriod:e.entity.component.config.maxBackoffPeriod};this.editProcessorForm=this.formBuilder.group({name:new I(e.entity.component.name,q.required),penaltyDuration:new I(e.entity.component.config.penaltyDuration,q.required),yieldDuration:new I(e.entity.component.config.yieldDuration,q.required),bulletinLevel:new I(e.entity.component.config.bulletinLevel,q.required),schedulingStrategy:new I(this.schedulingStrategy,q.required),concurrentTasks:new I(Oe,[q.required,q.min(1)]),schedulingPeriod:new I(at,q.required),executionNode:new I(e.entity.component.config.executionNode,q.required),properties:new I({value:G,disabled:this.readonly}),relationshipConfiguration:new I({value:E,disabled:this.readonly},[q.required,this.relationshipConfigurationValidator()]),comments:new I(e.entity.component.config.comments)}),this.supportsBatching()&&this.editProcessorForm.addControl("runDuration",new I({value:this.runDurationMillis,disabled:this.readonly},q.required)),this.processRunStateUpdates(e.entity)}processRunStateUpdates(e){this.status=e.status,this.revision=e.revision,this.bulletins=e.bulletins,this.readonly=!e.permissions.canWrite||!this.canvasUtils.runnableSupportsModification(e),this.readonly?(this.editProcessorForm.get("properties")?.disable(),this.editProcessorForm.get("relationshipConfiguration")?.disable(),this.supportsBatching()&&this.editProcessorForm.get("runDuration")?.disable()):(this.editProcessorForm.get("properties")?.enable(),this.editProcessorForm.get("relationshipConfiguration")?.enable(),this.supportsBatching()&&this.editProcessorForm.get("runDuration")?.enable())}relationshipConfigurationValidator(){return e=>{let i=e.value;if(i.relationships.filter(d=>d.retry).map(d=>d.name).length>0){let d=!1,b={};if((i.retryCount==null||i.retryCount<0)&&(b.invalidRetry=!0,d=!0),this.nifiCommon.isBlank(i.maxBackoffPeriod)&&(b.invalidBackoff=!0,d=!0),d)return b}return null}}supportsBatching(){return this.request.entity.component.supportsBatching==!0}formatType(){return this.nifiCommon.formatType(this.request.entity.component)}formatBundle(){return this.nifiCommon.formatBundle(this.request.entity.component.bundle)}concurrentTasksChanged(){this.schedulingStrategy==="CRON_DRIVEN"?this.cronDrivenConcurrentTasks=this.editProcessorForm.get("concurrentTasks")?.value:this.timerDrivenConcurrentTasks=this.editProcessorForm.get("concurrentTasks")?.value}schedulingPeriodChanged(){this.schedulingStrategy==="CRON_DRIVEN"?this.cronDrivenSchedulingPeriod=this.editProcessorForm.get("schedulingPeriod")?.value:this.timerDrivenSchedulingPeriod=this.editProcessorForm.get("schedulingPeriod")?.value}schedulingStrategyChanged(e){this.schedulingStrategy=e,e==="CRON_DRIVEN"?(this.editProcessorForm.get("concurrentTasks")?.setValue(this.cronDrivenConcurrentTasks),this.editProcessorForm.get("schedulingPeriod")?.setValue(this.cronDrivenSchedulingPeriod)):(this.editProcessorForm.get("concurrentTasks")?.setValue(this.timerDrivenConcurrentTasks),this.editProcessorForm.get("schedulingPeriod")?.setValue(this.timerDrivenSchedulingPeriod))}executionStrategyDisabled(e){return e.value=="ALL"&&this.request.entity.component.executionNodeRestricted===!0}runDurationChanged(){this.runDurationMillis=this.editProcessorForm.get("runDuration")?.value}shouldShowWarning(){return this.runDurationMillis>0&&(this.request.entity.component.inputRequirement==="INPUT_FORBIDDEN"||this.request.entity.component.inputRequirement==="INPUT_ALLOWED")}submitForm(e,i){let n=this.editProcessorForm.get("relationshipConfiguration")?.value,d=n.relationships.filter(G=>G.autoTerminate).map(G=>G.name),b=n.relationships.filter(G=>G.retry).map(G=>G.name),w={revision:this.client.getRevision(j(V({},this.request.entity),{revision:this.revision})),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:this.request.entity.id,name:this.editProcessorForm.get("name")?.value,config:{penaltyDuration:this.editProcessorForm.get("penaltyDuration")?.value,yieldDuration:this.editProcessorForm.get("yieldDuration")?.value,bulletinLevel:this.editProcessorForm.get("bulletinLevel")?.value,schedulingStrategy:this.editProcessorForm.get("schedulingStrategy")?.value,concurrentlySchedulableTaskCount:this.editProcessorForm.get("concurrentTasks")?.value,schedulingPeriod:this.editProcessorForm.get("schedulingPeriod")?.value,executionNode:this.editProcessorForm.get("executionNode")?.value,autoTerminatedRelationships:d,retriedRelationships:b,comments:this.editProcessorForm.get("comments")?.value}}},H=this.editProcessorForm.get("properties");if(H&&H.dirty){let G=H.value;w.component.config.properties=this.getModifiedProperties(),w.component.config.sensitiveDynamicPropertyNames=G.filter(U=>U.descriptor.dynamic&&U.descriptor.sensitive).map(U=>U.descriptor.name)}this.supportsBatching()&&(w.component.config.runDurationMillis=this.editProcessorForm.get("runDuration")?.value),b.length>0&&(w.component.config.backoffMechanism=n.backoffMechanism,w.component.config.maxBackoffPeriod=n.maxBackoffPeriod,w.component.config.retryCount=n.retryCount),this.editProcessor.next({id:this.request.entity.id,uri:this.request.entity.uri,type:_.Processor,errorStrategy:"banner",postUpdateNavigation:e,postUpdateNavigationBoundary:i,payload:w})}hasBulletins(){return this.request.entity.permissions.canRead&&!this.nifiCommon.isEmpty(this.bulletins)}getBulletinsTipData(){return{bulletins:this.bulletins}}getBulletinTooltipPosition(){return{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetX:-8,offsetY:8}}getMostSevereBulletinLevel(){let e=this.canvasUtils.getMostSevereBulletin(this.bulletins);return e?e.bulletin.level.toLowerCase():null}isStoppable(){return this.status.aggregateSnapshot.runStatus==="Running"}isStopping(){return this.status.aggregateSnapshot.runStatus==="Stopped"&&this.status.aggregateSnapshot.activeThreadCount>0}isValidating(){return this.status.aggregateSnapshot.runStatus==="Validating"}isInvalid(){return this.status.aggregateSnapshot.runStatus==="Invalid"}isDisabled(){return this.status.aggregateSnapshot.runStatus==="Disabled"}isRunnable(){return!(this.status.aggregateSnapshot.runStatus==="Running"||this.status.aggregateSnapshot.activeThreadCount>0)&&this.status.aggregateSnapshot.runStatus==="Stopped"}isDisableable(){return!(this.status.aggregateSnapshot.runStatus==="Running"||this.status.aggregateSnapshot.activeThreadCount>0)&&(this.status.aggregateSnapshot.runStatus==="Stopped"||this.status.aggregateSnapshot.runStatus==="Invalid")}isEnableable(){return!(this.status.aggregateSnapshot.runStatus==="Running"||this.status.aggregateSnapshot.activeThreadCount>0)&&this.status.aggregateSnapshot.runStatus==="Disabled"}canOperate(){return this.request.entity.permissions.canWrite||this.request.entity.operatePermissions?.canWrite}stop(){this.stopComponentRequest.next({id:this.request.entity.id,uri:this.request.entity.uri,type:_.Processor,revision:this.client.getRevision(j(V({},this.request.entity),{revision:this.revision})),errorStrategy:"snackbar"})}start(){this.startComponentRequest.next({id:this.request.entity.id,uri:this.request.entity.uri,type:_.Processor,revision:this.client.getRevision(j(V({},this.request.entity),{revision:this.revision})),errorStrategy:"snackbar"})}disable(){this.disableComponentRequest.next({id:this.request.entity.id,uri:this.request.entity.uri,type:_.Processor,revision:this.client.getRevision(j(V({},this.request.entity),{revision:this.revision})),errorStrategy:"snackbar"})}enable(){this.enableComponentRequest.next({id:this.request.entity.id,uri:this.request.entity.uri,type:_.Processor,revision:this.client.getRevision(j(V({},this.request.entity),{revision:this.revision})),errorStrategy:"snackbar"})}getModifiedProperties(){let e=this.editProcessorForm.get("properties");if(e&&e.dirty){let i=e.value,n={};return i.forEach(d=>n[d.property]=d.value),n}return{}}isDirty(){return this.editProcessorForm.dirty}verifyClicked(e){this.verify.next({entity:e,properties:this.getModifiedProperties()})}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(je),D(wt),D(dt),D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["edit-processor"]],inputs:{processorUpdates:"processorUpdates",createNewProperty:"createNewProperty",createNewService:"createNewService",parameterContext:"parameterContext",goToParameter:"goToParameter",convertToParameter:"convertToParameter",goToService:"goToService",saving$:"saving$",propertyVerificationResults$:"propertyVerificationResults$",propertyVerificationStatus$:"propertyVerificationStatus$"},outputs:{verify:"verify",editProcessor:"editProcessor",stopComponentRequest:"stopComponentRequest",startComponentRequest:"startComponentRequest",disableComponentRequest:"disableComponentRequest",enableComponentRequest:"enableComponentRequest"},features:[Fe],decls:115,vars:45,consts:[["operateMenu","matMenu"],["id","edit-processor-header","mat-dialog-title",""],[1,"flex","justify-between","items-center"],[1,"flex","items-baseline"],[1,"mr-2"],[1,"ml-2","text-base"],[1,"flex"],[1,"w-[48px]"],[1,"processor-edit-form",3,"formGroup"],[3,"context"],[3,"selectedIndexChange","selectedIndex"],["label","Settings"],[1,"dialog-tab-content","flex","gap-x-4"],[1,"w-full"],["matInput","","formControlName","name","type","text",3,"readonly"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","font-medium",3,"copy"],[1,"tertiary-color","font-medium"],[1,"flex","flex-col","mb-6"],[1,"flex","gap-x-4"],["nifiTooltip","","tooltipInputData","The amount of time used when this processor penalizes a FlowFile.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","penaltyDuration","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","When a processor yields, it will not be scheduled again until this amount of time elapses.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","yieldDuration","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","The level at which this processor will generate bulletins.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","bulletinLevel"],[3,"value","disabled"],["label","Scheduling"],["nifiTooltip","","tooltipInputData","The strategy used to schedule this processor.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","schedulingStrategy",3,"selectionChange"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[1,"w-1/2"],["nifiTooltip","","tooltipInputData","The number of tasks that should be concurrently scheduled for this processor. Must be an integer greater than 0.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","concurrentTasks","name","concurrentTasks","type","number","min","1",3,"change","readonly"],["nifiTooltip","","tooltipInputData","The minimum number of seconds that should elapse between task executions.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","schedulingPeriod","type","text",3,"change","readonly"],["nifiTooltip","","tooltipInputData","The node(s) that this processor will be scheduled to run on.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","executionNode"],["nifiTooltip","",3,"disabled","value","tooltipComponentType","tooltipInputData","delayClose"],["label","Properties"],[1,"dialog-tab-content","flex","gap-x-3"],["formControlName","properties",1,"w-2/3",3,"createNewProperty","createNewService","goToParameter","parameterContext","convertToParameter","goToService","propertyHistory","supportsSensitiveDynamicProperties"],[1,"w-1/3",3,"verify","disabled","isVerifying","results"],["label","Relationships"],[1,"dialog-tab-content"],["formControlName","relationshipConfiguration"],[1,"unset","neutral-color"],["label","Comments"],["matInput","","formControlName","comments","type","text","rows","10",3,"readonly"],["align","start"],["nifiTooltip","",1,"absolute","top-0","right-0","text-3xl","h-14","w-14","bulletins","has-bulletins","flex","justify-center","items-center",3,"delayClose","tooltipComponentType","tooltipInputData","position","ngClass"],[1,"fa","fa-sticky-note-o"],["nifiTooltip","","tooltipInputData","When scheduled to run, the processor will continue running for up to this duration. A run duration of 0ms will execute once when scheduled.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["formControlName","runDuration",3,"change"],[1,"w-80"],[1,"fa","fa-warning","has-errors","caution-color"],[1,"flex","w-full","justify-between","items-center"],["type","button","mat-stroked-button","",3,"disabled","matMenuTriggerFor"],["xPosition","before"],["mat-menu-item",""],["mat-menu-item","",3,"disabled"],["mat-flat-button","","mat-dialog-close",""],[1,"flex","items-center"],[1,"mr-2","success-color-default","fa","fa-play"],[1,"ml-2","-mt-1","fa","fa-sort-desc"],[1,"mr-2","error-color-variant","fa","fa-stop"],[1,"mr-2","icon","icon-enable-false","primary-color"],[1,"mr-2","fa","fa-circle-o-notch","fa-spin","primary-color"],[1,"mr-2","fa","fa-warning","caution-color"],["mat-menu-item","",3,"click"],[1,"mr-2","fa","fa-stop","primary-color"],["mat-menu-item","",3,"click","disabled"],[1,"mr-2","fa","fa-play","primary-color"],[1,"mr-2","fa","fa-flash","primary-color"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",1)(1,"div",2)(2,"div",3)(3,"div",4),l(4),r(),l(5," | "),s(6,"div",5),l(7),r()(),s(8,"div",6),x(9,Hp,3,5,"div",7),r()()(),s(10,"form",8),v(11,"context-error-banner",9),s(12,"mat-tab-group",10),rt("selectedIndexChange",function(b){return nt(n.selectedIndex,b)||(n.selectedIndex=b),b}),M("selectedIndexChange",function(b){return n.tabChanged(b)}),s(13,"mat-tab",11)(14,"mat-dialog-content")(15,"div",12)(16,"div",13)(17,"div")(18,"mat-form-field")(19,"mat-label"),l(20,"Name"),r(),v(21,"input",14),r()(),s(22,"div",15)(23,"div"),l(24,"Id"),r(),s(25,"div",16),l(26),r()(),s(27,"div",15)(28,"div"),l(29,"Type"),r(),s(30,"div",17),l(31),r()(),s(32,"div",18)(33,"div"),l(34,"Bundle"),r(),s(35,"div",17),l(36),r()(),s(37,"div",19)(38,"div",13)(39,"mat-form-field")(40,"mat-label"),l(41," Penalty Duration "),v(42,"i",20),r(),v(43,"input",21),r()(),s(44,"div",13)(45,"mat-form-field")(46,"mat-label"),l(47," Yield Duration "),v(48,"i",22),r(),v(49,"input",23),r()()(),s(50,"div")(51,"mat-form-field")(52,"mat-label"),l(53," Bulletin Level "),v(54,"i",24),r(),s(55,"mat-select",25),ae(56,Wp,2,3,"mat-option",26,ve),r()()()(),v(58,"div",13),r()()(),s(59,"mat-tab",27)(60,"mat-dialog-content")(61,"div",12)(62,"div",13)(63,"div")(64,"mat-form-field")(65,"mat-label"),l(66," Scheduling Strategy "),v(67,"i",28),r(),s(68,"mat-select",29),M("selectionChange",function(b){return n.schedulingStrategyChanged(b.value)}),ae(69,Qp,2,6,"mat-option",30,ve),r()()(),s(71,"div",19)(72,"div",31)(73,"mat-form-field")(74,"mat-label"),l(75," Concurrent Tasks "),v(76,"i",32),r(),s(77,"input",33),M("change",function(){return n.concurrentTasksChanged()}),r()()(),s(78,"div",31)(79,"mat-form-field")(80,"mat-label"),l(81," Run Schedule "),v(82,"i",34),r(),s(83,"input",35),M("change",function(){return n.schedulingPeriodChanged()}),r()()()(),s(84,"div")(85,"mat-form-field")(86,"mat-label"),l(87," Execution "),v(88,"i",36),r(),s(89,"mat-select",37),ae(90,Kp,2,6,"mat-option",38,ve),r()()()(),s(92,"div",13),x(93,Xp,6,2,"div",15),r()()()(),s(94,"mat-tab",39)(95,"mat-dialog-content")(96,"div",40),v(97,"property-table",41),s(98,"property-verification",42),X(99,"async"),X(100,"async"),M("verify",function(){return n.verifyClicked(n.request.entity)}),r()()()(),s(101,"mat-tab",43)(102,"mat-dialog-content")(103,"div",44),x(104,Jp,1,0,"relationship-settings",45)(105,Zp,2,0,"div",46),r()()(),s(106,"mat-tab",47)(107,"mat-dialog-content")(108,"div",44)(109,"mat-form-field")(110,"mat-label"),l(111,"Comments"),r(),v(112,"textarea",48),r()()()()(),x(113,um,18,6,"mat-dialog-actions",49),X(114,"async"),r()),i&2){let d;a(4),R(" ",n.readonly?"Processor Details":"Edit Processor"," "),a(3),R(" ",n.formatType()," "),a(2),T(n.hasBulletins()?9:-1),a(),p("formGroup",n.editProcessorForm),a(),p("context",n.ErrorContextKey.PROCESSOR),a(),it("selectedIndex",n.selectedIndex),a(9),p("readonly",n.readonly),a(4),p("copy",n.request.entity.id),a(),R(" ",n.request.entity.id," "),a(5),R(" ",n.formatType()," "),a(5),R(" ",n.formatBundle()," "),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(2),le(n.bulletinLevels),a(11),p("tooltipComponentType",n.TextTip),a(2),le(n.schedulingStrategies),a(7),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(2),le(n.executionStrategies),a(3),T(n.supportsBatching()?93:-1),a(4),p("createNewProperty",n.createNewProperty)("createNewService",n.createNewService)("goToParameter",n.goToParameter)("parameterContext",n.parameterContext)("convertToParameter",n.convertToParameter)("goToService",n.goToService)("propertyHistory",n.request.history)("supportsSensitiveDynamicProperties",n.request.entity.component.supportsSensitiveDynamicProperties),a(),p("disabled",n.readonly)("isVerifying",Z(99,37,n.propertyVerificationStatus$)==="loading")("results",Z(100,39,n.propertyVerificationResults$)),a(6),T(n.request.entity.component.relationships.length>0?104:105),a(8),p("readonly",n.readonly),a(),T((d=Be(43,zp,Z(114,41,n.saving$)))?113:-1,d)}},dependencies:[xe,Ie,Ee,Jt,ne,De,Zt,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,Ze,Ne,Ce,yo,Co,vo,qe,Se,$e,be,Ks,Mi,Ii,Ri,ke,fa,Ue,ye,Bc,Lc,ha,tt,Eo,Ti],styles:["h2.mdc-dialog__title[_ngcontent-%COMP%]:before{height:0}.processor-edit-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.processor-edit-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.processor-edit-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.processor-edit-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.processor-edit-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.processor-edit-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.processor-edit-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.processor-edit-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.processor-edit-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var fm=t=>({value:t});function hm(t,m){t&1&&(s(0,"span"),l(1,"Add"),r())}function gm(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",25)(1,"button",26),l(2,"Cancel"),r(),s(3,"button",27),M("click",function(){N(e);let n=u();return $(n.createRemoteProcessGroup())}),x(4,hm,2,0,"span",28),r()()}if(t&2){let e=m,i=u();a(3),p("disabled",!i.createRemoteProcessGroupForm.dirty||i.createRemoteProcessGroupForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}var jc=(()=>{class t extends Je{constructor(e,i,n){super(),this.dialogRequest=e,this.formBuilder=i,this.store=n,this.saving$=this.store.select(We),this.TextTip=_e,this.ErrorContextKey=ee,this.createRemoteProcessGroupForm=this.formBuilder.group({urls:new I("",q.required),transportProtocol:new I("RAW",q.required),localNetworkInterface:new I(""),httpProxyServerHostname:new I(""),httpProxyServerPort:new I(""),httpProxyUser:new I(""),httpProxyPassword:new I(""),communicationsTimeout:new I("30 sec",q.required),yieldDuration:new I("10 sec",q.required)})}createRemoteProcessGroup(){this.store.dispatch(Zi({request:j(V({},this.dialogRequest),{targetUris:this.createRemoteProcessGroupForm.get("urls")?.value,transportProtocol:this.createRemoteProcessGroupForm.get("transportProtocol")?.value,localNetworkInterface:this.createRemoteProcessGroupForm.get("localNetworkInterface")?.value,proxyHost:this.createRemoteProcessGroupForm.get("httpProxyServerHostname")?.value,proxyPort:this.createRemoteProcessGroupForm.get("httpProxyServerPort")?.value,proxyUser:this.createRemoteProcessGroupForm.get("httpProxyUser")?.value,proxyPassword:this.createRemoteProcessGroupForm.get("httpProxyPassword")?.value,communicationsTimeout:this.createRemoteProcessGroupForm.get("communicationsTimeout")?.value,yieldDuration:this.createRemoteProcessGroupForm.get("yieldDuration")?.value})}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["ng-component"]],features:[Fe],decls:70,vars:16,consts:[["mat-dialog-title",""],[1,"create-remote-process-group-form",3,"formGroup"],[3,"context"],[1,"flex","gap-x-4"],[1,"w-full"],["nifiTooltip","","tooltipInputData","Specify the remote target NiFi URLs. Multiple URLs can be specified in comma-separated format. Different protocols cannot be mixed. If remote NiFi is a cluster, two or more node URLs are recommended for better connection establishment availability.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","urls","type","text","placeholder","https://remotehost:8443/nifi"],["nifiTooltip","","tooltipInputData","Specify the transport protocol to use for this Remote Process Group communication.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","transportProtocol"],["value","RAW"],["value","HTTP"],["nifiTooltip","","tooltipInputData","The local network interface to send/receive data. If not specified, any local address is used. If clustered, all nodes must have an interface with this identifier.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","localNetworkInterface","type","text"],["nifiTooltip","","tooltipInputData","Specify the proxy server's hostname to use. If not specified, HTTP traffics are sent directly to the target NiFi instance.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyServerHostname","type","text"],["nifiTooltip","","tooltipInputData","Specify the proxy server's port number, optional. If not specified, default port 80 will be used.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyServerPort","type","text"],["nifiTooltip","","tooltipInputData","Specify an user name to connect to the proxy server, optional.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyUser","type","text"],["nifiTooltip","","tooltipInputData","Specify an user password to connect to the proxy server, optional.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyPassword","type","password"],["nifiTooltip","","tooltipInputData","When communication with this remote process group takes longer than this amount of time, it will timeout.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","communicationsTimeout","type","text"],["nifiTooltip","","tooltipInputData","When communication with this remote process group fails, it will not be scheduled again until this amount of time elapses.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","yieldDuration","type","text"],["align","end"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1,"Create Remote Process Group"),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-dialog-content")(5,"div",3)(6,"div",4)(7,"mat-form-field")(8,"mat-label"),l(9," URLs "),v(10,"i",5),r(),v(11,"input",6),r()()(),s(12,"div",3)(13,"div",4)(14,"mat-form-field")(15,"mat-label"),l(16," Transport Protocol "),v(17,"i",7),r(),s(18,"mat-select",8)(19,"mat-option",9),l(20," RAW "),r(),s(21,"mat-option",10),l(22," HTTP "),r()()()(),s(23,"div",4)(24,"mat-form-field")(25,"mat-label"),l(26," Local Network Interface "),v(27,"i",11),r(),v(28,"input",12),r()()(),s(29,"div",3)(30,"div",4)(31,"mat-form-field")(32,"mat-label"),l(33," HTTP Proxy Server Hostname "),v(34,"i",13),r(),v(35,"input",14),r()(),s(36,"div",4)(37,"mat-form-field")(38,"mat-label"),l(39," HTTP Proxy Server Port "),v(40,"i",15),r(),v(41,"input",16),r()()(),s(42,"div",3)(43,"div",4)(44,"mat-form-field")(45,"mat-label"),l(46," HTTP Proxy User "),v(47,"i",17),r(),v(48,"input",18),r()(),s(49,"div",4)(50,"mat-form-field")(51,"mat-label"),l(52," HTTP Proxy Password "),v(53,"i",19),r(),v(54,"input",20),r()()(),s(55,"div",3)(56,"div",4)(57,"mat-form-field")(58,"mat-label"),l(59," Communications Timeout "),v(60,"i",21),r(),v(61,"input",22),r()(),s(62,"div",4)(63,"mat-form-field")(64,"mat-label"),l(65," Yield Duration "),v(66,"i",23),r(),v(67,"input",24),r()()()(),x(68,gm,5,2,"mat-dialog-actions",25),X(69,"async"),r()),i&2){let d;a(2),p("formGroup",n.createRemoteProcessGroupForm),a(),p("context",n.ErrorContextKey.REMOTE_PROCESS_GROUP),a(7),p("tooltipComponentType",n.TextTip),a(7),p("tooltipComponentType",n.TextTip),a(10),p("tooltipComponentType",n.TextTip),a(7),p("tooltipComponentType",n.TextTip),a(6),p("tooltipComponentType",n.TextTip),a(7),p("tooltipComponentType",n.TextTip),a(6),p("tooltipComponentType",n.TextTip),a(7),p("tooltipComponentType",n.TextTip),a(6),p("tooltipComponentType",n.TextTip),a(2),T((d=Be(14,fm,Z(69,12,n.saving$)))?68:-1,d)}},dependencies:[ke,Ne,Ce,ge,de,ue,he,fe,et,pe,ce,Le,Ge,Ue,xe,Ie,Ee,ne,De,Me,Re,qe,Se,$e,be,to,ye,tt],styles:[".create-remote-process-group-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.create-remote-process-group-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.create-remote-process-group-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.create-remote-process-group-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.create-remote-process-group-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.create-remote-process-group-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.create-remote-process-group-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.create-remote-process-group-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.create-remote-process-group-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var Cm=["flowUploadControl"],vm=t=>({value:t}),ym=(t,m)=>m.value;function _m(t,m){if(t&1&&(s(0,"mat-option",11),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",e.disabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function xm(t,m){if(t&1&&(s(0,"mat-option",12),l(1),r()),t&2){let e=u().$implicit;p("value",e.value)("disabled",e.disabled),a(),Q(e.text)}}function Sm(t,m){if(t&1&&x(0,_m,2,6,"mat-option",11)(1,xm,2,3,"mat-option",12),t&2){let e=m.$implicit;T(e.description?0:1)}}function bm(t,m){if(t&1){let e=W();s(0,"button",14),M("click",function(){N(e);let n=u(3);return $(n.openNewParameterContextDialog())}),v(1,"i",15),r()}}function Pm(t,m){t&1&&x(0,bm,2,0,"button",13),t&2&&T(m.parameterContextPermissions.canWrite?0:-1)}function wm(t,m){if(t&1&&(s(0,"div",7)(1,"mat-form-field")(2,"mat-label"),l(3,"Parameter Context"),r(),s(4,"mat-select",9)(5,"mat-option",10),l(6,"No parameter context "),r(),ae(7,Sm,2,1,null,null,ym),X(9,"sortObjectByProperty"),r()(),x(10,Pm,1,1),X(11,"async"),r()),t&2){let e,i=u();a(5),p("value",null)("tooltipComponentType",i.TextTip)("tooltipInputData","No parameter context")("delayClose",!1),a(2),le(wi(9,5,i.parameterContextsOptions,"text")),a(3),T((e=Z(11,8,i.currentUser$))?10:-1,e)}}function Tm(t,m){if(t&1){let e=W();s(0,"div")(1,"div",16)(2,"div",17)(3,"div"),l(4,"Parameter Context"),r(),s(5,"div",18),l(6," Parameters will be imported from the uploaded Flow Definition. "),r()(),s(7,"div",17)(8,"div"),l(9,"File to upload"),r(),s(10,"div",19)(11,"div",20),l(12),r(),s(13,"div",21),M("click",function(){N(e);let n=u();return $(n.removeAttachedFlow())}),l(14,"X"),r()()()()()}if(t&2){let e=u();a(12),Q(e.flowNameAttached)}}function Fm(t,m){t&1&&(s(0,"span"),l(1,"Add"),r())}function Em(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",8)(1,"button",22),l(2,"Cancel"),r(),s(3,"button",23),M("click",function(){N(e);let n=u();return $(n.createProcessGroup())}),x(4,Fm,2,0,"span",24),r()()}if(t&2){let e=m,i=u();a(3),p("disabled",!i.createProcessGroupForm.dirty||i.createProcessGroupForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}var Uc=(()=>{class t extends Je{set parameterContexts(e){this.parameterContextsOptions=[],this._parameterContexts=e;let i=!1;e.length===0?this.parameterContextsOptions=[]:e.forEach(n=>{n.permissions.canRead&&n.component?(this.parameterContextsOptions.push({text:n.component.name,value:n.id,description:n.component.description}),this.dialogRequest.currentParameterContextId===n.id&&(i=!0)):this.parameterContextsOptions.push({text:n.id,value:n.id,disabled:!0})}),i&&this.createProcessGroupForm.get("newProcessGroupParameterContext")?.setValue(this.dialogRequest.currentParameterContextId)}get parameterContexts(){return this._parameterContexts}constructor(e,i,n,d){super(),this.dialogRequest=e,this.formBuilder=i,this.store=n,this.nifiCommon=d,this.saving$=this.store.select(We),this.TextTip=_e,this._parameterContexts=[],this.parameterContextsOptions=[],this.flowNameAttached=null,this.flowDefinition=null,this.currentUser$=this.store.select(To),this.ErrorContextKey=ee,this.createProcessGroupForm=this.formBuilder.group({newProcessGroupName:new I("",q.required),newProcessGroupParameterContext:new I(null)})}attachFlow(e){let d=e.target.files.item(0);d&&(this.createProcessGroupForm.get("newProcessGroupName")?.setValue(this.nifiCommon.substringBeforeLast(d.name,".")),this.createProcessGroupForm.get("newProcessGroupName")?.markAsDirty(),this.createProcessGroupForm.get("newProcessGroupParameterContext")?.setValue(null),this.flowNameAttached=d.name,this.flowDefinition=d)}removeAttachedFlow(){this.createProcessGroupForm.get("newProcessGroupName")?.setValue(""),this.flowUploadControl.nativeElement.value="",this.flowNameAttached=null,this.flowDefinition=null}createProcessGroup(){this.flowDefinition?this.store.dispatch(nn({request:j(V({},this.dialogRequest.request),{name:this.createProcessGroupForm.get("newProcessGroupName")?.value,flowDefinition:this.flowDefinition})})):this.store.dispatch(on({request:j(V({},this.dialogRequest.request),{name:this.createProcessGroupForm.get("newProcessGroupName")?.value,parameterContextId:this.createProcessGroupForm.get("newProcessGroupParameterContext")?.value})}))}openNewParameterContextDialog(){this.store.dispatch(ti({request:{parameterContexts:this.dialogRequest.parameterContexts}}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["create-process-group"]],viewQuery:function(i,n){if(i&1&&Vs(Cm,5),i&2){let d;Bs(d=Ls())&&(n.flowUploadControl=d.first)}},inputs:{parameterContexts:"parameterContexts"},features:[Fe],decls:16,vars:9,consts:[["flowUploadControl",""],["mat-dialog-title",""],[1,"create-process-group-form",3,"formGroup"],[3,"context"],["matInput","","formControlName","newProcessGroupName","type","text"],["matSuffix","","type","button","title","Browse",1,"upload-flow-definition","tertiary-color","icon","icon-template-import","mr-2.5","pointer",3,"click"],["type","file",1,"hidden",3,"change"],[1,"flex","flew-row","w-full","justify-start","items-start"],["align","end"],["formControlName","newProcessGroupParameterContext"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[3,"value","disabled"],["mat-icon-button","","type","button","title","Create parameter context",1,"primary-icon-button","mt-1","ml-1"],["mat-icon-button","","type","button","title","Create parameter context",1,"primary-icon-button","mt-1","ml-1",3,"click"],[1,"fa","fa-plus"],[1,"flex","flex-col","gap-y-3","mb-3"],[1,"flex","flex-col"],[1,"unset","neutral-color"],[1,"flex","justify-between","items-center"],[1,"tertiary-color","font-medium"],[3,"click"],["mat-button","","mat-dialog-close",""],["type","submit","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1){let d=W();s(0,"h2",1),l(1,"Create Process Group"),r(),s(2,"form",2),v(3,"context-error-banner",3),s(4,"mat-dialog-content")(5,"mat-form-field")(6,"mat-label"),l(7,"Name"),r(),v(8,"input",4),s(9,"button",5),M("click",function(){N(d);let w=pt(11);return $(w.click())}),s(10,"input",6,0),M("change",function(w){return N(d),$(n.attachFlow(w))}),r()()(),x(12,wm,12,10,"div",7)(13,Tm,15,1,"div"),r(),x(14,Em,5,2,"mat-dialog-actions",8),X(15,"async"),r()}if(i&2){let d;a(2),p("formGroup",n.createProcessGroupForm),a(),p("context",n.ErrorContextKey.PROCESS_GROUP),a(9),T(n.flowDefinition?-1:12),a(),T(n.flowDefinition?13:-1),a(),T((d=Be(7,vm,Z(15,5,n.saving$)))?14:-1,d)}},dependencies:[ke,Ne,Ce,Bo,ge,de,ue,he,fe,et,pe,ce,ta,Le,Ge,Ue,xe,Ie,Ee,ne,De,Me,Re,qe,Se,$e,be,ye,to,tt,Gi],styles:[".create-process-group-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var Dm=(t,m)=>({$implicit:t,i:m,canClose:!1}),Im=(t,m)=>({$implicit:t,i:m,canClose:!0});function Mm(t,m){t&1&&ir(0)}function Rm(t,m){if(t&1&&(s(0,"div",8),x(1,Mm,1,0,"ng-container",9),r()),t&2){let e=m.$implicit,i=m.$index;u(2);let n=pt(10);a(),p("ngTemplateOutlet",n)("ngTemplateOutletContext",nr(2,Dm,e,i))}}function Am(t,m){if(t&1){let e=W();s(0,"div",2)(1,"div"),l(2," Available Prioritizers "),v(3,"i",6),r(),s(4,"div",7),M("cdkDropListDropped",function(n){N(e);let d=u();return $(d.dropAvailable(n))}),ae(5,Rm,2,5,"div",8,ve),r()()}if(t&2){let e=u();a(3),p("tooltipComponentType",e.TextTip),a(),p("cdkDropListData",e.availablePrioritizers),a(),le(e.availablePrioritizers)}}function Gm(t,m){t&1&&l(0," Selected Prioritizers ")}function Om(t,m){t&1&&l(0," Prioritizers ")}function km(t,m){t&1&&ir(0)}function Nm(t,m){if(t&1&&(s(0,"div",8),x(1,km,1,0,"ng-container",9),r()),t&2){let e=m.$implicit,i=m.$index,n=u(2),d=pt(10);Ht("border-dashed",n.isDisabled),a(),p("ngTemplateOutlet",d)("ngTemplateOutletContext",nr(4,Im,e,i))}}function $m(t,m){if(t&1){let e=W();s(0,"div",10),M("cdkDropListDropped",function(n){N(e);let d=u();return $(d.dropSelected(n))}),ae(1,Nm,2,7,"div",11,ve),r()}if(t&2){let e=u();Ht("border-dashed",!e.isDisabled),p("cdkDropListDisabled",e.isDisabled)("cdkDropListData",e.selectedPrioritizers),a(),le(e.selectedPrioritizers)}}function Vm(t,m){t&1&&(s(0,"div",5),l(1,"No value set"),r())}function Bm(t,m){if(t&1&&v(0,"i",16),t&2){let e=u(2).$implicit,i=u();p("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)}}function Lm(t,m){if(t&1){let e=W();s(0,"button",18),M("click",function(){N(e);let n=u(2),d=n.$implicit,b=n.i,w=u();return $(w.removeSelected(d,b))}),v(1,"i",19),r()}}function qm(t,m){if(t&1&&(s(0,"div",13),v(1,"span",14),s(2,"div",15),l(3),r(),x(4,Bm,1,2,"i",16),r(),x(5,Lm,2,0,"button",17)),t&2){let e=u(),i=e.$implicit,n=e.canClose,d=u();a(2),p("title",d.getPrioritizerLabel(i)),a(),Q(d.getPrioritizerLabel(i)),a(),T(d.hasDescription(i)?4:-1),a(),T(n?5:-1)}}function jm(t,m){if(t&1&&v(0,"i",16),t&2){let e=u(2).$implicit,i=u();p("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)}}function Um(t,m){if(t&1&&(s(0,"div",12)(1,"div"),l(2),r(),x(3,jm,1,2,"i",16),r()),t&2){let e=u().$implicit,i=u();a(2),Q(i.getPrioritizerLabel(e)),a(),T(i.hasDescription(e)?3:-1)}}function zm(t,m){if(t&1&&x(0,qm,6,4)(1,Um,4,2,"div",12),t&2){let e=u();T(e.isDisabled?1:0)}}var qn=(()=>{class t{set allPrioritizers(e){this._allPrioritizers=[...e],this.processPrioritizers()}constructor(e){this.nifiCommon=e,this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1,this._allPrioritizers=[],this.availablePrioritizers=[],this.selectedPrioritizers=[]}processPrioritizers(){if(this._allPrioritizers&&this.value){let e=[];this.value.forEach(n=>{let d=this._allPrioritizers.find(b=>b.type===n);d&&e.push(d)});let i=this._allPrioritizers.filter(n=>!e.some(d=>n.type===d.type));this.selectedPrioritizers=[...e],this.availablePrioritizers=[...i]}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.value=[...e],this.processPrioritizers()}getPrioritizerLabel(e){return this.nifiCommon.getComponentTypeLabel(e.type)}hasDescription(e){return!this.nifiCommon.isBlank(e.description)}removeSelected(e,i){Ai(this.selectedPrioritizers,this.availablePrioritizers,i,this.availablePrioritizers.length),this.handleChanged()}dropAvailable(e){e.previousContainer!==e.container&&(Ai(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.handleChanged())}dropSelected(e){e.previousContainer===e.container?e.previousIndex!==e.currentIndex&&(Ys(e.container.data,e.previousIndex,e.currentIndex),this.handleChanged()):(Ai(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.handleChanged())}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeSelectedPrioritizers())}serializeSelectedPrioritizers(){return this.selectedPrioritizers.map(e=>e.type)}static{this.\u0275fac=function(i){return new(i||t)(D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["prioritizers"]],inputs:{allPrioritizers:"allPrioritizers"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:11,vars:4,consts:[["prioritizerItem",""],["cdkDropListGroup","",1,"prioritizers","flex","flex-col","gap-y-4"],[1,"flex","flex-col"],["nifiTooltip","","tooltipInputData","Prioritizers that have been selected to reprioritize FlowFiles in this processors work queue. Multiple selected prioritizers will be considered in order from top to bottom.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["cdkDropList","",1,"cdk-list","cdk-drag-selected","border",3,"border-dashed","cdkDropListDisabled","cdkDropListData"],[1,"unset"],["nifiTooltip","","tooltipInputData","Prioritizers that are available to reprioritize FlowFiles in this processors work queue.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["cdkDropList","","cdkDropListSortingDisabled","",1,"cdk-list","border",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","cdkDragPreviewContainer","parent",1,"prioritizer-draggable-item","border","m-1","font-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDropList","",1,"cdk-list","cdk-drag-selected","border",3,"cdkDropListDropped","cdkDropListDisabled","cdkDropListData"],["cdkDrag","","cdkDragPreviewContainer","parent",1,"prioritizer-draggable-item","border","m-1","font-bold",3,"border-dashed"],[1,"flex","items-center","tertiary-color","font-medium"],[1,"flex","items-center"],[1,"grip","pr-5"],[1,"prioritizer-name",3,"title"],["nifiTooltip","",1,"pl-1","fa","fa-info-circle","neutral-color",3,"tooltipComponentType","tooltipInputData"],["type","button",1,"pr-1"],["type","button",1,"pr-1",3,"click"],[1,"fa","fa-times","neutral-contrast"]],template:function(i,n){i&1&&(s(0,"div",1),x(1,Am,7,2,"div",2),s(2,"div",2)(3,"div"),x(4,Gm,1,0)(5,Om,1,0),v(6,"i",3),r(),x(7,$m,3,4,"div",4)(8,Vm,2,0,"div",5),r(),x(9,zm,2,1,"ng-template",null,0,po),r()),i&2&&(a(),T(n.isDisabled?-1:1),a(3),T(n.isDisabled?5:4),a(2),p("tooltipComponentType",n.TextTip),a(),T(!n.isDisabled||n.selectedPrioritizers.length>0?7:8))},dependencies:[Ne,ge,ho,ea,Zs,Js,Xs,js,ye],styles:[".prioritizers[_ngcontent-%COMP%]   .prioritizer-draggable-item[_ngcontent-%COMP%]{box-shadow:var(--mat-sys-level2)}.prioritizers[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{height:38px;padding-left:6px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box}.prioritizers[_ngcontent-%COMP%]   .cdk-list[_ngcontent-%COMP%]   .prioritizer-name[_ngcontent-%COMP%]{max-width:180px;overflow:hidden;text-wrap:nowrap;text-overflow:ellipsis}"]})}}return t})();function Hm(t,m){if(t&1){let e=W();s(0,"div",5)(1,"div",6)(2,"mat-checkbox",7),rt("ngModelChange",function(n){N(e);let d=u().$implicit;return nt(d.selected,n)||(d.selected=n),$(n)}),M("change",function(){N(e);let n=u(2);return $(n.handleChanged())}),s(3,"span"),l(4),r()()()()}if(t&2){let e=u(),i=e.$implicit,n=e.$index,d=u();a(2),si("name","selected-",n,""),it("ngModel",i.selected),p("disabled",d.isDisabled),a(),Ht("neutral-color",!i.available)("unset",!i.available),a(),Q(i.relationshipName)}}function Wm(t,m){if(t&1&&x(0,Hm,5,9,"div",5),t&2){let e=m.$implicit,i=u();T(i.isDisabled&&e.selected||!i.isDisabled?0:-1)}}var jn=(()=>{class t{set processor(e){e&&(this.name=e.component.name,this.relationships=e.component.relationships,this.processRelationships())}constructor(e){this.nifiCommon=e,this.isDisabled=!1,this.isTouched=!1,this.onTouched=null,this.onChange=null}processRelationships(){this.relationships&&(this.nifiCommon.isEmpty(this.selectedRelationships)?(this.relationshipItems=this.relationships.map(e=>({relationshipName:e.name,selected:this.relationships.length===1,available:!0})),this.considerDefaultSelection()):(this.relationshipItems=this.relationships.map(i=>({relationshipName:i.name,selected:this.selectedRelationships.includes(i.name),available:!0})),this.selectedRelationships.filter(i=>!this.relationships.some(n=>n.name==i)).forEach(i=>{this.relationshipItems.push({relationshipName:i,selected:!0,available:!1})})))}considerDefaultSelection(){let e=this.onChange!=null&&this.onTouched!=null,i=this.relationships?.length===1&&this.nifiCommon.isEmpty(this.selectedRelationships);e&&i&&this.handleChanged()}registerOnChange(e){this.onChange=e,this.considerDefaultSelection()}registerOnTouched(e){this.onTouched=e,this.considerDefaultSelection()}setDisabledState(e){this.isDisabled=e}writeValue(e){this.selectedRelationships=[...e],this.processRelationships()}handleChanged(){this.onTouched&&this.onChange&&(this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeSelectedRelationships()))}serializeSelectedRelationships(){return this.relationshipItems.filter(e=>e.selected).map(e=>e.relationshipName)}static{this.\u0275fac=function(i){return new(i||t)(D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["source-processor"]],inputs:{processor:"processor",groupName:"groupName"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:17,vars:4,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[1,"flex","flex-col"],[1,"flex","flex-col","gap-y-3"],[1,"flex","flex-col","gap-y-1.5"],[1,"flex","items-center","gap-x-2"],[3,"ngModelChange","change","ngModel","name","disabled"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"From Processor"),r(),s(4,"div",2),l(5),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",2),l(10),r()(),s(11,"div",3)(12,"div"),l(13,"Relationships"),r(),s(14,"div",4),ae(15,Wm,1,1,null,null,ve),r()()()),i&2&&(a(4),p("title",n.name),a(),R(" ",n.name," "),a(4),p("title",n.groupName),a(),R(" ",n.groupName," "),a(5),le(n.relationshipItems))},dependencies:[Ze,Lt,mt,ne,Bt],encapsulation:2})}}return t})();var Un=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["destination-funnel"]],inputs:{groupName:"groupName"},decls:11,vars:2,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","font-medium"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"To Funnel"),r(),s(4,"div",2),l(5,"funnel"),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",3),l(10),r()()()),i&2&&(a(9),p("title",n.groupName),a(),R(" ",n.groupName," "))},encapsulation:2})}}return t})();var zn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["source-funnel"]],inputs:{groupName:"groupName"},decls:11,vars:2,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","font-medium"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"From Funnel"),r(),s(4,"div",2),l(5,"funnel"),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",3),l(10),r()()()),i&2&&(a(9),p("title",n.groupName),a(),R(" ",n.groupName," "))},encapsulation:2})}}return t})();var Hn=(()=>{class t{set processor(e){e&&(e.permissions.canRead?this.processorName=e.component.name:this.processorName=e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["destination-processor"]],inputs:{processor:"processor",groupName:"groupName"},decls:11,vars:4,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"To Processor"),r(),s(4,"div",2),l(5),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",2),l(10),r()()()),i&2&&(a(4),p("title",n.processorName),a(),R(" ",n.processorName," "),a(4),p("title",n.groupName),a(),R(" ",n.groupName," "))},encapsulation:2})}}return t})();var Wn=(()=>{class t{set outputPortName(e){this.name=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["destination-output-port"]],inputs:{outputPortName:"outputPortName",groupName:"groupName"},decls:11,vars:4,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"To Output"),r(),s(4,"div",2),l(5),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",2),l(10),r()()()),i&2&&(a(4),p("title",n.name),a(),R(" ",n.name," "),a(4),p("title",n.groupName),a(),R(" ",n.groupName," "))},encapsulation:2})}}return t})();var Qn=(()=>{class t{set inputPortName(e){this.name=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["source-input-port"]],inputs:{inputPortName:"inputPortName",groupName:"groupName"},decls:11,vars:4,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div"),l(3,"From Input"),r(),s(4,"div",2),l(5),r()(),s(6,"div",1)(7,"div"),l(8,"Within Group"),r(),s(9,"div",2),l(10),r()()()),i&2&&(a(4),p("title",n.name),a(),R(" ",n.name," "),a(4),p("title",n.groupName),a(),R(" ",n.groupName," "))},encapsulation:2})}}return t})();function Qm(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("",e.groupName," does not have any local output ports.")}}function Km(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("Not authorized for any local output ports in ",e.groupName,"")}}function Ym(t,m){if(t&1&&(s(0,"div",1)(1,"div"),l(2,"From Output"),r(),x(3,Qm,2,1,"mat-error")(4,Km,2,1,"mat-error"),r()),t&2){let e=u();a(3),T(e.noPorts?3:-1),a(),T(e.hasUnauthorizedPorts?4:-1)}}function Xm(t,m){if(t&1&&(s(0,"mat-option",4),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",i.isDisabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function Jm(t,m){if(t&1&&(s(0,"mat-option",5),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",i.isDisabled),a(),Q(e.text)}}function Zm(t,m){if(t&1&&x(0,Xm,2,6,"mat-option",4)(1,Jm,2,3,"mat-option",5),t&2){let e=m.$implicit;T(e.description?0:1)}}function ed(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"From Output"),r(),s(3,"mat-select",3),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.selectedOutputPort,n)||(d.selectedOutputPort=n),$(n)}),M("selectionChange",function(){N(e);let n=u();return $(n.handleChanged())}),ae(4,Zm,2,1,null,null,ve),r()()}if(t&2){let e=u();a(3),it("ngModel",e.selectedOutputPort),a(),le(e.outputPortItems)}}var Kn=(()=>{class t{constructor(){this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1,this.noPorts=!1,this.hasUnauthorizedPorts=!1}set processGroup(e){e&&(e.permissions.canRead?this.groupName=e.component.name:this.groupName=e.id)}set outputPorts(e){e&&(this.noPorts=e.length==0,this.hasUnauthorizedPorts=!1,this.outputPortItems=e.filter(i=>{let n=i.permissions.canRead&&i.permissions.canWrite;return n||(this.hasUnauthorizedPorts=!0),n}).filter(i=>!i.allowRemoteAccess).map(i=>({value:i.id,text:i.component.name,description:i.component.comments})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.selectedOutputPort=e}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.selectedOutputPort)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["source-process-group"]],inputs:{processGroup:"processGroup",outputPorts:"outputPorts"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:8,vars:3,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[3,"ngModelChange","selectionChange","ngModel"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[3,"value","disabled"]],template:function(i,n){i&1&&(s(0,"div",0),x(1,Ym,5,2,"div",1)(2,ed,6,1,"mat-form-field"),s(3,"div",1)(4,"div"),l(5,"Within Group"),r(),s(6,"div",2),l(7),r()()()),i&2&&(a(),T(n.noPorts||n.hasUnauthorizedPorts?1:2),a(5),p("title",n.groupName),a(),R(" ",n.groupName," "))},dependencies:[Ze,mt,ne,Bt,et,pe,ce,qt,qe,Se,$e,be,ye],encapsulation:2})}}return t})();function td(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("",e.groupName," does not have any local input ports.")}}function od(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("Not authorized for any local input ports in ",e.groupName,"")}}function id(t,m){if(t&1&&(s(0,"div",1)(1,"div"),l(2,"To Input"),r(),x(3,td,2,1,"mat-error")(4,od,2,1,"mat-error"),r()),t&2){let e=u();a(3),T(e.noPorts?3:-1),a(),T(e.hasUnauthorizedPorts?4:-1)}}function nd(t,m){if(t&1&&(s(0,"mat-option",4),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",i.isDisabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function rd(t,m){if(t&1&&(s(0,"mat-option",5),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",i.isDisabled),a(),Q(e.text)}}function sd(t,m){if(t&1&&x(0,nd,2,6,"mat-option",4)(1,rd,2,3,"mat-option",5),t&2){let e=m.$implicit;T(e.description?0:1)}}function ad(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"To Input"),r(),s(3,"mat-select",3),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.selectedInputPort,n)||(d.selectedInputPort=n),$(n)}),M("selectionChange",function(){N(e);let n=u();return $(n.handleChanged())}),ae(4,sd,2,1,null,null,ve),r()()}if(t&2){let e=u();a(3),it("ngModel",e.selectedInputPort),a(),le(e.inputPortItems)}}var Yn=(()=>{class t{constructor(){this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1,this.noPorts=!1,this.hasUnauthorizedPorts=!1}set processGroup(e){e&&(e.permissions.canRead?this.groupName=e.component.name:this.groupName=e.id)}set inputPorts(e){e&&(this.noPorts=e.length==0,this.hasUnauthorizedPorts=!1,this.inputPortItems=e.filter(i=>{let n=i.permissions.canRead&&i.permissions.canWrite;return n||(this.hasUnauthorizedPorts=!0),n}).filter(i=>!i.allowRemoteAccess).map(i=>({value:i.id,text:i.component.name,description:i.component.comments})))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.selectedInputPort=e}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.selectedInputPort)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["destination-process-group"]],inputs:{processGroup:"processGroup",inputPorts:"inputPorts"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:8,vars:3,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[3,"ngModelChange","selectionChange","ngModel"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[3,"value","disabled"]],template:function(i,n){i&1&&(s(0,"div",0),x(1,id,5,2,"div",1)(2,ad,6,1,"mat-form-field"),s(3,"div",1)(4,"div"),l(5,"Within Group"),r(),s(6,"div",2),l(7),r()()()),i&2&&(a(),T(n.noPorts||n.hasUnauthorizedPorts?1:2),a(5),p("title",n.groupName),a(),R(" ",n.groupName," "))},dependencies:[Ze,mt,ne,Bt,et,pe,ce,qt,qe,Se,$e,be,ye],encapsulation:2})}}return t})();function ld(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("",e.groupName," does not have any local output ports.")}}function cd(t,m){if(t&1&&(s(0,"div",1)(1,"div"),l(2,"From Output"),r(),x(3,ld,2,1,"mat-error"),r()),t&2){let e=u();a(3),T(e.noPorts?3:-1)}}function pd(t,m){if(t&1&&(s(0,"mat-option",4),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",e.disabled==!0||i.isDisabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function md(t,m){if(t&1&&(s(0,"mat-option",5),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",e.disabled==!0||i.isDisabled),a(),Q(e.text)}}function dd(t,m){if(t&1&&x(0,pd,2,6,"mat-option",4)(1,md,2,3,"mat-option",5),t&2){let e=m.$implicit;T(e.description?0:1)}}function ud(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"From Output"),r(),s(3,"mat-select",3),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.selectedOutputPort,n)||(d.selectedOutputPort=n),$(n)}),M("selectionChange",function(){N(e);let n=u();return $(n.handleChanged())}),ae(4,dd,2,1,null,null,ve),r()()}if(t&2){let e=u();a(3),it("ngModel",e.selectedOutputPort),a(),le(e.outputPortItems)}}var Xn=(()=>{class t{constructor(){this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1,this.noPorts=!1}set remoteProcessGroup(e){if(e){let i=e.component,n=i.contents.outputPorts;n&&(this.noPorts=n.length==0,this.outputPortItems=n.map(d=>({value:d.id,text:d.name,disabled:d.exists===!1,description:d.comments}))),this.groupName=i.name}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.selectedOutputPort=e}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.selectedOutputPort)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["source-remote-process-group"]],inputs:{remoteProcessGroup:"remoteProcessGroup"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:8,vars:3,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[3,"ngModelChange","selectionChange","ngModel"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[3,"value","disabled"]],template:function(i,n){i&1&&(s(0,"div",0),x(1,cd,4,1,"div",1)(2,ud,6,1,"mat-form-field"),s(3,"div",1)(4,"div"),l(5,"Within Group"),r(),s(6,"div",2),l(7),r()()()),i&2&&(a(),T(n.noPorts?1:2),a(5),p("title",n.groupName),a(),R(" ",n.groupName," "))},dependencies:[Ze,mt,ne,Bt,et,pe,ce,qt,qe,Se,$e,be,ye],encapsulation:2})}}return t})();function fd(t,m){if(t&1&&(s(0,"mat-error"),l(1),r()),t&2){let e=u(2);a(),R("",e.groupName," does not have any input ports.")}}function hd(t,m){if(t&1&&(s(0,"div",1)(1,"div"),l(2,"To Input"),r(),x(3,fd,2,1,"mat-error"),r()),t&2){let e=u();a(3),T(e.noPorts?3:-1)}}function gd(t,m){if(t&1&&(s(0,"mat-option",4),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",e.disabled==!0||i.isDisabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function Cd(t,m){if(t&1&&(s(0,"mat-option",5),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("disabled",e.disabled==!0||i.isDisabled),a(),Q(e.text)}}function vd(t,m){if(t&1&&x(0,gd,2,6,"mat-option",4)(1,Cd,2,3,"mat-option",5),t&2){let e=m.$implicit;T(e.description?0:1)}}function yd(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"To Input"),r(),s(3,"mat-select",3),rt("ngModelChange",function(n){N(e);let d=u();return nt(d.selectedInputPort,n)||(d.selectedInputPort=n),$(n)}),M("selectionChange",function(){N(e);let n=u();return $(n.handleChanged())}),ae(4,vd,2,1,null,null,ve),r()()}if(t&2){let e=u();a(3),it("ngModel",e.selectedInputPort),a(),le(e.inputPortItems)}}var Jn=(()=>{class t{constructor(){this.TextTip=_e,this.isDisabled=!1,this.isTouched=!1,this.noPorts=!1}set remoteProcessGroup(e){if(e){let i=e.component,n=i.contents.inputPorts;n&&(this.noPorts=n.length==0,this.inputPortItems=n.map(d=>({value:d.id,text:d.name,description:d.comments,disabled:d.exists===!1}))),this.groupName=i.name}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.selectedInputPort=e}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.selectedInputPort)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["destination-remote-process-group"]],inputs:{remoteProcessGroup:"remoteProcessGroup"},features:[Ct([{provide:yt,useExisting:gt(()=>t),multi:!0}])],decls:8,vars:3,consts:[[1,"flex","flex-col","gap-y-4"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","overflow-ellipsis","overflow-hidden","whitespace-nowrap","font-medium",3,"title"],[3,"ngModelChange","selectionChange","ngModel"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[3,"value","disabled"]],template:function(i,n){i&1&&(s(0,"div",0),x(1,hd,4,1,"div",1)(2,yd,6,1,"mat-form-field"),s(3,"div",1)(4,"div"),l(5,"Within Group"),r(),s(6,"div",2),l(7),r()()()),i&2&&(a(),T(n.noPorts?1:2),a(5),p("title",n.groupName),a(),R(" ",n.groupName," "))},dependencies:[Ze,mt,ne,Bt,et,pe,ce,qt,qe,Se,$e,be,ye],encapsulation:2})}}return t})();var _d=t=>({value:t});function xd(t,m){if(t&1&&v(0,"source-processor",6),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("processor",i.source.entity)}}function Sd(t,m){if(t&1&&(v(0,"source-process-group",7),X(1,"async")),t&2){let e=u(2);p("outputPorts",Z(1,2,e.childOutputPorts$))("processGroup",e.source.entity)}}function bd(t,m){if(t&1&&v(0,"source-remote-process-group",8),t&2){let e=u(2);p("remoteProcessGroup",e.source.entity)}}function Pd(t,m){if(t&1&&v(0,"source-input-port",9),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("inputPortName",i.source.entity.component.name)}}function wd(t,m){if(t&1&&v(0,"source-funnel",10),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))}}function Td(t,m){if(t&1&&v(0,"destination-processor",12),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("processor",i.destination.entity)}}function Fd(t,m){if(t&1&&(v(0,"destination-process-group",13),X(1,"async")),t&2){let e=u(2);p("inputPorts",Z(1,2,e.childInputPorts$))("processGroup",e.destination.entity)}}function Ed(t,m){if(t&1&&v(0,"destination-remote-process-group",14),t&2){let e=u(2);p("remoteProcessGroup",e.destination.entity)}}function Dd(t,m){if(t&1&&v(0,"destination-output-port",15),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("outputPortName",i.destination.entity.component.name)}}function Id(t,m){if(t&1&&v(0,"destination-funnel",10),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))}}function Md(t,m){if(t&1&&(s(0,"mat-option",31),l(1),r()),t&2){let e=m.$implicit,i=u(2);p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Rd(t,m){if(t&1&&(s(0,"div",18)(1,"mat-form-field")(2,"mat-label"),l(3," Attribute Name "),v(4,"i",34),r(),v(5,"input",35),r()()),t&2){let e=u(2);a(4),p("tooltipComponentType",e.TextTip)}}function Ad(t,m){if(t&1&&(s(0,"mat-option",31),l(1),r()),t&2){let e=m.$implicit,i=u(3);p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Gd(t,m){if(t&1&&(s(0,"div")(1,"mat-form-field")(2,"mat-label"),l(3," Load Balance Compression "),v(4,"i",36),r(),s(5,"mat-select",37),ae(6,Ad,2,5,"mat-option",31,ve),r()()()),t&2){let e=u(2);a(4),p("tooltipComponentType",e.TextTip),a(2),le(e.loadBalanceCompressionStrategies)}}function Od(t,m){t&1&&(s(0,"span"),l(1,"Add"),r())}function kd(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",33)(1,"button",38),l(2,"Cancel"),r(),s(3,"button",39),M("click",function(){N(e);let n=u(),d=u();return $(d.createConnection(n.id))}),x(4,Od,2,0,"span",40),r()()}if(t&2){let e=m,i=u(2);a(3),p("disabled",i.createConnectionForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function Nd(t,m){if(t&1){let e=W();s(0,"form",1),v(1,"context-error-banner",2),s(2,"mat-tab-group")(3,"mat-tab",3)(4,"mat-dialog-content")(5,"div",4)(6,"div",5),x(7,xd,1,2,"source-processor",6)(8,Sd,2,4,"source-process-group",7)(9,bd,1,1,"source-remote-process-group",8)(10,Pd,1,2,"source-input-port",9)(11,wd,1,1,"source-funnel",10),r(),s(12,"div",11),x(13,Td,1,2,"destination-processor",12)(14,Fd,2,4,"destination-process-group",13)(15,Ed,1,1,"destination-remote-process-group",14)(16,Dd,1,2,"destination-output-port",15)(17,Id,1,1,"destination-funnel",10),r()()()(),s(18,"mat-tab",16)(19,"mat-dialog-content")(20,"div",17)(21,"div",18)(22,"div")(23,"mat-form-field")(24,"mat-label"),l(25,"Name"),r(),v(26,"input",19),r()(),s(27,"div",20)(28,"div"),l(29,"Id"),r(),s(30,"div",21),l(31,"No value set"),r()(),s(32,"div")(33,"mat-form-field")(34,"mat-label"),l(35," FlowFile Expiration "),v(36,"i",22),r(),v(37,"input",23),r()(),s(38,"div",24)(39,"div",18)(40,"mat-form-field")(41,"mat-label"),l(42," Back Pressure Object Threshold "),v(43,"i",25),r(),v(44,"input",26),r()(),s(45,"div",18)(46,"mat-form-field")(47,"mat-label"),l(48," Size Threshold "),v(49,"i",27),r(),v(50,"input",28),r()()(),s(51,"div",24)(52,"div",18)(53,"mat-form-field")(54,"mat-label"),l(55," Load Balance Strategy "),v(56,"i",29),r(),s(57,"mat-select",30),M("selectionChange",function(n){N(e);let d=u();return $(d.loadBalanceChanged(n.value))}),ae(58,Md,2,5,"mat-option",31,ve),r()()(),x(60,Rd,6,1,"div",18),r(),x(61,Gd,8,1,"div"),r(),s(62,"div",18),v(63,"prioritizers",32),X(64,"async"),r()()()()(),x(65,kd,5,2,"mat-dialog-actions",33),X(66,"async"),r()}if(t&2){let e,i,n,d=u();p("formGroup",d.createConnectionForm),a(),p("context",d.ErrorContextKey.CONNECTION),a(6),T((e=d.source.componentType)===d.ComponentType.Processor?7:e===d.ComponentType.ProcessGroup?8:e===d.ComponentType.RemoteProcessGroup?9:e===d.ComponentType.InputPort?10:e===d.ComponentType.Funnel?11:-1),a(6),T((i=d.destination.componentType)===d.ComponentType.Processor?13:i===d.ComponentType.ProcessGroup?14:i===d.ComponentType.RemoteProcessGroup?15:i===d.ComponentType.OutputPort?16:i===d.ComponentType.Funnel?17:-1),a(23),p("tooltipComponentType",d.TextTip),a(7),p("tooltipComponentType",d.TextTip),a(6),p("tooltipComponentType",d.TextTip),a(7),p("tooltipComponentType",d.TextTip),a(2),le(d.loadBalanceStrategies),a(2),T(d.loadBalancePartitionAttributeRequired?60:-1),a(),T(d.loadBalanceCompressionRequired?61:-1),a(2),p("allPrioritizers",Z(64,12,d.availablePrioritizers$)),a(2),T((n=Be(16,_d,Z(66,14,d.saving$)))?65:-1,n)}}var zc=(()=>{class t extends Je{set getChildOutputPorts(e){this.source.componentType==_.ProcessGroup&&(this.childOutputPorts$=e(this.source.id).pipe(F(i=>{i&&i.length===1&&this.createConnectionForm.get("source")?.setValue(i[0].id)})))}set getChildInputPorts(e){this.destination.componentType==_.ProcessGroup&&(this.childInputPorts$=e(this.destination.id).pipe(F(i=>{i&&i.length===1&&this.createConnectionForm.get("destination")?.setValue(i[0].id)})))}constructor(e,i,n,d,b,w){super(),this.dialogRequest=e,this.formBuilder=i,this.store=n,this.canvasUtils=d,this.clusterConnectionService=b,this.client=w,this.loadBalanceStrategies=Wi,this.loadBalanceCompressionStrategies=Qi,this.ComponentType=_,this.TextTip=_e,this.saving$=this.store.select(We),this.availablePrioritizers$=this.store.select(ki),this.breadcrumbs$=this.store.select(On),this.loadBalancePartitionAttributeRequired=!1,this.loadBalanceCompressionRequired=!1,this.ErrorContextKey=ee,this.source=e.request.source,this.destination=e.request.destination,this.createConnectionForm=this.formBuilder.group({name:new I(""),flowFileExpiration:new I(e.defaults.flowfileExpiration,q.required),backPressureObjectThreshold:new I(e.defaults.objectThreshold,[q.required,q.min(0)]),backPressureDataSizeThreshold:new I(e.defaults.dataSizeThreshold,q.required),loadBalanceStrategy:new I("DO_NOT_LOAD_BALANCE",q.required),prioritizers:new I([])}),this.source.componentType==_.Processor&&this.createConnectionForm.addControl("relationships",new I([],q.required));let H=null;if(this.source.componentType==_.RemoteProcessGroup){let U=this.source.entity.component.contents.outputPorts;U&&U.length===1&&(H=U[0].id)}(this.source.componentType==_.ProcessGroup||this.source.componentType==_.RemoteProcessGroup)&&this.createConnectionForm.addControl("source",new I(H,q.required));let G=null;if(this.destination.componentType==_.RemoteProcessGroup){let U=this.destination.entity.component.contents.inputPorts;U&&U.length===1&&(G=U[0].id)}(this.destination.componentType==_.ProcessGroup||this.destination.componentType==_.RemoteProcessGroup)&&this.createConnectionForm.addControl("destination",new I(G,q.required))}getCurrentGroupName(e){return e.permissions.canRead?e.breadcrumb.name:e.id}loadBalanceChanged(e){e=="PARTITION_BY_ATTRIBUTE"?(this.createConnectionForm.addControl("partitionAttribute",new I("",q.required)),this.loadBalancePartitionAttributeRequired=!0):(this.createConnectionForm.removeControl("partitionAttribute"),this.loadBalancePartitionAttributeRequired=!1),e=="DO_NOT_LOAD_BALANCE"?(this.loadBalanceCompressionRequired=!1,this.createConnectionForm.removeControl("compression")):(this.loadBalanceCompressionRequired=!0,this.createConnectionForm.addControl("compression",new I("DO_NOT_COMPRESS",q.required)))}createConnection(e){let i={revision:{version:0,clientId:this.client.getClientId()},disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{backPressureDataSizeThreshold:this.createConnectionForm.get("backPressureDataSizeThreshold")?.value,backPressureObjectThreshold:this.createConnectionForm.get("backPressureObjectThreshold")?.value,flowFileExpiration:this.createConnectionForm.get("flowFileExpiration")?.value,loadBalanceStrategy:this.createConnectionForm.get("loadBalanceStrategy")?.value,name:this.createConnectionForm.get("name")?.value,labelIndex:0,prioritizers:this.createConnectionForm.get("prioritizers")?.value}};this.source.componentType==_.Processor&&(i.component.selectedRelationships=this.createConnectionForm.get("relationships")?.value),this.source.componentType==_.ProcessGroup||this.source.componentType==_.RemoteProcessGroup?i.component.source={groupId:this.source.id,id:this.createConnectionForm.get("source")?.value,type:this.canvasUtils.getConnectableTypeForSource(this.source.componentType)}:i.component.source={groupId:e,id:this.source.entity.id,type:this.canvasUtils.getConnectableTypeForSource(this.source.componentType)},this.destination.componentType==_.ProcessGroup||this.destination.componentType==_.RemoteProcessGroup?i.component.destination={groupId:this.destination.id,id:this.createConnectionForm.get("destination")?.value,type:this.canvasUtils.getConnectableTypeForDestination(this.destination.componentType)}:i.component.destination={groupId:e,id:this.destination.id,type:this.canvasUtils.getConnectableTypeForDestination(this.destination.componentType)},this.loadBalancePartitionAttributeRequired?i.component.loadBalancePartitionAttribute=this.createConnectionForm.get("partitionAttribute")?.value:i.component.loadBalancePartitionAttribute="",this.loadBalanceCompressionRequired?i.component.loadBalanceCompression=this.createConnectionForm.get("compression")?.value:i.component.loadBalanceCompression="DO_NOT_COMPRESS",this.dialogRequest.request.bends&&(i.component.bends=this.dialogRequest.request.bends),this.store.dispatch(an({request:{payload:i}}))}isDirty(){return this.createConnectionForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(wt),D(dt),D(je))}}static{this.\u0275cmp=z({type:t,selectors:[["create-connection"]],inputs:{getChildOutputPorts:"getChildOutputPorts",getChildInputPorts:"getChildInputPorts"},features:[Fe],decls:4,vars:3,consts:[["mat-dialog-title",""],[1,"create-connection-form",3,"formGroup"],[3,"context"],["label","Details"],[1,"dialog-tab-content","flex"],[1,"w-1/2","pr-2"],["formControlName","relationships",3,"groupName","processor"],["formControlName","source",3,"outputPorts","processGroup"],["formControlName","source",3,"remoteProcessGroup"],[3,"groupName","inputPortName"],[3,"groupName"],[1,"w-1/2","pl-2"],[3,"groupName","processor"],["formControlName","destination",3,"inputPorts","processGroup"],["formControlName","destination",3,"remoteProcessGroup"],[3,"groupName","outputPortName"],["label","Settings"],[1,"dialog-tab-content","flex","gap-x-4"],[1,"w-full"],["matInput","","formControlName","name","type","text"],[1,"flex","flex-col","mb-5"],[1,"unset","neutral-color"],["nifiTooltip","","tooltipInputData","The maximum amount of time an object may be in the flow before it will be automatically aged out of the flow.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","flowFileExpiration","type","text"],[1,"flex","gap-x-2"],["nifiTooltip","","tooltipInputData","The maximum number of objects that can be queued before back pressure is applied. Must be a non-negative integer.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","backPressureObjectThreshold","type","number","min","0"],["nifiTooltip","","tooltipInputData","The maximum data size of objects that can be queued before back pressure is applied.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","backPressureDataSizeThreshold","type","text"],["nifiTooltip","","tooltipInputData","How to load balance the data in this Connection across the nodes in the cluster.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","loadBalanceStrategy",3,"selectionChange"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],["formControlName","prioritizers",3,"allPrioritizers"],["align","end"],["nifiTooltip","","tooltipInputData","The FlowFile Attribute to use for determining which node a FlowFile will go to.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","partitionAttribute","type","text"],["nifiTooltip","","tooltipInputData","Whether or not data should be compressed when being transferred between nodes in the cluster.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","compression"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1,"Create Connection"),r(),x(2,Nd,67,18,"form",1),X(3,"async")),i&2){let d;a(2),T((d=Z(3,1,n.breadcrumbs$))?2:-1,d)}},dependencies:[ke,mt,Ie,Ee,Jt,ne,De,Zt,Ne,Ce,ge,de,ue,he,fe,et,pe,ce,Le,Ge,qe,Se,$e,be,Ue,ye,xe,Me,Re,yo,Co,vo,qn,jn,Un,zn,Hn,Wn,Qn,Kn,Yn,Xn,Jn,tt],styles:[".create-connection-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.create-connection-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.create-connection-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.create-connection-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.create-connection-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.create-connection-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.create-connection-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.create-connection-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.create-connection-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var $d=t=>({value:t});function Vd(t,m){if(t&1&&(v(0,"source-processor",25),X(1,"async")),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("processor",Z(1,2,i.sourceProcessor$))}}function Bd(t,m){if(t&1&&(v(0,"source-process-group",26),X(1,"async"),X(2,"async")),t&2){let e=u(2);p("outputPorts",Z(1,2,e.childOutputPorts$))("processGroup",Z(2,4,e.sourceProcessGroup$))}}function Ld(t,m){if(t&1&&(v(0,"source-remote-process-group",27),X(1,"async")),t&2){let e=u(2);p("remoteProcessGroup",Z(1,1,e.sourceRemoteProcessGroup$))}}function qd(t,m){if(t&1&&v(0,"source-input-port",33),t&2){let e=u(2),i=u();p("groupName",i.getCurrentGroupName(e))("inputPortName",i.source.name)}}function jd(t,m){if(t&1&&(x(0,qd,1,2,"source-input-port",33),X(1,"async")),t&2){let e=u(2);T(Z(1,1,e.sourceInputPort$)?0:-1)}}function Ud(t,m){if(t&1&&v(0,"source-funnel",28),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))}}function zd(t,m){if(t&1&&(v(0,"destination-processor",30),X(1,"async")),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))("processor",Z(1,2,i.destinationProcessor$))}}function Hd(t,m){if(t&1&&(v(0,"destination-process-group",31),X(1,"async"),X(2,"async")),t&2){let e=u(2);p("inputPorts",Z(1,2,e.childInputPorts$))("processGroup",Z(2,4,e.destinationProcessGroup$))}}function Wd(t,m){if(t&1&&(v(0,"destination-remote-process-group",32),X(1,"async")),t&2){let e=u(2);p("remoteProcessGroup",Z(1,1,e.destinationRemoteProcessGroup$))}}function Qd(t,m){if(t&1&&v(0,"destination-output-port",34),t&2){let e=u(2),i=u();p("groupName",i.getCurrentGroupName(e))("outputPortName",i.destinationName)}}function Kd(t,m){if(t&1&&(x(0,Qd,1,2,"destination-output-port",34),X(1,"async")),t&2){let e=u(2);T(Z(1,1,e.destinationOutputPort$)?0:-1)}}function Yd(t,m){if(t&1&&v(0,"destination-funnel",28),t&2){let e=u(),i=u();p("groupName",i.getCurrentGroupName(e))}}function Xd(t,m){if(t&1&&(s(0,"div",5)(1,"div",24),x(2,Vd,2,4,"source-processor",25)(3,Bd,3,6,"source-process-group",26)(4,Ld,2,3,"source-remote-process-group",27)(5,jd,2,3)(6,Ud,1,1,"source-funnel",28),r(),s(7,"div",29),x(8,zd,2,4,"destination-processor",30)(9,Hd,3,6,"destination-process-group",31)(10,Wd,2,3,"destination-remote-process-group",32)(11,Kd,2,3)(12,Yd,1,1,"destination-funnel",28),r()()),t&2){let e,i,n=u();a(2),T((e=n.sourceType)===n.ComponentType.Processor?2:e===n.ComponentType.ProcessGroup?3:e===n.ComponentType.RemoteProcessGroup?4:e===n.ComponentType.InputPort?5:e===n.ComponentType.Funnel?6:-1),a(6),T((i=n.destinationType)===n.ComponentType.Processor?8:i===n.ComponentType.ProcessGroup?9:i===n.ComponentType.RemoteProcessGroup?10:i===n.ComponentType.OutputPort?11:i===n.ComponentType.Funnel?12:-1)}}function Jd(t,m){if(t&1&&(s(0,"mat-option",21),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.connectionReadonly||i.sourceReadonly||i.destinationReadonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Zd(t,m){if(t&1&&(s(0,"div",8)(1,"mat-form-field")(2,"mat-label"),l(3," Attribute Name "),v(4,"i",35),r(),v(5,"input",36),r()()),t&2){let e=u();a(4),p("tooltipComponentType",e.TextTip),a(),p("readonly",e.connectionReadonly||e.sourceReadonly||e.destinationReadonly)}}function eu(t,m){if(t&1&&(s(0,"mat-option",21),l(1),r()),t&2){let e=m.$implicit,i=u(2);p("value",e.value)("disabled",i.connectionReadonly||i.sourceReadonly||i.destinationReadonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function tu(t,m){if(t&1&&(s(0,"div")(1,"mat-form-field")(2,"mat-label"),l(3," Load Balance Compression "),v(4,"i",37),r(),s(5,"mat-select",38),ae(6,eu,2,6,"mat-option",21,ve),r()()()),t&2){let e=u();a(4),p("tooltipComponentType",e.TextTip),a(2),le(e.loadBalanceCompressionStrategies)}}function ou(t,m){t&1&&(s(0,"button",39),l(1,"Close"),r())}function iu(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function nu(t,m){if(t&1){let e=W();s(0,"button",40),l(1,"Cancel"),r(),s(2,"button",41),M("click",function(){N(e);let n=u(2);return $(n.editConnection())}),x(3,iu,2,0,"span",42),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editConnectionForm.dirty||i.editConnectionForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function ru(t,m){if(t&1&&(s(0,"mat-dialog-actions",23),x(1,ou,2,0,"button",39)(2,nu,4,2),r()),t&2){let e=u();a(),T(e.connectionReadonly||e.sourceReadonly||e.destinationReadonly?1:2)}}var Hc=(()=>{class t extends Uo{set getChildOutputPorts(e){this.sourceType==_.ProcessGroup&&(this.childOutputPorts$=e(this.source.groupId),this.sourceReadonly=!1,this.updateControlValueAccessorsForReadOnly())}set getChildInputPorts(e){this.destinationType==_.ProcessGroup&&(this.childInputPorts$=e(this.destinationGroupId),this.destinationReadonly=!1,this.updateControlValueAccessorsForReadOnly())}set selectProcessor(e){this.sourceType==_.Processor&&(this.sourceProcessor$=e(this.source.id).pipe(bo(ht),F(i=>{this.sourceReadonly=!this.canvasUtils.runnableSupportsModification(i),this.updateControlValueAccessorsForReadOnly()}))),this.destinationType==_.Processor&&this.destinationId&&(this.destinationProcessor$=e(this.destinationId).pipe(bo(ht),F(i=>{this.destinationReadonly=!this.canvasUtils.runnableSupportsModification(i),this.updateControlValueAccessorsForReadOnly()})))}set selectInputPort(e){this.sourceType==_.InputPort&&(this.sourceInputPort$=e(this.source.id).pipe(bo(ht),F(i=>{this.sourceReadonly=!this.canvasUtils.runnableSupportsModification(i),this.updateControlValueAccessorsForReadOnly()})))}set selectOutputPort(e){this.destinationType==_.OutputPort&&this.destinationId&&(this.destinationOutputPort$=e(this.destinationId).pipe(bo(ht),F(i=>{this.destinationReadonly=!this.canvasUtils.runnableSupportsModification(i),this.updateControlValueAccessorsForReadOnly()})))}set selectProcessGroup(e){this.sourceType==_.ProcessGroup&&(this.sourceProcessGroup$=e(this.source.groupId),this.sourceReadonly=!1,this.updateControlValueAccessorsForReadOnly()),this.destinationType==_.ProcessGroup&&(this.destinationProcessGroup$=e(this.destinationGroupId),this.destinationReadonly=!1,this.updateControlValueAccessorsForReadOnly())}set selectRemoteProcessGroup(e){this.sourceType==_.RemoteProcessGroup&&(this.sourceRemoteProcessGroup$=e(this.source.groupId).pipe(bo(ht),F(i=>{this.sourceReadonly=!this.canvasUtils.remoteProcessGroupSupportsModification(i),this.updateControlValueAccessorsForReadOnly()}))),this.destinationType==_.RemoteProcessGroup&&(this.destinationRemoteProcessGroup$=e(this.destinationGroupId).pipe(bo(ht),F(i=>{this.destinationReadonly=!this.canvasUtils.remoteProcessGroupSupportsModification(i),this.updateControlValueAccessorsForReadOnly()})))}constructor(e,i,n,d,b){super("edit-connection-selected-index"),this.dialogRequest=e,this.formBuilder=i,this.store=n,this.canvasUtils=d,this.client=b,this.ComponentType=_,this.TextTip=_e,this.saving$=this.store.select(We),this.availablePrioritizers$=this.store.select(ki),this.breadcrumbs$=this.store.select(On),this.sourceReadonly=!1,this.destinationReadonly=!1,this.destinationId=null,this.sourceProcessor$=null,this.destinationProcessor$=null,this.sourceInputPort$=null,this.destinationOutputPort$=null,this.sourceProcessGroup$=null,this.destinationProcessGroup$=null,this.sourceRemoteProcessGroup$=null,this.destinationRemoteProcessGroup$=null,this.childOutputPorts$=null,this.childInputPorts$=null,this.loadBalancePartitionAttributeRequired=!1,this.loadBalanceCompressionRequired=!1,this.loadBalanceStrategies=Wi,this.loadBalanceCompressionStrategies=Qi,this.ErrorContextKey=ee;let w=e.entity.component;if(this.connectionReadonly=!e.entity.permissions.canWrite,this.source=w.source,this.sourceType=this.canvasUtils.getComponentTypeForSource(this.source.type),e.newDestination){let H=e.newDestination;this.destinationType=H.type,this.destinationGroupId=H.groupId,this.destinationName=H.name,H.id&&(this.destinationId=H.id),this.previousDestination=w.destination}else this.destinationType=this.canvasUtils.getComponentTypeForDestination(w.destination.type),this.destinationGroupId=w.destination.groupId,this.destinationId=w.destination.id,this.destinationName=w.destination.name;this.editConnectionForm=this.formBuilder.group({name:new I(w.name),flowFileExpiration:new I(w.flowFileExpiration,q.required),backPressureObjectThreshold:new I(w.backPressureObjectThreshold,[q.required,q.min(0)]),backPressureDataSizeThreshold:new I(w.backPressureDataSizeThreshold,q.required),loadBalanceStrategy:new I(w.loadBalanceStrategy,q.required),prioritizers:new I(w.prioritizers)}),this.sourceType==_.Processor&&this.editConnectionForm.addControl("relationships",new I(w.selectedRelationships,q.required)),(this.sourceType==_.ProcessGroup||this.sourceType==_.RemoteProcessGroup)&&this.editConnectionForm.addControl("source",new I({value:this.source.id,disabled:!0},q.required)),(this.destinationType==_.ProcessGroup||this.destinationType==_.RemoteProcessGroup)&&this.editConnectionForm.addControl("destination",new I(this.destinationId,q.required)),this.initialPartitionAttribute=w.loadBalancePartitionAttribute,this.initialCompression=w.loadBalanceCompression,this.loadBalanceChanged(w.loadBalanceStrategy),this.updateControlValueAccessorsForReadOnly()}updateControlValueAccessorsForReadOnly(){this.connectionReadonly||this.sourceReadonly||this.destinationReadonly?(this.editConnectionForm.get("prioritizers")?.disable(),this.sourceType==_.Processor&&this.editConnectionForm.get("relationships")?.disable(),(this.destinationType==_.ProcessGroup||this.destinationType==_.RemoteProcessGroup)&&this.editConnectionForm.get("destination")?.disable()):(this.editConnectionForm.get("prioritizers")?.enable(),this.sourceType==_.Processor&&this.editConnectionForm.get("relationships")?.enable(),(this.destinationType==_.ProcessGroup||this.destinationType==_.RemoteProcessGroup)&&this.editConnectionForm.get("destination")?.enable())}getCurrentGroupName(e){return e.permissions.canRead?e.breadcrumb.name:e.id}loadBalanceChanged(e){e=="PARTITION_BY_ATTRIBUTE"?(this.editConnectionForm.addControl("partitionAttribute",new I(this.initialPartitionAttribute,q.required)),this.loadBalancePartitionAttributeRequired=!0):(this.editConnectionForm.removeControl("partitionAttribute"),this.loadBalancePartitionAttributeRequired=!1),e=="DO_NOT_LOAD_BALANCE"?(this.loadBalanceCompressionRequired=!1,this.editConnectionForm.removeControl("compression")):(this.loadBalanceCompressionRequired=!0,this.editConnectionForm.addControl("compression",new I(this.initialCompression,q.required)))}editConnection(){let e=this.dialogRequest.entity,i={revision:this.client.getRevision(e),component:{id:e.id,backPressureDataSizeThreshold:this.editConnectionForm.get("backPressureDataSizeThreshold")?.value,backPressureObjectThreshold:this.editConnectionForm.get("backPressureObjectThreshold")?.value,flowFileExpiration:this.editConnectionForm.get("flowFileExpiration")?.value,loadBalanceStrategy:this.editConnectionForm.get("loadBalanceStrategy")?.value,name:this.editConnectionForm.get("name")?.value,prioritizers:this.editConnectionForm.get("prioritizers")?.value}};this.sourceType==_.Processor&&(i.component.selectedRelationships=this.editConnectionForm.get("relationships")?.value),(this.destinationType==_.ProcessGroup||this.destinationType==_.RemoteProcessGroup)&&(i.component.destination={groupId:this.destinationGroupId,id:this.editConnectionForm.get("destination")?.value,type:this.canvasUtils.getConnectableTypeForDestination(this.destinationType)}),this.loadBalancePartitionAttributeRequired?i.component.loadBalancePartitionAttribute=this.editConnectionForm.get("partitionAttribute")?.value:i.component.loadBalancePartitionAttribute="",this.loadBalanceCompressionRequired?i.component.loadBalanceCompression=this.editConnectionForm.get("compression")?.value:i.component.loadBalanceCompression="DO_NOT_COMPRESS",this.store.dispatch(dn({request:{id:this.dialogRequest.entity.id,type:_.Connection,uri:this.dialogRequest.entity.uri,previousDestination:this.previousDestination,payload:i,errorStrategy:"banner"}}))}isDirty(){return this.editConnectionForm.dirty}getCancelDialogResult(){return"CANCELLED"}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(wt),D(je))}}static{this.\u0275cmp=z({type:t,selectors:[["edit-connection"]],inputs:{getChildOutputPorts:"getChildOutputPorts",getChildInputPorts:"getChildInputPorts",selectProcessor:"selectProcessor",selectInputPort:"selectInputPort",selectOutputPort:"selectOutputPort",selectProcessGroup:"selectProcessGroup",selectRemoteProcessGroup:"selectRemoteProcessGroup"},features:[Fe],decls:58,vars:27,consts:[["mat-dialog-title",""],[1,"edit-connection-form",3,"formGroup"],[3,"context"],[3,"selectedIndexChange","selectedIndex"],["label","Details"],[1,"dialog-tab-content","flex"],["label","Settings"],[1,"dialog-tab-content","flex","gap-x-4"],[1,"w-full"],["matInput","","formControlName","name","type","text",3,"readonly"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","font-medium",3,"copy"],["nifiTooltip","","tooltipInputData","The maximum amount of time an object may be in the flow before it will be automatically aged out of the flow.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","flowFileExpiration","type","text",3,"readonly"],[1,"flex","gap-x-2"],["nifiTooltip","","tooltipInputData","The maximum number of objects that can be queued before back pressure is applied. Must be a non-negative integer.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","backPressureObjectThreshold","type","number","min","0",3,"readonly"],["nifiTooltip","","tooltipInputData","The maximum data size of objects that can be queued before back pressure is applied.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","backPressureDataSizeThreshold","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","How to load balance the data in this Connection across the nodes in the cluster.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","loadBalanceStrategy",3,"selectionChange"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],["formControlName","prioritizers",3,"allPrioritizers"],["align","end"],[1,"w-1/2","pr-2"],["formControlName","relationships",3,"groupName","processor"],["formControlName","source",3,"outputPorts","processGroup"],["formControlName","source",3,"remoteProcessGroup"],[3,"groupName"],[1,"w-1/2","pl-2"],[3,"groupName","processor"],["formControlName","destination",3,"inputPorts","processGroup"],["formControlName","destination",3,"remoteProcessGroup"],[3,"groupName","inputPortName"],[3,"groupName","outputPortName"],["nifiTooltip","","tooltipInputData","The FlowFile Attribute to use for determining which node a FlowFile will go to.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","partitionAttribute","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Whether or not data should be compressed when being transferred between nodes in the cluster.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","compression"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","CANCELLED"],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-tab-group",3),rt("selectedIndexChange",function(b){return nt(n.selectedIndex,b)||(n.selectedIndex=b),b}),M("selectedIndexChange",function(b){return n.tabChanged(b)}),s(5,"mat-tab",4)(6,"mat-dialog-content"),x(7,Xd,13,2,"div",5),X(8,"async"),r()(),s(9,"mat-tab",6)(10,"mat-dialog-content")(11,"div",7)(12,"div",8)(13,"div")(14,"mat-form-field")(15,"mat-label"),l(16,"Name"),r(),v(17,"input",9),r()(),s(18,"div",10)(19,"div"),l(20,"Id"),r(),s(21,"div",11),l(22),r()(),s(23,"div")(24,"mat-form-field")(25,"mat-label"),l(26," FlowFile Expiration "),v(27,"i",12),r(),v(28,"input",13),r()(),s(29,"div",14)(30,"div",8)(31,"mat-form-field")(32,"mat-label"),l(33," Back Pressure Object Threshold "),v(34,"i",15),r(),v(35,"input",16),r()(),s(36,"div",8)(37,"mat-form-field")(38,"mat-label"),l(39," Size Threshold "),v(40,"i",17),r(),v(41,"input",18),r()()(),s(42,"div",14)(43,"div",8)(44,"mat-form-field")(45,"mat-label"),l(46," Load Balance Strategy "),v(47,"i",19),r(),s(48,"mat-select",20),M("selectionChange",function(b){return n.loadBalanceChanged(b.value)}),ae(49,Jd,2,6,"mat-option",21,ve),r()()(),x(51,Zd,6,2,"div",8),r(),x(52,tu,8,1,"div"),r(),s(53,"div",8),v(54,"prioritizers",22),X(55,"async"),r()()()()(),x(56,ru,3,1,"mat-dialog-actions",23),X(57,"async"),r()),i&2){let d,b;a(),R(" ",n.connectionReadonly||n.sourceReadonly||n.destinationReadonly?"Connection Details":"Edit Connection",`
`),a(),p("formGroup",n.editConnectionForm),a(),p("context",n.ErrorContextKey.CONNECTION),a(),it("selectedIndex",n.selectedIndex),a(3),T((d=Z(8,19,n.breadcrumbs$))?7:-1,d),a(10),p("readonly",n.connectionReadonly||n.sourceReadonly||n.destinationReadonly),a(4),p("copy",n.dialogRequest.entity.id),a(),R(" ",n.dialogRequest.entity.id," "),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.connectionReadonly||n.sourceReadonly||n.destinationReadonly),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.connectionReadonly||n.sourceReadonly||n.destinationReadonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.connectionReadonly||n.sourceReadonly||n.destinationReadonly),a(6),p("tooltipComponentType",n.TextTip),a(2),le(n.loadBalanceStrategies),a(2),T(n.loadBalancePartitionAttributeRequired?51:-1),a(),T(n.loadBalanceCompressionRequired?52:-1),a(2),p("allPrioritizers",Z(55,21,n.availablePrioritizers$)),a(2),T((b=Be(25,$d,Z(57,23,n.saving$)))?56:-1,b)}},dependencies:[ke,mt,Ie,Ee,Jt,ne,De,Zt,Ne,Ce,ge,de,ue,he,fe,et,pe,ce,Le,Ge,qe,Se,$e,be,Ue,ye,xe,Me,Re,yo,Co,vo,qn,jn,Un,zn,Hn,Wn,Qn,Kn,Yn,Xn,Jn,tt,Eo],styles:[".edit-connection-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.edit-connection-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.edit-connection-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.edit-connection-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.edit-connection-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.edit-connection-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.edit-connection-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.edit-connection-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.edit-connection-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var su=t=>({value:t});function au(t,m){if(t&1&&(s(0,"mat-option",5),l(1),r()),t&2){let e=u().$implicit,i=u();p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function lu(t,m){if(t&1&&(s(0,"mat-option",6),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function cu(t,m){if(t&1&&x(0,au,2,5,"mat-option",5)(1,lu,2,2,"mat-option",6),t&2){let e=m.$implicit;T(e.description?0:1)}}function pu(t,m){t&1&&(s(0,"span"),l(1,"Add"),r())}function mu(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",4)(1,"button",7),l(2,"Cancel"),r(),s(3,"button",8),M("click",function(){N(e);let n=u();return $(n.createProcessGroup())}),x(4,pu,2,0,"span",9),r()()}if(t&2){let e=m,i=u();a(3),p("disabled",!i.createProcessGroupForm.dirty||i.createProcessGroupForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}var Wc=(()=>{class t{constructor(e,i,n,d){this.dialogRequest=e,this.formBuilder=i,this.store=n,this.client=d,this.saving$=this.store.select(We),this.TextTip=_e,this.parameterContextsOptions=[],this.parameterContextsOptions.push({text:"No parameter context",value:null}),e.parameterContexts.forEach(b=>{b.permissions.canRead&&b.component&&this.parameterContextsOptions.push({text:b.component.name,value:b.id,description:b.component.description})}),this.createProcessGroupForm=this.formBuilder.group({newProcessGroupName:new I("",q.required),newProcessGroupParameterContext:new I(e.currentParameterContextId)})}createProcessGroup(){this.store.dispatch(rn({request:{revision:{version:0,clientId:this.client.getClientId()},type:_.ProcessGroup,position:this.dialogRequest.request.position,name:this.createProcessGroupForm.get("newProcessGroupName")?.value,parameterContextId:this.createProcessGroupForm.get("newProcessGroupParameterContext")?.value,components:this.dialogRequest.request.moveComponents}}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(je))}}static{this.\u0275cmp=z({type:t,selectors:[["group-components"]],decls:16,vars:6,consts:[["mat-dialog-title",""],[1,"create-process-group-form",3,"formGroup"],["matInput","","formControlName","newProcessGroupName","type","text"],["formControlName","newProcessGroupParameterContext"],["align","end"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[3,"value"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1,"Create Process Group"),r(),s(2,"form",1)(3,"mat-dialog-content")(4,"mat-form-field")(5,"mat-label"),l(6,"Name"),r(),v(7,"input",2),r(),s(8,"mat-form-field")(9,"mat-label"),l(10,"Parameter Context"),r(),s(11,"mat-select",3),ae(12,cu,2,1,null,null,ve),r()()(),x(14,mu,5,2,"mat-dialog-actions",4),X(15,"async"),r()),i&2){let d;a(2),p("formGroup",n.createProcessGroupForm),a(10),le(n.parameterContextsOptions),a(2),T((d=Be(4,su,Z(15,2,n.saving$)))?14:-1,d)}},dependencies:[ke,Ne,Ce,ge,de,ue,he,fe,et,pe,ce,Le,Ge,Ue,xe,Ie,Ee,ne,De,Me,Re,qe,Se,$e,be,ye,to],styles:[".create-process-group-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.create-process-group-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.create-process-group-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var du=t=>({value:t}),uu=(t,m)=>m.value;function fu(t,m){if(t&1&&(s(0,"mat-option",10),l(1),r()),t&2){let e=u().$implicit,i=u();p("value",e.value)("disabled",i.readonly||e.disabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R("",e.text," ")}}function hu(t,m){if(t&1&&(s(0,"mat-option",10),l(1),r()),t&2){let e=u().$implicit,i=u();p("value",e.value)("disabled",i.readonly||e.disabled)("tooltipComponentType",i.TextTip)("tooltipInputData",e.text)("delayClose",!1),a(),R("",e.text," ")}}function gu(t,m){if(t&1&&x(0,fu,2,6,"mat-option",10)(1,hu,2,6,"mat-option",10),t&2){let e=m.$implicit;T(e.description?0:1)}}function Cu(t,m){if(t&1){let e=W();s(0,"button",30),M("click",function(){N(e);let n=u(2);return $(n.openNewParameterContextDialog())}),v(1,"i",31),r()}}function vu(t,m){t&1&&x(0,Cu,2,0,"button",29),t&2&&T(m.parameterContextPermissions.canWrite?0:-1)}function yu(t,m){if(t&1&&(s(0,"mat-option",10),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function _u(t,m){if(t&1&&(s(0,"div")(1,"mat-form-field")(2,"mat-label"),l(3,"Max Concurrent Tasks"),r(),v(4,"input",32),r()(),s(5,"div")(6,"mat-form-field")(7,"mat-label"),l(8,"Stateless Flow Timeout"),r(),v(9,"input",33),r()()),t&2){let e=u();a(4),p("readonly",e.readonly),a(5),p("readonly",e.readonly)}}function xu(t,m){if(t&1&&(s(0,"mat-option",10),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function Su(t,m){if(t&1&&(s(0,"mat-option",10),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R(" ",e.text," ")}}function bu(t,m){t&1&&(s(0,"button",34),l(1,"Close"),r())}function Pu(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function wu(t,m){if(t&1){let e=W();s(0,"button",35),l(1,"Cancel"),r(),s(2,"button",36),M("click",function(){N(e);let n=u(2);return $(n.submitForm())}),x(3,Pu,2,0,"span",37),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editProcessGroupForm.dirty||i.editProcessGroupForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function Tu(t,m){if(t&1&&(s(0,"mat-dialog-actions",28),x(1,bu,2,0,"button",34)(2,wu,4,2),r()),t&2){let e=u();a(),T(e.readonly?1:2)}}var Qc=(()=>{class t extends Uo{set parameterContexts(e){e!==void 0&&(this.parameterContextsOptions=[],this._parameterContexts=e,e.length===0?this.parameterContextsOptions=[]:e.forEach(i=>{if(i.permissions.canRead&&i.component)this.parameterContextsOptions.push({text:i.component.name,value:i.id,description:i.component.description});else{let n;this.request.entity.component.parameterContext?n=this.request.entity.component.parameterContext.id!==i.id:n=!0,this.parameterContextsOptions.push({text:i.id,value:i.id,disabled:n})}}),this.request.entity.component.parameterContext&&this.editProcessGroupForm.get("parameterContext")?.setValue(this.request.entity.component.parameterContext.id))}get parameterContexts(){return this._parameterContexts}constructor(e,i,n,d,b){super("edit-process-group-selected-index"),this.request=e,this.formBuilder=i,this.client=n,this.clusterConnectionService=d,this.store=b,this.editProcessGroup=new Ke,this.TextTip=_e,this.STATELESS="STATELESS",this._parameterContexts=[],this.parameterContextsOptions=[],this.currentUser$=this.store.select(To),this.executionEngineOptions=[{text:"Inherited",value:"INHERITED",description:"Use whichever Execution Engine the parent Process Group is configured to use."},{text:"Standard",value:"STANDARD",description:"Use the Standard NiFi Execution Engine. See the User Guide for additional details."},{text:"Stateless",value:this.STATELESS,description:"Run the dataflow using the Stateless Execution Engine. See the User Guide for additional details."}],this.flowfileConcurrencyOptions=[{text:"Single FlowFile Per Node",value:"SINGLE_FLOWFILE_PER_NODE",description:"Only a single FlowFile is to be allowed to enter the Process Group at a time on each node in the cluster. While that FlowFile may be split into many or spawn many children, no additional FlowFiles will be allowed to enter the Process Group through a Local Input Port until the previous FlowFile - and all of its child/descendent FlowFiles - have been processed."},{text:"Single Batch Per Node",value:"SINGLE_BATCH_PER_NODE",description:"When an Input Port pulls a FlowFile into the Process Group, FlowFiles will continue to be ingested into the Process Group until all input queues have been emptied. At that point, no additional FlowFiles will be allowed to enter the Process Group through a Local Input Port until the entire batch of FlowFiles has been processed."},{text:"Unbounded",value:"UNBOUNDED",description:"The number of FlowFiles that can be processed concurrently is unbounded."}],this.flowfileOutboundPolicyOptions=[{text:"Stream When Available",value:"STREAM_WHEN_AVAILABLE",description:"FlowFiles that are queued up to be transferred out of a Process Group by an Output Port will be transferred out of the Process Group as soon as they are available."},{text:"Batch Output",value:"BATCH_OUTPUT",description:"FlowFiles that are queued up to be transferred out of a Process Group by an Output Port will remain queued until all FlowFiles in the Process Group are ready to be transferred out of the group. The FlowFiles will then be transferred out of the group. This setting will be ignored if the FlowFile Concurrency is Unbounded."}],this.ErrorContextKey=ee,this.readonly=!e.entity.permissions.canWrite,this.editProcessGroupForm=this.formBuilder.group({name:new I(e.entity.component.name,q.required),applyParameterContextRecursively:new I({value:!1,disabled:this.readonly}),executionEngine:new I(e.entity.component.executionEngine,q.required),flowfileConcurrency:new I(e.entity.component.flowfileConcurrency,q.required),flowfileOutboundPolicy:new I(e.entity.component.flowfileOutboundPolicy,q.required),defaultFlowFileExpiration:new I(e.entity.component.defaultFlowFileExpiration,q.required),defaultBackPressureObjectThreshold:new I(e.entity.component.defaultBackPressureObjectThreshold,q.required),defaultBackPressureDataSizeThreshold:new I(e.entity.component.defaultBackPressureDataSizeThreshold,q.required),logFileSuffix:new I(e.entity.component.logFileSuffix),comments:new I(e.entity.component.comments),parameterContext:new I(null)}),this.initialMaxConcurrentTasks=e.entity.component.maxConcurrentTasks,this.initialStatelessFlowTimeout=e.entity.component.statelessFlowTimeout,this.executionEngineChanged(e.entity.component.executionEngine)}executionEngineChanged(e){e==this.STATELESS?(this.editProcessGroupForm.addControl("maxConcurrentTasks",new I(this.initialMaxConcurrentTasks,q.required)),this.editProcessGroupForm.addControl("statelessFlowTimeout",new I(this.initialStatelessFlowTimeout,q.required))):(this.editProcessGroupForm.removeControl("maxConcurrentTasks"),this.editProcessGroupForm.removeControl("statelessFlowTimeout"))}submitForm(){let e="DIRECT_CHILDREN";this.editProcessGroupForm.get("applyParameterContextRecursively")?.value&&(e="ALL_DESCENDANTS");let i={revision:this.client.getRevision(this.request.entity),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),processGroupUpdateStrategy:e,component:{id:this.request.entity.id,name:this.editProcessGroupForm.get("name")?.value,executionEngine:this.editProcessGroupForm.get("executionEngine")?.value,flowfileConcurrency:this.editProcessGroupForm.get("flowfileConcurrency")?.value,flowfileOutboundPolicy:this.editProcessGroupForm.get("flowfileOutboundPolicy")?.value,defaultFlowFileExpiration:this.editProcessGroupForm.get("defaultFlowFileExpiration")?.value,defaultBackPressureObjectThreshold:this.editProcessGroupForm.get("defaultBackPressureObjectThreshold")?.value,defaultBackPressureDataSizeThreshold:this.editProcessGroupForm.get("defaultBackPressureDataSizeThreshold")?.value,logFileSuffix:this.editProcessGroupForm.get("logFileSuffix")?.value,parameterContext:{id:this.editProcessGroupForm.get("parameterContext")?.value},comments:this.editProcessGroupForm.get("comments")?.value}};this.editProcessGroupForm.get("executionEngine")?.value===this.STATELESS&&(i.component.maxConcurrentTasks=this.editProcessGroupForm.get("maxConcurrentTasks")?.value,i.component.statelessFlowTimeout=this.editProcessGroupForm.get("statelessFlowTimeout")?.value),this.editProcessGroup.next(i)}openNewParameterContextDialog(){this.store.dispatch(ti({request:{parameterContexts:this._parameterContexts}}))}isDirty(){return this.editProcessGroupForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(je),D(dt),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["edit-process-group"]],inputs:{parameterContexts:"parameterContexts",saving$:"saving$"},outputs:{editProcessGroup:"editProcessGroup"},features:[Fe],decls:86,vars:32,consts:[["mat-dialog-title",""],[1,"process-group-edit-form",3,"formGroup"],[3,"context"],[3,"selectedIndexChange","selectedIndex"],["label","Settings"],[1,"dialog-tab-content","flex","gap-x-4"],[1,"w-full"],["matInput","","formControlName","name","type","text",3,"readonly"],[1,"flex","flew-row","w-full","justify-start","items-start"],["formControlName","parameterContext"],["nifiTooltip","",3,"value","disabled","tooltipComponentType","tooltipInputData","delayClose"],[1,"-mt-4","mb-4"],["formControlName","applyParameterContextRecursively","name","applyParameterContextRecursively"],["nifiTooltip","","tooltipInputData","When checked Parameter Context will be applied to the Process Group and all the embedded Process Groups recursively, if the user has the proper permissions on all the respective components. If the user does not have the proper permissions on any embedded Process Group, then the Parameter Context will not be applied for any components.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["formControlName","executionEngine",3,"selectionChange"],["formControlName","flowfileConcurrency"],["formControlName","flowfileOutboundPolicy"],["nifiTooltip","","tooltipInputData","This setting applies as the default FlowFile expiration for any new connection. Configuration of existing connections is unaffected.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","defaultFlowFileExpiration","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","This setting applies as the default back pressure object count for any new connection. Configuration of existing connections is unaffected.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","defaultBackPressureObjectThreshold","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","This setting applies as the default back pressure data size for any new connection. Configuration of existing connections is unaffected.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","defaultBackPressureDataSizeThreshold","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Turns on dedicated logging. When left empty log messages will be logged only to the primary app log. When set messages logged by components in this group will be sent to the standard app log, as well as a separate log file, with the provided name, specific to this group.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","logFileSuffix","type","text",3,"readonly"],["label","Comments"],[1,"dialog-tab-content"],["matInput","","formControlName","comments","type","text","rows","15",3,"readonly"],["align","end"],["mat-icon-button","","title","Create parameter context",1,"primary-icon-button","mt-1","ml-1"],["mat-icon-button","","title","Create parameter context",1,"primary-icon-button","mt-1","ml-1",3,"click"],[1,"fa","fa-plus"],["matInput","","formControlName","maxConcurrentTasks","name","maxConcurrentTasks","type","number","min","1",3,"readonly"],["matInput","","formControlName","statelessFlowTimeout","type","text",3,"readonly"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",1,"h-8",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-tab-group",3),rt("selectedIndexChange",function(b){return nt(n.selectedIndex,b)||(n.selectedIndex=b),b}),M("selectedIndexChange",function(b){return n.tabChanged(b)}),s(5,"mat-tab",4)(6,"mat-dialog-content")(7,"div",5)(8,"div",6)(9,"div")(10,"mat-form-field")(11,"mat-label"),l(12,"Name"),r(),v(13,"input",7),r()(),s(14,"div",8)(15,"mat-form-field")(16,"mat-label"),l(17,"Parameter Context"),r(),s(18,"mat-select",9)(19,"mat-option",10),l(20,"No parameter context "),r(),ae(21,gu,2,1,null,null,uu),X(23,"sortObjectByProperty"),r()(),x(24,vu,1,1),X(25,"async"),r(),s(26,"div",11)(27,"mat-checkbox",12),l(28," Apply Recursively "),v(29,"i",13),r()(),s(30,"div")(31,"mat-form-field")(32,"mat-label"),l(33,"Execution Engine"),r(),s(34,"mat-select",14),M("selectionChange",function(b){return n.executionEngineChanged(b.value)}),ae(35,yu,2,6,"mat-option",10,ve),r()()(),x(37,_u,10,2),s(38,"div")(39,"mat-form-field")(40,"mat-label"),l(41,"Process Group FlowFile Concurrency"),r(),s(42,"mat-select",15),ae(43,xu,2,6,"mat-option",10,ve),r()()(),s(45,"div")(46,"mat-form-field")(47,"mat-label"),l(48,"Process Group Outbound Policy"),r(),s(49,"mat-select",16),ae(50,Su,2,6,"mat-option",10,ve),r()()()(),s(52,"div",6)(53,"div")(54,"mat-form-field")(55,"mat-label"),l(56," Default FlowFile Expiration "),v(57,"i",17),r(),v(58,"input",18),r()(),s(59,"div")(60,"mat-form-field")(61,"mat-label"),l(62," Default Back Pressure Object Threshold "),v(63,"i",19),r(),v(64,"input",20),r()(),s(65,"div")(66,"mat-form-field")(67,"mat-label"),l(68," Default Back Pressure Data Size Threshold "),v(69,"i",21),r(),v(70,"input",22),r()(),s(71,"div")(72,"mat-form-field")(73,"mat-label"),l(74," Log File Suffix "),v(75,"i",23),r(),v(76,"input",24),r()()()()()(),s(77,"mat-tab",25)(78,"mat-dialog-content")(79,"div",26)(80,"mat-form-field")(81,"mat-label"),l(82,"Comments"),r(),v(83,"textarea",27),r()()()()(),x(84,Tu,3,1,"mat-dialog-actions",28),X(85,"async"),r()),i&2){let d,b,w;a(),Q(n.readonly?"Process Group Details":"Edit Process Group"),a(),p("formGroup",n.editProcessGroupForm),a(),p("context",n.ErrorContextKey.PROCESS_GROUP),a(),it("selectedIndex",n.selectedIndex),a(9),p("readonly",n.readonly),a(6),p("value",null)("disabled",n.readonly)("tooltipComponentType",n.TextTip)("tooltipInputData","No parameter context")("delayClose",!1),a(2),le(wi(23,23,n.parameterContextsOptions,"text")),a(3),T((d=Z(25,26,n.currentUser$))?24:-1,d),a(5),p("tooltipComponentType",n.TextTip),a(6),le(n.executionEngineOptions),a(2),T(((b=n.editProcessGroupForm.get("executionEngine"))==null?null:b.value)===n.STATELESS?37:-1),a(6),le(n.flowfileConcurrencyOptions),a(7),le(n.flowfileOutboundPolicyOptions),a(7),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(7),p("readonly",n.readonly),a(),T((w=Be(30,du,Z(85,28,n.saving$)))?84:-1,w)}},dependencies:[xe,Ie,Ee,Jt,ne,De,Zt,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,Ze,Lt,Ne,Ce,Bo,yo,Co,vo,qe,Se,$e,be,ke,Ue,ye,mt,tt,Gi],styles:[".process-group-edit-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.process-group-edit-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.process-group-edit-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.process-group-edit-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.process-group-edit-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.process-group-edit-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.process-group-edit-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.process-group-edit-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.process-group-edit-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var ii=Ft(An,t=>t[nc]),Ds=Ft(ii,t=>t.updateRequestEntity),Kc=Ft(ii,t=>t.saving),Yc=Ft(ii,t=>t.saving),B1=Ft(ii,t=>t.status);var er=(()=>{class t{constructor(e,i,n,d,b,w){this.dialog=e,this.store=i,this.parameterContextService=n,this.clusterConnectionService=d,this.client=b,this.errorHelper=w}convertToParameter(e){return(i,n,d)=>this.parameterContextService.getParameterContext(e,!1).pipe(B(b=>(this.store.dispatch(vt({error:this.errorHelper.getErrorString(b)})),or)),S(b=>{let w=b.component.parameters.map(U=>U.parameter.name),H={parameter:{name:i,value:d,sensitive:n,description:""},existingParameters:w,isNewParameterContext:!1,isConvert:!0},G=this.dialog.open(ai,j(V({},xt),{data:H}));return G.componentInstance.saving$=this.store.select(Kc),G.componentInstance.exit.pipe(Te(G.afterClosed()),F(()=>ei())),G.componentInstance.editParameter.pipe(Te(G.afterClosed()),S(U=>{this.store.dispatch(wn({request:{id:e,payload:{id:b.id,revision:this.client.getRevision(b),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:b.id,parameters:[{parameter:U.parameter}],inheritedParameterContexts:b.component.inheritedParameterContexts}}}}));let ot;return this.store.select(ii).pipe(Te(G.afterClosed()),F(Oe=>{if(Oe.error)throw new Error(Oe.error);if(Oe.updateRequestEntity?.request.failureReason)throw new Error(Oe.updateRequestEntity?.request.failureReason);Oe.saving&&(ot=Oe.updateRequestEntity?.request.parameterContext)}),Pe(Oe=>!Oe.saving),f(()=>(G.close(),{propertyValue:`#{${U.parameter.name}}`,parameterContext:ot})),B(Oe=>(G.close(),this.store.dispatch(vt({error:Oe.message})),this.store.dispatch(ui()),or)))}))}))}static{this.\u0275fac=function(i){return new(i||t)(k(Vt),k(ie),k(_o),k(dt),k(je),k($t))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Zc=(()=>{class t{static{this.API="../nifi-api"}constructor(e){this.httpClient=e}getRegistryClients(){return this.httpClient.get(`${t.API}/flow/registries`)}getBranches(e){return this.httpClient.get(`${t.API}/flow/registries/${e}/branches`)}getBuckets(e,i){let n=new mo;return i&&(n=n.set("branch",i)),this.httpClient.get(`${t.API}/flow/registries/${e}/buckets`,{params:n})}getFlows(e,i,n){let d=new mo;return n&&(d=d.set("branch",n)),this.httpClient.get(`${t.API}/flow/registries/${e}/buckets/${i}/flows`,{params:d})}getFlowVersions(e,i,n,d){let b=new mo;return d&&(b=b.set("branch",d)),this.httpClient.get(`${t.API}/flow/registries/${e}/buckets/${i}/flows/${n}/versions`,{params:b})}importFromRegistry(e,i){return this.httpClient.post(`${t.API}/process-groups/${e}/process-groups`,i.payload,{params:{parameterContextHandlingStrategy:i.keepExistingParameterContext?"KEEP_EXISTING":"REPLACE"}})}static{this.\u0275fac=function(i){return new(i||t)(k(Xt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Eu=t=>({value:t});function Du(t,m){if(t&1&&(Ye(0),s(1,"mat-option",27),l(2),r(),Xe()),t&2){let e=u().$implicit,i=u();a(),p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function Iu(t,m){if(t&1&&(s(0,"mat-option",28),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function Mu(t,m){if(t&1&&(Ye(0),x(1,Du,3,5,"ng-container",26)(2,Iu,2,2,"ng-template",null,0,po),Xe()),t&2){let e=m.$implicit,i=pt(3);a(),p("ngIf",e.description)("ngIfElse",i)}}function Ru(t,m){if(t&1&&(Ye(0),s(1,"mat-option",28),l(2),r(),Xe()),t&2){let e=m.$implicit;a(),p("value",e.value),a(),Q(e.text)}}function Au(t,m){t&1&&(s(0,"mat-error"),l(1,"No branches available"),r())}function Gu(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"Branch"),r(),s(3,"mat-select",29),M("selectionChange",function(n){N(e);let d=u();return $(d.branchChanged(n.value))}),x(4,Ru,3,2,"ng-container",6),r(),x(5,Au,2,0,"mat-error"),r()}if(t&2){let e=u();a(4),p("ngForOf",e.branchOptions),a(),T(e.importFromRegistryForm.controls.branch.hasError("required")?5:-1)}}function Ou(t,m){if(t&1&&(Ye(0),s(1,"mat-option",27),l(2),r(),Xe()),t&2){let e=u().$implicit,i=u();a(),p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function ku(t,m){if(t&1&&(s(0,"mat-option",28),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function Nu(t,m){if(t&1&&(Ye(0),x(1,Ou,3,5,"ng-container",26)(2,ku,2,2,"ng-template",null,0,po),Xe()),t&2){let e=m.$implicit,i=pt(3);a(),p("ngIf",e.description)("ngIfElse",i)}}function $u(t,m){t&1&&(s(0,"mat-error"),l(1,"No buckets available"),r())}function Vu(t,m){if(t&1&&(Ye(0),s(1,"mat-option",27),l(2),r(),Xe()),t&2){let e=u().$implicit,i=u();a(),p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),Q(e.text)}}function Bu(t,m){if(t&1&&(s(0,"mat-option",28),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function Lu(t,m){if(t&1&&(Ye(0),x(1,Vu,3,5,"ng-container",26)(2,Bu,2,2,"ng-template",null,0,po),Xe()),t&2){let e=m.$implicit,i=pt(3);a(),p("ngIf",e.description)("ngIfElse",i)}}function qu(t,m){t&1&&(s(0,"mat-error"),l(1,"No flows available"),r())}function ju(t,m){t&1&&(s(0,"th",30),l(1,"Version"),r())}function Uu(t,m){if(t&1&&(s(0,"td",31)(1,"div",32),l(2),r()()),t&2){let e=m.$implicit;a(),p("title",e.version),a(),R(" ",e.version," ")}}function zu(t,m){t&1&&(s(0,"th",30),l(1,"Created"),r())}function Hu(t,m){if(t&1&&(s(0,"td",31),l(1),r()),t&2){let e=m.$implicit,i=u();a(),R(" ",i.formatTimestamp(e)," ")}}function Wu(t,m){t&1&&(s(0,"th",30),l(1,"Comments"),r())}function Qu(t,m){if(t&1&&(s(0,"td",31)(1,"div",32),l(2),r()()),t&2){let e=m.$implicit;a(),p("title",e.comments),a(),R(" ",e.comments," ")}}function Ku(t,m){t&1&&v(0,"tr",33)}function Yu(t,m){if(t&1){let e=W();s(0,"tr",34),M("click",function(){let n=N(e).$implicit,d=u();return $(d.select(n))})("dblclick",function(){N(e);let n=u();return $(n.importFromRegistry())}),r()}if(t&2){let e=m.$implicit,i=m.even,n=u();Ht("selected",n.isSelected(e))("even",i)}}function Xu(t,m){t&1&&(s(0,"span"),l(1,"Import"),r())}function Ju(t,m){if(t&1){let e=W();s(0,"mat-dialog-actions",35)(1,"button",36),l(2,"Cancel"),r(),s(3,"button",37),M("click",function(){N(e);let n=u();return $(n.importFromRegistry())}),x(4,Xu,2,0,"span",38),r()()}if(t&2){let e=m.ngIf,i=u();a(3),p("disabled",i.importFromRegistryForm.invalid||e.value||!i.selectedFlowVersion),a(),p("nifiSpinner",e.value)}}var op=(()=>{class t extends Je{constructor(e,i,n,d,b,w){super(),this.dialogRequest=e,this.formBuilder=i,this.store=n,this.nifiCommon=d,this.client=b,this.clusterConnectionService=w,this.getBranches=()=>y([]),this.saving$=this.store.select(We),this.timeOffset=0,this.TextTip=_e,this.registryClientOptions=[],this.branchOptions=[],this.bucketOptions=[],this.flowOptions=[],this.flowLookup=new Map,this.supportsBranching=!1,this.clientBranchingSupportMap=new Map,this.sort={active:"created",direction:"desc"},this.displayedColumns=["version","created","comments"],this.dataSource=new Vo,this.selectedFlowVersion=null,this.ErrorContextKey=ee,this.store.select(Ni).pipe(Dt(),fo()).subscribe(U=>{this.timeOffset=U}),e.registryClients.slice().filter(U=>U.permissions.canRead).sort((U,ot)=>this.nifiCommon.compareString(U.component.name,ot.component.name)).forEach(U=>{U.permissions.canRead&&this.registryClientOptions.push({text:U.component.name,value:U.id,description:U.component.description}),this.clientBranchingSupportMap.set(U.id,U.component.supportsBranching)});let G=this.registryClientOptions.length>0?this.registryClientOptions[0].value:null;this.importFromRegistryForm=this.formBuilder.group({registry:new I(G,q.required),branch:new I(null),bucket:new I(null,q.required),flow:new I(null,q.required),keepParameterContexts:new I(!0,q.required)})}ngOnInit(){let e=this.importFromRegistryForm.get("registry")?.value;e&&(this.supportsBranching=this.clientBranchingSupportMap.get(e)||!1,this.supportsBranching?this.loadBranches(e):this.loadBuckets(e))}registryChanged(e){this.supportsBranching=this.clientBranchingSupportMap.get(e)||!1,this.supportsBranching?(this.clearBranches(),this.loadBranches(e)):(this.clearBuckets(),this.loadBuckets(e))}clearBranches(){this.branchOptions=[],this.importFromRegistryForm.get("branch")?.setValue(null),this.clearBuckets()}branchChanged(e){this.clearBuckets();let i=this.importFromRegistryForm.get("registry")?.value;this.loadBuckets(i,e)}clearBuckets(){this.bucketOptions=[],this.importFromRegistryForm.get("bucket")?.setValue(null),this.clearFlows()}bucketChanged(e){this.clearFlows();let i=this.importFromRegistryForm.get("registry")?.value,n=this.importFromRegistryForm.get("branch")?.value;this.loadFlows(i,e,n)}clearFlows(){this.importFromRegistryForm.get("flow")?.setValue(null),this.flowOptions=[],this.dataSource.data=[],this.selectedFlowVersion=null}flowChanged(e){let i=this.importFromRegistryForm.get("registry")?.value,n=this.importFromRegistryForm.get("bucket")?.value,d=this.importFromRegistryForm.get("branch")?.value;this.loadVersions(i,n,e,d)}loadBranches(e){e&&(this.branchOptions=[],this.getBranches(e).pipe(te(1)).subscribe(i=>{if(i.length>0){i.forEach(d=>{this.branchOptions.push({text:d.branch.name,value:d.branch.name})});let n=this.branchOptions[0].value;n&&(this.importFromRegistryForm.get("branch")?.setValue(n),this.loadBuckets(e,n))}}))}loadBuckets(e,i){this.bucketOptions=[],this.getBuckets(e,i).pipe(te(1)).subscribe(n=>{if(n.length>0){n.forEach(b=>{b.permissions.canRead&&this.bucketOptions.push({text:b.bucket.name,value:b.id,description:b.bucket.description})});let d=this.bucketOptions[0].value;d&&(this.importFromRegistryForm.get("bucket")?.setValue(d),this.loadFlows(e,d,i))}})}loadFlows(e,i,n){this.flowOptions=[],this.flowLookup.clear(),this.getFlows(e,i,n).pipe(te(1)).subscribe(d=>{if(d.length>0){d.forEach(w=>{this.flowLookup.set(w.versionedFlow.flowId,w.versionedFlow),this.flowOptions.push({text:w.versionedFlow.flowName,value:w.versionedFlow.flowId,description:w.versionedFlow.description})});let b=this.flowOptions[0].value;b&&(this.importFromRegistryForm.get("flow")?.setValue(b),this.loadVersions(e,i,b,n))}})}loadVersions(e,i,n,d){this.dataSource.data=[],this.selectedFlowVersion=null,this.selectedFlowDescription=this.flowLookup.get(n)?.description,this.getFlowVersions(e,i,n,d).pipe(te(1)).subscribe(b=>{if(b.length>0){let w=b.map(G=>G.versionedFlowSnapshotMetadata),H=this.sortVersions(w,this.sort);this.selectedFlowVersion=H[0].version,this.dataSource.data=H}})}formatTimestamp(e){let n=new Date().getTimezoneOffset()*60*1e3,d=new Date(e.timestamp+n+this.timeOffset);return this.nifiCommon.formatDateTime(d)}sortData(e){this.sort=e,this.dataSource.data=this.sortVersions(this.dataSource.data,e)}sortVersions(e,i){return e?e.slice().sort((n,d)=>{let b=i.direction==="asc",w=0;switch(i.active){case"version":w=this.compareVersion(n.version,d.version);break;case"created":w=this.nifiCommon.compareNumber(n.timestamp,d.timestamp);break;case"comments":w=this.nifiCommon.compareString(n.comments,d.comments);break}return w*(b?1:-1)}):[]}compareVersion(e,i){return this.nifiCommon.isNumber(e)&&this.nifiCommon.isNumber(i)?this.nifiCommon.compareNumber(parseInt(e,10),parseInt(i,10)):this.nifiCommon.compareString(e,i)}select(e){this.selectedFlowVersion=e.version}isSelected(e){return this.selectedFlowVersion?e.version==this.selectedFlowVersion:!1}importFromRegistry(){if(this.selectedFlowVersion!=null){let e={revision:this.client.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{position:{x:this.dialogRequest.request.position.x,y:this.dialogRequest.request.position.y},versionControlInformation:{registryId:this.importFromRegistryForm.get("registry")?.value,bucketId:this.importFromRegistryForm.get("bucket")?.value,flowId:this.importFromRegistryForm.get("flow")?.value,version:this.selectedFlowVersion}}};this.supportsBranching&&(e.component.versionControlInformation.branch=this.importFromRegistryForm.get("branch")?.value),this.store.dispatch(cn({request:{payload:e,keepExistingParameterContext:this.importFromRegistryForm.get("keepParameterContexts")?.value}}))}}isDirty(){return this.importFromRegistryForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(we),D(je),D(dt))}}static{this.\u0275cmp=z({type:t,selectors:[["import-from-registry"]],inputs:{getBranches:"getBranches",getBuckets:"getBuckets",getFlows:"getFlows",getFlowVersions:"getFlowVersions"},features:[Fe],decls:50,vars:21,consts:[["noDescription",""],["mat-dialog-title",""],[1,"import-from-registry-form",3,"formGroup"],[3,"context"],[1,"dialog-content","flex","flex-col","h-full","gap-y-2"],["formControlName","registry",3,"selectionChange"],[4,"ngFor","ngForOf"],["formControlName","bucket",3,"selectionChange"],[4,"ngIf"],["formControlName","flow",3,"selectionChange"],[1,"mb-5"],["formControlName","keepParameterContexts"],["nifiTooltip","","tooltipInputData","When not selected, only directly associated Parameter Contexts will be copied, inherited Contexts with no direct assignment to a Process Group are ignored.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"flex","flex-col","mb-5"],[1,"tertiary-color","font-medium"],[1,"listing-table","flex-1","relative","min-h-48"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","version"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","comments"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"selected","even","click","dblclick",4,"matRowDef","matRowDefColumns"],["align","end",4,"ngIf"],[4,"ngIf","ngIfElse"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[3,"value"],["formControlName","branch",3,"selectionChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"title"],["mat-header-row",""],["mat-row","",3,"click","dblclick"],["align","end"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){i&1&&(s(0,"h2",1),l(1,"Import From Registry"),r(),s(2,"form",2),v(3,"context-error-banner",3),s(4,"mat-dialog-content")(5,"div",4)(6,"div")(7,"mat-form-field")(8,"mat-label"),l(9,"Registry"),r(),s(10,"mat-select",5),M("selectionChange",function(b){return n.registryChanged(b.value)}),x(11,Mu,4,2,"ng-container",6),r()(),x(12,Gu,6,2,"mat-form-field"),s(13,"mat-form-field")(14,"mat-label"),l(15,"Bucket"),r(),s(16,"mat-select",7),M("selectionChange",function(b){return n.bucketChanged(b.value)}),x(17,Nu,4,2,"ng-container",6),r(),x(18,$u,2,0,"mat-error",8),r(),s(19,"mat-form-field")(20,"mat-label"),l(21,"Flow"),r(),s(22,"mat-select",9),M("selectionChange",function(b){return n.flowChanged(b.value)}),x(23,Lu,4,2,"ng-container",6),r(),x(24,qu,2,0,"mat-error",8),r(),s(25,"div",10)(26,"mat-checkbox",11),l(27," Keep existing Parameter Contexts "),v(28,"i",12),r()(),s(29,"div",13)(30,"div"),l(31,"Flow Description"),r(),s(32,"div",14),l(33),r()()(),s(34,"div",15)(35,"div",16)(36,"table",17),M("matSortChange",function(b){return n.sortData(b)}),Ye(37,18),x(38,ju,2,0,"th",19)(39,Uu,3,2,"td",20),Xe(),Ye(40,21),x(41,zu,2,0,"th",19)(42,Hu,2,1,"td",20),Xe(),Ye(43,22),x(44,Wu,2,0,"th",19)(45,Qu,3,2,"td",20),Xe(),x(46,Ku,1,0,"tr",23)(47,Yu,1,4,"tr",24),r()()()()(),x(48,Ju,5,2,"mat-dialog-actions",25),X(49,"async"),r()),i&2&&(a(2),p("formGroup",n.importFromRegistryForm),a(),p("context",n.ErrorContextKey.REGISTRY_IMPORT),a(8),p("ngForOf",n.registryClientOptions),a(),T(n.supportsBranching?12:-1),a(5),p("ngForOf",n.bucketOptions),a(),p("ngIf",n.importFromRegistryForm.controls.bucket.hasError("required")),a(5),p("ngForOf",n.flowOptions),a(),p("ngIf",n.importFromRegistryForm.controls.flow.hasError("required")),a(4),p("tooltipComponentType",n.TextTip),a(5),R(" ",n.selectedFlowDescription||"No description provided"," "),a(3),p("dataSource",n.dataSource)("matSortActive",n.sort.active)("matSortDirection",n.sort.direction),a(10),p("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),a(),p("matRowDefColumns",n.displayedColumns),a(),p("ngIf",Be(19,Eu,Z(49,17,n.saving$))))},dependencies:[ke,Ne,Ce,ge,de,ue,he,fe,et,pe,ce,qt,Le,Ei,Ue,xe,Ie,ne,De,Me,Re,qe,Se,$e,be,Fi,ye,to,Ze,Lt,jo,Lo,qo,ho,Do,Mo,Oo,Ro,Io,ko,Ao,Go,No,$o,tt],styles:[".import-from-registry-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.import-from-registry-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.import-from-registry-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.import-from-registry-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.import-from-registry-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.import-from-registry-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.import-from-registry-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.import-from-registry-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.import-from-registry-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.import-from-registry-form[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-version[_ngcontent-%COMP%]{width:150px}.import-from-registry-form[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-created[_ngcontent-%COMP%]{width:180px}"]})}}return t})();var Zu=()=>["/settings","registry-clients"];function ef(t,m){t&1&&(s(0,"button",4),l(1,"Cancel"),r(),s(2,"button",5),l(3,"Configure"),r()),t&2&&(a(2),p("routerLink",qs(1,Zu)))}function tf(t,m){t&1&&(s(0,"button",3),l(1,"Ok"),r())}var ip=(()=>{class t{constructor(e){this.request=e}static{this.\u0275fac=function(i){return new(i||t)(D(me))}}static{this.\u0275cmp=z({type:t,selectors:[["no-registry-clients-dialog"]],decls:8,vars:2,consts:[["mat-dialog-title",""],[1,"text-base"],["align","end"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["mat-flat-button","","mat-dialog-close","",3,"routerLink"]],template:function(i,n){i&1&&(s(0,"h2",0),l(1,"No Registry clients available"),r(),s(2,"mat-dialog-content")(3,"div",1),l(4),r()(),s(5,"mat-dialog-actions",2),x(6,ef,4,2)(7,tf,2,0,"button",3),r()),i&2&&(a(4),R(" ",n.request.controllerPermissions.canRead?"In order to import a flow a Registry Client must be configured in Controller Settings.":"Cannot import a Flow because there are no available Registry Clients."," "),a(2),T(n.request.controllerPermissions.canRead?6:7))},dependencies:[ge,de,ue,he,fe,Ne,Ce,Hs],styles:["mat-dialog-actions[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}mat-dialog-actions[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}mat-dialog-actions[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}mat-dialog-actions[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}mat-dialog-actions[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}mat-dialog-actions[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}mat-dialog-actions[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}mat-dialog-actions[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}"]})}}return t})();var of=t=>({value:t});function nf(t,m){t&1&&(s(0,"button",29),l(1,"Close"),r())}function rf(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function sf(t,m){if(t&1){let e=W();s(0,"button",30),l(1,"Cancel"),r(),s(2,"button",31),M("click",function(){N(e);let n=u(2);return $(n.submitForm())}),x(3,rf,2,0,"span",32),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editRemoteProcessGroupForm.dirty||i.editRemoteProcessGroupForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function af(t,m){if(t&1&&(s(0,"mat-dialog-actions",28),x(1,nf,2,0,"button",29)(2,sf,4,2),r()),t&2){let e=u();a(),T(e.readonly?1:2)}}var np=(()=>{class t extends Je{constructor(e,i,n,d){super(),this.request=e,this.formBuilder=i,this.canvasUtils=n,this.client=d,this.editRemoteProcessGroup=new Ke,this.TextTip=_e,this.ErrorContextKey=ee,this.readonly=!e.entity.permissions.canWrite||!this.canvasUtils.remoteProcessGroupSupportsModification(e.entity),this.editRemoteProcessGroupForm=this.formBuilder.group({urls:new I(e.entity.component.targetUris,q.required),transportProtocol:new I(e.entity.component.transportProtocol,q.required),localNetworkInterface:new I(e.entity.component.localNetworkInterface),httpProxyServerHostname:new I(e.entity.component.httpProxyServerHostname),httpProxyServerPort:new I(e.entity.component.httpProxyServerPort),httpProxyUser:new I(e.entity.component.httpProxyUser),httpProxyPassword:new I(e.entity.component.httpProxyPassword),communicationsTimeout:new I(e.entity.component.communicationsTimeout,q.required),yieldDuration:new I(e.entity.component.yieldDuration,q.required)})}submitForm(){let e={revision:this.client.getRevision(this.request.entity),component:{id:this.request.entity.id,targetUris:this.editRemoteProcessGroupForm.get("urls")?.value,transportProtocol:this.editRemoteProcessGroupForm.get("transportProtocol")?.value,localNetworkInterface:this.editRemoteProcessGroupForm.get("localNetworkInterface")?.value,proxyHost:this.editRemoteProcessGroupForm.get("httpProxyServerHostname")?.value,proxyPort:this.editRemoteProcessGroupForm.get("httpProxyServerPort")?.value,proxyUser:this.editRemoteProcessGroupForm.get("httpProxyUser")?.value,proxyPassword:this.editRemoteProcessGroupForm.get("httpProxyPassword")?.value,communicationsTimeout:this.editRemoteProcessGroupForm.get("communicationsTimeout")?.value,yieldDuration:this.editRemoteProcessGroupForm.get("yieldDuration")?.value}};this.editRemoteProcessGroup.next(e)}isDirty(){return this.editRemoteProcessGroupForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(wt),D(je))}}static{this.\u0275cmp=z({type:t,selectors:[["ng-component"]],inputs:{saving$:"saving$"},outputs:{editRemoteProcessGroup:"editRemoteProcessGroup"},features:[Fe],decls:80,vars:30,consts:[["mat-dialog-title",""],[1,"edit-remote-process-group-form",3,"formGroup"],[3,"context"],[1,"flex","flex-col","mb-4"],[1,"tertiary-color","font-medium"],[1,"tertiary-color","font-medium",3,"copy"],[1,"flex","gap-x-4"],[1,"w-full"],["nifiTooltip","","tooltipInputData","Specify the remote target NiFi URLs. Multiple URLs can be specified in comma-separated format. Different protocols cannot be mixed. If remote NiFi is a cluster, two or more node URLs are recommended for better connection establishment availability.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","urls","type","text","placeholder","https://remotehost:8443/nifi",3,"readonly"],["nifiTooltip","","tooltipInputData","Specify the transport protocol to use for this Remote Process Group communication.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["formControlName","transportProtocol"],["value","RAW",3,"disabled"],["value","HTTP",3,"disabled"],["nifiTooltip","","tooltipInputData","The local network interface to send/receive data. If not specified, any local address is used. If clustered, all nodes must have an interface with this identifier.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","localNetworkInterface","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Specify the proxy server's hostname to use. If not specified, HTTP traffics are sent directly to the target NiFi instance.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyServerHostname","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Specify the proxy server's port number, optional. If not specified, default port 80 will be used.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyServerPort","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Specify an user name to connect to the proxy server, optional.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyUser","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","Specify an user password to connect to the proxy server, optional.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","httpProxyPassword","type","password",3,"readonly"],["nifiTooltip","","tooltipInputData","When communication with this remote process group takes longer than this amount of time, it will timeout.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","communicationsTimeout","type","text",3,"readonly"],["nifiTooltip","","tooltipInputData","When communication with this remote process group fails, it will not be scheduled again until this amount of time elapses.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","yieldDuration","type","text",3,"readonly"],["align","end"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-dialog-content")(5,"div",3)(6,"div"),l(7,"Name"),r(),s(8,"div",4),l(9),r()(),s(10,"div",3)(11,"div"),l(12,"Id"),r(),s(13,"div",5),l(14),r()(),s(15,"div",6)(16,"div",7)(17,"mat-form-field")(18,"mat-label"),l(19," URLs "),v(20,"i",8),r(),v(21,"input",9),r()()(),s(22,"div",6)(23,"div",7)(24,"mat-form-field")(25,"mat-label"),l(26," Transport Protocol "),v(27,"i",10),r(),s(28,"mat-select",11)(29,"mat-option",12),l(30," RAW"),r(),s(31,"mat-option",13),l(32," HTTP"),r()()()(),s(33,"div",7)(34,"mat-form-field")(35,"mat-label"),l(36," Local Network Interface "),v(37,"i",14),r(),v(38,"input",15),r()()(),s(39,"div",6)(40,"div",7)(41,"mat-form-field")(42,"mat-label"),l(43," HTTP Proxy Server Hostname "),v(44,"i",16),r(),v(45,"input",17),r()(),s(46,"div",7)(47,"mat-form-field")(48,"mat-label"),l(49," HTTP Proxy Server Port "),v(50,"i",18),r(),v(51,"input",19),r()()(),s(52,"div",6)(53,"div",7)(54,"mat-form-field")(55,"mat-label"),l(56," HTTP Proxy User "),v(57,"i",20),r(),v(58,"input",21),r()(),s(59,"div",7)(60,"mat-form-field")(61,"mat-label"),l(62," HTTP Proxy Password "),v(63,"i",22),r(),v(64,"input",23),r()()(),s(65,"div",6)(66,"div",7)(67,"mat-form-field")(68,"mat-label"),l(69," Communications Timeout "),v(70,"i",24),r(),v(71,"input",25),r()(),s(72,"div",7)(73,"mat-form-field")(74,"mat-label"),l(75," Yield Duration "),v(76,"i",26),r(),v(77,"input",27),r()()()(),x(78,af,3,1,"mat-dialog-actions",28),X(79,"async"),r()),i&2){let d;a(),Q(n.readonly?"Remote Process Group Details":"Edit Remote Process Group"),a(),p("formGroup",n.editRemoteProcessGroupForm),a(),p("context",n.ErrorContextKey.REMOTE_PROCESS_GROUP),a(6),Q(n.request.entity.component.name),a(4),p("copy",n.request.entity.component.id),a(),R(" ",n.request.entity.component.id," "),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(6),p("tooltipComponentType",n.TextTip),a(2),p("disabled",n.readonly),a(2),p("disabled",n.readonly),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(6),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(5),p("tooltipComponentType",n.TextTip),a(),p("readonly",n.readonly),a(),T((d=Be(28,of,Z(79,26,n.saving$)))?78:-1,d)}},dependencies:[xe,Ie,Ee,ne,De,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,Ze,Ne,Ce,qe,Se,$e,be,ke,Ue,mt,ye,tt,Eo],styles:[".edit-remote-process-group-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.edit-remote-process-group-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.edit-remote-process-group-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();function lf(t,m){if(t&1&&(s(0,"div")(1,"div"),l(2,"Branch"),r(),s(3,"div",10),l(4),r()()),t&2){let e=u(2);a(4),Q(e.versionControlInformation.branch)}}function cf(t,m){t&1&&(s(0,"div",11),l(1,"No value set"),r())}function pf(t,m){if(t&1&&(s(0,"div",10),l(1),r()),t&2){let e=u(2);a(),Q(e.versionControlInformation.flowDescription)}}function mf(t,m){if(t&1&&(s(0,"div",4)(1,"div")(2,"div"),l(3,"Registry"),r(),s(4,"div",10),l(5),r()(),x(6,lf,5,1,"div"),s(7,"div")(8,"div"),l(9,"Bucket"),r(),s(10,"div",10),l(11),r()(),s(12,"div")(13,"div")(14,"div"),l(15,"Flow Name"),r(),s(16,"div",10),l(17),r()()(),s(18,"div")(19,"div"),l(20,"Flow Description"),r(),x(21,cf,2,0,"div",11)(22,pf,2,1,"div",10),r()()),t&2){let e=u();a(5),Q(e.versionControlInformation.registryName),a(),T(e.versionControlInformation.branch?6:-1),a(5),Q(e.versionControlInformation.bucketName),a(6),Q(e.versionControlInformation.flowName),a(4),T(e.versionControlInformation.flowDescription?22:21)}}function df(t,m){if(t&1&&(s(0,"mat-option",19),l(1),r()),t&2){let e=u().$implicit,i=u(2);p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R("",e.text," ")}}function uf(t,m){if(t&1&&(s(0,"mat-option",20),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function ff(t,m){if(t&1&&x(0,df,2,5,"mat-option",19)(1,uf,2,2,"mat-option",20),t&2){let e=m.$implicit;T(e.description?0:1)}}function hf(t,m){if(t&1&&(Ye(0),s(1,"mat-option",20),l(2),r(),Xe()),t&2){let e=m.$implicit;a(),p("value",e.value),a(),Q(e.text)}}function gf(t,m){t&1&&(s(0,"mat-error"),l(1,"No branches available"),r())}function Cf(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"Branch"),r(),s(3,"mat-select",21),M("selectionChange",function(n){N(e);let d=u(2);return $(d.branchChanged(n.value))}),x(4,hf,3,2,"ng-container",14),r(),x(5,gf,2,0,"mat-error"),r()}if(t&2){let e=u(2);a(4),p("ngForOf",e.branchOptions),a(),T(e.saveVersionForm.controls.branch.hasError("required")?5:-1)}}function vf(t,m){if(t&1&&(Ye(0),s(1,"mat-option",19),l(2),r(),Xe()),t&2){let e=u().$implicit,i=u(2);a(),p("value",e.value)("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)("delayClose",!1),a(),R("",e.text," ")}}function yf(t,m){if(t&1&&(s(0,"mat-option",20),l(1),r()),t&2){let e=u().$implicit;p("value",e.value),a(),Q(e.text)}}function _f(t,m){if(t&1&&(Ye(0),x(1,vf,3,5,"ng-container",22)(2,yf,2,2,"ng-template",null,0,po),Xe()),t&2){let e=m.$implicit,i=pt(3);a(),p("ngIf",e.description)("ngIfElse",i)}}function xf(t,m){t&1&&(s(0,"mat-error"),l(1,"No buckets available"),r())}function Sf(t,m){if(t&1){let e=W();s(0,"mat-form-field")(1,"mat-label"),l(2,"Registry"),r(),s(3,"mat-select",12),M("selectionChange",function(n){N(e);let d=u();return $(d.registryChanged(n.value))}),ae(4,ff,2,1,null,null,ve),r()(),x(6,Cf,6,2,"mat-form-field"),s(7,"mat-form-field")(8,"mat-label"),l(9,"Bucket"),r(),s(10,"mat-select",13),x(11,_f,4,2,"ng-container",14),r(),x(12,xf,2,0,"mat-error"),r(),s(13,"div",15)(14,"mat-form-field",16)(15,"mat-label"),l(16,"Flow Name"),r(),v(17,"input",17),r()(),s(18,"mat-form-field")(19,"mat-label"),l(20,"Flow Description"),r(),v(21,"textarea",18),r()}if(t&2){let e=u();a(4),le(e.registryClientOptions),a(2),T(e.supportsBranching?6:-1),a(5),p("ngForOf",e.bucketOptions),a(),T(e.saveVersionForm.controls.bucket.hasError("required")?12:-1)}}function bf(t,m){t&1&&(s(0,"span"),l(1,"Save"),r())}var rp=(()=>{class t extends Je{constructor(e,i,n){if(super(),this.dialogRequest=e,this.formBuilder=i,this.nifiCommon=n,this.getBranches=()=>y([]),this.getBuckets=()=>y([]),this.save=new Ke,this.registryClientOptions=[],this.branchOptions=[],this.bucketOptions=[],this.forceCommit=!1,this.supportsBranching=!1,this.clientBranchingSupportMap=new Map,this.TextTip=_e,this.ErrorContextKey=ee,this.versionControlInformation=e.versionControlInformation,this.forceCommit=!!e.forceCommit,e.registryClients){e.registryClients.slice().filter(w=>w.permissions.canRead).sort((w,H)=>this.nifiCommon.compareString(w.component.name,H.component.name)).forEach(w=>{w.permissions.canRead&&this.registryClientOptions.push({text:w.component.name,value:w.id,description:w.component.description}),this.clientBranchingSupportMap.set(w.id,w.component.supportsBranching)});let b=this.registryClientOptions.length>0?this.registryClientOptions[0].value:null;this.saveVersionForm=i.group({registry:new I(b,q.required),branch:new I(null),bucket:new I(null,q.required),flowName:new I(null,q.required),flowDescription:new I(null),comments:new I(null)})}else this.saveVersionForm=i.group({comments:new I("")})}ngOnInit(){if(this.dialogRequest.registryClients){let e=this.saveVersionForm.get("registry")?.value;e&&(this.supportsBranching=this.clientBranchingSupportMap.get(e)||!1,this.supportsBranching?this.loadBranches(e):this.loadBuckets(e))}}clearBranches(){this.branchOptions=[],this.saveVersionForm.get("branch")?.setValue(null),this.clearBuckets()}loadBranches(e){this.clearBranches(),this.getBranches(e).pipe(te(1)).subscribe(i=>{if(i.length>0){i.forEach(d=>{this.branchOptions.push({text:d.branch.name,value:d.branch.name})});let n=this.branchOptions[0].value;n&&(this.saveVersionForm.get("branch")?.setValue(n),this.loadBuckets(e,n))}})}clearBuckets(){this.bucketOptions=[],this.saveVersionForm.get("bucket")?.setValue(null)}loadBuckets(e,i){this.clearBuckets(),this.getBuckets(e,i).pipe(te(1)).subscribe(n=>{if(n.length>0){n.forEach(b=>{b.permissions.canRead&&b.permissions.canWrite&&this.bucketOptions.push({text:b.bucket.name,value:b.id,description:b.bucket.description})});let d=this.bucketOptions[0].value;d&&this.saveVersionForm.get("bucket")?.setValue(d)}})}registryChanged(e){this.supportsBranching=this.clientBranchingSupportMap.get(e)||!1,this.supportsBranching?this.loadBranches(e):this.loadBuckets(e)}branchChanged(e){let i=this.saveVersionForm.get("registry")?.value;i&&this.loadBuckets(i,e)}submitForm(){let e,i=this.versionControlInformation;i?e={existingFlowId:i.flowId,processGroupId:this.dialogRequest.processGroupId,revision:this.dialogRequest.revision,registry:i.registryId,bucket:i.bucketId,comments:this.saveVersionForm.get("comments")?.value,flowDescription:i.flowDescription,flowName:i.flowName,branch:i.branch}:(e={processGroupId:this.dialogRequest.processGroupId,revision:this.dialogRequest.revision,registry:this.saveVersionForm.get("registry")?.value,bucket:this.saveVersionForm.get("bucket")?.value,comments:this.saveVersionForm.get("comments")?.value,flowDescription:this.saveVersionForm.get("flowDescription")?.value,flowName:this.saveVersionForm.get("flowName")?.value},this.supportsBranching&&(e.branch=this.saveVersionForm.get("branch")?.value)),this.save.next(e)}isDirty(){return this.saveVersionForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["save-version-dialog"]],inputs:{getBranches:"getBranches",getBuckets:"getBuckets",saving:"saving"},outputs:{save:"save"},features:[Fe],decls:16,vars:5,consts:[["noDescription",""],["mat-dialog-title",""],[1,"save-version-form",3,"formGroup"],[3,"context"],[1,"flex","flex-col","gap-y-4","mb-6"],["matInput","","formControlName","comments","type","text"],["align","end"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"],[1,"tertiary-color","font-medium"],[1,"unset","neutral-color"],["formControlName","registry",3,"selectionChange"],["formControlName","bucket"],[4,"ngFor","ngForOf"],[1,"w-full"],[1,"flex-1"],["matInput","","formControlName","flowName","type","text"],["matInput","","formControlName","flowDescription","type","text"],["nifiTooltip","",3,"value","tooltipComponentType","tooltipInputData","delayClose"],[3,"value"],["formControlName","branch",3,"selectionChange"],[4,"ngIf","ngIfElse"]],template:function(i,n){i&1&&(s(0,"h2",1),l(1,"Save Flow Version"),r(),s(2,"form",2),v(3,"context-error-banner",3),s(4,"mat-dialog-content"),x(5,mf,23,5,"div",4)(6,Sf,22,3),s(7,"mat-form-field")(8,"mat-label"),l(9,"Version Comments"),r(),v(10,"textarea",5),r()(),s(11,"mat-dialog-actions",6)(12,"button",7),l(13,"Cancel"),r(),s(14,"button",8),M("click",function(){return n.submitForm()}),x(15,bf,2,0,"span",9),r()()()),i&2&&(a(2),p("formGroup",n.saveVersionForm),a(),p("context",n.ErrorContextKey.FLOW_VERSION),a(2),T(n.versionControlInformation?5:6),a(9),p("disabled",n.saveVersionForm.invalid||n.saving()),a(),p("nifiSpinner",n.saving()))},dependencies:[ue,xe,Ie,Ee,ne,De,Me,Re,fe,he,Ce,de,Ue,pe,be,Se,ye,qt,ce,Fi,Ei,Ge,tt],styles:[`.save-version-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.save-version-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.save-version-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.save-version-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.save-version-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.save-version-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.save-version-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.save-version-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.save-version-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}
















`]})}}return t})();function Pf(t,m){if(t&1&&(s(0,"div"),l(1,"Branch"),r(),s(2,"div",6),l(3),r()),t&2){let e=u();a(2),p("title",e.versionControlInformation.branch),a(),R(" ",e.versionControlInformation.branch," ")}}function wf(t,m){t&1&&(s(0,"th",22),l(1,"Version"),r())}function Tf(t,m){if(t&1&&(s(0,"td",23)(1,"div",24),l(2),r()()),t&2){let e=m.$implicit;a(),p("title",e.version),a(),R(" ",e.version," ")}}function Ff(t,m){t&1&&(s(0,"th",22),l(1,"Created"),r())}function Ef(t,m){if(t&1&&(s(0,"td",23),l(1),r()),t&2){let e=m.$implicit,i=u();a(),Q(i.formatTimestamp(e))}}function Df(t,m){t&1&&(s(0,"th",22),l(1,"Comments"),r())}function If(t,m){if(t&1&&(s(0,"td",23)(1,"div",24),l(2),r()()),t&2){let e=m.$implicit;a(),p("title",e.comments),a(),R(" ",e.comments," ")}}function Mf(t,m){t&1&&v(0,"tr",25)}function Rf(t,m){if(t&1){let e=W();s(0,"tr",26),M("click",function(){let n=N(e).$implicit,d=u();return $(d.select(n))})("dblclick",function(){N(e);let n=u();return $(n.changeFlowVersion())}),r()}if(t&2){let e=m.$implicit,i=m.even,n=u();Ht("selected",n.isSelected(e))("even",i)}}var sp=(()=>{class t extends Je{constructor(e,i,n){super(),this.dialogRequest=e,this.nifiCommon=i,this.store=n,this.displayedColumns=["version","created","comments"],this.dataSource=new Vo,this.selectedFlowVersion=null,this.sort={active:"created",direction:"desc"},this.timeOffset=this.store.selectSignal(Ni),this.changeVersion=new Ke;let d=e.versions.map(w=>w.versionedFlowSnapshotMetadata),b=this.sortVersions(d,this.sort);this.selectedFlowVersion=b[0],this.dataSource.data=b,this.versionControlInformation=e.versionControlInformation}sortData(e){this.sort=e,this.dataSource.data=this.sortVersions(this.dataSource.data,e)}sortVersions(e,i){return e?e.slice().sort((n,d)=>{let b=i.direction==="asc",w=0;switch(i.active){case"version":w=this.compareVersion(n.version,d.version);break;case"created":w=this.nifiCommon.compareNumber(n.timestamp,d.timestamp);break;case"comments":w=this.nifiCommon.compareString(n.comments,d.comments);break}return w*(b?1:-1)}):[]}compareVersion(e,i){return this.nifiCommon.isNumber(e)&&this.nifiCommon.isNumber(i)?this.nifiCommon.compareNumber(parseInt(e,10),parseInt(i,10)):this.nifiCommon.compareString(e,i)}select(e){this.selectedFlowVersion=e}isSelected(e){return this.selectedFlowVersion?e.version===this.selectedFlowVersion.version:!1}getTimezoneOffset(){return this.timeOffset()||0}formatTimestamp(e){let n=new Date().getTimezoneOffset()*60*1e3,d=new Date(e.timestamp+n+this.getTimezoneOffset());return this.nifiCommon.formatDateTime(d)}changeFlowVersion(){this.selectedFlowVersion!=null&&this.changeVersion.next(this.selectedFlowVersion)}isSelectionValid(){return this.selectedFlowVersion?this.selectedFlowVersion.version!==this.versionControlInformation.version:!1}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(we),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["change-version-dialog"]],outputs:{changeVersion:"changeVersion"},features:[Fe],decls:51,vars:16,consts:[["mat-dialog-title",""],[1,"font-light"],[1,"change-version"],[1,"dialog-content","flex","flex-col","gap-y-4","w-full"],[1,"flex","flex-row","w-full"],[1,"w-1/2","pr-2","flex","flex-col","gap-y-4"],[1,"tertiary-color","font-medium","overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"title"],[1,"w-1/2","pl-2","flex","flex-col","gap-y-4"],[1,"tertiary-color","font-medium","break-words"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","version"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","comments"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"selected","even","click","dblclick",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"overflow-ellipsis","overflow-hidden","whitespace-nowrap",3,"title"],["mat-header-row",""],["mat-row","",3,"click","dblclick"]],template:function(i,n){i&1&&(s(0,"h2",0),l(1," Change Version "),s(2,"span",1),l(3),r()(),s(4,"div",2)(5,"mat-dialog-content")(6,"div",3)(7,"div",4)(8,"div",5)(9,"div")(10,"div"),l(11,"Registry"),r(),s(12,"div",6),l(13),r()(),s(14,"div")(15,"div"),l(16,"Bucket"),r(),s(17,"div",6),l(18),r()()(),s(19,"div",7)(20,"div"),x(21,Pf,4,2),r(),s(22,"div")(23,"div"),l(24,"Flow Name"),r(),s(25,"div",6),l(26),r()()()(),s(27,"div")(28,"div"),l(29,"Flow Description"),r(),s(30,"div",8),l(31),r()(),s(32,"div",9)(33,"div",10)(34,"table",11),M("matSortChange",function(b){return n.sortData(b)}),Ye(35,12),x(36,wf,2,0,"th",13)(37,Tf,3,2,"td",14),Xe(),Ye(38,15),x(39,Ff,2,0,"th",13)(40,Ef,2,1,"td",14),Xe(),Ye(41,16),x(42,Df,2,0,"th",13)(43,If,3,2,"td",14),Xe(),x(44,Mf,1,0,"tr",17)(45,Rf,1,4,"tr",18),r()()()()(),s(46,"mat-dialog-actions",19)(47,"button",20),l(48,"Cancel"),r(),s(49,"button",21),M("click",function(){return n.changeFlowVersion()}),l(50," Change "),r()()()),i&2&&(a(3),R("(",n.versionControlInformation.version,")"),a(9),p("title",n.versionControlInformation.registryName),a(),R(" ",n.versionControlInformation.registryName," "),a(4),p("title",n.versionControlInformation.bucketName),a(),R(" ",n.versionControlInformation.bucketName," "),a(3),T(n.versionControlInformation.branch?21:-1),a(4),p("title",n.versionControlInformation.flowName),a(),R(" ",n.versionControlInformation.flowName," "),a(5),R(" ",n.versionControlInformation.flowDescription||"No description provided"," "),a(3),p("dataSource",n.dataSource)("matSortActive",n.sort.active)("matSortDirection",n.sort.direction),a(10),p("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),a(),p("matRowDefColumns",n.displayedColumns),a(4),p("disabled",!n.isSelectionValid()))},dependencies:[Ce,Go,Io,Ro,ge,de,ue,he,fe,jo,Lo,qo,ho,Do,Mo,Oo,ko,Ao,No,$o],styles:[`.change-version[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.change-version[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.change-version[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.change-version[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.change-version[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.change-version[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.change-version[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.change-version[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.change-version[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-version[_ngcontent-%COMP%], .change-version[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-created[_ngcontent-%COMP%]{width:180px}
















`]})}}return t})();var Af=t=>[t];function Gf(t,m){if(t&1&&v(0,"error-banner",5),t&2){let e=u();p("messages",Be(3,Af,e.request.failureReason))("showErrorIcon",!0)("allowDismiss",!1)}}function Of(t,m){if(t&1&&x(0,Gf,1,5,"error-banner",5),t&2){let e=m;T(e.request.complete&&e.request.failureReason?0:-1)}}function kf(t,m){t&1&&l(0," There was an error changing versions. ")}function Nf(t,m){t&1&&l(0," This Process Group version has changed. ")}function $f(t,m){if(t&1&&l(0),t&2){let e=u();R(" ",e.request.state," ")}}function Vf(t,m){if(t&1&&(s(0,"div",6),x(1,kf,1,0)(2,Nf,1,0)(3,$f,1,1),r(),s(4,"div",7),v(5,"mat-progress-bar",8),s(6,"div",6),l(7),r()()),t&2){let e=m;a(),T(e.request.complete&&e.request.failureReason?1:e.request.complete?2:3),a(4),p("value",e.request.percentCompleted),a(2),R("",e.request.percentCompleted,"%")}}function Bf(t,m){if(t&1){let e=W();s(0,"button",9),M("click",function(){let n=N(e),d=u();return $(d.close(n))}),l(1," Close "),r()}if(t&2){let e=m;p("disabled",!(!(e==null||e.request==null)&&e.request.complete))}}var Ms=(()=>{class t{constructor(){this.flowUpdateRequest$=y(null),this.changeVersionComplete=new Ke}close(e){this.changeVersionComplete.next(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=z({type:t,selectors:[["change-version-progress-dialog"]],inputs:{flowUpdateRequest$:"flowUpdateRequest$"},outputs:{changeVersionComplete:"changeVersionComplete"},decls:12,vars:9,consts:[["mat-dialog-title",""],[1,"change-version-progress"],[1,"flex","flex-col","gap-y-4"],["align","end"],["mat-flat-button","","mat-dialog-close","",3,"disabled"],[3,"messages","showErrorIcon","allowDismiss"],[1,"tertiary-color","font-medium"],[1,"w-full","flex","flex-col","items-center"],["mode","determinate",3,"value"],["mat-flat-button","","mat-dialog-close","",3,"click","disabled"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1,"Change Flow Version"),r(),x(2,Of,1,1),X(3,"async"),s(4,"div",1)(5,"mat-dialog-content")(6,"div",2),x(7,Vf,8,3),X(8,"async"),r()(),s(9,"mat-dialog-actions",3),x(10,Bf,2,1,"button",4),X(11,"async"),r()()),i&2){let d,b,w;a(2),T((d=Z(3,3,n.flowUpdateRequest$))?2:-1,d),a(5),T((b=Z(8,5,n.flowUpdateRequest$))?7:-1,b),a(3),T((w=Z(11,7,n.flowUpdateRequest$))?10:-1,w)}},dependencies:[ue,ge,de,he,fe,Ce,ke,Rc,ga],styles:[`.change-version-progress[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.change-version-progress[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.change-version-progress[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.change-version-progress[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.change-version-progress[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.change-version-progress[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.change-version-progress[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.change-version-progress[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}
















`]})}}return t})();function Lf(t,m){t&1&&(s(0,"th",21),l(1,"Component Name"),r())}function qf(t,m){if(t&1&&(s(0,"td",22),l(1),r()),t&2){let e=m.$implicit,i=u();p("title",i.formatComponentName(e)),a(),R(" ",i.formatComponentName(e)," ")}}function jf(t,m){t&1&&(s(0,"th",21),l(1,"Change Type"),r())}function Uf(t,m){if(t&1&&(s(0,"td",22),l(1),r()),t&2){let e=m.$implicit,i=u();p("title",i.formatChangeType(e)),a(),R(" ",i.formatChangeType(e)," ")}}function zf(t,m){t&1&&(s(0,"th",21),l(1,"Difference"),r())}function Hf(t,m){if(t&1&&(s(0,"td",22),l(1),r()),t&2){let e=m.$implicit,i=u();p("title",i.formatDifference(e)),a(),R(" ",i.formatDifference(e)," ")}}function Wf(t,m){t&1&&v(0,"th",23)}function Qf(t,m){if(t&1){let e=W();s(0,"td",24)(1,"div",25)(2,"button",26),v(3,"i",27),r(),s(4,"mat-menu",28,0)(6,"button",29),M("click",function(){let n=N(e).$implicit,d=u();return $(d.goToClicked(n))}),v(7,"i",30),l(8," Go To "),r()()()()}if(t&2){let e=pt(5);a(2),p("matMenuTriggerFor",e)}}function Kf(t,m){t&1&&v(0,"tr",31)}function Yf(t,m){if(t&1&&v(0,"tr",32),t&2){let e=m.even;Ht("even",e)}}var ap=(()=>{class t{set differences(e){let i=this.explodeDifferences(e);this.dataSource.data=this.sortEntities(i,this.activeSort),this.dataSource.filterPredicate=(d,b)=>{let{filterTerm:w}=JSON.parse(b);return this.nifiCommon.stringContains(d.componentName,w,!0)||this.nifiCommon.stringContains(d.differenceType,w,!0)},this.totalCount=i.length,this.filteredCount=i.length;let n=this.filterForm.get("filterTerm")?.value;n?.length>0&&this.applyFilter(n)}constructor(e,i){this.formBuilder=e,this.nifiCommon=i,this.destroyRef=co(Si),this.initialSortColumn="componentName",this.initialSortDirection="asc",this.filterTerm="",this.totalCount=0,this.filteredCount=0,this.activeSort={active:this.initialSortColumn,direction:this.initialSortDirection},this.displayedColumns=["componentName","changeType","difference","actions"],this.dataSource=new Vo,this.goToChange=new Ke,this.filterForm=this.formBuilder.group({filterTerm:"",filterColumn:"componentName"})}ngAfterViewInit(){this.filterForm.get("filterTerm")?.valueChanges.pipe(ks(500),fo(this.destroyRef)).subscribe(e=>{this.applyFilter(e)})}applyFilter(e){this.dataSource.filter=JSON.stringify({filterTerm:e}),this.filteredCount=this.dataSource.filteredData.length}formatComponentName(e){return e.componentName||""}formatChangeType(e){return e.differenceType}formatDifference(e){return e.difference}sortData(e){this.activeSort=e,this.dataSource.data=this.sortEntities(this.dataSource.data,e)}sortEntities(e,i){return e?e.slice().sort((n,d)=>{let b=i.direction==="asc",w=0;switch(i.active){case"componentName":w=this.nifiCommon.compareString(this.formatComponentName(n),this.formatComponentName(d));break;case"changeType":w=this.nifiCommon.compareString(this.formatChangeType(n),this.formatChangeType(d));break;case"difference":w=this.nifiCommon.compareString(this.formatDifference(n),this.formatDifference(d));break;default:return 0}return w*(b?1:-1)}):[]}goToClicked(e){let i={id:e.componentId,type:e.componentType,processGroupId:e.processGroupId};this.goToChange.next(i)}explodeDifferences(e){return e.reduce((i,n)=>{let d=n.differences.map(b=>({componentName:n.componentName,componentId:n.componentId,componentType:n.componentType,processGroupId:n.processGroupId,differenceType:b.differenceType,difference:b.difference}));return[...i,...d]},[])}static{this.\u0275fac=function(i){return new(i||t)(D(Ae),D(we))}}static{this.\u0275cmp=z({type:t,selectors:[["local-changes-table"]],inputs:{differences:"differences"},outputs:{goToChange:"goToChange"},decls:29,vars:9,consts:[["actionMenu","matMenu"],[1,"local-changes-table","h-full","flex","flex-col"],[1,"my-2",3,"formGroup"],[1,"flex","pt-2"],[1,"mr-2"],["subscriptSizing","dynamic"],["matInput","","type","text","formControlName","filterTerm",1,"small"],[1,"my-2","tertiary-color","leading-none","font-medium"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","componentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","changeType"],["matColumnDef","difference"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"even",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"title"],["mat-header-cell",""],["mat-cell",""],[1,"flex","items-center","justify-end","gap-x-2"],["mat-icon-button","","type","button",1,"h-16","w-16","flex","items-center","justify-center","icon","global-menu",3,"matMenuTriggerFor"],[1,"fa","fa-ellipsis-v"],["xPosition","before"],["mat-menu-item","",3,"click"],[1,"fa","fa-long-arrow-right","primary-color","mr-2"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&(s(0,"div",1)(1,"div")(2,"div")(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),l(8,"Filter"),r(),v(9,"input",6),r()()()(),s(10,"div",7),l(11),r()()(),s(12,"div",8)(13,"div",9)(14,"table",10),M("matSortChange",function(b){return n.sortData(b)}),Ye(15,11),x(16,Lf,2,0,"th",12)(17,qf,2,2,"td",13),Xe(),Ye(18,14),x(19,jf,2,0,"th",12)(20,Uf,2,2,"td",13),Xe(),Ye(21,15),x(22,zf,2,0,"th",12)(23,Hf,2,2,"td",13),Xe(),Ye(24,16),x(25,Wf,1,0,"th",17)(26,Qf,9,1,"td",18),Xe(),x(27,Kf,1,0,"tr",19)(28,Yf,1,2,"tr",20),r()()()()),i&2&&(a(3),p("formGroup",n.filterForm),a(8),Pi(" Displaying ",n.filteredCount," of ",n.totalCount," "),a(3),p("dataSource",n.dataSource)("matSortActive",n.initialSortColumn)("matSortDirection",n.initialSortDirection),a(13),p("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),a(),p("matRowDefColumns",n.displayedColumns))},dependencies:[pe,Ge,ce,xe,Ie,Ee,ne,De,Me,Re,ho,Do,Mo,Oo,Ro,Io,ko,Ao,Go,No,$o,jo,Lo,qo,Bo,Mi,Ri,Ii],styles:[`.local-changes-table[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   .mat-column-componentName[_ngcontent-%COMP%], .local-changes-table[_ngcontent-%COMP%]   .listing-table[_ngcontent-%COMP%]   .mat-column-changeType[_ngcontent-%COMP%]{width:230px}
















`]})}}return t})();function Xf(t,m){t&1&&l(0," Show Local Changes ")}function Jf(t,m){t&1&&l(0," Revert Local Changes ")}function Zf(t,m){t&1&&(s(0,"span",3),l(1,"Revert will remove all changes."),r())}function eh(t,m){if(t&1){let e=W();s(0,"button",8),l(1,"Cancel"),r(),s(2,"button",9),M("click",function(){N(e);let n=u();return $(n.revertChanges())}),l(3,"Revert"),r()}}function th(t,m){t&1&&(s(0,"button",7),l(1,"Close"),r())}var lp=(()=>{class t extends Je{constructor(e){super(),this.dialogRequest=e,this.mode="SHOW",this.revert=new Ke,this.goToChange=new Ke,this.mode=e.mode,this.versionControlInformation=e.versionControlInformation,this.localModifications=e.localModifications,this._request=e}revertChanges(){this.revert.next(this._request)}static{this.\u0275fac=function(i){return new(i||t)(D(me))}}static{this.\u0275cmp=z({type:t,selectors:[["local-changes-dialog"]],outputs:{revert:"revert",goToChange:"goToChange"},features:[Fe],decls:14,vars:6,consts:[["mat-dialog-title",""],[1,"local-changes"],[1,"dialog-content","flex","flex-col","h-full","gap-y-2"],[1,"font-bold"],[1,"flex-1"],[3,"goToChange","differences"],["align","end"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click"]],template:function(i,n){i&1&&(s(0,"h2",0),x(1,Xf,1,0)(2,Jf,1,0),r(),s(3,"div",1)(4,"mat-dialog-content")(5,"div",2)(6,"div"),l(7),x(8,Zf,2,0,"span",3),r(),s(9,"div",4)(10,"local-changes-table",5),M("goToChange",function(b){return n.goToChange.next(b)}),r()()()(),s(11,"mat-dialog-actions",6),x(12,eh,4,0)(13,th,2,0,"button",7),r()()),i&2&&(a(),T(n.mode==="SHOW"?1:2),a(6),Pi(" The following changes have been made to ",n.versionControlInformation.versionControlInformation==null?null:n.versionControlInformation.versionControlInformation.flowName," (Version ",n.versionControlInformation.versionControlInformation==null?null:n.versionControlInformation.versionControlInformation.version,"). "),a(),T(n.mode==="REVERT"?8:-1),a(2),p("differences",n.localModifications.componentDifferences),a(2),T(n.mode==="REVERT"?12:13))},dependencies:[ge,de,ue,he,fe,Ce,et,xe,ap],encapsulation:2})}}return t})();var cp=(()=>{class t{static{this.API="../nifi-api"}constructor(e,i,n){this.httpClient=e,this.client=i,this.clusterConnectionService=n}marshalSnippet(e,i){return e.reduce((n,d)=>{switch(d.type){case _.Processor:n.processors[d.id]=this.client.getRevision(d.entity);break;case _.InputPort:n.inputPorts[d.id]=this.client.getRevision(d.entity);break;case _.OutputPort:n.outputPorts[d.id]=this.client.getRevision(d.entity);break;case _.ProcessGroup:n.processGroups[d.id]=this.client.getRevision(d.entity);break;case _.RemoteProcessGroup:n.remoteProcessGroups[d.id]=this.client.getRevision(d.entity);break;case _.Funnel:n.funnels[d.id]=this.client.getRevision(d.entity);break;case _.Label:n.labels[d.id]=this.client.getRevision(d.entity);break;case _.Connection:n.connections[d.id]=this.client.getRevision(d.entity);break}return n},{parentGroupId:i,processors:{},funnels:{},inputPorts:{},outputPorts:{},remoteProcessGroups:{},processGroups:{},connections:{},labels:{}})}createSnippet(e){return this.httpClient.post(`${t.API}/snippets`,{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),snippet:e})}moveSnippet(e,i){let n={disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),snippet:{id:e,parentGroupId:i}};return this.httpClient.put(`${t.API}/snippets/${e}`,n)}deleteSnippet(e){let i=new mo({fromObject:{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()}});return this.httpClient.delete(`${t.API}/snippets/${e}`,{params:i})}static{this.\u0275fac=function(i){return new(i||t)(k(Xt),k(je),k(dt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ih=t=>({value:t});function nh(t,m){if(t&1&&(s(0,"mat-option",6),l(1),r()),t&2){let e=m.$implicit,i=u();p("value",e.value)("disabled",i.readonly),a(),R(" ",e.text," ")}}function rh(t,m){t&1&&(s(0,"button",8),l(1,"Close"),r())}function sh(t,m){t&1&&(s(0,"span"),l(1,"Apply"),r())}function ah(t,m){if(t&1){let e=W();s(0,"button",9),l(1,"Cancel"),r(),s(2,"button",10),M("click",function(){N(e);let n=u(2);return $(n.editLabel())}),x(3,sh,2,0,"span",11),r()}if(t&2){let e=u(),i=u();a(2),p("disabled",!i.editLabelForm.dirty||i.editLabelForm.invalid||e.value),a(),p("nifiSpinner",e.value)}}function lh(t,m){if(t&1&&(s(0,"mat-dialog-actions",7),x(1,rh,2,0,"button",8)(2,ah,4,2),r()),t&2){let e=u();a(),T(e.readonly?1:2)}}var pp=(()=>{class t extends Je{constructor(e,i,n,d,b){super(),this.request=e,this.formBuilder=i,this.store=n,this.client=d,this.clusterConnectionService=b,this.saving$=this.store.select(We),this.fontSizeOptions=[12,14,16,18,20,22,24].map(H=>({text:`${H}px`,value:`${H}px`})),this.ErrorContextKey=ee,this.readonly=!e.entity.permissions.canWrite;let w=this.fontSizeOptions[0].value;e.entity.component.style["font-size"]&&(w=e.entity.component.style["font-size"]),this.editLabelForm=this.formBuilder.group({value:new I(e.entity.component.label,q.required),fontSize:new I(w,q.required)})}editLabel(){let e={revision:this.client.getRevision(this.request.entity),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:this.request.entity.id,label:this.editLabelForm.get("value")?.value,style:{"font-size":this.editLabelForm.get("fontSize")?.value}}};this.store.dispatch(Qt({request:{id:this.request.entity.id,type:this.request.type,uri:this.request.uri,payload:e,errorStrategy:"banner"}}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(Ae),D(ie),D(je),D(dt))}}static{this.\u0275cmp=z({type:t,selectors:[["edit-label"]],features:[Fe],decls:19,vars:9,consts:[["mat-dialog-title",""],[1,"edit-label-form",3,"formGroup"],[3,"context"],["matInput","","formControlName","value","type","text","rows","10",3,"readonly"],["subscriptSizing","dynamic"],["formControlName","fontSize"],[3,"value","disabled"],["align","end"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(s(0,"h2",0),l(1),r(),s(2,"form",1),v(3,"context-error-banner",2),s(4,"mat-dialog-content")(5,"div")(6,"mat-form-field")(7,"mat-label"),l(8,"Label Value"),r(),v(9,"textarea",3),r()(),s(10,"div")(11,"mat-form-field",4)(12,"mat-label"),l(13,"Font Size"),r(),s(14,"mat-select",5),ae(15,nh,2,3,"mat-option",6,ve),r()()()(),x(17,lh,3,1,"mat-dialog-actions",7),X(18,"async"),r()),i&2){let d;a(),Q(n.readonly?"Label Details":"Edit Label"),a(),p("formGroup",n.editLabelForm),a(),p("context",n.ErrorContextKey.LABEL),a(6),p("readonly",n.readonly),a(6),le(n.fontSizeOptions),a(2),T((d=Be(7,ih,Z(18,5,n.saving$)))?17:-1,d)}},dependencies:[xe,Ie,Ee,ne,De,Me,Re,ge,de,ue,he,fe,Le,Ge,pe,ce,Ze,Ne,Ce,ke,Ue,Se,be,tt],styles:[".edit-label-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.edit-label-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.edit-label-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.edit-label-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.edit-label-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.edit-label-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.edit-label-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.edit-label-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.edit-label-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();function ch(t,m){if(t&1&&(s(0,"div",12)(1,"div",2)(2,"div",13)(3,"div",14),v(4,"i",15),r(),s(5,"div",16)(6,"div",17),l(7,"Processor Name"),r()()()(),v(8,"div",18)(9,"div",19)(10,"div",20)(11,"div",19),r()),t&2){let e=u();ri("border-color",e.color),a(3),ri("background-color",e.color),a(),ri("color",e.contrastColor)}}function ph(t,m){if(t&1&&(s(0,"div",21),l(1," Label Value "),r()),t&2){let e=u();ri("background-color",e.color)("color",e.contrastColor)}}var mp=(()=>{class t extends Je{constructor(e,i,n,d){super(),this.data=e,this.canvasUtils=i,this.nifiCommon=n,this.formBuilder=d,this.color=null,this.noColor=!0,this.contrastColor=null,this.type=null,this._data=[],this.DEFAULT_LABEL_COLOR="#fff7d7",this.changeColor=new Ke,this.ComponentType=_,this._data=e;let b=!0;if(e.length>0){if(this.color=e[0].color,this.color!==null){let w=this.nifiCommon.substringAfterLast(this.color,"#");this.contrastColor=this.canvasUtils.determineContrastColor(w),this.noColor=!1,b=!1}if(this.type=e[0].type,this.type===_.Label&&this.color===null){this.color=this.DEFAULT_LABEL_COLOR;let w=this.nifiCommon.substringAfterLast(this.color,"#");this.contrastColor=this.canvasUtils.determineContrastColor(w),b=!0}}this.changeColorForm=d.group({color:[this.color],noColor:[b]})}colorChanged(){if(this.color=this.changeColorForm.get("color")?.value,this.color!==null){let e=this.nifiCommon.substringAfterLast(this.color,"#");this.contrastColor=this.canvasUtils.determineContrastColor(e),this.noColor=!1}else this.contrastColor=null}noColorChanged(){if(this.changeColorForm.get("noColor")?.value)if(this.noColor=!0,this.type===_.Label){this.color=this.DEFAULT_LABEL_COLOR;let i=this.nifiCommon.substringAfterLast(this.color,"#");this.contrastColor=this.canvasUtils.determineContrastColor(i)}else this.color=null,this.contrastColor=null;else{this.noColor=!1,this.color=this.changeColorForm.get("color")?.value,this.color===null&&(this.type===_.Label?this.color=this.DEFAULT_LABEL_COLOR:this.color="#000000");let i=this.nifiCommon.substringAfterLast(this.color,"#");this.contrastColor=this.canvasUtils.determineContrastColor(i)}}applyClicked(){let e=this._data.map(i=>j(V({},i),{color:this.noColor?null:this.color}));this.changeColor.next(e)}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(wt),D(we),D(Ae))}}static{this.\u0275cmp=z({type:t,selectors:[["change-component-dialog"]],outputs:{changeColor:"changeColor"},features:[Fe],decls:21,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"flex","flex-col"],["matInput","","type","color","formControlName","color",3,"change"],["formControlName","noColor",3,"change","checked"],[1,"pt-4","preview"],[1,"value"],[1,"processor","border","drop-shadow-lg",3,"border-color"],[1,"label","border","h-36","p-2","font-bold",3,"background-color","color"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"click","disabled"],[1,"processor","border","drop-shadow-lg"],[1,"flex","gap-x-2","items-center"],[1,"logo","flex","flex-col","items-center"],[1,"text-3xl","tertiary-color","icon-processor","p-2"],[1,"flex","flex-col","flex-1"],[1,"context-name","w-full"],[1,"odd","h-4"],[1,"row-border","even","h-4"],[1,"row-border","odd","h-4"],[1,"label","border","h-36","p-2","font-bold"]],template:function(i,n){i&1&&(s(0,"h2",0),l(1,"Change Color"),r(),s(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field")(6,"mat-label"),l(7,"Color"),r(),s(8,"input",3),M("change",function(){return n.colorChanged()}),r()(),s(9,"mat-checkbox",4),M("change",function(){return n.noColorChanged()}),l(10,"Use default color"),r()(),s(11,"div",5)(12,"div",6),l(13,"Preview"),r(),x(14,ch,12,6,"div",7)(15,ph,2,4,"div",8),r()(),s(16,"mat-dialog-actions",9)(17,"button",10),l(18,"Cancel"),r(),s(19,"button",11),M("click",function(){return n.applyClicked()}),l(20,"Apply"),r()()()),i&2&&(a(2),p("formGroup",n.changeColorForm),a(7),p("checked",n.noColor),a(5),T(n.type===n.ComponentType.Processor?14:n.type===n.ComponentType.Label?15:-1),a(5),p("disabled",n.changeColorForm.invalid))},dependencies:[wo,ue,xe,Ie,Ee,ne,De,Me,Re,fe,Ce,he,de,pe,ce,Ge,Lt],encapsulation:2})}}return t})();var Rs=Di(Ac);var mh=Di(Ec),dp=Ft(mh,t=>t.copiedContent);var up=(()=>{class t{constructor(e,i,n,d,b,w,H,G,U,ot,Oe,at,E,K,re,ze,Ve,io,He,Ot,Yt){this.actions$=e,this.store=i,this.storage=n,this.flowService=d,this.controllerServiceService=b,this.registryService=w,this.client=H,this.canvasUtils=G,this.canvasView=U,this.birdseyeView=ot,this.connectionManager=Oe,this.clusterConnectionService=at,this.snippetService=E,this.router=K,this.dialog=re,this.propertyTableHelperService=ze,this.parameterHelperService=Ve,this.parameterContextService=io,this.extensionTypesService=He,this.errorHelper=Ot,this.copyPasteService=Yt,this.destroyRef=co(Si),this.lastReload=0,this.reloadFlow$=C(()=>this.actions$.pipe(g(Pt),$s(1e3),A(()=>this.store.select(Y)),S(([,o])=>(this.lastReload=Date.now(),y(zo({request:{id:o,transitionRequired:!0}})))))),this.loadProcessGroup$=C(()=>this.actions$.pipe(g(zo),f(o=>o.request),A(()=>[this.store.select(gc),this.store.select(la)]),F(()=>this.store.dispatch(aa())),S(([o,c,h])=>no([this.flowService.getFlow(o.id),this.flowService.getFlowStatus(),this.flowService.getControllerBulletins(),this.registryService.getRegistryClients()]).pipe(f(([P,O,J,ct])=>(this.store.dispatch(Rn()),lr({response:{id:o.id,flow:P,flowStatus:O,controllerBulletins:J,connectedStateChanged:h,registryClients:ct.registries}}))),B(P=>y(this.errorHelper.handleLoadingError(c,P))))))),this.loadProcessGroupSuccess$=C(()=>this.actions$.pipe(g(lr),f(o=>o.response),S(o=>y(cr({response:o}))))),this.loadProcessGroupComplete$=C(()=>this.actions$.pipe(g(cr),S(()=>(this.canvasView.updateCanvasVisibility(),this.birdseyeView.refresh(),y(dl({transitionRequired:!1})))))),this.startProcessGroupPolling$=C(()=>this.actions$.pipe(g(Na),S(()=>Nt(3e4,ht).pipe(Te(this.actions$.pipe(g($a))))),A(()=>this.store.select(Rs)),Pe(([,o])=>o.documentVisibility===ws.Visible),S(()=>y(Pt())))),this.createComponentRequest$=C(()=>this.actions$.pipe(g(Ha),f(o=>o.request),S(o=>{switch(o.type){case _.Processor:return y(yr({request:o}));case _.ProcessGroup:return L(this.parameterContextService.getParameterContexts()).pipe(A(()=>this.store.select(Gn)),f(([c,h])=>{let P={request:o,parameterContexts:c.parameterContexts};return h&&(P.currentParameterContextId=h.id),fr({request:P})}),B(c=>y(this.snackBarOrFullScreenError(c))));case _.RemoteProcessGroup:return y(hr({request:o}));case _.Funnel:return y(dr({request:o}));case _.Label:return y(ur({request:o}));case _.InputPort:case _.OutputPort:return y(_r({request:o}));case _.Flow:return L(this.registryService.getRegistryClients()).pipe(f(c=>{let h={request:o,registryClients:c.registries};return this.store.dispatch(pr({request:c.registries})),xr({request:h})}),B(c=>y(this.snackBarOrFullScreenError(c))));default:return y(Mt({error:"Unsupported type of Component."}))}}))),this.openNewProcessorDialog$=C(()=>this.actions$.pipe(g(yr),f(o=>o.request),A(()=>this.store.select(na)),F(([o,c])=>{this.dialog.open(Vc,j(V({},St),{data:{request:o,processorTypes:c}})).afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.createProcessor$=C(()=>this.actions$.pipe(g(sn),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createProcessor(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.snackBarOrFullScreenError(h))))))),this.openNewRemoteProcessGroupDialog$=C(()=>this.actions$.pipe(g(hr),f(o=>o.request),F(o=>{this.dialog.open(jc,j(V({},St),{data:o})).afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.createRemoteProcessGroup$=C(()=>this.actions$.pipe(g(Zi),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createRemoteProcessGroup(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.bannerOrFullScreenError(h,ee.REMOTE_PROCESS_GROUP))))))),this.goToRemoteProcessGroup$=C(()=>this.actions$.pipe(g(Wa),f(o=>o.request),F(o=>{o.uri?this.flowService.goToRemoteProcessGroup(o):this.store.dispatch(so({title:"Remote Process Group",message:"No target URI defined."}))})),{dispatch:!1}),this.startRemoteProcessGroupPolling$=C(()=>this.actions$.pipe(g(gr),S(()=>Nt(3e3,ht).pipe(Te(this.actions$.pipe(g(tn))))),S(()=>y(en())))),this.requestRefreshRemoteProcessGroup$=C(()=>this.actions$.pipe(g(Qa),S(()=>y(en())))),this.refreshRemoteProcessGroup$=C(()=>this.actions$.pipe(g(en),A(()=>this.store.select(yc).pipe(Dt())),S(([,o])=>L(this.flowService.getRemoteProcessGroup(o.request.id).pipe(f(c=>{let h=c;return o.request.refreshTimestamp!==h.component.flowRefreshed?(this.store.dispatch(tn()),this.store.dispatch(li({id:h.id}))):(o.polling||this.store.dispatch(gr()),h.component.flowRefreshed="Refreshing..."),mr({response:{id:h.id,remoteProcessGroup:h}})}),B(c=>(this.store.dispatch(tn()),y(this.snackBarOrFullScreenError(c))))))))),this.openNewProcessGroupDialog$=C(()=>this.actions$.pipe(g(fr),f(o=>o.request),F(o=>{this.createProcessGroupDialogRef=this.dialog.open(Uc,j(V({},xt),{data:o})),this.createProcessGroupDialogRef.componentInstance.parameterContexts=o.parameterContexts,this.createProcessGroupDialogRef.afterClosed().subscribe(()=>{this.createProcessGroupDialogRef!==void 0&&(this.createProcessGroupDialogRef=void 0),this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.createProcessGroup$=C(()=>this.actions$.pipe(g(on),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createProcessGroup(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.bannerOrFullScreenError(h,ee.PROCESS_GROUP))))))),this.uploadProcessGroup$=C(()=>this.actions$.pipe(g(nn),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.uploadProcessGroup(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.bannerOrFullScreenError(h,ee.PROCESS_GROUP))))))),this.getParameterContextsAndOpenGroupComponentsDialog$=C(()=>this.actions$.pipe(g(Ka),f(o=>o.request),A(()=>this.store.select(Y)),S(([o])=>L(this.parameterContextService.getParameterContexts()).pipe(A(()=>this.store.select(Gn)),f(([c,h])=>{let P={request:o,parameterContexts:c.parameterContexts};return h&&(P.currentParameterContextId=h.id),Cr({request:P})}),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openGroupComponentsDialog$=C(()=>this.actions$.pipe(g(Cr),f(o=>o.request),F(o=>{this.dialog.open(Wc,j(V({},xt),{data:o})).afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.groupComponents$=C(()=>this.actions$.pipe(g(rn),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createProcessGroup(c,o)).pipe(f(h=>vr({response:{type:o.type,payload:h,components:o.components}})),B(h=>y(this.bannerOrFullScreenError(h,ee.PROCESS_GROUP))))))),this.groupComponentsSuccess$=C(()=>this.actions$.pipe(g(vr),f(o=>o.response),F(()=>this.dialog.closeAll()),S(o=>[pn({response:{type:o.type,payload:o.payload}}),Mr({request:{groupId:o.payload.id,components:o.components}})]))),this.openNewConnectionDialog$=C(()=>this.actions$.pipe(g(Ya),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.getProcessGroup(c)).pipe(f(h=>({request:o,defaults:{flowfileExpiration:h.component.defaultFlowFileExpiration,objectThreshold:h.component.defaultBackPressureObjectThreshold,dataSizeThreshold:h.component.defaultBackPressureDataSizeThreshold}})),F({error:h=>{this.canvasUtils.removeTempEdge(),this.store.dispatch(this.snackBarOrFullScreenError(h))}}))),F(o=>{let c=this.dialog.open(zc,j(V({},St),{data:o}));c.componentInstance.getChildOutputPorts=h=>this.flowService.getFlow(h).pipe(te(1),f(P=>P.processGroupFlow.flow.outputPorts)),c.componentInstance.getChildInputPorts=h=>this.flowService.getFlow(h).pipe(te(1),f(P=>P.processGroupFlow.flow.inputPorts)),c.afterClosed().subscribe(()=>{this.canvasUtils.removeTempEdge()})})),{dispatch:!1}),this.createConnection$=C(()=>this.actions$.pipe(g(an),f(o=>o.request),A(()=>[this.store.select(Y),this.store.select(Nn(_.Connection))]),S(([{payload:o},c,h])=>L(this.flowService.createConnection(c,{payload:j(V({},o),{component:j(V({},o.component),{zIndex:h+1})})})).pipe(f(P=>Wt({response:{type:_.Connection,payload:P}})),B(P=>y(this.bannerOrFullScreenError(P,ee.CONNECTION))))))),this.openNewPortDialog$=C(()=>this.actions$.pipe(g(_r),f(o=>o.request),F(o=>{this.dialog.open(Nc,j(V({},Et),{data:o})).afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.createPort$=C(()=>this.actions$.pipe(g(ln),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createPort(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.bannerOrFullScreenError(h,ee.PORT))))))),this.createFunnel$=C(()=>this.actions$.pipe(g(dr),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.flowService.createFunnel(c,o)).pipe(f(h=>Wt({response:{type:o.type,payload:h}})),B(h=>y(this.snackBarOrFullScreenError(h))))))),this.createLabel$=C(()=>this.actions$.pipe(g(ur),f(o=>o.request),A(()=>[this.store.select(Y),this.store.select(Nn(_.Label))]),S(([o,c,h])=>L(this.flowService.createLabel(c,j(V({},o),{zIndex:h+1}))).pipe(f(P=>Wt({response:{type:o.type,payload:P}})),B(P=>y(this.snackBarOrFullScreenError(P))))))),this.openImportFromRegistryDialog$=C(()=>this.actions$.pipe(g(xr),f(o=>o.request),A(()=>this.store.select(To)),F(([o,c])=>{if(o.registryClients.some(P=>P.permissions.canRead)){let P=this.dialog.open(op,j(V({},St),{data:o}));P.componentInstance.getBranches=O=>this.registryService.getBranches(O).pipe(te(1),f(J=>J.branches),F({error:J=>{this.store.dispatch(ao({errorContext:{context:ee.REGISTRY_IMPORT,errors:[this.errorHelper.getErrorString(J)]}}))}})),P.componentInstance.getBuckets=(O,J)=>this.registryService.getBuckets(O,J).pipe(te(1),f(ct=>ct.buckets),F({error:ct=>{this.store.dispatch(ao({errorContext:{context:ee.REGISTRY_IMPORT,errors:[this.errorHelper.getErrorString(ct)]}}))}})),P.componentInstance.getFlows=(O,J,ct)=>this.registryService.getFlows(O,J,ct).pipe(te(1),f(Tt=>Tt.versionedFlows),F({error:Tt=>{this.store.dispatch(ao({errorContext:{context:ee.REGISTRY_IMPORT,errors:[this.errorHelper.getErrorString(Tt)]}}))}})),P.componentInstance.getFlowVersions=(O,J,ct,Tt)=>this.registryService.getFlowVersions(O,J,ct,Tt).pipe(te(1),f(ni=>ni.versionedFlowSnapshotMetadataSet),F({error:ni=>{this.store.dispatch(ao({errorContext:{context:ee.REGISTRY_IMPORT,errors:[this.errorHelper.getErrorString(ni)]}}))}})),P.afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})}else this.dialog.open(ip,j(V({},xt),{data:{controllerPermissions:c.controllerPermissions}})).afterClosed().subscribe(()=>{this.store.dispatch(xo({dragging:!1}))})})),{dispatch:!1}),this.importFromRegistry$=C(()=>this.actions$.pipe(g(cn),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>L(this.registryService.importFromRegistry(c,o)).pipe(f(h=>Wt({response:{type:_.ProcessGroup,payload:h}})),B(h=>y(this.bannerOrFullScreenError(h,ee.REGISTRY_IMPORT))))))),this.createComponentSuccess$=C(()=>this.actions$.pipe(g(Wt),f(o=>o.response),S(o=>(this.dialog.closeAll(),y(pn({response:o})))))),this.createComponentComplete$=C(()=>this.actions$.pipe(g(pn),f(o=>o.response),S(o=>{this.canvasView.updateCanvasVisibility(),this.birdseyeView.refresh();let c=[It({request:{components:[{id:o.payload.id,componentType:o.type}]}})];return o.type==_.Connection&&c.push(pi({connection:o.payload})),c}))),this.navigateToEditComponent$=C(()=>this.actions$.pipe(g(Za),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{let h=["/process-groups",c,o.type,o.id,"edit"];this.canvasView.isSelectedComponentOnScreen()?this.store.dispatch(So({url:h})):this.router.navigate(h)})),{dispatch:!1}),this.navigateToAdvancedProcessorUi$=C(()=>this.actions$.pipe(g(el),f(o=>o.id),A(()=>this.store.select(Y)),F(([o,c])=>{let h=["/process-groups",c,_.Processor,o,"advanced"];this.router.navigate([...h],{state:{backNavigation:{route:["/process-groups",c,_.Processor,o],routeBoundary:h,context:"Processor"}}})})),{dispatch:!1}),this.navigateToParameterContext$=C(()=>this.actions$.pipe(g(sl),f(o=>o.request),F(o=>{this.router.navigate(["/parameter-contexts",o.id,"edit"],{state:{backNavigation:o.backNavigation}})})),{dispatch:!1}),this.navigateToEditCurrentProcessGroup$=C(()=>this.actions$.pipe(g(il),A(()=>this.store.select(Y)),F(([,o])=>{this.router.navigate(["/process-groups",o,"edit"])})),{dispatch:!1}),this.navigateToManageComponentPolicies$=C(()=>this.actions$.pipe(g(tl),f(o=>o.request),F(o=>{this.router.navigate([...o.backNavigation.routeBoundary,"read","component",o.resource,o.id],{state:{backNavigation:o.backNavigation}})})),{dispatch:!1}),this.navigateToQueueListing$=C(()=>this.actions$.pipe(g(rl),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{let h=["/queue",o.connectionId];this.router.navigate([...h],{state:{backNavigation:{route:["/process-groups",c,_.Connection,o.connectionId],routeBoundary:h,context:"Connection"}}})})),{dispatch:!1}),this.navigateToViewStatusHistoryForComponent$=C(()=>this.actions$.pipe(g(Xa),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{let h=["/process-groups",c,o.type,o.id,"history"];this.canvasView.isSelectedComponentOnScreen()?this.store.dispatch(So({url:h})):this.router.navigate(h)})),{dispatch:!1}),this.navigateToViewStatusHistoryForCurrentProcessGroup$=C(()=>this.actions$.pipe(g(Ja),A(()=>this.store.select(Y)),F(([,o])=>{this.router.navigate(["/process-groups",o,"history"])})),{dispatch:!1}),this.completeStatusHistoryForComponent$=C(()=>this.actions$.pipe(g(sa),f(o=>o.request),Pe(o=>o.source==="canvas"),A(()=>this.store.select(Y)),F(([o,c])=>{o.componentId===c?this.router.navigate(["/process-groups",c]):this.store.dispatch(It({request:{components:[{id:o.componentId,componentType:o.componentType}]}}))})),{dispatch:!1}),this.navigateToControllerServicesForProcessGroup$=C(()=>this.actions$.pipe(g(nl),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{let h;c==o.id?h=["/process-groups",c]:h=["/process-groups",c,_.ProcessGroup,o.id];let P=["/process-groups",o.id,"controller-services"];this.router.navigate([...P],{state:{backNavigation:{route:h,routeBoundary:P,context:"Process Group"}}})})),{dispatch:!1}),this.editComponent$=C(()=>this.actions$.pipe(g(ol),f(o=>o.request),S(o=>{switch(o.type){case _.Processor:return y(br({request:o}));case _.Connection:return y(Pr({request:o}));case _.ProcessGroup:return L(this.parameterContextService.getParameterContexts()).pipe(f(c=>{let h=j(V({},o),{parameterContexts:c.parameterContexts});return mn({request:h})}),B(c=>y(this.snackBarOrFullScreenError(c))));case _.RemoteProcessGroup:return y(wr({request:o}));case _.InputPort:case _.OutputPort:return y(Sr({request:o}));case _.Label:return y(Tr({request:o}));default:return y(Mt({error:"Unsupported type of Component."}))}}))),this.editCurrentProcessGroup$=C(()=>this.actions$.pipe(g(al),f(o=>o.request),S(o=>L(this.parameterContextService.getParameterContexts()).pipe(S(c=>L(this.flowService.getProcessGroup(o.id)).pipe(f(h=>mn({request:{type:_.ProcessGroup,uri:h.uri,entity:h,parameterContexts:c.parameterContexts}})),B(h=>y(this.snackBarOrFullScreenError(h))))),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openEditPortDialog$=C(()=>this.actions$.pipe(g(Sr),f(o=>o.request),F(o=>{this.dialog.open($c,j(V({},xt),{data:o})).afterClosed().subscribe(()=>{this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}}))})})),{dispatch:!1}),this.openEditLabelDialog$=C(()=>this.actions$.pipe(g(Tr),f(o=>o.request),F(o=>{this.dialog.open(pp,j(V({},xt),{data:o})).afterClosed().subscribe(()=>{this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}}))})})),{dispatch:!1}),this.openEditProcessorDialog$=C(()=>this.actions$.pipe(g(br),f(o=>o.request),S(o=>no([this.flowService.getProcessor(o.entity.id),this.propertyTableHelperService.getComponentHistory(o.entity.id)]).pipe(f(([c,h])=>j(V({},o),{entity:c,history:h.componentHistory})),F({error:c=>{this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}})),this.store.dispatch(this.snackBarOrFullScreenError(c))}}))),A(()=>[this.store.select(Gn),this.store.select(Y)]),S(([o,c,h])=>c&&c.permissions.canRead?L(this.parameterContextService.getParameterContext(c.id)).pipe(f(P=>[o,P,h]),F({error:P=>{this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}})),this.store.dispatch(this.snackBarOrFullScreenError(P))}})):y([o,null,h])),F(([o,c,h])=>{let P=o.entity.id,O=!1,J=this.dialog.open(qc,j(V({},ro),{data:o,id:P}));J.componentInstance.saving$=this.store.select(We),J.componentInstance.createNewProperty=this.propertyTableHelperService.createNewProperty(P,this.flowService),J.componentInstance.verify.pipe(Te(J.afterClosed())).subscribe(se=>{this.store.dispatch(Li({request:se}))}),J.componentInstance.propertyVerificationResults$=this.store.select(ji),J.componentInstance.propertyVerificationStatus$=this.store.select(Ui);let ct=(se,kt,yi)=>{if(J.componentInstance.editProcessorForm.dirty){let _i=this.dialog.open(eo,j(V({},Et),{data:{title:"Processor Configuration",message:`Save changes before going to this ${yi}?`}}));_i.componentInstance.yes.pipe(te(1)).subscribe(()=>{J.componentInstance.submitForm(se,kt)}),_i.componentInstance.no.pipe(te(1)).subscribe(()=>{this.router.navigate(se,{state:{backNavigation:{route:["/process-groups",h,_.Processor,P,"edit"],routeBoundary:kt,context:"Processor"}}})})}else this.router.navigate(se,{state:{backNavigation:{route:["/process-groups",h,_.Processor,P,"edit"],routeBoundary:kt,context:"Processor"}}})};c!=null&&(J.componentInstance.parameterContext=c,J.componentInstance.goToParameter=()=>{this.storage.setItem(we.EDIT_PARAMETER_CONTEXT_DIALOG_ID,1);let se=["/parameter-contexts"],kt=[...se,c.id,"edit"];ct(kt,se,"Parameter")},J.componentInstance.convertToParameter=this.parameterHelperService.convertToParameter(c.id)),J.componentInstance.goToService=se=>{this.controllerServiceService.getControllerService(se).subscribe({next:kt=>{let yi=["/process-groups",kt.component.parentGroupId,"controller-services"],_i=[...yi,kt.id];ct(_i,yi,"Controller Service")},error:kt=>{this.store.dispatch(this.snackBarOrFullScreenError(kt))}})},J.componentInstance.createNewService=this.propertyTableHelperService.createNewService(P,this.controllerServiceService,this.flowService,h),J.componentInstance.editProcessor.pipe(Te(J.afterClosed())).subscribe(se=>{this.store.dispatch(mi({request:se}))});let Tt=se=>se.status.aggregateSnapshot.runStatus==="Stopped"&&se.status.aggregateSnapshot.activeThreadCount>0||se.status.aggregateSnapshot.runStatus==="Validating"?(this.store.dispatch(vn({request:{id:se.id}})),!0):!1,ni=Tt(o.entity);this.store.select(bs(P)).pipe(Te(J.afterClosed()),Dt(),Pe(se=>(O||ni)&&se.revision.clientId===this.client.getClientId()),A(()=>this.store.select(xs))).subscribe(([se,kt])=>{J.componentInstance.processorUpdates=se,kt||Tt(se)}),J.componentInstance.stopComponentRequest.pipe(Te(J.afterClosed())).subscribe(se=>{O=!0,this.store.dispatch(Xo({request:{id:se.id,uri:se.uri,type:_.Processor,revision:se.revision,errorStrategy:"snackbar"}}))}),J.componentInstance.disableComponentRequest.pipe(Te(J.afterClosed())).subscribe(se=>{O=!0,this.store.dispatch(Ko({request:{id:se.id,uri:se.uri,type:_.Processor,revision:se.revision,errorStrategy:"snackbar"}}))}),J.componentInstance.enableComponentRequest.pipe(Te(J.afterClosed())).subscribe(se=>{O=!0,this.store.dispatch(Qo({request:{id:se.id,uri:se.uri,type:_.Processor,revision:se.revision,errorStrategy:"snackbar"}}))}),J.componentInstance.startComponentRequest.pipe(Te(J.afterClosed())).subscribe(se=>{O=!0,this.store.dispatch(Yo({request:{id:se.id,uri:se.uri,type:_.Processor,revision:se.revision,errorStrategy:"snackbar"}}))}),J.afterClosed().subscribe(se=>{this.store.dispatch(qi()),se!="ROUTED"&&this.store.dispatch(It({request:{components:[{id:P,componentType:o.type}]}}))})})),{dispatch:!1}),this.startPollingProcessorUntilStopped=C(()=>this.actions$.pipe(g(vn),S(()=>Nt(2e3,ht).pipe(Te(this.actions$.pipe(g(yn))))),S(()=>y(Ur())))),this.pollProcessorUntilStopped$=C(()=>this.actions$.pipe(g(Ur),A(()=>[this.store.select(xs).pipe(Dt())]),S(([,o])=>L(this.flowService.getProcessor(o.id).pipe(f(c=>zr({response:{id:o.id,processor:c}})),B(c=>(this.store.dispatch(yn()),y(this.snackBarOrFullScreenError(c))))))))),this.pollProcessorUntilStoppedSuccess$=C(()=>this.actions$.pipe(g(zr),f(o=>o.response),Pe(o=>o.processor.status.runStatus==="Stopped"&&o.processor.status.aggregateSnapshot.activeThreadCount===0),S(()=>y(yn())))),this.openEditConnectionDialog$=C(()=>this.actions$.pipe(g(Pr),f(o=>o.request),F(o=>{let c=this.dialog.open(Hc,j(V({},St),{data:o}));c.componentInstance.saving$=this.store.select(We),c.componentInstance.getChildOutputPorts=h=>this.flowService.getFlow(h).pipe(te(1),f(P=>P.processGroupFlow.flow.outputPorts)),c.componentInstance.getChildInputPorts=h=>this.flowService.getFlow(h).pipe(te(1),f(P=>P.processGroupFlow.flow.inputPorts)),c.componentInstance.selectProcessor=h=>this.store.select(bs(h)),c.componentInstance.selectInputPort=h=>this.store.select(Sc(h)),c.componentInstance.selectOutputPort=h=>this.store.select(bc(h)),c.componentInstance.selectProcessGroup=h=>this.store.select(_c(h)),c.componentInstance.selectRemoteProcessGroup=h=>this.store.select(xc(h)),c.afterClosed().subscribe(h=>{h=="CANCELLED"&&this.connectionManager.renderConnection(o.entity.id,{updatePath:!0,updateLabel:!1}),this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}}))})})),{dispatch:!1}),this.openEditProcessGroupDialog$=C(()=>this.actions$.pipe(g(mn),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{this.editProcessGroupDialogRef=this.dialog.open(Qc,j(V({},St),{data:o})),this.editProcessGroupDialogRef.componentInstance.saving$=this.store.select(We),this.editProcessGroupDialogRef.componentInstance.parameterContexts=o.parameterContexts||[],this.editProcessGroupDialogRef.componentInstance.editProcessGroup.pipe(Te(this.editProcessGroupDialogRef.afterClosed())).subscribe(h=>{this.store.dispatch(Qt({request:{id:o.entity.id,uri:o.uri,type:o.type,payload:h,errorStrategy:"banner"}}))}),this.editProcessGroupDialogRef.afterClosed().subscribe(()=>{this.editProcessGroupDialogRef!==void 0&&(this.editProcessGroupDialogRef=void 0),o.entity.id===c?(this.store.dispatch(zo({request:{id:c,transitionRequired:!0}})),this.router.navigate(["/process-groups",c])):this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}}))})})),{dispatch:!1}),this.createParameterContextSuccess$=C(()=>this.actions$.pipe(g(fi),F(o=>{if(this.editProcessGroupDialogRef!==void 0){let c=[...this.editProcessGroupDialogRef?.componentInstance.parameterContexts||[]];c?.push(o.response.parameterContext),this.editProcessGroupDialogRef.componentInstance.parameterContexts=[],this.editProcessGroupDialogRef.componentInstance.parameterContexts=c||[],this.editProcessGroupDialogRef.componentInstance.editProcessGroupForm.get("parameterContext")?.setValue(o.response.parameterContext.id),this.editProcessGroupDialogRef.componentInstance.editProcessGroupForm.get("parameterContext")?.markAsDirty()}else if(this.createProcessGroupDialogRef!==void 0){let c=[...this.createProcessGroupDialogRef?.componentInstance.parameterContexts||[]];c?.push(o.response.parameterContext),this.createProcessGroupDialogRef.componentInstance.parameterContexts=[],this.createProcessGroupDialogRef.componentInstance.parameterContexts=c||[],this.createProcessGroupDialogRef.componentInstance.createProcessGroupForm.get("newProcessGroupParameterContext")?.setValue(o.response.parameterContext.id),this.createProcessGroupDialogRef.componentInstance.createProcessGroupForm.get("newProcessGroupParameterContext")?.markAsDirty()}})),{dispatch:!1}),this.navigateToManageRemotePorts$=C(()=>this.actions$.pipe(g(ll),f(o=>o.request),F(o=>{this.router.navigate(["/remote-process-group",o.id,"manage-remote-ports"])})),{dispatch:!1}),this.openEditRemoteProcessGroupDialog$=C(()=>this.actions$.pipe(g(wr),f(o=>o.request),F(o=>{let c=this.dialog.open(np,j(V({},St),{data:o}));c.componentInstance.saving$=this.store.select(We),c.componentInstance.editRemoteProcessGroup.pipe(Te(c.afterClosed())).subscribe(h=>{this.store.dispatch(Qt({request:{id:o.entity.id,uri:o.uri,type:o.type,payload:h,errorStrategy:"banner"}}))}),c.afterClosed().subscribe(h=>{h!="ROUTED"&&this.store.dispatch(It({request:{components:[{id:o.entity.id,componentType:o.type}]}}))})})),{dispatch:!1}),this.updateComponent$=C(()=>this.actions$.pipe(g(Qt),f(o=>o.request),lt(o=>L(this.flowService.updateComponent(o)).pipe(f(c=>{let h={requestId:o.requestId,id:o.id,type:o.type,response:c};return Ho({response:h})}),B(c=>{let h={id:o.id,type:o.type,errorStrategy:o.errorStrategy,restoreOnFailure:o.restoreOnFailure,errorResponse:c};return y(Wo({response:h}))}))))),this.updateComponentSuccess$=C(()=>this.actions$.pipe(g(Ho),f(o=>o.response),F(()=>{this.dialog.closeAll()})),{dispatch:!1}),this.updateComponentFailure$=C(()=>this.actions$.pipe(g(Wo),f(o=>o.response),S(o=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(o.errorResponse,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(o.errorResponse))))),this.updateProcessor$=C(()=>this.actions$.pipe(g(mi),f(o=>o.request),lt(o=>L(this.flowService.updateComponent(o)).pipe(f(c=>{let h={requestId:o.requestId,id:o.id,type:o.type,postUpdateNavigation:o.postUpdateNavigation,postUpdateNavigationBoundary:o.postUpdateNavigationBoundary,response:c};return Fr({response:h})}),B(c=>{let h={id:o.id,type:o.type,errorStrategy:o.errorStrategy,restoreOnFailure:o.restoreOnFailure,errorResponse:c};return y(Wo({response:h}))}))))),this.updateProcessorSuccess$=C(()=>this.actions$.pipe(g(Fr),f(o=>o.response),A(()=>this.store.select(Y)),F(([o,c])=>{o.postUpdateNavigation?o.postUpdateNavigationBoundary?this.router.navigate(o.postUpdateNavigation,{state:{backNavigation:{route:["/process-groups",c,_.Processor,o.id,"edit"],routeBoundary:o.postUpdateNavigationBoundary,context:"Processor"}}}):this.router.navigate(o.postUpdateNavigation):this.dialog.closeAll()}),Pe(([o])=>o.postUpdateNavigation==null),S(([o])=>y(li({id:o.id}))))),this.loadConnectionsForComponent$=C(()=>this.actions$.pipe(g(li),f(o=>o.id),S(o=>this.canvasUtils.getComponentConnections(o).map(h=>ci({id:h.id}))))),this.loadConnection$=C(()=>this.actions$.pipe(g(ci),f(o=>o.id),lt(o=>L(this.flowService.getConnection(o)).pipe(f(c=>Va({response:{id:o,connection:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.loadComponentsForConnection$=C(()=>this.actions$.pipe(g(pi),f(o=>o.connection),S(o=>{let c=[],h=function(P,O){switch(P){case _.Processor:c.push(Yi({id:O.id}));break;case _.InputPort:c.push(Xi({id:O.id}));break;case _.RemoteProcessGroup:c.push(Ji({id:O.groupId}));break}};return h(this.canvasUtils.getComponentTypeForSource(o.component.source.type),o.component.source),h(this.canvasUtils.getComponentTypeForDestination(o.component.destination.type),o.component.destination),c}))),this.loadProcessor$=C(()=>this.actions$.pipe(g(Yi),f(o=>o.id),lt(o=>L(this.flowService.getProcessor(o)).pipe(f(c=>Ba({response:{id:o,processor:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.loadInputPort$=C(()=>this.actions$.pipe(g(Xi),f(o=>o.id),lt(o=>L(this.flowService.getInputPort(o)).pipe(f(c=>La({response:{id:o,inputPort:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.loadRemoteProcessGroup$=C(()=>this.actions$.pipe(g(Ji),f(o=>o.id),lt(o=>L(this.flowService.getRemoteProcessGroup(o)).pipe(f(c=>mr({response:{id:o,remoteProcessGroup:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.updateConnection$=C(()=>this.actions$.pipe(g(dn),f(o=>o.request),lt(o=>L(this.flowService.updateComponent(o)).pipe(f(c=>{let h={requestId:o.requestId,id:o.id,type:o.type,response:c,previousDestination:o.previousDestination};return Er({response:h})}),B(c=>{this.connectionManager.renderConnection(o.id,{updatePath:!0,updateLabel:!1});let h={id:o.id,type:o.type,errorStrategy:o.errorStrategy,restoreOnFailure:o.restoreOnFailure,errorResponse:c};return y(Wo({response:h}))}))))),this.updateConnectionSuccess$=C(()=>this.actions$.pipe(g(Er),F(()=>{this.dialog.closeAll()}),f(o=>o.response),S(o=>{let c=[pi({connection:o.response})];if(o.previousDestination)switch(this.canvasUtils.getComponentTypeForDestination(o.previousDestination.type)){case _.Processor:c.push(Yi({id:o.previousDestination.id}));break;case _.InputPort:c.push(Xi({id:o.previousDestination.id}));break;case _.RemoteProcessGroup:c.push(Ji({id:o.previousDestination.groupId}));break}return c}))),this.updatePositions$=C(()=>this.actions$.pipe(g(Dr),f(o=>o.request),lt(o=>[...o.componentUpdates.map(c=>Qt({request:j(V({},c),{requestId:o.requestId})})),...o.connectionUpdates.map(c=>Qt({request:j(V({},c),{requestId:o.requestId})}))]))),this.awaitUpdatePositions$=C(()=>this.actions$.pipe(g(Dr),f(o=>o.request),lt(o=>this.actions$.pipe(g(Ho),Pe(c=>_.Connection!==c.response.type),Pe(c=>o.requestId===c.response.requestId),f(c=>Ir(c)))))),this.updatePositionComplete$=C(()=>this.actions$.pipe(g(Ir),F(()=>{this.birdseyeView.refresh()}),f(o=>o.response),S(o=>y(Gr({id:o.id,updatePath:!0,updateLabel:!1}))))),this.renderConnectionsForComponent$=C(()=>this.actions$.pipe(g(Gr),F(o=>{this.connectionManager.renderConnectionsForComponent(o.id,{updatePath:o.updatePath,updateLabel:o.updateLabel})})),{dispatch:!1}),this.moveComponents$=C(()=>this.actions$.pipe(g(Mr),f(o=>o.request),A(()=>this.store.select(Y)),lt(([o,c])=>{let h=o.components,P=this.snippetService.marshalSnippet(h,c);return L(this.snippetService.createSnippet(P)).pipe(S(O=>this.snippetService.moveSnippet(O.snippet.id,o.groupId)),f(()=>{let O=[];return h.forEach(J=>{O.push({id:J.id,type:J.type})}),di({response:O})}),B(O=>y(this.snackBarOrFullScreenError(O))))}))),this.copySuccess$=C(()=>this.actions$.pipe(g(cl),f(o=>o.response),S(o=>y(Ic({content:o}))))),this.paste$=C(()=>this.actions$.pipe(g(pl),f(o=>o.request),A(()=>[this.store.select(Y),this.store.select(vc),this.store.select(dp)]),S(([o,c,h,P])=>{let O=null;P&&c===P.processGroupId&&P.copyResponse.id===o.id&&this.copyPasteService.isCopiedContentInView(P.copyResponse)&&(O=this.copyPasteService.toOffsetPasteRequest(o,P.pasteCount)),O||(O=this.copyPasteService.toCenteredPasteRequest(o));let ct={pasteRequest:{copyResponse:O.copyResponse,revision:h},processGroupId:c,pasteStrategy:O.strategy};return L(this.copyPasteService.paste(ct)).pipe(f(Tt=>Rr({response:j(V({},Tt),{pasteRequest:O})})),B(Tt=>y(this.snackBarOrFullScreenError(Tt))))}))),this.pasteSuccess$=C(()=>this.actions$.pipe(g(Rr),f(o=>o.response),A(()=>this.store.select(Y)),S(([o,c])=>{this.canvasView.updateCanvasVisibility(),this.birdseyeView.refresh();let h=[];return h.push(...o.flow.labels.map(P=>({id:P.id,componentType:_.Label}))),h.push(...o.flow.funnels.map(P=>({id:P.id,componentType:_.Funnel}))),h.push(...o.flow.remoteProcessGroups.map(P=>({id:P.id,componentType:_.RemoteProcessGroup}))),h.push(...o.flow.inputPorts.map(P=>({id:P.id,componentType:_.InputPort}))),h.push(...o.flow.outputPorts.map(P=>({id:P.id,componentType:_.OutputPort}))),h.push(...o.flow.processGroups.map(P=>({id:P.id,componentType:_.ProcessGroup}))),h.push(...o.flow.processors.map(P=>({id:P.id,componentType:_.Processor}))),h.push(...o.flow.connections.map(P=>({id:P.id,componentType:_.Connection}))),o.pasteRequest.fitToScreen&&o.pasteRequest.bbox&&this.canvasView.centerBoundingBox(o.pasteRequest.bbox),this.store.dispatch(Mc({pasted:{copyId:o.pasteRequest.copyResponse.id,processGroupId:c,strategy:o.pasteRequest.strategy}})),y(It({request:{components:h}}))}))),this.deleteComponent$=C(()=>this.actions$.pipe(g(ml),f(o=>o.request),A(()=>this.store.select(Y)),lt(([o,c])=>{if(o.length===1)return L(this.flowService.deleteComponent(o[0])).pipe(f(h=>{let P=[{id:o[0].id,type:o[0].type}];return o[0].type!==_.Connection?this.canvasUtils.getComponentConnections(o[0].id).forEach(J=>P.push({id:J.id,type:_.Connection})):this.store.dispatch(pi({connection:h})),di({response:P})}),B(h=>y(this.snackBarOrFullScreenError(h))));{let h=o.reduce((P,O)=>{switch(O.type){case _.Processor:P.processors[O.id]=this.client.getRevision(O.entity);break;case _.InputPort:P.inputPorts[O.id]=this.client.getRevision(O.entity);break;case _.OutputPort:P.outputPorts[O.id]=this.client.getRevision(O.entity);break;case _.ProcessGroup:P.processGroups[O.id]=this.client.getRevision(O.entity);break;case _.RemoteProcessGroup:P.remoteProcessGroups[O.id]=this.client.getRevision(O.entity);break;case _.Funnel:P.funnels[O.id]=this.client.getRevision(O.entity);break;case _.Label:P.labels[O.id]=this.client.getRevision(O.entity);break;case _.Connection:P.connections[O.id]=this.client.getRevision(O.entity);break}return P},{parentGroupId:c,processors:{},funnels:{},inputPorts:{},outputPorts:{},remoteProcessGroups:{},processGroups:{},connections:{},labels:{}});return L(this.snippetService.createSnippet(h)).pipe(S(P=>this.snippetService.deleteSnippet(P.snippet.id)),f(()=>{let P=[];return o.forEach(O=>{P.push({id:O.id,type:O.type}),O.type!==_.Connection&&this.canvasUtils.getComponentConnections(O.id).forEach(ct=>P.push({id:ct.id,type:_.Connection}))}),di({response:P})}),B(P=>y(this.snackBarOrFullScreenError(P))))}}))),this.deleteComponentsSuccess$=C(()=>this.actions$.pipe(g(di),F(()=>{this.birdseyeView.refresh()})),{dispatch:!1}),this.enterProcessGroup$=C(()=>this.actions$.pipe(g(Oa),f(o=>o.request),F(o=>{this.router.navigate(["/process-groups",o.id])})),{dispatch:!1}),this.leaveProcessGroup$=C(()=>this.actions$.pipe(g(Ga),A(()=>this.store.select(kn)),Pe(([,o])=>o!=null),F(([,o])=>{this.router.navigate(["/process-groups",o])})),{dispatch:!1}),this.addSelectedComponents$=C(()=>this.actions$.pipe(g(qa),f(o=>o.request),A(()=>[this.store.select(Y),this.store.select(Ss)]),S(([o,c,h])=>{let P=[];if(h.length===0){if(o.components.length===1)P=["/process-groups",c,o.components[0].componentType,o.components[0].id];else if(o.components.length>1){let O=o.components.map(J=>J.id);P=["/process-groups",c,"bulk",O.join(",")]}}else{let O=o.components.map(J=>J.id);O.push(...h),P=["/process-groups",c,"bulk",O.join(",")]}return y(So({url:P}))}))),this.removeSelectedComponents$=C(()=>this.actions$.pipe(g(Ua),f(o=>o.request),A(()=>[this.store.select(Y),this.store.select(Ss)]),S(([o,c,h])=>{let P;if(h.length===0)P=["/process-groups",c];else{let O=o.components.map(ct=>ct.id),J=h.filter(ct=>!O.includes(ct));P=["/process-groups",c,"bulk",J.join(",")]}return y(So({url:P}))}))),this.selectComponents$=C(()=>this.actions$.pipe(g(It),f(o=>o.request),A(()=>this.store.select(Y)),S(([o,c])=>{let h=[];if(o.components.length===1)h=["/process-groups",c,o.components[0].componentType,o.components[0].id];else if(o.components.length>1){let P=o.components.map(O=>O.id);h=["/process-groups",c,"bulk",P.join(",")]}return y(So({url:h}))}))),this.deselectAllComponent$=C(()=>this.actions$.pipe(g(ja),A(()=>this.store.select(Y)),S(([,o])=>y(So({url:["/process-groups",o]}))))),this.navigateToComponent$=C(()=>this.actions$.pipe(g(Ar),f(o=>o.request),A(()=>this.store.select(Y)),F(([o,c])=>{o.processGroupId?this.router.navigate(["/process-groups",o.processGroupId,o.type,o.id]):this.router.navigate(["/process-groups",c,o.type,o.id])})),{dispatch:!1}),this.navigateWithoutTransform$=C(()=>this.actions$.pipe(g(So),f(o=>o.url),F(o=>{this.router.navigate(o)})),{dispatch:!1}),this.centerSelectedComponents$=C(()=>this.actions$.pipe(g(za),f(o=>o.request),F(o=>{this.canvasView.centerSelectedComponents(o.allowTransition)}),S(()=>y(ul({allowTransition:!1}))))),this.navigateToProvenanceForComponent$=C(()=>this.actions$.pipe(g(fl),f(o=>o.id),A(()=>this.store.select(Y)),F(([o,c])=>{this.router.navigate(["/provenance"],{queryParams:{componentId:o},state:{backNavigation:{route:["/process-groups",c,_.Processor,o],routeBoundary:["/provenance"],context:"Processor"}}})})),{dispatch:!1}),this.replayLastProvenanceEvent=C(()=>this.actions$.pipe(g(hl),f(o=>o.request),F(o=>{this.flowService.replayLastProvenanceEvent(o).subscribe({next:c=>{if(c.aggregateSnapshot.failureExplanation)this.store.dispatch(so({title:"Replay Event Failure",message:c.aggregateSnapshot.failureExplanation}));else if(c.aggregateSnapshot.eventAvailable!==!0)this.store.dispatch(so({title:"No Event Available",message:"There was no recent event available to be replayed."}));else if(c.nodeSnapshots){let h=0,P=0;c.nodeSnapshots.forEach(J=>{J.snapshot.eventAvailable?h++:P++});let O;P===0?O="All nodes successfully replayed the latest event.":O=`${h} nodes successfully replayed the latest event but ${P} had no recent event available to be replayed.`,this.store.dispatch(so({title:"Events Replayed",message:O}))}else this.store.dispatch(so({title:"Events Replayed",message:"Successfully replayed the latest event."}));this.store.dispatch(li({id:o.componentId}))},error:c=>{this.store.dispatch(so({title:"Failed to Replay Event",message:this.errorHelper.getErrorString(c)}))}})})),{dispatch:!1}),this.showOkDialog$=C(()=>this.actions$.pipe(g(so),F(o=>{this.dialog.open(Oi,j(V({},xt),{data:{title:o.title,message:o.message}}))})),{dispatch:!1}),this.enableCurrentProcessGroup$=C(()=>this.actions$.pipe(g(vl),A(()=>this.store.select(Y)),S(([,o])=>y(Qo({request:{id:o,type:_.ProcessGroup,errorStrategy:"snackbar"}}))))),this.enableComponents$=C(()=>this.actions$.pipe(g(gl),f(o=>o.request),lt(o=>[...o.components.map(c=>Qo({request:c}))]))),this.enableComponent$=C(()=>this.actions$.pipe(g(Qo),f(o=>o.request),lt(o=>{switch(o.type){case _.InputPort:case _.OutputPort:case _.Processor:return"uri"in o&&"revision"in o?L(this.flowService.enableComponent(o)).pipe(f(c=>Cl({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c)))):y(Mt({error:`Enabling ${o.type} requires both uri and revision properties`}));case _.ProcessGroup:return L(this.flowService.enableProcessGroup(o)).pipe(f(c=>un({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c))));default:return y(Mt({error:`${o.type} does not support enabling`}))}}))),this.enableCurrentProcessGroupSuccess$=C(()=>this.actions$.pipe(g(un),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id===c),S(()=>y(Pt())))),this.enableProcessGroupSuccess$=C(()=>this.actions$.pipe(g(un),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id!==c),S(([o])=>y(oo({request:{id:o.component.id}}))))),this.disableCurrentProcessGroup$=C(()=>this.actions$.pipe(g(xl),A(()=>this.store.select(Y)),S(([,o])=>y(Ko({request:{id:o,type:_.ProcessGroup,errorStrategy:"snackbar"}}))))),this.disableComponents$=C(()=>this.actions$.pipe(g(yl),f(o=>o.request),lt(o=>[...o.components.map(c=>Ko({request:c}))]))),this.disableComponent$=C(()=>this.actions$.pipe(g(Ko),f(o=>o.request),lt(o=>{switch(o.type){case _.InputPort:case _.OutputPort:case _.Processor:return"uri"in o&&"revision"in o?L(this.flowService.disableComponent(o)).pipe(f(c=>_l({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c)))):y(Mt({error:`Disabling ${o.type} requires both uri and revision properties`}));case _.ProcessGroup:return L(this.flowService.disableProcessGroup(o)).pipe(f(c=>fn({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c))));default:return y(Mt({error:`${o.type} does not support disabling`}))}}))),this.disableCurrentProcessGroupSuccess$=C(()=>this.actions$.pipe(g(fn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id===c),S(()=>y(Pt())))),this.disableProcessGroupSuccess$=C(()=>this.actions$.pipe(g(fn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id!==c),S(([o])=>y(oo({request:{id:o.component.id}}))))),this.startCurrentProcessGroup$=C(()=>this.actions$.pipe(g(Dl),A(()=>this.store.select(Y)),S(([,o])=>y(Yo({request:{id:o,type:_.ProcessGroup,errorStrategy:"snackbar"}}))))),this.startComponents$=C(()=>this.actions$.pipe(g(Pl),f(o=>o.request),lt(o=>[...o.components.map(c=>Yo({request:c}))]))),this.startComponent$=C(()=>this.actions$.pipe(g(Yo),f(o=>o.request),lt(o=>{switch(o.type){case _.InputPort:case _.OutputPort:case _.Processor:case _.RemoteProcessGroup:return"uri"in o&&"revision"in o?L(this.flowService.startComponent(o)).pipe(f(c=>wl({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c)))):y(Mt({error:`Starting ${o.type} requires both uri and revision properties`}));case _.ProcessGroup:return no([this.flowService.startProcessGroup(o),this.flowService.startRemoteProcessGroupsInProcessGroup(o)]).pipe(f(([c])=>hn({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c))));default:return y(Mt({error:`${o.type} does not support starting`}))}}))),this.startCurrentProcessGroupSuccess$=C(()=>this.actions$.pipe(g(hn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id===c),S(()=>y(Pt())))),this.startProcessGroupSuccess$=C(()=>this.actions$.pipe(g(hn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id!==c),S(([o])=>y(oo({request:{id:o.component.id}}))))),this.stopCurrentProcessGroup$=C(()=>this.actions$.pipe(g(Il),A(()=>this.store.select(Y)),S(([,o])=>y(Xo({request:{id:o,type:_.ProcessGroup,errorStrategy:"snackbar"}}))))),this.enableControllerServicesInCurrentProcessGroup$=C(()=>this.actions$.pipe(g(Ml),A(()=>this.store.select(Y)),S(([,o])=>L(this.flowService.enableAllControllerServices(o).pipe(f(()=>Pt()),B(c=>y(this.snackBarOrFullScreenError(c)))))))),this.disableControllerServicesInCurrentProcessGroup$=C(()=>this.actions$.pipe(g(Rl),A(()=>this.store.select(Y)),S(([,o])=>L(this.flowService.disableAllControllerServices(o).pipe(f(()=>Pt()),B(c=>y(this.snackBarOrFullScreenError(c)))))))),this.enableControllerServicesInProcessGroup$=C(()=>this.actions$.pipe(g(Al),f(o=>o.id),S(o=>L(this.flowService.enableAllControllerServices(o).pipe(f(()=>oo({request:{id:o}})),B(c=>y(this.snackBarOrFullScreenError(c)))))))),this.disableControllerServicesInProcessGroup$=C(()=>this.actions$.pipe(g(Gl),f(o=>o.id),S(o=>L(this.flowService.disableAllControllerServices(o).pipe(f(()=>oo({request:{id:o}})),B(c=>y(this.snackBarOrFullScreenError(c)))))))),this.stopComponents$=C(()=>this.actions$.pipe(g(Tl),f(o=>o.request),lt(o=>[...o.components.map(c=>Xo({request:c}))]))),this.stopComponent$=C(()=>this.actions$.pipe(g(Xo),f(o=>o.request),lt(o=>{switch(o.type){case _.InputPort:case _.OutputPort:case _.Processor:case _.RemoteProcessGroup:return"uri"in o&&"revision"in o?L(this.flowService.stopComponent(o)).pipe(f(c=>El({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c)))):y(Mt({error:`Stopping ${o.type} requires both uri and revision properties`}));case _.ProcessGroup:return no([this.flowService.stopProcessGroup(o),this.flowService.stopRemoteProcessGroupsInProcessGroup(o)]).pipe(f(([c])=>gn({response:{type:o.type,component:c}})),B(c=>o.errorStrategy==="banner"?y(this.bannerOrFullScreenError(c,this.componentTypeToErrorContext(o.type))):y(this.snackBarOrFullScreenError(c))));default:return y(Mt({error:`${o.type} does not support stopping`}))}}))),this.terminateThreads$=C(()=>this.actions$.pipe(g(Fl),f(o=>o.request),S(o=>L(this.flowService.terminateThreads(o)).pipe(f(c=>Ho({response:{id:o.id,type:_.Processor,response:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.stopCurrentProcessGroupSuccess$=C(()=>this.actions$.pipe(g(gn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id===c),S(()=>y(Pt())))),this.stopProcessGroupSuccess$=C(()=>this.actions$.pipe(g(gn),f(o=>o.response),A(()=>this.store.select(Y)),Pe(([o,c])=>o.component.id!==c),S(([o])=>y(oo({request:{id:o.component.id}}))))),this.runOnce$=C(()=>this.actions$.pipe(g(Sl),f(o=>o.request),S(o=>L(this.flowService.runOnce(o)).pipe(f(c=>bl({response:{component:c}})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.reloadProcessGroup$=C(()=>this.actions$.pipe(g(oo),f(o=>o.request),lt(o=>L(this.flowService.getProcessGroup(o.id)).pipe(f(c=>ka({response:c})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openSaveVersionDialogRequest$=C(()=>this.actions$.pipe(g(kl),f(o=>o.request),S(o=>no([this.registryService.getRegistryClients(),this.flowService.getVersionInformation(o.processGroupId)]).pipe(f(([c,h])=>{let P={processGroupId:o.processGroupId,revision:h.processGroupRevision,registryClients:c.registries};return this.store.dispatch(pr({request:c.registries})),_n({request:P})}),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openSaveVersionDialog$=C(()=>this.actions$.pipe(g(_n),f(o=>o.request),F(o=>{let c=this.dialog.open(rp,j(V({},xt),{data:o}));c.componentInstance.getBranches=h=>this.registryService.getBranches(h).pipe(te(1),f(P=>P.branches),F({error:P=>{this.store.dispatch(ao({errorContext:{context:ee.FLOW_VERSION,errors:[this.errorHelper.getErrorString(P)]}}))}})),c.componentInstance.getBuckets=(h,P)=>this.registryService.getBuckets(h,P).pipe(te(1),f(O=>O.buckets),F({error:O=>{this.store.dispatch(ao({errorContext:{context:ee.FLOW_VERSION,errors:[this.errorHelper.getErrorString(O)]}}))}})),c.componentInstance.saving=this.store.selectSignal(Cc),c.componentInstance.save.pipe(Te(c.afterClosed())).subscribe(h=>{h.existingFlowId?this.store.dispatch(xn({request:{versionedFlow:{action:o.forceCommit?"FORCE_COMMIT":"COMMIT",flowId:h.existingFlowId,bucketId:h.bucket,registryId:h.registry,comments:h.comments||"",branch:h.branch},processGroupId:h.processGroupId,processGroupRevision:h.revision}})):this.store.dispatch(xn({request:{versionedFlow:{action:"COMMIT",bucketId:h.bucket,registryId:h.registry,flowName:h.flowName,description:h.flowDescription||"",comments:h.comments||"",branch:h.branch},processGroupId:h.processGroupId,processGroupRevision:h.revision}}))})})),{dispatch:!1}),this.saveToFlowRegistry$=C(()=>this.actions$.pipe(g(xn),f(o=>o.request),S(o=>L(this.flowService.saveToFlowRegistry(o)).pipe(f(c=>Hr({response:c})),B(c=>y(this.bannerOrFullScreenError(c,ee.FLOW_VERSION))))))),this.saveToFlowRegistrySuccess$=C(()=>this.actions$.pipe(g(Hr),F(()=>{this.dialog.closeAll()}),S(()=>y(Pt())))),this.flowBannerError$=C(()=>this.actions$.pipe(g(ao),f(o=>o.errorContext),S(o=>y(Fo({errorContext:o}))))),this.flowSnackbarError$=C(()=>this.actions$.pipe(g(Mt),f(o=>o.error),F(()=>{this.dialog.closeAll()}),S(o=>y(vt({error:o}))))),this.stopVersionControlRequest$=C(()=>this.actions$.pipe(g($l),f(o=>o.request),S(o=>L(this.flowService.getVersionInformation(o.processGroupId)).pipe(f(c=>({processGroupId:o.processGroupId,revision:c.processGroupRevision})))),F(o=>{let c=this.dialog.open(eo,j(V({},Et),{data:{title:"Stop Version Control",message:"Are you sure you want to stop version control?"}}));c.componentInstance.yes.pipe(te(1)).subscribe(()=>{this.store.dispatch(Wr({request:o}))}),c.componentInstance.no.pipe(te(1)).subscribe(()=>{c.close()})}),B(o=>y(this.snackBarOrFullScreenError(o)))),{dispatch:!1}),this.stopVersionControl$=C(()=>this.actions$.pipe(g(Wr),f(o=>o.request),S(o=>L(this.flowService.stopVersionControl(o)).pipe(f(c=>{let h={processGroupRevision:c.processGroupRevision,processGroupId:o.processGroupId};return Qr({response:h})}),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.stopVersionControlSuccess$=C(()=>this.actions$.pipe(g(Qr),F(()=>{this.store.dispatch(so({title:"Disconnect",message:"This Process Group is no longer under version control."}))}),S(()=>y(Pt())))),this.openCommitLocalChangesDialogRequest$=C(()=>this.actions$.pipe(g(Or),f(o=>o.request),S(o=>L(this.flowService.getVersionInformation(o.processGroupId)).pipe(f(c=>{let h={processGroupId:o.processGroupId,revision:c.processGroupRevision,versionControlInformation:c.versionControlInformation,forceCommit:o.forceCommit};return _n({request:h})}),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openForceCommitLocalChangesDialogRequest$=C(()=>this.actions$.pipe(g(Nl),f(o=>o.request),F(o=>{let c=this.dialog.open(eo,j(V({},Et),{data:{title:"Commit",message:"Committing will ignore available upgrades and commit local changes as the next version. Are you sure you want to proceed?"}}));c.componentInstance.yes.pipe(te(1)).subscribe(()=>{this.store.dispatch(Or({request:j(V({},o),{forceCommit:!0})}))}),c.componentInstance.no.pipe(te(1)).subscribe(()=>{c.close()})})),{dispatch:!1}),this.openChangeVersionDialogRequest$=C(()=>this.actions$.pipe(g(Ol),f(o=>o.request),S(o=>L(this.flowService.getVersionInformation(o.processGroupId)).pipe(F({error:c=>this.store.dispatch(this.snackBarOrFullScreenError(c))}))),S(o=>{let c=o.versionControlInformation;return c?L(this.registryService.getFlowVersions(c.registryId,c.bucketId,c.flowId,c.branch)).pipe(f(h=>kr({request:{processGroupId:c.groupId,revision:o.processGroupRevision,versionControlInformation:c,versions:h.versionedFlowSnapshotMetadataSet}})),B(h=>y(this.snackBarOrFullScreenError(h)))):Os}))),this.openChangeVersionDialog$=C(()=>this.actions$.pipe(g(kr),f(o=>o.request),F(o=>{let c=this.dialog.open(sp,j(V({},St),{data:o,autoFocus:!1}));c.componentInstance.changeVersion.pipe(te(1)).subscribe(h=>{let P={versionControlInformation:j(V({},o.versionControlInformation),{version:h.version}),processGroupRevision:o.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()};c.close(),this.store.dispatch(Nr({request:P}))})})),{dispatch:!1}),this.openChangeVersionProgressDialog$=C(()=>this.actions$.pipe(g(Nr),f(o=>o.request),F(()=>{let o=this.dialog.open(Ms,j(V({},xt),{disableClose:!0,autoFocus:!1}));o.componentInstance.flowUpdateRequest$=this.store.select(gi),o.componentInstance.changeVersionComplete.pipe(te(1)).subscribe(c=>{this.store.dispatch(Br({response:c}))})}),S(o=>y($r({request:o}))))),this.changeVersion$=C(()=>this.actions$.pipe(g($r),f(o=>o.request),S(o=>L(this.flowService.initiateChangeVersionUpdate(o)).pipe(f(c=>Vr({response:c})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.changeVersionSuccess$=C(()=>this.actions$.pipe(g(Vr),f(o=>o.response),Pe(o=>!o.request.complete),S(()=>y(Lr())))),this.startPollingChangeVersion=C(()=>this.actions$.pipe(g(Lr),S(()=>Nt(2e3,ht).pipe(Te(this.actions$.pipe(g(Cn))))),S(()=>y(qr())))),this.pollChangeVersion$=C(()=>this.actions$.pipe(g(qr),A(()=>[this.store.select(gi).pipe(Dt())]),S(([,o])=>L(this.flowService.getChangeVersionUpdateRequest(o.request.requestId).pipe(f(c=>jr({response:c})),B(c=>(this.store.dispatch(Cn()),y(this.snackBarOrFullScreenError(c))))))))),this.pollChangeVersionSuccess$=C(()=>this.actions$.pipe(g(jr),f(o=>o.response),Pe(o=>o.request.complete),S(()=>y(Cn())))),this.changeVersionComplete$=C(()=>this.actions$.pipe(g(Br),f(o=>o.response),S(o=>L(this.flowService.deleteChangeVersionUpdateRequest(o.request.requestId)).pipe(f(()=>Pt()),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.openLocalChangesDialogRequest=o=>C(()=>this.actions$.pipe(g(o==="SHOW"?Vl:Bl),f(c=>c.request),S(c=>no([this.flowService.getVersionInformation(c.processGroupId),this.flowService.getLocalModifications(c.processGroupId)]).pipe(f(([h,P])=>Kr({request:{localModifications:P,versionControlInformation:h,mode:o}})),B(h=>y(this.snackBarOrFullScreenError(h))))))),this.openShowLocalChangesDialogRequest$=this.openLocalChangesDialogRequest("SHOW"),this.openLocalChangesDialog$=C(()=>this.actions$.pipe(g(Kr),f(o=>o.request),F(o=>{let c=this.dialog.open(lp,j(V({},ro),{data:o}));o.mode==="REVERT"&&c.componentInstance.revert.pipe(te(1)).subscribe(h=>{c.close(),this.store.dispatch(Xr({request:h.versionControlInformation}))}),c.componentInstance.goToChange.pipe(te(1)).subscribe(h=>this.store.dispatch(Yr({request:h})))})),{dispatch:!1}),this.goToChange$=C(()=>this.actions$.pipe(g(Yr),f(o=>o.request),F(()=>this.dialog.closeAll()),S(o=>y(Ar({request:o}))))),this.openRevertLocalChangesDialogRequest$=this.openLocalChangesDialogRequest("REVERT"),this.openRevertChangesProgressDialog$=C(()=>this.actions$.pipe(g(Xr),f(o=>o.request),F(()=>{let o=this.dialog.open(Ms,j(V({},xt),{disableClose:!0,autoFocus:!1}));o.componentInstance.flowUpdateRequest$=this.store.select(gi),o.componentInstance.changeVersionComplete.pipe(te(1)).subscribe(c=>{this.store.dispatch(es({response:c}))})}),S(o=>y(Jr({request:o}))))),this.revertChanges$=C(()=>this.actions$.pipe(g(Jr),f(o=>o.request),S(o=>L(this.flowService.initiateRevertFlowVersion(o)).pipe(f(c=>Zr({response:c})),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.revertChangesSuccess$=C(()=>this.actions$.pipe(g(Zr),f(o=>o.response),Pe(o=>!o.request.complete),S(()=>y(ts())))),this.startPollingRevertChanges=C(()=>this.actions$.pipe(g(ts),S(()=>Nt(2e3,ht).pipe(Te(this.actions$.pipe(g(Sn))))),S(()=>y(os())))),this.pollRevertChanges$=C(()=>this.actions$.pipe(g(os),A(()=>[this.store.select(gi).pipe(Dt())]),S(([,o])=>L(this.flowService.getRevertChangesUpdateRequest(o.request.requestId).pipe(f(c=>is({response:c})),B(c=>(this.store.dispatch(Sn()),y(this.snackBarOrFullScreenError(c))))))))),this.pollRevertChangesSuccess$=C(()=>this.actions$.pipe(g(is),f(o=>o.response),Pe(o=>o.request.complete),S(()=>y(Sn())))),this.revertChangesComplete$=C(()=>this.actions$.pipe(g(es),f(o=>o.response),S(o=>L(this.flowService.deleteRevertChangesUpdateRequest(o.request.requestId)).pipe(f(()=>Pt()),B(c=>y(this.snackBarOrFullScreenError(c))))))),this.downloadFlow$=C(()=>this.actions$.pipe(g(Ll),f(o=>o.request),F(o=>{this.flowService.downloadFlow(o)})),{dispatch:!1}),this.moveToFront$=C(()=>this.actions$.pipe(g(ql),f(o=>o.request),A(o=>this.store.select(Nn(o.componentType))),Pe(([o,c])=>o.zIndex<=c),S(([o,c])=>{let h={id:o.id,type:o.componentType,uri:o.uri,payload:{revision:o.revision,disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{id:o.id,zIndex:c+1}},errorStrategy:"snackbar"};return L(this.flowService.updateComponent(h)).pipe(f(P=>{let O={id:h.id,type:h.type,response:P};return Ho({response:O})}),B(P=>{let O={id:h.id,type:h.type,errorStrategy:h.errorStrategy,restoreOnFailure:h.restoreOnFailure,errorResponse:P};return y(Wo({response:O}))}))}))),this.openChangeProcessorVersionDialog$=C(()=>this.actions$.pipe(g(jl),f(o=>o.request),S(o=>L(this.extensionTypesService.getProcessorVersionsForType(o.type,o.bundle)).pipe(f(c=>({fetchRequest:o,componentVersions:c.processorTypes})),F({error:c=>{this.store.dispatch(this.snackBarOrFullScreenError(c))}}))),F(o=>{let c=this.dialog.open(Bi,j(V({},St),{data:o,autoFocus:!1}));c.componentInstance.changeVersion.pipe(te(1)).subscribe(h=>{this.store.dispatch(mi({request:{id:o.fetchRequest.id,uri:o.fetchRequest.uri,type:_.Processor,payload:{component:{bundle:h.bundle,id:o.fetchRequest.id},revision:o.fetchRequest.revision},errorStrategy:"snackbar"}})),c.close()})})),{dispatch:!1}),this.changeColor$=C(()=>this.actions$.pipe(g(Ul),f(o=>o.request),F(o=>{let c=this.dialog.open(mp,j(V({},Et),{data:o}));c.componentInstance.changeColor.pipe(te(1)).subscribe(h=>{h.forEach(P=>{let O={};P.style&&(O=V({},P.style)),P.type===_.Processor?(P.color?O["background-color"]=P.color:delete O["background-color"],this.store.dispatch(mi({request:{id:P.id,type:_.Processor,errorStrategy:"snackbar",uri:P.uri,payload:{revision:P.revision,component:{id:P.id,style:O}}}}))):P.type===_.Label&&(P.color?O["background-color"]=P.color:O["background-color"]=null,this.store.dispatch(Qt({request:{id:P.id,type:_.Label,errorStrategy:"snackbar",uri:P.uri,payload:{revision:P.revision,component:{id:P.id,style:O}}}})))}),c.close()})})),{dispatch:!1}),this.store.select(Rs).pipe(fo(this.destroyRef),Pe(o=>o.documentVisibility===ws.Visible),Pe(()=>this.canvasView.isCanvasInitialized()),Pe(o=>o.changedTimestamp-this.lastReload>30*we.MILLIS_PER_SECOND)).subscribe(()=>{this.store.dispatch(Pt())})}componentTypeToErrorContext(e){switch(e){case _.Connection:return ee.CONNECTION;case _.Label:return ee.LABEL;case _.InputPort:case _.OutputPort:return ee.PORT;case _.Processor:return ee.PROCESSOR;case _.ProcessGroup:return ee.PROCESS_GROUP;case _.RemoteProcessGroup:return ee.REMOTE_PROCESS_GROUP;case _.Funnel:return ee.FUNNEL;case _.ControllerService:return ee.CONTROLLER_SERVICES;default:return ee.FLOW}}bannerOrFullScreenError(e,i){return this.errorHelper.showErrorInContext(e.status)?ao({errorContext:{errors:[this.errorHelper.getErrorString(e)],context:i}}):this.errorHelper.fullScreenError(e)}snackBarOrFullScreenError(e){return this.errorHelper.showErrorInContext(e.status)?Mt({error:this.errorHelper.getErrorString(e)}):this.errorHelper.fullScreenError(e)}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(go),k(Hi),k($n),k(Zc),k(je),k(wt),k(Vn),k(Bn),k(Tc),k(dt),k(cp),k(uo),k(Vt),k(Vi),k(er),k(_o),k($i),k($t),k(Dc))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var fp=(()=>{class t{static{this.VIEW_PREFIX="nifi-view-"}constructor(e,i,n,d,b,w){this.actions$=e,this.store=i,this.storage=n,this.canvasView=d,this.birdseyeView=b,this.labelManager=w,this.transformComplete$=C(()=>this.actions$.pipe(g(Fa),f(H=>H.transform),A(()=>this.store.select(Y)),F(([H,G])=>{let U=t.VIEW_PREFIX+G,ot={scale:H.scale,translateX:H.translate.x,translateY:H.translate.y};this.storage.setItem(U,ot)}),S(()=>y(ar())))),this.restoreViewportComplete$=C(()=>this.actions$.pipe(g(ar),F(()=>this.labelManager.render())),{dispatch:!1}),this.restoreViewport$=C(()=>this.actions$.pipe(g(Ea),A(()=>this.store.select(Y)),F(([,H])=>{try{let G=t.VIEW_PREFIX+H,U=this.storage.getItem(G);U?isFinite(U.scale)&&isFinite(U.translateX)&&isFinite(U.translateY)?this.canvasView.transform([U.translateX,U.translateY],U.scale):this.store.dispatch(Ki({transition:!1})):this.store.dispatch(Ki({transition:!1}))}catch{}})),{dispatch:!1}),this.translate$=C(()=>this.actions$.pipe(g(Da),f(H=>H.translate),F(H=>{this.canvasView.translate(H)})),{dispatch:!1}),this.refreshBirdseye$=C(()=>this.actions$.pipe(g(Ia),F(()=>{this.birdseyeView.refresh()})),{dispatch:!1}),this.zoomIn$=C(()=>this.actions$.pipe(g(Ma),F(()=>{this.canvasView.zoomIn()})),{dispatch:!1}),this.zoomOut$=C(()=>this.actions$.pipe(g(Ra),F(()=>{this.canvasView.zoomOut()})),{dispatch:!1}),this.zoomFit$=C(()=>this.actions$.pipe(g(Ki),f(H=>H.transition),F(H=>{this.canvasView.fit(H)})),{dispatch:!1}),this.zoomActual$=C(()=>this.actions$.pipe(g(Aa),F(()=>{this.canvasView.actualSize()})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(go),k(Vn),k(Bn),k(Fc))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var hp=(()=>{class t{constructor(e,i,n,d,b,w,H,G,U,ot,Oe,at){this.actions$=e,this.store=i,this.storage=n,this.client=d,this.controllerServiceService=b,this.parameterContextService=w,this.errorHelper=H,this.dialog=G,this.router=U,this.propertyTableHelperService=ot,this.parameterHelperService=Oe,this.extensionTypesService=at,this.loadControllerServices$=C(()=>this.actions$.pipe(g(Jo),f(E=>E.request),A(()=>this.store.select(Pc)),S(([E,K])=>no([this.controllerServiceService.getControllerServices(E.processGroupId),this.controllerServiceService.getFlow(E.processGroupId)]).pipe(f(([re,ze])=>Hl({response:{processGroupId:ze.processGroupFlow.id,controllerServices:re.controllerServices,loadedTimestamp:re.currentTime,breadcrumb:ze.processGroupFlow.breadcrumb,parameterContext:ze.processGroupFlow.parameterContext??null}})),B(re=>y(this.errorHelper.handleLoadingError(K,re))))))),this.openNewControllerServiceDialog$=C(()=>this.actions$.pipe(g(Wl),A(()=>[this.store.select(ra),this.store.select(Rt)]),F(([,E,K])=>{let re=this.dialog.open(ua,j(V({},St),{data:{controllerServiceTypes:E}}));re.componentInstance.saving$=this.store.select(Ps),re.componentInstance.createControllerService.pipe(te(1)).subscribe(ze=>{this.store.dispatch(rs({request:{revision:{clientId:this.client.getClientId(),version:0},processGroupId:K,controllerServiceType:ze.type,controllerServiceBundle:ze.bundle}}))})})),{dispatch:!1}),this.createControllerService$=C(()=>this.actions$.pipe(g(rs),f(E=>E.request),S(E=>L(this.controllerServiceService.createControllerService(E)).pipe(f(K=>ss({response:{controllerService:K}})),B(K=>(this.dialog.closeAll(),y(vt({error:this.errorHelper.getErrorString(K)})))))))),this.createControllerServiceSuccess$=C(()=>this.actions$.pipe(g(ss),f(E=>E.response),A(()=>this.store.select(Rt)),F(([E,K])=>{this.dialog.closeAll(),this.store.dispatch(Zo({request:{id:E.controllerService.id,processGroupId:K}}))}),S(([,E])=>y(Jo({request:{processGroupId:E}}))))),this.navigateToEditService$=C(()=>this.actions$.pipe(g(Yl),f(E=>E.id),A(()=>this.store.select(Rt)),F(([E,K])=>{this.router.navigate(["/process-groups",K,"controller-services",E,"edit"])})),{dispatch:!1}),this.navigateToAdvancedServiceUi$=C(()=>this.actions$.pipe(g(Xl),f(E=>E.id),A(()=>this.store.select(Rt)),F(([E,K])=>{let re=["/process-groups",K,"controller-services",E,"advanced"];this.router.navigate([...re],{state:{backNavigation:{route:["/process-groups",K,"controller-services",E],routeBoundary:re,context:"Controller Service"}}})})),{dispatch:!1}),this.navigateToManageComponentPolicies$=C(()=>this.actions$.pipe(g(Jl),f(E=>E.id),A(()=>this.store.select(Rt)),F(([E,K])=>{let re=["/access-policies"];this.router.navigate([...re,"read","component","controller-services",E],{state:{backNavigation:{route:["/process-groups",K,"controller-services",E],routeBoundary:re,context:"Controller Service"}}})})),{dispatch:!1}),this.navigateToService$=C(()=>this.actions$.pipe(g(Kl),f(E=>E.request),A(()=>this.store.select(Rt)),F(([E,K])=>{let re=["/process-groups",E.processGroupId,"controller-services"];this.router.navigate([...re,E.id],{state:{backNavigation:{route:["/process-groups",K,"controller-services",E.id],routeBoundary:re,context:"Controller Service"}}})})),{dispatch:!1}),this.openConfigureControllerServiceDialog$=C(()=>this.actions$.pipe(g(Zl),f(E=>E.request),A(()=>this.store.select(Rt)),S(([E,K])=>L(this.propertyTableHelperService.getComponentHistory(E.id)).pipe(f(re=>j(V({},E),{history:re.componentHistory})),F({error:re=>{this.store.dispatch(Zo({request:{processGroupId:K,id:E.id}})),this.store.dispatch(vt({error:this.errorHelper.getErrorString(re)}))}}))),A(()=>[this.store.select(wc),this.store.select(Rt)]),S(([E,K,re])=>K&&K.permissions.canRead?L(this.parameterContextService.getParameterContext(K.id,!0)).pipe(f(ze=>[E,ze,re]),F({error:ze=>{this.store.dispatch(Zo({request:{processGroupId:re,id:E.id}})),this.store.dispatch(vt({error:this.errorHelper.getErrorString(ze)}))}})):y([E,null,re])),F(([E,K,re])=>{let ze=E.id,Ve=this.dialog.open(Ca,j(V({},ro),{data:E,id:ze}));Ve.componentInstance.saving$=this.store.select(Ps),Ve.componentInstance.createNewProperty=this.propertyTableHelperService.createNewProperty(E.id,this.controllerServiceService),Ve.componentInstance.verify.pipe(Te(Ve.afterClosed())).subscribe(He=>{this.store.dispatch(Li({request:He}))}),Ve.componentInstance.propertyVerificationResults$=this.store.select(ji),Ve.componentInstance.propertyVerificationStatus$=this.store.select(Ui);let io=(He,Ot,Yt)=>{if(Ve.componentInstance.editControllerServiceForm.dirty){let o=this.dialog.open(eo,j(V({},Et),{data:{title:"Controller Service Configuration",message:`Save changes before going to this ${Ot}?`}}));o.componentInstance.yes.pipe(te(1)).subscribe(()=>{Ve.componentInstance.submitForm(He,Yt)}),o.componentInstance.no.pipe(te(1)).subscribe(()=>{Yt?this.router.navigate(He,{state:{backNavigation:{route:["/process-groups",re,"controller-services",ze,"edit"],routeBoundary:Yt,context:"Controller Service"}}}):this.router.navigate(He)})}else Yt?this.router.navigate(He,{state:{backNavigation:{route:["/process-groups",re,"controller-services",ze,"edit"],routeBoundary:Yt,context:"Controller Service"}}}):this.router.navigate(He)};Ve.componentInstance.goToReferencingComponent=He=>{let Ot=this.getRouteForReference(He);io(Ot,He.referenceType)},K!=null&&(Ve.componentInstance.parameterContext=K,Ve.componentInstance.goToParameter=()=>{this.storage.setItem(we.EDIT_PARAMETER_CONTEXT_DIALOG_ID,1);let He=["/parameter-contexts"],Ot=[...He,K.id,"edit"];io(Ot,"Parameter",He)},Ve.componentInstance.convertToParameter=this.parameterHelperService.convertToParameter(K.id)),Ve.componentInstance.goToService=He=>{this.controllerServiceService.getControllerService(He).subscribe({next:Ot=>{let Yt=["/process-groups",Ot.component.parentGroupId,"controller-services"],o=[...Yt,Ot.id];io(o,"Controller Service",Yt)},error:Ot=>{this.store.dispatch(vt({error:this.errorHelper.getErrorString(Ot)}))}})},Ve.componentInstance.createNewService=this.propertyTableHelperService.createNewService(E.id,this.controllerServiceService,this.controllerServiceService,re,He=>this.store.dispatch(Ql({response:{controllerService:He}}))),Ve.componentInstance.editControllerService.pipe(Te(Ve.afterClosed())).subscribe(He=>{this.store.dispatch(bn({request:{id:E.controllerService.id,uri:E.controllerService.uri,payload:He.payload,postUpdateNavigation:He.postUpdateNavigation,postUpdateNavigationBoundary:He.postUpdateNavigationBoundary}}))}),Ve.afterClosed().subscribe(He=>{this.store.dispatch(qi()),He!="ROUTED"&&this.store.dispatch(Zo({request:{processGroupId:re,id:ze}}))})})),{dispatch:!1}),this.configureControllerService$=C(()=>this.actions$.pipe(g(bn),f(E=>E.request),S(E=>L(this.controllerServiceService.updateControllerService(E)).pipe(f(K=>as({response:{id:E.id,controllerService:K,postUpdateNavigation:E.postUpdateNavigation,postUpdateNavigationBoundary:E.postUpdateNavigationBoundary}})),B(K=>this.errorHelper.showErrorInContext(K.status)?y(ns({error:this.errorHelper.getErrorString(K)})):y(this.errorHelper.fullScreenError(K))))))),this.controllerServicesBannerApiError$=C(()=>this.actions$.pipe(g(ns),f(E=>E.error),S(E=>y(Fo({errorContext:{errors:[E],context:ee.CONTROLLER_SERVICES}}))))),this.configureControllerServiceSuccess$=C(()=>this.actions$.pipe(g(as),f(E=>E.response),A(()=>this.store.select(Rt)),F(([E,K])=>{E.postUpdateNavigation?E.postUpdateNavigationBoundary?this.router.navigate(E.postUpdateNavigation,{state:{backNavigation:{route:["/process-groups",K,"controller-services",E.id,"edit"],routeBoundary:E.postUpdateNavigationBoundary,context:"Controller Service"}}}):this.router.navigate(E.postUpdateNavigation):this.dialog.closeAll()})),{dispatch:!1}),this.openEnableControllerServiceDialog$=C(()=>this.actions$.pipe(g(ec),f(E=>E.request),A(()=>this.store.select(Rt)),F(([E,K])=>{let re=E.id,ze=this.dialog.open(va,j(V({},ro),{data:E,id:re}));ze.componentInstance.goToReferencingComponent=Ve=>{let io=this.getRouteForReference(Ve);this.router.navigate(io)},ze.afterClosed().subscribe(Ve=>{Ve!="ROUTED"&&this.store.dispatch(Jo({request:{processGroupId:K}}))})})),{dispatch:!1}),this.openDisableControllerServiceDialog$=C(()=>this.actions$.pipe(g(tc),f(E=>E.request),A(()=>this.store.select(Rt)),F(([E,K])=>{let re=E.id,ze=this.dialog.open(ya,j(V({},ro),{data:E,id:re}));ze.componentInstance.goToReferencingComponent=Ve=>{let io=this.getRouteForReference(Ve);this.router.navigate(io)},ze.afterClosed().subscribe(Ve=>{Ve!="ROUTED"&&this.store.dispatch(Jo({request:{processGroupId:K}}))})})),{dispatch:!1}),this.promptControllerServiceDeletion$=C(()=>this.actions$.pipe(g(oc),f(E=>E.request),F(E=>{this.dialog.open(eo,j(V({},Et),{data:{title:"Delete Controller Service",message:`Delete controller service ${E.controllerService.component.name}?`}})).componentInstance.yes.pipe(te(1)).subscribe(()=>{this.store.dispatch(ls({request:E}))})})),{dispatch:!1}),this.deleteControllerService$=C(()=>this.actions$.pipe(g(ls),f(E=>E.request),S(E=>L(this.controllerServiceService.deleteControllerService(E)).pipe(f(K=>cs({response:{controllerService:K}})),B(K=>y(vt({error:this.errorHelper.getErrorString(K)}))))))),this.deleteControllerServiceSuccess$=C(()=>this.actions$.pipe(g(cs),A(()=>this.store.select(Rt)),S(([,E])=>y(Jo({request:{processGroupId:E}}))))),this.selectControllerService$=C(()=>this.actions$.pipe(g(Zo),f(E=>E.request),F(E=>{this.router.navigate(["/process-groups",E.processGroupId,"controller-services",E.id])})),{dispatch:!1}),this.openChangeControllerServiceVersionDialog$=C(()=>this.actions$.pipe(g(ic),f(E=>E.request),S(E=>L(this.extensionTypesService.getControllerServiceVersionsForType(E.type,E.bundle)).pipe(f(K=>({fetchRequest:E,componentVersions:K.controllerServiceTypes})),F({error:K=>{this.store.dispatch(vt({error:this.errorHelper.getErrorString(K)}))}}))),F(E=>{let K=this.dialog.open(Bi,j(V({},St),{data:E,autoFocus:!1}));K.componentInstance.changeVersion.pipe(te(1)).subscribe(re=>{this.store.dispatch(bn({request:{id:E.fetchRequest.id,uri:E.fetchRequest.uri,payload:{component:{bundle:re.bundle,id:E.fetchRequest.id},revision:E.fetchRequest.revision}}})),K.close()})})),{dispatch:!1})}getRouteForReference(e){return e.referenceType=="ControllerService"?e.groupId==null?["/settings","management-controller-services",e.id]:["/process-groups",e.groupId,"controller-services",e.id]:e.referenceType=="ReportingTask"?["/settings","reporting-tasks",e.id]:e.referenceType=="Processor"?["/process-groups",e.groupId,_.Processor,e.id]:e.referenceType=="FlowAnalysisRule"?["/settings","flow-analysis-rules",e.id]:e.referenceType=="ParameterProvider"?["/settings","parameter-providers",e.id]:["/settings","registry-clients",e.id]}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(go),k(je),k($n),k(_o),k($t),k(Vt),k(uo),k(Vi),k(er),k($i))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var gp=(()=>{class t{static{this.API="../nifi-api"}constructor(e,i,n){this.httpClient=e,this.nifiCommon=i,this.clusterConnectionService=n}getParameterContext(e,i){return this.httpClient.get(`${t.API}/parameter-contexts/${e}`,{params:{includeInheritedParameters:i}})}submitParameterContextUpdate(e){return this.httpClient.post(`${t.API}/parameter-contexts/${e.id}/update-requests`,e.payload)}pollParameterContextUpdate(e){return this.httpClient.get(this.nifiCommon.stripProtocol(e.uri))}deleteParameterContextUpdate(e){let i=new mo({fromObject:{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()}});return this.httpClient.delete(this.nifiCommon.stripProtocol(e.uri),{params:i})}static{this.\u0275fac=function(i){return new(i||t)(k(Xt),k(we),k(dt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Cp=(()=>{class t{constructor(e,i,n,d,b,w,H){this.actions$=e,this.store=i,this.parameterService=n,this.parameterContextService=d,this.errorHelper=b,this.storage=w,this.dialog=H,this.submitParameterContextUpdateRequest$=C(()=>this.actions$.pipe(g(wn),f(G=>G.request),S(G=>L(this.parameterService.submitParameterContextUpdate(G)).pipe(f(U=>ps({response:{requestEntity:U}})),B(U=>y(Pn({error:this.errorHelper.getErrorString(U)}))))))),this.submitParameterContextUpdateRequestSuccess$=C(()=>this.actions$.pipe(g(ps),f(G=>G.response),S(G=>G.requestEntity.request.complete?y(Tn()):y(ms())))),this.startPollingParameterContextUpdateRequest$=C(()=>this.actions$.pipe(g(ms),S(()=>Nt(2e3,ht).pipe(Te(this.actions$.pipe(g(ei))))),S(()=>y(ds())))),this.pollParameterContextUpdateRequest$=C(()=>this.actions$.pipe(g(ds),A(()=>this.store.select(Ds).pipe(Dt())),S(([,G])=>L(this.parameterService.pollParameterContextUpdate(G.request)).pipe(f(U=>us({response:{requestEntity:U}})),B(U=>y(Pn({error:this.errorHelper.getErrorString(U)}))))))),this.pollParameterContextUpdateRequestSuccess$=C(()=>this.actions$.pipe(g(us),f(G=>G.response),Pe(G=>G.requestEntity.request.complete),S(()=>y(ei())))),this.stopPollingParameterContextUpdateRequest$=C(()=>this.actions$.pipe(g(ei),S(()=>y(Tn())))),this.deleteParameterContextUpdateRequest$=C(()=>this.actions$.pipe(g(Tn),A(()=>this.store.select(Ds)),S(([,G])=>G?L(this.parameterService.deleteParameterContextUpdate(G.request)).pipe(f(()=>ui()),B(U=>y(Pn({error:this.errorHelper.getErrorString(U)})))):y(ui())))),this.openNewParameterContextDialog$=C(()=>this.actions$.pipe(g(ti),F(G=>{this.storage.setItem(we.EDIT_PARAMETER_CONTEXT_DIALOG_ID,0),this.parameterContextDialogRef=this.dialog.open(wa,j(V({},ro),{data:{}})),this.parameterContextDialogRef.componentInstance.availableParameterContexts$=y(G.request.parameterContexts),this.parameterContextDialogRef.componentInstance.saving$=this.store.select(Yc),this.parameterContextDialogRef.componentInstance.createNewParameter=U=>{let ot={existingParameters:U,isNewParameterContext:!0},Oe=this.dialog.open(ai,j(V({},xt),{data:ot}));return Oe.componentInstance.saving$=y(!1),Oe.componentInstance.editParameter.pipe(te(1),f(at=>(Oe.close(),V({},at))))},this.parameterContextDialogRef.componentInstance.editParameter=U=>{let ot={parameter:V({},U),isNewParameterContext:!0},Oe=this.dialog.open(ai,j(V({},xt),{data:ot}));return Oe.componentInstance.saving$=y(!1),Oe.componentInstance.editParameter.pipe(te(1),f(at=>(Oe.close(),V({},at))))},this.parameterContextDialogRef.componentInstance.addParameterContext.pipe(Te(this.parameterContextDialogRef.afterClosed())).subscribe(U=>{this.store.dispatch(fs({request:{payload:U}}))})})),{dispatch:!1}),this.createParameterContext$=C(()=>this.actions$.pipe(g(fs),f(G=>G.request),S(G=>L(this.parameterContextService.createParameterContext(G)).pipe(f(U=>fi({response:{parameterContext:U}})),B(U=>this.errorHelper.showErrorInContext(U.status)?y(hs({error:this.errorHelper.getErrorString(U)})):(this.dialog.closeAll(),y(this.errorHelper.fullScreenError(U)))))))),this.createParameterContextSuccess$=C(()=>this.actions$.pipe(g(fi),F(()=>{this.parameterContextDialogRef?.close()})),{dispatch:!1}),this.parameterContextSnackbarApiError$=C(()=>this.actions$.pipe(g(rc),f(G=>G.error),S(G=>y(vt({error:G}))))),this.parameterContextBannerApiError$=C(()=>this.actions$.pipe(g(hs),f(G=>G.error),S(G=>y(Fo({errorContext:{errors:[G],context:ee.PARAMETER_CONTEXTS}})))))}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(gp),k(_o),k($t),k(go),k(Vt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var As=Ft(An,t=>t[Ta]),Gs=Ft(As,t=>t.dropEntity),vp=Ft(As,t=>t.connectionId),yp=Ft(As,t=>t.processGroupId);var _p=(()=>{class t{static{this.API="../nifi-api"}constructor(e,i){this.httpClient=e,this.nifiCommon=i}submitEmptyQueueRequest(e){return this.httpClient.post(`${t.API}/flowfile-queues/${e.connectionId}/drop-requests`,{})}submitEmptyQueuesRequest(e){return this.httpClient.post(`${t.API}/process-groups/${e.processGroupId}/empty-all-connections-requests`,{})}pollEmptyQueueRequest(e){return this.httpClient.get(this.nifiCommon.stripProtocol(e.uri))}deleteEmptyQueueRequest(e){return this.httpClient.delete(this.nifiCommon.stripProtocol(e.uri))}static{this.\u0275fac=function(i){return new(i||t)(k(Xt),k(we))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xp=(()=>{class t{constructor(e,i,n,d,b){this.actions$=e,this.store=i,this.queueService=n,this.dialog=d,this.errorHelper=b,this.promptEmptyQueueRequest$=C(()=>this.actions$.pipe(g(ac),f(w=>w.request),F(w=>{this.dialog.open(eo,j(V({},Et),{data:{title:"Empty Queue",message:"Are you sure you want to empty this queue? All FlowFiles waiting at the time of the request will be removed."}})).componentInstance.yes.pipe(te(1)).subscribe(()=>{this.store.dispatch(gs({request:w}))})})),{dispatch:!1}),this.submitEmptyQueueRequest$=C(()=>this.actions$.pipe(g(gs),f(w=>w.request),S(w=>(this.dialog.open(sr,{data:{title:"Empty Queue",message:"Waiting for queue to empty..."},disableClose:!0}).componentInstance.exit.pipe(te(1)).subscribe(()=>{this.store.dispatch(Po())}),L(this.queueService.submitEmptyQueueRequest(w)).pipe(f(G=>Fn({response:{dropEntity:G}})),B(G=>y(hi({error:this.errorHelper.getErrorString(G)})))))))),this.promptEmptyQueuesRequest$=C(()=>this.actions$.pipe(g(lc),f(w=>w.request),F(w=>{this.dialog.open(eo,j(V({},Et),{data:{title:"Empty All Queues",message:"Are you sure you want to empty all queues in this Process Group? All FlowFiles from all connections waiting at the time of the request will be removed."}})).componentInstance.yes.pipe(te(1)).subscribe(()=>{this.store.dispatch(Cs({request:w}))})})),{dispatch:!1}),this.submitEmptyQueuesRequest$=C(()=>this.actions$.pipe(g(Cs),f(w=>w.request),S(w=>(this.dialog.open(sr,{data:{title:"Empty All Queues",message:"Waiting for all queues to empty..."},disableClose:!0}).componentInstance.exit.pipe(te(1)).subscribe(()=>{this.store.dispatch(Po())}),L(this.queueService.submitEmptyQueuesRequest(w)).pipe(f(G=>Fn({response:{dropEntity:G}})),B(G=>y(hi({error:this.errorHelper.getErrorString(G)})))))))),this.submitEmptyQueueRequestSuccess$=C(()=>this.actions$.pipe(g(Fn),f(w=>w.response),S(w=>w.dropEntity.dropRequest.finished?y(En()):y(vs())))),this.startPollingEmptyQueueRequest$=C(()=>this.actions$.pipe(g(vs),S(()=>Nt(2e3,ht).pipe(Te(this.actions$.pipe(g(Po))))),S(()=>y(ys())))),this.pollEmptyQueueRequest$=C(()=>this.actions$.pipe(g(ys),A(()=>this.store.select(Gs).pipe(Dt())),S(([,w])=>L(this.queueService.pollEmptyQueueRequest(w.dropRequest)).pipe(f(H=>_s({response:{dropEntity:H}})),B(H=>y(hi({error:this.errorHelper.getErrorString(H)}))))))),this.pollEmptyQueueRequestSuccess$=C(()=>this.actions$.pipe(g(_s),f(w=>w.response),Pe(w=>w.dropEntity.dropRequest.finished),S(()=>y(Po())))),this.stopPollingEmptyQueueRequest$=C(()=>this.actions$.pipe(g(Po),S(()=>y(En())))),this.deleteEmptyQueueRequest$=C(()=>this.actions$.pipe(g(En),A(()=>this.store.select(Gs).pipe(Dt())),S(([,w])=>(this.dialog.closeAll(),L(this.queueService.deleteEmptyQueueRequest(w.dropRequest)).pipe(f(H=>Dn({request:{dropEntity:H}})),B(()=>y(Dn({request:{dropEntity:w}})))))))),this.showEmptyQueueResults$=C(()=>this.actions$.pipe(g(Dn),f(w=>w.request),A(()=>[this.store.select(vp),this.store.select(yp),this.store.select(Y)]),F(([w,H,G,U])=>{let ot=w.dropEntity.dropRequest,Oe=ot.dropped.split(/ \/ /),at=`${Oe[0]} FlowFiles (${Oe[1]})`;if(ot.percentCompleted<100){let K=ot.original.split(/ \/ /);at=`${at} out of ${K[0]} (${K[1]})`}H?(at=`${at} were removed from the queue.`,this.store.dispatch(ci({id:H}))):G&&(at=`${at} were removed from the queues.`,G===U?this.store.dispatch(zo({request:{id:G,transitionRequired:!1}})):this.store.dispatch(oo({request:{id:G}}))),ot.failureReason&&(at=`${at} ${ot.failureReason}`),this.dialog.open(Oi,j(V({},Et),{data:{title:"Empty Queue",message:at}})).afterClosed().subscribe(()=>{this.store.dispatch(sc())})})),{dispatch:!1}),this.queueApiError$=C(()=>this.actions$.pipe(g(hi),f(w=>w.error),F(()=>{this.dialog.closeAll(),this.store.dispatch(Po())}),S(w=>y(vt({error:w})))))}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(_p),k(Vt),k($t))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var Sp=(()=>{class t{static{this.API="../nifi-api"}constructor(e){this.httpClient=e}getResults(e){return this.httpClient.get(`${t.API}/flow/flow-analysis/results/${e}`)}static{this.\u0275fac=function(i){return new(i||t)(k(Xt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var bp=(()=>{class t{constructor(e,i){this.data=e,this.store=i,this.currentProcessGroupId$=this.store.select(Y),this.currentProcessGroupId="",this.violation=e.violation,this.rule=e.rule,this.currentProcessGroupId$.subscribe(n=>{this.currentProcessGroupId=n})}viewDocumentation(){this.store.dispatch(pa({request:{backNavigation:{route:["/process-groups",this.currentProcessGroupId],routeBoundary:["/documentation"],context:"Canvas"},parameters:{componentType:_.FlowAnalysisRule,type:this.rule.type,group:this.rule.bundle.group,artifact:this.rule.bundle.artifact,version:this.rule.bundle.version}}}))}static{this.\u0275fac=function(i){return new(i||t)(D(me),D(ie))}}static{this.\u0275cmp=z({type:t,selectors:[["app-violation-details-dialog"]],decls:20,vars:5,consts:[["mat-dialog-title",""],[1,"flex","justify-between","items-baseline"],[1,"flex","justify-between","mt-4","mb-4"],[1,"py-1","px-2","rounded-xl","pill",3,"ngClass"],["mat-menu-item","",3,"click"],[1,"fa","fa-book","primary-color","mr-2"],["align","end"],["mat-flat-button","","mat-dialog-close",""]],template:function(i,n){i&1&&(s(0,"h2",0)(1,"div",1)(2,"div"),l(3,"Violation Information"),r()()(),s(4,"mat-dialog-content")(5,"div")(6,"div",2)(7,"div"),l(8,"Violation"),r(),s(9,"div",3),X(10,"lowercase"),l(11),r()(),s(12,"p"),l(13),r(),s(14,"button",4),M("click",function(){return n.viewDocumentation()}),v(15,"i",5),l(16," View Documentation "),r()(),s(17,"mat-dialog-actions",6)(18,"button",7),l(19,"Close"),r()()()),i&2&&(a(9),p("ngClass",Z(10,3,n.violation.enforcementPolicy)),a(2),R(" ",n.violation.enforcementPolicy," "),a(2),Q(n.violation.violationMessage))},dependencies:[wo,Ti,Us,ge,de,ue,he,fe,Ce],encapsulation:2})}}return t})();var Pp=(()=>{class t{constructor(e,i,n,d,b,w){this.actions$=e,this.store=i,this.flowAnalysisService=n,this.errorHelper=d,this.router=b,this.dialog=w,this.startPollingFlowAnalysis$=C(()=>this.actions$.pipe(g(cc),S(()=>Nt(3e4,ht).pipe(Ns(0),Te(this.actions$.pipe(g(In))))),S(()=>y(Mn())))),this.resetPollingFlowAnalysis$=C(()=>this.actions$.pipe(g(Rn),S(()=>(this.store.dispatch(In()),y(Mn()))))),this.pollFlowAnalysis$=C(()=>this.actions$.pipe(g(Mn),A(()=>this.store.select(Y)),S(([,H])=>L(this.flowAnalysisService.getResults(H)).pipe(f(G=>pc({response:G})),B(G=>(this.store.dispatch(In()),y(mc({error:this.errorHelper.getErrorString(G)})))))))),this.navigateToEditFlowAnalysisRule$=C(()=>this.actions$.pipe(g(dc),f(H=>H.id),F(H=>{this.router.navigate(["/settings","flow-analysis-rules",H,"edit"])})),{dispatch:!1}),this.openRuleDetailsDialog$=C(()=>this.actions$.pipe(g(uc),F(({violation:H,rule:G})=>{this.dialog.open(bp,j(V({},St),{data:{violation:H,rule:G}}))})),{dispatch:!1})}static{this.\u0275fac=function(i){return new(i||t)(k(jt),k(ie),k(Sp),k($t),k(uo),k(Vt))}}static{this.\u0275prov=Qe({token:t,factory:t.\u0275fac})}}return t})();var g2=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=bi({type:t})}static{this.\u0275inj=xi({imports:[wo,kc,Ws.forFeature(fc,hc),oa.forFeature(up,fp,hp,Cp,xp,Pp),ge]})}}return t})();export{g2 as FlowDesignerModule};
