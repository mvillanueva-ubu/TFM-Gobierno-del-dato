import{a as bt,b as Ie}from"./chunk-EYCZVYFF.js";import{a as Et}from"./chunk-GYCUYRIS.js";import{a as mt,b as ve,c as st,d as dt,e as ct,f as pt}from"./chunk-KNM6FCYO.js";import{a as we}from"./chunk-SN6NWPRN.js";import{a as De}from"./chunk-EHRR3YRI.js";import{a as wt,b as It,c as Mt}from"./chunk-3UFA6TFV.js";import{a as Ue}from"./chunk-IOA5VAZG.js";import{a as St}from"./chunk-YPBQUHFA.js";import{d as Dt}from"./chunk-UUTSXDDJ.js";import{b as je}from"./chunk-ABVNDMIM.js";import{a as gt,b as ht,f as vt}from"./chunk-AGAPB23W.js";import{a as B}from"./chunk-HKBFZV3L.js";import{a as q}from"./chunk-3DWBQ3AZ.js";import{a as Se}from"./chunk-RJ7V3MDH.js";import{a as Pt,b as yt,c as Tt}from"./chunk-UCNXABJ7.js";import{b as Ct}from"./chunk-WTLSZVSU.js";import{a as ze}from"./chunk-D7WAZQPE.js";import{b as re,d as ae,e as oe,f as le,g as me,h as F}from"./chunk-4P6JHET6.js";import{g as _t}from"./chunk-7WEK5KIV.js";import{a as He,b as We,c as Ke,d as Xe,e as Ye,f as Je,g as Qe,h as Ze,i as et,j as tt,k as se,l as it}from"./chunk-FC4XU2XU.js";import{a as ut,b as Pe}from"./chunk-AJIV73VZ.js";import{a as at,b as ot,c as lt}from"./chunk-TGSF3K3X.js";import{b as $}from"./chunk-AGWUCOZB.js";import{b as be,c as Ee}from"./chunk-HP7XJUQG.js";import{b as ye,c as ft,h as Te,i as xt}from"./chunk-SAY7LY4C.js";import{e as rt,f as he,g as O}from"./chunk-5TWJAVHX.js";import{$a as c,$b as D,Bc as Re,Dc as Be,F as J,Gb as E,Hb as d,Ib as R,Jb as y,Kb as Le,La as l,Mb as Ae,Nb as Ve,Ob as Ge,Oe as de,Pa as T,Pe as ce,Re as G,Sb as ie,Sc as K,Ub as w,Ue as pe,Va as M,Vb as ke,Ve as ue,Xc as _,Xe as h,Ya as Ne,Yb as A,Yc as C,Za as Z,Zb as V,Ze as fe,aa as Q,af as xe,ba as Oe,bb as p,cc as $e,cf as _e,db as j,ea as Y,ff as Ce,gf as nt,hb as u,hd as qe,hf as ge,jb as H,kb as N,lb as L,ma as v,mb as o,na as P,nb as a,ob as f,pb as ee,qb as te,qc as W,rb as k,rc as ne,sb as b,ua as U,ub as g,vb as m}from"./chunk-6VUBUCMU.js";import{a as I,b as z}from"./chunk-EQDQRRRY.js";var Dn=_("[Parameter Context Listing] Load Parameter Contexts"),wn=_("[Parameter Context Listing] Load Parameter Contexts Success",C()),In=_("[Parameter Context Listing] Load Parameter Context Listing Snackbar Api Error",C()),Mn=_("[Parameter Context Listing] Load Parameter Context Listing Banner Api Error",C()),kn=_("[Parameter Context Listing] Open New Parameter Context Dialog"),Rn=_("[Parameter Context Listing] Create Parameter Context",C()),Fn=_("[Parameter Context Listing] Create Parameter Context Success",C()),On=_("[Parameter Context Listing] Navigate To Edit Parameter Context",C()),Nn=_("[Parameter Context Listing] Navigate To Manage Component Policies",C()),Ln=_("[Parameter Context Listing] Get Effective Parameter Context Open Dialog",C()),An=_("[Parameter Context Listing] Open Configure Parameter Context Dialog",C()),Vn=_("[Parameter Context Listing] Submit Parameter Context Update Request",C()),Gn=_("[Parameter Context Listing] Submit Parameter Context Update Request Success",C()),$n=_("[Parameter Context Listing] Start Polling Parameter Context Update Request"),Bn=_("[Parameter Context Listing] Poll Parameter Context Update Request"),qn=_("[Parameter Context Listing] Poll Parameter Context Update Request Success",C()),jn=_("[Parameter Context Listing] Stop Polling Parameter Context Update Request"),zn=_("[Parameter Context Listing] Delete Parameter Context Update Request"),Un=_("[Parameter Context Listing] Delete Parameter Context Update Request Success",C()),Hn=_("[Parameter Context Listing] Edit Parameter Context Complete"),Wn=_("[Parameter Context Listing] Prompt Parameter Context Deletion",C()),Kn=_("[Parameter Context Listing] Delete Parameter Context",C()),Xn=_("[Parameter Context Listing] Delete Parameter Context Success",C()),Yn=_("[Parameter Context Listing] Select Parameter Context",C()),kt=_("[Parameter Context Listing] Show Ok Dialog",C());var Me=(()=>{class t{transform(e,i="name"){return e.sort((n,s)=>this.getPropertyValue(n,i).localeCompare(this.getPropertyValue(s,i)))}getPropertyValue(e,i){return i.split(".").reduce((n,s)=>n?n[s]:"",e)??""}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=Ne({name:"sortObjectByProperty",type:t,pure:!0})}}return t})();var or=(()=>{class t{static{this.API="../nifi-api"}constructor(e,i,n,s){this.httpClient=e,this.client=i,this.nifiCommon=n,this.clusterConnectionService=s}getParameterContexts(){return this.httpClient.get(`${t.API}/flow/parameter-contexts`)}createParameterContext(e){return this.httpClient.post(`${t.API}/parameter-contexts`,e.payload)}getParameterContext(e,i=!0){return this.httpClient.get(`${t.API}/parameter-contexts/${e}`,{params:{includeInheritedParameters:i}})}submitParameterContextUpdate(e){return this.httpClient.post(`${t.API}/parameter-contexts/${e.id}/update-requests`,e.payload)}pollParameterContextUpdate(e){return this.httpClient.get(this.nifiCommon.stripProtocol(e.uri))}deleteParameterContextUpdate(e){let i=new Re({fromObject:{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()}});return this.httpClient.delete(this.nifiCommon.stripProtocol(e.uri),{params:i})}deleteParameterContext(e){let i=e.parameterContext,n=new Re({fromObject:z(I({},this.client.getRevision(i)),{disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged()})});return this.httpClient.delete(`${t.API}/parameter-contexts/${i.id}`,{params:n})}static{this.\u0275fac=function(i){return new(i||t)(Y(Be),Y(Se),Y($),Y(De))}}static{this.\u0275prov=Oe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ut=t=>({value:t});function Ht(t,r){if(t&1&&(o(0,"mat-error"),d(1),a()),t&2){let e=m();l(),R(e.getNameErrorMessage())}}function Wt(t,r){t&1&&(o(0,"span"),d(1,"Ok"),a())}function Kt(t,r){if(t&1){let e=b();o(0,"mat-dialog-actions",12)(1,"button",13),d(2,"Cancel"),a(),o(3,"button",14),g("click",function(){v(e);let n=m();return P(n.okClicked())}),c(4,Wt,2,0,"span",15),a()()}if(t&2){let e=r,i=m();l(3),p("disabled",i.editParameterForm.invalid||e.value),l(),p("nifiSpinner",e.value)}}var Dr=(()=>{class t extends ze{constructor(e,i){super(),this.request=e,this.formBuilder=i,this.editParameter=new U,this.exit=new U,this.showSensitiveHelperText=!1,this.valueInputTriggered=!1,this.originalParameter=void 0,this.TextTip=q;let n=e.parameter;this.originalParameter=n;let s,x=[G.required];if(e.existingParameters){this.isNew=!0,s=n?n.value:null,x.push(this.existingParameterValidator(e.existingParameters)),this.name=new h(n?n.name:"",x);let S=n!=null;this.sensitive=new h({value:n?n.sensitive:!1,disabled:S},G.required)}else{this.isNew=!1,s=n?n.value:null;let S=n?n.sensitive:!1;S&&s!==null&&(s="Sensitive value set",this.showSensitiveHelperText=!0),this.name=new h({value:n?n.name:"",disabled:!0},G.required),this.sensitive=new h({value:S,disabled:!0},G.required)}this.editParameterForm=this.formBuilder.group({name:this.name,value:new h(s),empty:new h(n?n.value=="":!1),sensitive:this.sensitive,description:new h(n?n.description:"")}),this.setEmptyStringChanged()}existingParameterValidator(e){return i=>{let n=i.value;return n===""?null:e.includes(n)?{existingParameter:!0}:null}}getNameErrorMessage(){return this.name.hasError("required")?"Property name is required.":this.name.hasError("existingParameter")?"A parameter with this name already exists.":""}clearSensitiveHelperText(){this.showSensitiveHelperText&&(this.editParameterForm.get("value")?.setValue(""),this.showSensitiveHelperText=!1),this.valueInputTriggered=!0}setEmptyStringChanged(){let e=this.editParameterForm.get("empty");e&&(e.value?(this.editParameterForm.get("value")?.setValue(""),this.editParameterForm.get("value")?.disable(),this.valueInputTriggered=!0):this.editParameterForm.get("value")?.enable())}cancelClicked(){this.exit.next()}valueChanged(e){let i=!0;return this.originalParameter&&(this.originalParameter.sensitive?i=this.valueInputTriggered:i=e!==this.originalParameter.value),i}okClicked(){let e=this.editParameterForm.get("value")?.value,i=this.editParameterForm.get("empty")?.value,n={name:this.editParameterForm.get("name")?.value,value:null,sensitive:this.editParameterForm.get("sensitive")?.value,description:this.editParameterForm.get("description")?.value},s=this.valueChanged(e);(s||this.isNew)&&(n.value=e),e===""&&!i&&(s=!0,n.value=null,this.isNew||(n.valueRemoved=!0)),this.editParameter.next({parameter:n,valueChanged:s})}isDirty(){return this.editParameterForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(T(re),T(Ce))}}static{this.\u0275cmp=M({type:t,selectors:[["edit-parameter-dialog"]],inputs:{saving$:"saving$"},outputs:{editParameter:"editParameter",exit:"exit"},features:[Z],decls:34,vars:13,consts:[["mat-dialog-title",""],[1,"edit-parameter-form",3,"formGroup"],[1,"mb-2"],["matInput","","formControlName","name","type","text"],["nifiTooltip","","tooltipInputData","Parameter values do not support Expression Language or embedded parameter references.",1,"fa","fa-info-circle",3,"tooltipComponentType"],["matInput","","formControlName","value","type","text",3,"keydown"],[1,"-mt-4","mb-4"],["formControlName","empty",3,"change"],[1,"flex","flex-col","mb-4"],["formControlName","sensitive"],[3,"value"],["matInput","","formControlName","description","type","text"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(o(0,"h2",0),d(1),a(),o(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field")(6,"mat-label"),d(7,"Name"),a(),f(8,"input",3),c(9,Ht,2,1,"mat-error"),a()(),o(10,"div")(11,"mat-form-field")(12,"mat-label"),d(13," Value "),f(14,"i",4),a(),o(15,"textarea",5),g("keydown",function(){return n.clearSensitiveHelperText()}),a()()(),o(16,"div",6)(17,"mat-checkbox",7),g("change",function(){return n.setEmptyStringChanged()}),d(18,"Set empty string"),a()(),o(19,"div",8)(20,"label"),d(21,"Sensitive Value"),a(),o(22,"mat-radio-group",9)(23,"mat-radio-button",10),d(24,"Yes"),a(),o(25,"mat-radio-button",10),d(26,"No"),a()()(),o(27,"div")(28,"mat-form-field")(29,"mat-label"),d(30,"Description"),a(),f(31,"textarea",11),a()()(),c(32,Kt,5,2,"mat-dialog-actions",12),A(33,"async"),a()),i&2){let s;l(),y("",n.isNew?"Add":"Edit"," Parameter"),l(),p("formGroup",n.editParameterForm),l(7),u(n.name.invalid?9:-1),l(5),p("tooltipComponentType",n.TextTip),l(),j("sensitive",n.showSensitiveHelperText),l(8),p("value",!0),l(2),p("value",!1),l(7),u((s=w(11,Ut,V(33,9,n.saving$)))?32:-1,s)}},dependencies:[F,ae,oe,me,le,O,he,nt,fe,ce,pe,ue,xt,Te,ye,ft,Ee,be,ge,xe,_e,Mt,wt,It,Pe,ut,we,ne,B],styles:[".edit-parameter-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.edit-parameter-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.edit-parameter-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.edit-parameter-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.edit-parameter-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.edit-parameter-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.edit-parameter-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.edit-parameter-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.edit-parameter-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px}.edit-parameter-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return t})();var Fe=t=>({$implicit:t});function Xt(t,r){if(t&1){let e=b();o(0,"div",8)(1,"button",29),g("click",function(){v(e);let n=m();return P(n.newParameterClicked())}),f(2,"i",30),a()()}}function Yt(t,r){t&1&&(o(0,"th",31),d(1,"Name"),a())}function Jt(t,r){if(t&1&&f(0,"i",36),t&2){let e=m().$implicit,i=m();p("tooltipComponentType",i.TextTip)("tooltipInputData",i.getDescription(e))("delayClose",!1)}}function Qt(t,r){if(t&1&&f(0,"i",37),t&2){let e=m(2);p("tooltipComponentType",e.TextTip)("delayClose",!1)}}function Zt(t,r){if(t&1&&(o(0,"td",32)(1,"div",33)(2,"div",34),d(3),a(),o(4,"div",35),c(5,Jt,1,3,"i",36)(6,Qt,1,2,"i",37),a()()()),t&2){let e=r.$implicit,i=m();l(2),p("title",e.originalEntity.parameter.name),l(),y(" ",e.originalEntity.parameter.name," "),l(2),u(i.hasDescription(e)?5:-1),l(),u(i.canOverride(e)?6:-1)}}function ei(t,r){t&1&&(o(0,"th",38),d(1,"Value"),a())}function ti(t,r){t&1&&k(0)}function ii(t,r){t&1&&(o(0,"div",23),d(1,"No value set"),a())}function ni(t,r){t&1&&k(0)}function ri(t,r){t&1&&(o(0,"div",40),d(1,"Sensitive value set"),a())}function ai(t,r){t&1&&k(0)}function oi(t,r){if(t&1&&c(0,ai,1,0,"ng-container",39),t&2){let e=r.$implicit;m();let i=E(6),n=E(8),s=m(3);p("ngTemplateOutlet",s.isEmptyString(e)?i:n)("ngTemplateOutletContext",w(2,Fe,e))}}function li(t,r){t&1&&(o(0,"div",41),d(1,"Empty string set"),a())}function mi(t,r){if(t&1&&f(0,"div",43),t&2){let e=m(5);p("tooltipComponentType",e.TextTip)}}function si(t,r){if(t&1&&(o(0,"div",33)(1,"div",42),d(2),a(),c(3,mi,1,1,"div",43),a()),t&2){let e=r.$implicit,i=m(4);l(2),y(" ",e," "),l(),u(i.hasExtraWhitespace(e)?3:-1)}}function di(t,r){if(t&1&&c(0,ni,1,0,"ng-container",39)(1,ri,2,0,"ng-template",null,1,D)(3,oi,1,4,"ng-template",null,2,D)(5,li,2,0,"ng-template",null,3,D)(7,si,4,2,"ng-template",null,4,D),t&2){let e=E(2),i=E(4),n=m().$implicit,s=m().$implicit,x=m();p("ngTemplateOutlet",x.isSensitiveParameter(s)?e:i)("ngTemplateOutletContext",w(2,Fe,n))}}function ci(t,r){if(t&1&&c(0,ii,2,0,"div",23)(1,di,9,4),t&2){let e=r.$implicit,i=m(2);u(i.isNull(e)?0:1)}}function pi(t,r){if(t&1&&(o(0,"td",32),c(1,ti,1,0,"ng-container",39)(2,ci,2,1,"ng-template",null,0,D),a()),t&2){let e=r.$implicit,i=E(3),n=m();l(),p("ngTemplateOutlet",i)("ngTemplateOutletContext",w(2,Fe,n.getValue(e)))}}function ui(t,r){t&1&&f(0,"th",38)}function fi(t,r){if(t&1&&(o(0,"button",45),f(1,"i",49),a()),t&2){m();let e=E(4);p("matMenuTriggerFor",e)}}function xi(t,r){if(t&1&&(o(0,"button",47),f(1,"i",50),d(2," Go to "),a()),t&2){let e=m().$implicit,i=m();p("routerLink",i.getParameterLink(e))}}function _i(t,r){if(t&1){let e=b();o(0,"button",51),g("click",function(){v(e);let n=m().$implicit,s=m();return P(s.overrideParameter(n))}),f(1,"i",52),d(2," Override "),a()}}function Ci(t,r){if(t&1){let e=b();o(0,"button",51),g("click",function(){v(e);let n=m().$implicit,s=m();return P(s.editClicked(n))}),f(1,"i",53),d(2," Edit "),a()}}function gi(t,r){if(t&1){let e=b();o(0,"button",51),g("click",function(){v(e);let n=m().$implicit,s=m();return P(s.deleteClicked(n))}),f(1,"i",54),d(2," Delete "),a()}}function hi(t,r){if(t&1&&(o(0,"td",32)(1,"div",44),c(2,fi,2,1,"button",45),o(3,"mat-menu",46,5),c(5,xi,3,1,"button",47)(6,_i,3,0,"button",48)(7,Ci,3,0,"button",48)(8,gi,3,0,"button",48),a()()()),t&2){let e=r.$implicit,i=m();l(2),u(i.canGoToParameter(e)||i.canEdit(e)&&!i.isDisabled||i.canDelete(e)&&!i.isDisabled?2:-1),l(3),u(i.canGoToParameter(e)?5:-1),l(),u(i.canOverride(e)?6:-1),l(),u(i.canEdit(e)&&!i.isDisabled?7:-1),l(),u(i.canDelete(e)&&!i.isDisabled?8:-1)}}function vi(t,r){t&1&&f(0,"tr",55)}function Pi(t,r){if(t&1){let e=b();o(0,"tr",56),g("click",function(){let n=v(e).$implicit,s=m();return P(s.selectParameter(n))}),a()}if(t&2){let e=r.$implicit,i=r.even,n=m();j("selected",n.isSelected(e))("even",i)}}function yi(t,r){if(t&1&&(o(0,"span"),d(1),a()),t&2){let e=m();l(),R(e.selectedItem.originalEntity.parameter.name)}}function Ti(t,r){t&1&&(o(0,"span",23),d(1,"None"),a())}function bi(t,r){if(t&1&&f(0,"parameter-references",28),t&2){let e=m();p("parameterReferences",e.selectedItem.originalEntity.parameter.referencingComponents)}}var Ot=(()=>{class t{constructor(e,i,n){this.store=e,this.changeDetector=i,this.nifiCommon=n,this.canAddParameters=!0,this.TextTip=q,this.initialSortColumn="name",this.initialSortDirection="asc",this.displayedColumns=["name","value","actions"],this.dataSource=new it,this.selectedItem=null,this.activeSort={active:this.initialSortColumn,direction:this.initialSortDirection},this.isDisabled=!1,this.isTouched=!1}ngAfterViewInit(){this.initFilter()}initFilter(){this.dataSource.filterPredicate=e=>this.isVisible(e),this.dataSource.filter=" "}isVisible(e){return!e.deleted}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){let i=e.map(n=>({deleted:!1,added:!1,dirty:!1,originalEntity:z(I({},n),{parameter:z(I({},n.parameter),{value:n.parameter.value===void 0?null:n.parameter.value})})}));this.setPropertyItems(i)}sortData(e){this.activeSort=e,this.dataSource.data=this.sortEntities(this.dataSource.data,e)}setPropertyItems(e){this.dataSource.data=this.sortEntities(e,this.activeSort),this.initFilter()}sortEntities(e,i){return e?e.slice().sort((n,s)=>{let x=i.direction==="asc",S=0;switch(i.active){case"name":S=this.nifiCommon.compareString(n.originalEntity.parameter.name,s.originalEntity.parameter.name);break;default:return 0}return S*(x?1:-1)}):[]}newParameterClicked(){let e=this.dataSource.data.filter(i=>!i.deleted).filter(i=>!i.originalEntity.parameter.inherited).map(i=>i.originalEntity.parameter.name);this.createNewParameter(e).pipe(J(1)).subscribe(i=>{let n=i.parameter,s=this.dataSource.data,x=s.find(S=>S.originalEntity.parameter.name===n.name);if(x){if(!x.added&&x.originalEntity.parameter.sensitive!==n.sensitive){this.store.dispatch(kt({title:"Parameter Exists",message:"A parameter with this name has been marked for deletion. Please apply this change to delete this parameter from the parameter context before recreating it with a different sensitivity."}));return}x.deleted=!1,x.dirty=!0,x.originalEntity.parameter.sensitive=n.sensitive,x.updatedEntity&&(x.updatedEntity.parameter.sensitive=n.sensitive),this.applyParameterEdit(x,i)}else{let S={deleted:!1,added:!0,dirty:!0,originalEntity:{canWrite:!0,parameter:I({},n)}},Vt=[...s,S];this.setPropertyItems(Vt)}this.handleChanged()})}hasDescription(e){return!this.nifiCommon.isBlank(this.getDescription(e))}getDescription(e){return e.updatedEntity?e.updatedEntity.parameter.description:e.originalEntity.parameter.description}isSensitiveParameter(e){return e.originalEntity.parameter.sensitive}getValue(e){return e.updatedEntity?e.updatedEntity.parameter.valueRemoved?null:e.updatedEntity.parameter.value!==null?e.updatedEntity.parameter.value:e.originalEntity.parameter.value:e.originalEntity.parameter.value}isNull(e){return e==null}isEmptyString(e){return e==""}hasExtraWhitespace(e){return this.nifiCommon.hasLeadTrailWhitespace(e)}canGoToParameter(e){return e.originalEntity.parameter.inherited===!0&&e.originalEntity.parameter.parameterContext?.permissions.canRead==!0}getParameterLink(e){return e.originalEntity.parameter.parameterContext?["/parameter-contexts",e.originalEntity.parameter.parameterContext.id,"edit"]:[]}canOverride(e){return e.originalEntity.parameter.inherited===!0}overrideParameter(e){let i=z(I({},e.originalEntity.parameter),{value:null});this.editParameter(i).pipe(J(1)).subscribe(n=>{e.dirty=!0,e.updatedEntity={parameter:I({},n.parameter)},this.handleChanged()})}canEdit(e){let i=e.originalEntity.canWrite==!0,n=e.originalEntity.parameter.provided==!0,s=e.originalEntity.parameter.inherited==!0;return i&&!n&&!s}editClicked(e){let i={name:e.originalEntity.parameter.name,sensitive:e.originalEntity.parameter.sensitive,description:this.getDescription(e),value:this.getValue(e)};this.editParameter(i).pipe(J(1)).subscribe(n=>{this.applyParameterEdit(e,n)})}applyParameterEdit(e,i){let n=i.parameter;e.updatedEntity||(e.updatedEntity={parameter:I({},e.originalEntity.parameter)},e.added||(e.updatedEntity.parameter.value=null));let s=i.valueChanged;i.valueChanged&&(e.updatedEntity.parameter.value=n.value,n.value!==null?(e.updatedEntity.parameter.valueRemoved=void 0,e.updatedEntity.parameter.referencedAssets=void 0):n.valueRemoved===!0&&(e.updatedEntity.parameter.value=null,e.updatedEntity.parameter.valueRemoved=!0,e.updatedEntity.parameter.referencedAssets=void 0)),e.updatedEntity.parameter.description!==n.description&&(s=!0,e.updatedEntity.parameter.description=n.description),s&&(e.dirty=!0,this.handleChanged())}canDelete(e){let i=e.originalEntity.canWrite==!0,n=e.originalEntity.parameter.provided==!0,s=e.originalEntity.parameter.inherited==!0;return i&&!n&&!s}deleteClicked(e){e.deleted||(e.updatedEntity||(e.updatedEntity={parameter:I({},e.originalEntity.parameter)}),e.updatedEntity.parameter.value=null,e.updatedEntity.parameter.referencedAssets=void 0,e.deleted=!0,e.dirty=!0,this.selectParameter(null),this.handleChanged())}handleChanged(){this.dataSource._updateChangeSubscription(),this.changeDetector.markForCheck(),this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeParameters())}serializeParameters(){return this.dataSource.data.filter(i=>i.dirty).filter(i=>!(i.added&&i.deleted)).map(i=>i.deleted?{parameter:{name:i.originalEntity.parameter.name}}:i.updatedEntity?{parameter:{name:i.originalEntity.parameter.name,sensitive:i.originalEntity.parameter.sensitive,description:i.updatedEntity.parameter.description,value:i.updatedEntity.parameter.value,valueRemoved:i.updatedEntity.parameter.valueRemoved,referencedAssets:i.updatedEntity.parameter.referencedAssets}}:{parameter:{name:i.originalEntity.parameter.name,sensitive:i.originalEntity.parameter.sensitive,description:i.originalEntity.parameter.description,value:i.originalEntity.parameter.value,valueRemoved:i.originalEntity.parameter.valueRemoved,referencedAssets:i.originalEntity.parameter.referencedAssets}})}selectParameter(e){this.selectedItem=e}isSelected(e){return this.selectedItem?e.originalEntity.parameter.name==this.selectedItem.originalEntity.parameter.name:!1}static{this.\u0275fac=function(i){return new(i||t)(T(qe),T($e),T($))}}static{this.\u0275cmp=M({type:t,selectors:[["parameter-table"]],inputs:{createNewParameter:"createNewParameter",editParameter:"editParameter",canAddParameters:"canAddParameters"},features:[ie([{provide:de,useExisting:Q(()=>t),multi:!0}])],decls:31,vars:10,consts:[["renderValue",""],["sensitive",""],["nonSensitive",""],["blank",""],["nonBlank",""],["actionMenu","matMenu"],[1,"parameter-table","flex","h-full","gap-x-3"],[1,"flex","basis-2/3","flex-col","gap-y-3"],[1,"flex","justify-end","items-center"],[1,"listing-table","flex-1","relative"],[1,"absolute","inset-0","overflow-y-auto","overflow-x-hidden"],["mat-table","","matSort","","matSortDisableClear","",3,"matSortChange","dataSource","matSortActive","matSortDirection"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"selected","even","click",4,"matRowDef","matRowDefColumns"],[1,"flex","basis-1/3","flex-col","justify-between","gap-y-3","w-full"],[1,"flex","flex-col"],[1,"tertiary-color","font-medium"],[1,"unset","neutral-color"],[1,"flex-1","flex","flex-col"],["nifiTooltip","","tooltipInputData","Components referencing this parameter grouped by process group.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"relative","h-full","border"],[1,"absolute","inset-0","overflow-y-auto","p-1"],[3,"parameterReferences"],["mat-icon-button","","type","button",1,"primary-icon-button",3,"click"],[1,"fa","fa-plus"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"flex","justify-between","items-center"],[1,"whitespace-nowrap","overflow-hidden","text-ellipsis","leading-normal",3,"title"],[1,"flex","gap-x-2","justify-end"],["nifiTooltip","",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType","tooltipInputData","delayClose"],["nifiTooltip","","tooltipInputData","This parameter is inherited form another Parameter Context.",1,"fa","fa-level-down","primary-color",3,"tooltipComponentType","delayClose"],["mat-header-cell",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"sensitive","neutral-color"],[1,"empty","neutral-color"],[1,"whitespace-nowrap","overflow-hidden","text-ellipsis"],["nifiTooltip","","tooltipInputData","The specified value contains leading and/or trailing whitespace character(s). This could produce unexpected results if it was not intentional.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"flex","items-center","justify-end","gap-x-2"],["mat-icon-button","","type","button",1,"h-16","w-16","flex","items-center","justify-center","icon","global-menu",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],[1,"fa","fa-ellipsis-v"],[1,"fa","fa-long-arrow-right","primary-color","mr-2"],["mat-menu-item","",3,"click"],[1,"fa","mr-2"],[1,"fa","fa-cog","primary-color","mr-2"],[1,"fa","fa-trash","primary-color","mr-2"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,n){i&1&&(o(0,"div",6)(1,"div",7),c(2,Xt,3,0,"div",8),o(3,"div",9)(4,"div",10)(5,"table",11),g("matSortChange",function(x){return n.sortData(x)}),ee(6,12),c(7,Yt,2,0,"th",13)(8,Zt,7,4,"td",14),te(),ee(9,15),c(10,ei,2,0,"th",16)(11,pi,4,4,"td",14),te(),ee(12,17),c(13,ui,1,0,"th",16)(14,hi,9,5,"td",14),te(),c(15,vi,1,0,"tr",18)(16,Pi,1,4,"tr",19),a()()()(),o(17,"div",20)(18,"div",21)(19,"div"),d(20,"Parameter"),a(),o(21,"div",22),c(22,yi,2,1,"span")(23,Ti,2,0,"span",23),a()(),o(24,"div",24)(25,"div"),d(26," Referencing Components "),f(27,"i",25),a(),o(28,"div",26)(29,"div",27),c(30,bi,1,1,"parameter-references",28),a()()()()()),i&2&&(l(2),u(n.canAddParameters&&!n.isDisabled?2:-1),l(3),p("dataSource",n.dataSource)("matSortActive",n.initialSortColumn)("matSortDirection",n.initialSortDirection),l(10),p("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),l(),p("matRowDefColumns",n.displayedColumns),l(6),u(n.selectedItem?22:23),l(5),p("tooltipComponentType",n.TextTip),l(3),u(n.selectedItem?30:-1))},dependencies:[O,rt,F,se,He,Ke,Qe,Xe,We,Ze,Ye,Je,et,tt,Tt,Pt,yt,W,K,B,Ie,ot,at,lt],encapsulation:2})}}return t})();var Nt=t=>({$implicit:t});function Ei(t,r){t&1&&(o(0,"div",3),d(1,"No referencing Process Groups"),a())}function Si(t,r){t&1&&k(0)}function Di(t,r){if(t&1&&(o(0,"li")(1,"h4",4)(2,"b"),d(3),a()(),o(4,"ul",5),c(5,Si,1,0,"ng-container",6),a()()),t&2){m();let e=E(4),i=m();l(3),y("Process Groups (",i.authorizedProcessGroupReferences.length,")"),l(2),p("ngTemplateOutlet",e)("ngTemplateOutletContext",w(3,Nt,i.authorizedProcessGroupReferences))}}function wi(t,r){t&1&&k(0)}function Ii(t,r){if(t&1&&(o(0,"li")(1,"h4",4)(2,"b"),d(3),a()(),o(4,"ul",5),c(5,wi,1,0,"ng-container",6),a()()),t&2){m();let e=E(6),i=m();l(3),y("Unauthorized (",i.unauthorizedProcessGroupReferences.length,")"),l(2),p("ngTemplateOutlet",e)("ngTemplateOutletContext",w(3,Nt,i.unauthorizedProcessGroupReferences))}}function Mi(t,r){if(t&1&&(o(0,"li")(1,"a",7),d(2),a()()),t&2){let e=r.$implicit,i=m(4);l(),p("routerLink",i.getRouteForReference(e)),l(),R(e.component.name)}}function ki(t,r){if(t&1&&N(0,Mi,3,2,"li",null,H),t&2){let e=m().$implicit;L(e)}}function Ri(t,r){if(t&1&&c(0,ki,2,0),t&2){let e=r.$implicit;u(e.length>0?0:-1)}}function Fi(t,r){if(t&1&&(o(0,"li")(1,"div",8),d(2),a()()),t&2){let e=r.$implicit;l(2),R(e.id)}}function Oi(t,r){if(t&1&&N(0,Fi,3,1,"li",null,H),t&2){let e=m().$implicit;L(e)}}function Ni(t,r){if(t&1&&c(0,Oi,2,0),t&2){let e=r.$implicit;u(e.length>0?0:-1)}}function Li(t,r){if(t&1&&(o(0,"ul"),c(1,Di,6,5,"li")(2,Ii,6,5,"li"),a(),c(3,Ri,1,1,"ng-template",null,0,D)(5,Ni,1,1,"ng-template",null,1,D)),t&2){let e=m();l(),u(e.authorizedProcessGroupReferences.length>0?1:-1),l(),u(e.unauthorizedProcessGroupReferences.length>0?2:-1)}}var Lt=(()=>{class t{constructor(){this.authorizedProcessGroupReferences=[],this.unauthorizedProcessGroupReferences=[]}set processGroupReferences(e){this.authorizedProcessGroupReferences=this.getAuthorized(e),this.unauthorizedProcessGroupReferences=this.getUnauthorized(e)}getUnauthorized(e){return e?e.filter(i=>!i.permissions.canRead):[]}getAuthorized(e){return e?e.filter(i=>i.permissions.canRead):[]}hasBoundProcessGroups(){return this.unauthorizedProcessGroupReferences.length+this.authorizedProcessGroupReferences.length>0}getRouteForReference(e){return e.component.parentGroupId==null?["/process-groups",e.id]:["/process-groups",e.component.parentGroupId,"process-groups",e.id]}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=M({type:t,selectors:[["process-group-references"]],inputs:{processGroupReferences:"processGroupReferences"},decls:3,vars:1,consts:[["processGroups",""],["unauthorized",""],[1,"process-group-references"],[1,"tertiary-color","font-medium"],[1,"primary-color"],[1,"nested"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"routerLink"],[1,"unset","neutral-color"]],template:function(i,n){i&1&&(o(0,"div",2),c(1,Ei,2,0,"div",3)(2,Li,7,2),a()),i&2&&(l(),u(n.hasBoundProcessGroups()?2:1))},dependencies:[bt,Et,O,W,K,F],styles:[".process-group-references[_ngcontent-%COMP%]   ul.nested[_ngcontent-%COMP%]{padding-inline-start:20px}.process-group-references[_ngcontent-%COMP%]   .references[_ngcontent-%COMP%]{margin-left:20px}"]})}}return t})();var Ai=(t,r)=>({$implicit:t,i:r,canClose:!1}),Vi=(t,r)=>({$implicit:t,i:r,canClose:!0});function Gi(t,r){t&1&&k(0)}function $i(t,r){if(t&1&&(o(0,"div",10),c(1,Gi,1,0,"ng-container",11),a()),t&2){let e=r.$implicit,i=r.$index,n=m(2),s=E(10),x=E(12);j("border-dashed",n.isDisabled||!e.permissions.canRead),p("cdkDragDisabled",!e.permissions.canRead),l(),p("ngTemplateOutlet",e.permissions.canRead?s:x)("ngTemplateOutletContext",ke(5,Ai,e,i))}}function Bi(t,r){if(t&1){let e=b();o(0,"div",3)(1,"div"),d(2," Available Parameter Contexts "),f(3,"i",7),a(),o(4,"div",8),g("cdkDropListDropped",function(n){v(e);let s=m();return P(s.dropAvailable(n))}),N(5,$i,2,8,"div",9,H),a()()}if(t&2){let e=m();l(3),p("tooltipComponentType",e.TextTip),l(),p("cdkDropListData",e.availableParameterContexts),l(),L(e.availableParameterContexts)}}function qi(t,r){t&1&&d(0," Selected Parameter Contexts ")}function ji(t,r){t&1&&d(0," Parameter Contexts ")}function zi(t,r){t&1&&k(0)}function Ui(t,r){if(t&1&&(o(0,"div",10),c(1,zi,1,0,"ng-container",11),a()),t&2){let e=r.$implicit,i=r.$index;m(2);let n=E(10),s=E(12);p("cdkDragDisabled",!e.permissions.canRead),l(),p("ngTemplateOutlet",e.permissions.canRead?n:s)("ngTemplateOutletContext",ke(3,Vi,e,i))}}function Hi(t,r){if(t&1){let e=b();o(0,"div",12),g("cdkDropListDropped",function(n){v(e);let s=m();return P(s.dropSelected(n))}),N(1,Ui,2,6,"div",10,H),a()}if(t&2){let e=m();j("border-dashed",!e.isDisabled),p("cdkDropListDisabled",e.isDisabled)("cdkDropListData",e.selectedParameterContexts),l(),L(e.selectedParameterContexts)}}function Wi(t,r){t&1&&(o(0,"div",6),d(1,"No value set"),a())}function Ki(t,r){if(t&1&&f(0,"i",17),t&2){let e=m(2).$implicit,i=m();p("tooltipComponentType",i.TextTip)("tooltipInputData",e.component.description)}}function Xi(t,r){if(t&1){let e=b();o(0,"button",19),g("click",function(){v(e);let n=m(2),s=n.$implicit,x=n.i,S=m();return P(S.removeSelected(s,x))}),f(1,"i",20),a()}}function Yi(t,r){if(t&1&&(o(0,"div",14),f(1,"span",15),o(2,"div",16),d(3),a(),c(4,Ki,1,2,"i",17),a(),c(5,Xi,2,0,"button",18)),t&2){let e=m(),i=e.$implicit,n=e.canClose,s=m();l(2),p("title",i.component.name),l(),y(" ",i.component.name," "),l(),u(s.hasDescription(i)?4:-1),l(),u(n?5:-1)}}function Ji(t,r){if(t&1&&f(0,"i",17),t&2){let e=m(2).$implicit,i=m();p("tooltipComponentType",i.TextTip)("tooltipInputData",e.description)}}function Qi(t,r){if(t&1&&(o(0,"div",13)(1,"div"),d(2),a(),c(3,Ji,1,2,"i",17),a()),t&2){let e=m().$implicit,i=m();l(2),R(e.component.name),l(),u(i.hasDescription(e)?3:-1)}}function Zi(t,r){if(t&1&&c(0,Yi,6,4)(1,Qi,4,2,"div",13),t&2){let e=m();u(e.isDisabled?1:0)}}function en(t,r){if(t&1&&(o(0,"div",13)(1,"div"),d(2),a()()),t&2){let e=r.$implicit;l(2),R(e.id)}}var At=(()=>{class t{set allParameterContexts(e){this._allParameterContexts=[...e],this.processParameterContexts()}constructor(e,i){this.nifiCommon=e,this.sortObjectByPropertyPipe=i,this.TextTip=q,this.isDisabled=!1,this.isTouched=!1,this._allParameterContexts=[],this.availableParameterContexts=[],this.selectedParameterContexts=[]}processParameterContexts(){this.availableParameterContexts=[],this.selectedParameterContexts=[],this._allParameterContexts&&this.inheritedParameterContexts&&(this._allParameterContexts.forEach(e=>{this.inheritedParameterContexts.some(n=>e.id==n.id)?this.selectedParameterContexts.push(e):this.availableParameterContexts.push(e)}),this.sortObjectByPropertyPipe.transform(this.availableParameterContexts,"component.name"))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e}writeValue(e){this.inheritedParameterContexts=[...e],this.processParameterContexts()}hasDescription(e){return!this.nifiCommon.isBlank(e.component?.description)}removeSelected(e,i){ve(this.selectedParameterContexts,this.availableParameterContexts,i,this.availableParameterContexts.length),this.handleChanged()}dropAvailable(e){e.previousContainer!==e.container&&(ve(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.handleChanged())}dropSelected(e){e.previousContainer===e.container?e.previousIndex!==e.currentIndex&&(mt(e.container.data,e.previousIndex,e.currentIndex),this.handleChanged()):(ve(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.handleChanged())}handleChanged(){this.isTouched||(this.isTouched=!0,this.onTouched()),this.onChange(this.serializeInheritedParameterContexts()),this.sortObjectByPropertyPipe.transform(this.availableParameterContexts,"component.name")}serializeInheritedParameterContexts(){return this.selectedParameterContexts.map(e=>{let i=e.component.name;return{permissions:e.permissions,id:e.id,component:{id:e.id,name:i}}})}static{this.\u0275fac=function(i){return new(i||t)(T($),T(Me))}}static{this.\u0275cmp=M({type:t,selectors:[["parameter-context-inheritance"]],inputs:{allParameterContexts:"allParameterContexts"},features:[ie([{provide:de,useExisting:Q(()=>t),multi:!0},Me])],decls:13,vars:4,consts:[["authorizedInheritedParameterContext",""],["unauthorizedInheritedParameterContext",""],["cdkDropListGroup","",1,"parameter-context-inheritance","flex","flex-row","gap-x-4"],[1,"flex","flex-col","w-full"],["nifiTooltip","","tooltipInputData","Parameter Contexts selected for inheritance. Multiple selected Parameter Contexts will be considered in order from top to bottom.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["cdkDropList","",1,"cdk-list","cdk-drag-selected","border",3,"border-dashed","cdkDropListDisabled","cdkDropListData"],[1,"unset"],["nifiTooltip","","tooltipInputData","Available Parameter Contexts that could be inherited from.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],["cdkDropList","","cdkDropListSortingDisabled","",1,"cdk-list","border",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","cdkDragPreviewContainer","parent",1,"parameter-context-inheritance-draggable-item","border","m-1","font-bold",3,"border-dashed","cdkDragDisabled"],["cdkDrag","","cdkDragPreviewContainer","parent",1,"parameter-context-inheritance-draggable-item","border","m-1","font-bold",3,"cdkDragDisabled"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkDropList","",1,"cdk-list","cdk-drag-selected","border",3,"cdkDropListDropped","cdkDropListDisabled","cdkDropListData"],[1,"flex","items-center","tertiary-color","font-medium"],[1,"flex","items-center"],[1,"grip","pr-5"],[1,"parameter-context-inheritance-name",3,"title"],["nifiTooltip","",1,"pl-1","fa","fa-info-circle","neutral-color",3,"tooltipComponentType","tooltipInputData"],["type","button",1,"pr-1"],["type","button",1,"pr-1",3,"click"],[1,"fa","fa-times","neutral-contrast"]],template:function(i,n){i&1&&(o(0,"div",2),c(1,Bi,7,2,"div",3),o(2,"div",3)(3,"div"),c(4,qi,1,0)(5,ji,1,0),f(6,"i",4),a(),c(7,Hi,3,4,"div",5)(8,Wi,2,0,"div",6),a(),c(9,Zi,2,1,"ng-template",null,0,D)(11,en,3,1,"ng-template",null,1,D),a()),i&2&&(l(),u(n.isDisabled?-1:1),l(3),u(n.isDisabled?5:4),l(2),p("tooltipComponentType",n.TextTip),l(),u(!n.isDisabled||n.selectedParameterContexts.length>0?7:8))},dependencies:[O,F,se,pt,ct,dt,st,W,B],styles:[".parameter-context-inheritance[_ngcontent-%COMP%]   .parameter-context-inheritance-draggable-item[_ngcontent-%COMP%]{box-shadow:var(--mat-sys-level2)}.parameter-context-inheritance[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{height:38px;padding-left:6px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box}.parameter-context-inheritance[_ngcontent-%COMP%]   .cdk-list[_ngcontent-%COMP%]   .parameter-context-inheritance-name[_ngcontent-%COMP%]{max-width:388px;overflow:hidden;text-wrap:nowrap;text-overflow:ellipsis}"]})}}return t})();var tn=t=>({value:t}),nn=(t,r)=>r.description;function rn(t,r){t&1&&f(0,"div",18)}function an(t,r){t&1&&f(0,"div",20)}function on(t,r){t&1&&f(0,"div",21)}function ln(t,r){if(t&1&&c(0,an,1,0,"div",20)(1,on,1,0,"div",21),t&2){let e=m().$implicit;u(e.complete?0:1)}}function mn(t,r){if(t&1&&(o(0,"div",19),d(1),a()),t&2){let e=m().$implicit;l(),y(" ",e.failureReason," ")}}function sn(t,r){if(t&1&&(o(0,"div",17)(1,"div",10),d(2),a(),c(3,rn,1,0,"div",18)(4,ln,2,1),a(),c(5,mn,2,1,"div",19)),t&2){let e=r.$implicit;l(2),y(" ",e.description," "),l(),u(e.failureReason?3:4),l(2),u(e.failureReason?5:-1)}}function dn(t,r){if(t&1&&(o(0,"div",10),d(1),a()),t&2){let e=m(2);l(),y(" ",e.getUpdatedParameters()," ")}}function cn(t,r){t&1&&(o(0,"div",11),d(1,"No parameters updated"),a())}function pn(t,r){if(t&1&&(o(0,"mat-dialog-content")(1,"div",5)(2,"div",6)(3,"div"),d(4,"Steps To Update Parameters"),a(),o(5,"div",7),N(6,sn,6,3,null,null,nn),a()(),o(8,"div",8)(9,"div",9)(10,"div"),d(11,"Parameter"),a(),c(12,dn,2,1,"div",10)(13,cn,2,0,"div",11),a(),o(14,"div",12)(15,"div"),d(16," Referencing Components "),f(17,"i",13),a(),o(18,"div",14)(19,"div",15),f(20,"parameter-references",16),A(21,"async"),a()()()()()()),t&2){let e=r,i=m();l(6),L(e.request.updateSteps),l(6),u(i.parameters&&i.parameters.length>0?12:13),l(5),p("tooltipComponentType",i.TextTip),l(3),p("disabledLinks",V(21,4,i.saving$))("parameterReferences",e.request.referencingComponents)}}function un(t,r){if(t&1&&(o(0,"div",38),d(1),a()),t&2){let e=m(3);p("copy",e.request.parameterContext.id),l(),y(" ",e.request.parameterContext.id," ")}}function fn(t,r){t&1&&(o(0,"div",39),d(1,"No value set"),a())}function xn(t,r){if(t&1&&(o(0,"div",26)(1,"div"),d(2,"Id"),a(),c(3,un,2,2,"div",38)(4,fn,2,0,"div",39),a()),t&2){let e=m(2);l(3),u(e.request.parameterContext?3:4)}}function _n(t,r){if(t&1&&(o(0,"div",27)(1,"div"),d(2,"Parameter Provider"),a(),o(3,"a",40),d(4),a()()),t&2){let e=m(2);l(3),p("routerLink",e.getParameterProviderLink(e.parameterProvider)),l(),Le(" ",e.parameterProvider.parameterGroupName," from ",e.parameterProvider.parameterProviderName," ")}}function Cn(t,r){if(t&1){let e=b();o(0,"mat-tab-group",22),Ge("selectedIndexChange",function(n){v(e);let s=m();return Ve(s.selectedIndex,n)||(s.selectedIndex=n),P(n)}),g("selectedIndexChange",function(n){v(e);let s=m();return P(s.tabChanged(n))}),o(1,"mat-tab",23)(2,"mat-dialog-content")(3,"div",24)(4,"div",25),c(5,xn,5,1,"div",26)(6,_n,5,3,"div",27),o(7,"div")(8,"mat-form-field")(9,"mat-label"),d(10,"Name"),a(),f(11,"input",28),a()(),o(12,"div")(13,"mat-form-field")(14,"mat-label"),d(15,"Description"),a(),f(16,"textarea",29),a()()(),o(17,"div",30)(18,"div"),d(19," Referencing Components "),f(20,"i",31),a(),o(21,"div",14)(22,"div",15),f(23,"process-group-references",32),a()()()()()(),o(24,"mat-tab",33)(25,"mat-dialog-content")(26,"div",34),f(27,"parameter-table",35),a()()(),o(28,"mat-tab",36)(29,"mat-dialog-content")(30,"div",34),f(31,"parameter-context-inheritance",37),A(32,"async"),a()()()()}if(t&2){let e=m();Ae("selectedIndex",e.selectedIndex),l(5),u(e.isNew?-1:5),l(),u(e.parameterProvider?6:-1),l(5),p("readonly",e.readonly),l(5),p("readonly",e.readonly),l(4),p("tooltipComponentType",e.TextTip),l(3),p("processGroupReferences",e.request.parameterContext==null||e.request.parameterContext.component==null?null:e.request.parameterContext.component.boundProcessGroups),l(4),p("canAddParameters",!(!(e.request.parameterContext==null||e.request.parameterContext.component==null)&&e.request.parameterContext.component.parameterProviderConfiguration))("createNewParameter",e.createNewParameter)("editParameter",e.editParameter),l(4),p("allParameterContexts",V(32,11,e.availableParameterContexts$))}}function gn(t,r){t&1&&(o(0,"button",41),d(1,"Close"),a())}function hn(t,r){t&1&&(o(0,"button",42),d(1,"Cancel"),a())}function vn(t,r){t&1&&(o(0,"mat-dialog-actions",4),c(1,gn,2,0,"button",41)(2,hn,2,0,"button",42),a()),t&2&&(l(),u(r.request.complete?1:2))}function Pn(t,r){t&1&&(o(0,"button",41),d(1,"Close"),a())}function yn(t,r){t&1&&(o(0,"span"),d(1,"Apply"),a())}function Tn(t,r){if(t&1){let e=b();o(0,"button",42),d(1,"Cancel"),a(),o(2,"button",43),g("click",function(){v(e);let n=m(3);return P(n.submitForm())}),c(3,yn,2,0,"span",44),a()}if(t&2){let e=m(),i=m(2);l(2),p("disabled",!i.editParameterContextForm.dirty||i.editParameterContextForm.invalid||e.value),l(),p("nifiSpinner",e.value)}}function bn(t,r){if(t&1&&(o(0,"mat-dialog-actions",4),c(1,Pn,2,0,"button",41)(2,Tn,4,2),a()),t&2){let e=m(2);l(),u(e.readonly?1:2)}}function En(t,r){if(t&1&&(c(0,bn,3,1,"mat-dialog-actions",4),A(1,"async")),t&2){let e,i=m();u((e=w(3,tn,V(1,1,i.saving$)))?0:-1,e)}}var Xa=(()=>{class t extends St{constructor(e,i,n,s){if(super($.EDIT_PARAMETER_CONTEXT_DIALOG_ID),this.request=e,this.formBuilder=i,this.client=n,this.clusterConnectionService=s,this.addParameterContext=new U,this.editParameterContext=new U,this.parameterProvider=null,this.TextTip=q,this.ErrorContextKey=je,e.parameterContext){this.isNew=!1,this.readonly=!e.parameterContext.permissions.canWrite;let x=e.parameterContext.component;this.editParameterContextForm=this.formBuilder.group({name:new h(x.name,G.required),description:new h(x.description),parameters:new h({value:x.parameters,disabled:this.readonly}),inheritedParameterContexts:new h({value:x.inheritedParameterContexts,disabled:this.readonly})}),x.parameterProviderConfiguration&&(this.parameterProvider=x.parameterProviderConfiguration.component)}else this.isNew=!0,this.readonly=!1,this.editParameterContextForm=this.formBuilder.group({name:new h("",G.required),description:new h(""),parameters:new h([]),inheritedParameterContexts:new h([])})}getUpdatedParameters(){return this.parameters?this.parameters.map(i=>i.parameter.name).join(", "):""}submitForm(){if(this.isNew){let e={revision:{version:0,clientId:this.client.getClientId()},disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),component:{name:this.editParameterContextForm.get("name")?.value,description:this.editParameterContextForm.get("description")?.value,parameters:this.editParameterContextForm.get("parameters")?.value,inheritedParameterContexts:this.editParameterContextForm.get("inheritedParameterContexts")?.value}};this.addParameterContext.next(e)}else{let e=this.request.parameterContext;this.editParameterContextForm.get("parameters")?.dirty?this.parameters=this.editParameterContextForm.get("parameters")?.value:this.parameters=[];let i=this.parameters.slice();i.forEach(s=>{(s.parameter.referencedAssets||[]).length>0&&(s.parameter.value=null)});let n={revision:this.client.getRevision(e),disconnectedNodeAcknowledged:this.clusterConnectionService.isDisconnectionAcknowledged(),id:e.id,component:{id:e.id,name:this.editParameterContextForm.get("name")?.value,description:this.editParameterContextForm.get("description")?.value,parameters:i,inheritedParameterContexts:this.editParameterContextForm.get("inheritedParameterContexts")?.value}};this.editParameterContext.next(n)}}getParameterProviderLink(e){return["/settings","parameter-providers",e.parameterProviderId]}isDirty(){return this.editParameterContextForm.dirty}static{this.\u0275fac=function(i){return new(i||t)(T(re),T(Ce),T(Se),T(De))}}static{this.\u0275cmp=M({type:t,selectors:[["edit-parameter-context"]],inputs:{createNewParameter:"createNewParameter",editParameter:"editParameter",updateRequest:"updateRequest",availableParameterContexts$:"availableParameterContexts$",saving$:"saving$"},outputs:{addParameterContext:"addParameterContext",editParameterContext:"editParameterContext"},features:[Z],decls:10,vars:9,consts:[["mat-dialog-title",""],[1,"parameter-context-edit-form",3,"formGroup"],[3,"context"],[3,"selectedIndex"],["align","end"],[1,"dialog-tab-content","flex","gap-x-8"],[1,"w-full","flex","flex-col"],[1,"flex","flex-col","gap-y-1.5"],[1,"w-full","flex","flex-col","gap-y-3"],[1,"flex","flex-col"],[1,"tertiary-color","font-medium"],[1,"unset","neutral-color"],[1,"flex-1","flex","flex-col"],["nifiTooltip","","tooltipInputData","Components referencing the modified parameters grouped by process group.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[1,"relative","h-full","border"],[1,"absolute","inset-0","overflow-y-auto","p-1"],[3,"disabledLinks","parameterReferences"],[1,"flex","justify-between","items-center"],[1,"fa","fa-times","error-color"],[1,"text-sm","ml-2"],[1,"fa","fa-check","success-color-default"],[1,"fa","fa-spin","fa-circle-o-notch","primary-color"],[3,"selectedIndexChange","selectedIndex"],["label","Settings"],[1,"dialog-tab-content","flex","gap-x-4"],[1,"w-full"],[1,"flex","w-full","flex-col","mb-5"],[1,"flex","flex-col","mb-5"],["matInput","","formControlName","name","type","text",3,"readonly"],["matInput","","formControlName","description","type","text","rows","5",3,"readonly"],[1,"flex","flex-col","w-full"],["nifiTooltip","","tooltipInputData","Other components referencing this parameter context.",1,"fa","fa-info-circle","primary-color",3,"tooltipComponentType"],[3,"processGroupReferences"],["label","Parameters"],[1,"dialog-tab-content"],["formControlName","parameters",3,"canAddParameters","createNewParameter","editParameter"],["label","Inheritance"],["formControlName","inheritedParameterContexts",3,"allParameterContexts"],[1,"tertiary-color","font-medium",3,"copy"],[1,"font-medium","unset","neutral-color"],[3,"routerLink"],["mat-flat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close",""],["type","button","mat-flat-button","",3,"click","disabled"],[4,"nifiSpinner"]],template:function(i,n){if(i&1&&(o(0,"h2",0),d(1),a(),o(2,"form",1),f(3,"context-error-banner",2),c(4,pn,22,6,"mat-dialog-content"),A(5,"async"),c(6,Cn,33,13,"mat-tab-group",3)(7,vn,3,1,"mat-dialog-actions",4),A(8,"async"),c(9,En,2,5),a()),i&2){let s,x;l(),y(" ",n.readonly?"Parameter Context Details":n.isNew?"Add Parameter Context":"Edit Parameter Context",`
`),l(),p("formGroup",n.editParameterContextForm),l(),p("context",n.ErrorContextKey.PARAMETER_CONTEXTS),l(),u((s=V(5,5,n.updateRequest))?4:6,s),l(3),u((x=V(8,7,n.updateRequest))?7:9,x)}},dependencies:[ge,fe,ce,pe,ue,xe,_e,F,ae,oe,me,le,Ee,be,Te,ye,Pe,O,he,vt,gt,ht,_t,Ct,ne,we,Ot,Lt,At,Ie,K,B,Dt,Ue],styles:[".parameter-context-edit-form[_ngcontent-%COMP%]{--mdc-text-button-container-height: 32px}.parameter-context-edit-form[_ngcontent-%COMP%]{--mdc-filled-button-container-height: 32px}.parameter-context-edit-form[_ngcontent-%COMP%]{--mdc-protected-button-container-height: 32px}.parameter-context-edit-form[_ngcontent-%COMP%]{--mdc-outlined-button-container-height: 32px}.parameter-context-edit-form[_ngcontent-%COMP%]{--mat-text-button-touch-target-display: block}.parameter-context-edit-form[_ngcontent-%COMP%]{--mat-filled-button-touch-target-display: block}.parameter-context-edit-form[_ngcontent-%COMP%]{--mat-protected-button-touch-target-display: block}.parameter-context-edit-form[_ngcontent-%COMP%]{--mat-outlined-button-touch-target-display: block}.parameter-context-edit-form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.parameter-context-edit-form[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{margin-top:auto}"]})}}return t})();export{Me as a,Dn as b,wn as c,In as d,Mn as e,kn as f,Rn as g,Fn as h,On as i,Nn as j,Ln as k,An as l,Vn as m,Gn as n,$n as o,Bn as p,qn as q,jn as r,zn as s,Un as t,Hn as u,Wn as v,Kn as w,Xn as x,Yn as y,kt as z,or as A,Dr as B,Xa as C};
